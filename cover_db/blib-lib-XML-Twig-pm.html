<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 0.64
Devel::Cover is copyright 2001-2006, Paul Johnson (pjcj@cpan.org)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
http://www.pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>File Coverage: blib/lib/XML/Twig.pm</title>
</head>
<body>
<h1>File Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">blib/lib/XML/Twig.pm</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c1">89.9%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>stmt</th><th>bran</th><th>cond</th><th>sub</th><th>pod</th><th>time</th><th>code</th></tr>
<tr><td class="h">1</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># $Id: /xmltwig/trunk/Twig_pm.slow 33 2008-04-30T08:03:41.004487Z mrodrigu  $ </td></tr>
<tr><td class="h">2</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">3</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># Copyright (c) 1999-2004 Michel Rodriguez</td></tr>
<tr><td class="h">4</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># All rights reserved.</td></tr>
<tr><td class="h">5</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">6</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># This program is free software; you can redistribute it and/or</td></tr>
<tr><td class="h">7</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># modify it under the same terms as Perl itself.</td></tr>
<tr><td class="h">8</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">9</td><td colspan="7"></td></tr><tr><td class="h">10</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># This is created in the caller&#39;s space</td></tr>
<tr><td class="h">11</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">BEGIN</td></tr>
<tr><td class="h">12</td><td><div class="c3">131</div><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L12">131</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L12">6</a></div></td><td></td><td><div>583</div><div>327</div></td><td class="s">{ sub ::PCDATA { &#39;#PCDATA&#39; } </td></tr>
<tr><td class="h">13</td><td><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L13">5</a></div></td><td></td><td><div>636</div></td><td class="s">&nbsp;&nbsp;sub ::CDATA  { &#39;#CDATA&#39;  } </td></tr>
<tr><td class="h">14</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">15</td><td colspan="7"></td></tr><tr><td class="h">16</td><td><div class="c3">131</div><div class="c3">131</div><div class="c3">129</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L16">129</a></div></td><td></td><td><div>25150</div><div>461</div><div>1058</div></td><td class="s">use UNIVERSAL qw(isa);</td></tr>
<tr><td class="h">17</td><td colspan="7"></td></tr><tr><td class="h">18</td><td><div class="c3">129</div><div class="c3">129</div><div class="c3">118</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L18">118</a></div></td><td></td><td><div>725</div><div>407</div><div>614</div></td><td class="s">use strict;</td></tr>
<tr><td class="h">19</td><td><div class="c3">118</div><div class="c3">118</div><div class="c3">117</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L19">117</a></div></td><td></td><td><div>681</div><div>308</div><div>740</div></td><td class="s">use warnings; # &gt; perl 5.5</td></tr>
<tr><td class="h">20</td><td colspan="7"></td></tr><tr><td class="h">21</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">######################################################################</td></tr>
<tr><td class="h">22</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">package XML::Twig;</td></tr>
<tr><td class="h">23</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">######################################################################</td></tr>
<tr><td class="h">24</td><td colspan="7"></td></tr><tr><td class="h">25</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">require 5.004;</td></tr>
<tr><td class="h">26</td><td colspan="7"></td></tr><tr><td class="h">27</td><td><div class="c3">117</div><div class="c3">117</div><div class="c3">115</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L27">115</a></div></td><td></td><td><div>32802</div><div>385</div><div>853</div></td><td class="s">use utf8; # &gt; perl 5.5</td></tr>
<tr><td class="h">28</td><td colspan="7"></td></tr><tr><td class="h">29</td><td><div class="c3">115</div><div class="c3">115</div><div class="c3">114</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L29">114</a></div></td><td></td><td><div>689</div><div>1067</div><div>894</div></td><td class="s">use vars qw($VERSION @ISA %valid_option);</td></tr>
<tr><td class="h">30</td><td><div class="c3">114</div><div class="c3">114</div><div class="c3">113</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L30">113</a></div></td><td></td><td><div>676</div><div>303</div><div>949</div></td><td class="s">use Carp;</td></tr>
<tr><td class="h">31</td><td colspan="7"></td></tr><tr><td class="h">32</td><td><div class="c3">113</div><div class="c3">113</div><div class="c3">112</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L32">112</a></div></td><td></td><td><div>724</div><div>281</div><div>1447</div></td><td class="s">use File::Spec;</td></tr>
<tr><td class="h">33</td><td><div class="c3">112</div><div class="c3">112</div><div class="c3">112</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L33">112</a></div></td><td></td><td><div>827</div><div>316</div><div>1121</div></td><td class="s">use File::Basename;</td></tr>
<tr><td class="h">34</td><td colspan="7"></td></tr><tr><td class="h">35</td><td><div class="c3">112</div><div class="c3">112</div><div class="c3">111</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L35">111</a></div></td><td></td><td><div>685</div><div>359</div><div>610</div></td><td class="s">use UNIVERSAL qw(isa);</td></tr>
<tr><td class="h">36</td><td colspan="7"></td></tr><tr><td class="h">37</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># constants: element types</td></tr>
<tr><td class="h">38</td><td><div class="c3">111</div><div class="c3">111</div><div class="c3">110</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L38">110</a></div></td><td></td><td><div>724</div><div>319</div><div>1715</div></td><td class="s">use constant (PCDATA  =&gt; &#39;#PCDATA&#39;);</td></tr>
<tr><td class="h">39</td><td><div class="c3">110</div><div class="c3">110</div><div class="c3">111</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L39">111</a></div></td><td></td><td><div>721</div><div>326</div><div>711</div></td><td class="s">use constant (CDATA   =&gt; &#39;#CDATA&#39;);</td></tr>
<tr><td class="h">40</td><td><div class="c3">111</div><div class="c3">111</div><div class="c3">110</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L40">110</a></div></td><td></td><td><div>708</div><div>284</div><div>682</div></td><td class="s">use constant (PI      =&gt; &#39;#PI&#39;);</td></tr>
<tr><td class="h">41</td><td><div class="c3">110</div><div class="c3">110</div><div class="c3">107</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L41">107</a></div></td><td></td><td><div>759</div><div>334</div><div>646</div></td><td class="s">use constant (COMMENT =&gt; &#39;#COMMENT&#39;);</td></tr>
<tr><td class="h">42</td><td><div class="c3">107</div><div class="c3">107</div><div class="c3">102</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L42">102</a></div></td><td></td><td><div>665</div><div>348</div><div>547</div></td><td class="s">use constant (ENT     =&gt; &#39;#ENT&#39;);</td></tr>
<tr><td class="h">43</td><td colspan="7"></td></tr><tr><td class="h">44</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># element classes</td></tr>
<tr><td class="h">45</td><td><div class="c3">102</div><div class="c3">102</div><div class="c3">104</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L45">104</a></div></td><td></td><td><div>721</div><div>232</div><div>549</div></td><td class="s">use constant (ELT     =&gt; &#39;#ELT&#39;);</td></tr>
<tr><td class="h">46</td><td><div class="c3">104</div><div class="c3">104</div><div class="c3">101</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L46">101</a></div></td><td></td><td><div>665</div><div>236</div><div>1077</div></td><td class="s">use constant (TEXT    =&gt; &#39;#TEXT&#39;);</td></tr>
<tr><td class="h">47</td><td colspan="7"></td></tr><tr><td class="h">48</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># element properties</td></tr>
<tr><td class="h">49</td><td><div class="c3">101</div><div class="c3">101</div><div class="c3">98</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L49">98</a></div></td><td></td><td><div>648</div><div>227</div><div>494</div></td><td class="s">use constant (ASIS    =&gt; &#39;#ASIS&#39;);</td></tr>
<tr><td class="h">50</td><td><div class="c3">98</div><div class="c3">98</div><div class="c3">99</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L50">99</a></div></td><td></td><td><div>660</div><div>255</div><div>518</div></td><td class="s">use constant (EMPTY   =&gt; &#39;#EMPTY&#39;);</td></tr>
<tr><td class="h">51</td><td colspan="7"></td></tr><tr><td class="h">52</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># used in parseurl to set the buffer size to the same size as in XML::Parser::Expat</td></tr>
<tr><td class="h">53</td><td><div class="c3">99</div><div class="c3">99</div><div class="c3">99</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L53">99</a></div></td><td></td><td><div>650</div><div>212</div><div>503</div></td><td class="s">use constant (BUFSIZE =&gt; 32768);</td></tr>
<tr><td class="h">54</td><td colspan="7"></td></tr><tr><td class="h">55</td><td colspan="7"></td></tr><tr><td class="h">56</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># used to store the gi&#39;s</td></tr>
<tr><td class="h">57</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my %gi2index;   # gi =&gt; index</td></tr>
<tr><td class="h">58</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my @index2gi;   # list of gi&#39;s</td></tr>
<tr><td class="h">59</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $SPECIAL_GI; # first non-special gi;</td></tr>
<tr><td class="h">60</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#my %base_ent;   # base entity character =&gt; replacement</td></tr>
<tr><td class="h">61</td><td colspan="7"></td></tr><tr><td class="h">62</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># flag, set to true if the weaken sub is available</td></tr>
<tr><td class="h">63</td><td><div class="c3">99</div><div class="c3">99</div><div class="c3">95</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L63">95</a></div></td><td></td><td><div>687</div><div>211</div><div>631</div></td><td class="s">use vars qw( $weakrefs);</td></tr>
<tr><td class="h">64</td><td colspan="7"></td></tr><tr><td class="h">65</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># flag set to true if the version of expat seems to be 1.95.2, which has annoying bugs</td></tr>
<tr><td class="h">66</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># wrt doctype handling. This is global for performance reasons. </td></tr>
<tr><td class="h">67</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $expat_1_95_2=0;</td></tr>
<tr><td class="h">68</td><td colspan="7"></td></tr><tr><td class="h">69</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># xml name (leading # allowed)</td></tr>
<tr><td class="h">70</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># first line is for perl 5.005, second line for modern perl, that accept character classes</td></tr>
<tr><td class="h">71</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $REG_NAME       = q{(?:(?:[^\W\d]|[:#])(?:[\w.-]*:)?[\w.-]*)};     # does not work for leading non-ascii letters</td></tr>
<tr><td class="h">72</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;$REG_NAME       = q{(?:(?:[[:alpha:]:#])(?:[\w.-]*:)?[\w.-]*)};    # &gt; perl 5.5</td></tr>
<tr><td class="h">73</td><td colspan="7"></td></tr><tr><td class="h">74</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># name or wildcard (* or &#39;&#39;) (leading # allowed)</td></tr>
<tr><td class="h">75</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $REG_NAME_W     = q{(?:(?:[^\W\d]|[:#])(?:[\w.-]*:)?[\w.-]*|\*)}; # does not work for leading non-ascii letters</td></tr>
<tr><td class="h">76</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;$REG_NAME_W     = q{(?:(?:[[:alpha:]:#])(?:[\w.-]*:)?[\w.-]*|\*)}; # &gt; perl 5.5</td></tr>
<tr><td class="h">77</td><td colspan="7"></td></tr><tr><td class="h">78</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $REG_REGEXP     = q{(?:/(?:[^\\/]|\\.)*/[eimsox]*)};               # regexp</td></tr>
<tr><td class="h">79</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $REG_REGEXP_EXP = q{(?:(?:[^\\/]|\\.)*)};                          # content of a regexp</td></tr>
<tr><td class="h">80</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $REG_REGEXP_MOD = q{(?:[eimso]*)};                                 # regexp modifiers</td></tr>
<tr><td class="h">81</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $REG_MATCH      = q{[!=]~};                                        # match (or not)</td></tr>
<tr><td class="h">82</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $REG_STRING     = q{(?:&quot;(?:[^\\&quot;]|\\.)*&quot;|&#39;(?:[^\\&#39;]|\\.)*&#39;)};      # string (simple or double quoted)</td></tr>
<tr><td class="h">83</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $REG_NUMBER     = q{(?:\d+(?:\.\d*)?|\.\d+)};                      # number</td></tr>
<tr><td class="h">84</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $REG_VALUE      = qq{(?:$REG_STRING|$REG_NUMBER)};                 # value</td></tr>
<tr><td class="h">85</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $REG_OP         = q{==|!=|&gt;|&lt;|&gt;=|&lt;=|eq|ne|lt|gt|le|ge|=};          # op</td></tr>
<tr><td class="h">86</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $REG_FUNCTION   = q{(?:string|text)\(\s*\)};</td></tr>
<tr><td class="h">87</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $REG_STRING_ARG = qq{(?:string|text)\\(\\s*$REG_NAME_W\\s*\\)};</td></tr>
<tr><td class="h">88</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $REG_COMP       = q{(?:&gt;=|&lt;=|!=|&lt;|&gt;|=)};</td></tr>
<tr><td class="h">89</td><td colspan="7"></td></tr><tr><td class="h">90</td><td colspan="7"></td></tr><tr><td class="h">91</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># used in the handler trigger code</td></tr>
<tr><td class="h">92</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $REG_NAKED_PREDICATE= qq{((?:&quot;[^&quot;]*&quot;|&#39;[^&#39;]*&#39;|$REG_STRING_ARG|$REG_FUNCTION|\@$REG_NAME_W|$REG_MATCH\\s*$REG_REGEXP|[\\s\\d&gt;&lt;=!()+.-]|(?i:and)|(?i:or))*)};</td></tr>
<tr><td class="h">93</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $REG_PREDICATE= qq{\\[$REG_NAKED_PREDICATE\\]};</td></tr>
<tr><td class="h">94</td><td colspan="7"></td></tr><tr><td class="h">95</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># not all axis, only supported ones (in get_xpath)</td></tr>
<tr><td class="h">96</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my @supported_axis= ( &#39;ancestor&#39;, &#39;ancestor-or-self&#39;, &#39;child&#39;, &#39;descendant&#39;, &#39;descendant-or-self&#39;, </td></tr>
<tr><td class="h">97</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;following&#39;, &#39;following-sibling&#39;, &#39;parent&#39;, &#39;preceding&#39;, &#39;preceding-sibling&#39;, &#39;self&#39;</td></tr>
<tr><td class="h">98</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">99</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $REG_AXIS       = &quot;(?:&quot; . join( &#39;|&#39;, @supported_axis) .&quot;)&quot;;</td></tr>
<tr><td class="h">100</td><td colspan="7"></td></tr><tr><td class="h">101</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># only used in the &quot;xpath&quot;engine (for get_xpath/findnodes) for now</td></tr>
<tr><td class="h">102</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $REG_PREDICATE_ALT  = qr{\[(?:(?:string\(\s*\)|\@$REG_NAME)\s*$REG_MATCH\s*$REG_REGEXP\s*|[^\]]*)\]};</td></tr>
<tr><td class="h">103</td><td colspan="7"></td></tr><tr><td class="h">104</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># used to convert XPath tests on strings to the perl equivalent </td></tr>
<tr><td class="h">105</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my %PERL_ALPHA_TEST= ( &#39;=&#39; =&gt; &#39; eq &#39;, &#39;!=&#39; =&gt; &#39; ne &#39;, &#39;&gt;&#39; =&gt; &#39; gt &#39;, &#39;&gt;=&#39; =&gt; &#39; ge &#39;, &#39;&lt;&#39; =&gt; &#39; lt &#39;, &#39;&lt;=&#39; =&gt; &#39; le &#39;);</td></tr>
<tr><td class="h">106</td><td colspan="7"></td></tr><tr><td class="h">107</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $parser_version;</td></tr>
<tr><td class="h">108</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my( $FB_HTMLCREF, $FB_XMLCREF);</td></tr>
<tr><td class="h">109</td><td colspan="7"></td></tr><tr><td class="h">110</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $NO_WARNINGS= $] &gt;= 5.006 ? &#39;no warnings&#39; : &#39;local $^W=0&#39;;</td></tr>
<tr><td class="h">111</td><td colspan="7"></td></tr><tr><td class="h">112</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">BEGIN</td></tr>
<tr><td class="h">113</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">{ </td></tr>
<tr><td class="h">114</td><td><div class="c3">95</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L114">95</a></div></td><td></td><td><div>507</div></td><td class="s">$VERSION = &#39;3.33&#39;;</td></tr>
<tr><td class="h">115</td><td colspan="7"></td></tr><tr><td class="h">116</td><td><div class="c3">95</div><div class="c3">95</div><div class="c3">95</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L116">95</a></div></td><td></td><td><div>1221</div><div>307</div><div>1294</div></td><td class="s">use XML::Parser;</td></tr>
<tr><td class="h">117</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>313</div></td><td class="s">my $needVersion = &#39;2.23&#39;;</td></tr>
<tr><td class="h">118</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>268</div></td><td class="s">$parser_version= $XML::Parser::VERSION;</td></tr>
<tr><td class="h">119</td><td><div class="c3">95</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L119">50</a></div></td><td></td><td></td><td></td><td><div>922</div></td><td class="s">croak &quot;need at least XML::Parser version $needVersion&quot; unless $parser_version &gt;= $needVersion;</td></tr>
<tr><td class="h">120</td><td colspan="7"></td></tr><tr><td class="h">121</td><td><div class="c3">95</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L121">50</a></div></td><td></td><td></td><td></td><td><div>509</div></td><td class="s">if( $] &gt;= 5.008) </td></tr>
<tr><td class="h">122</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L122">92</a></div></td><td></td><td><div>1085</div><div>1321</div><div>312</div><div>993</div></td><td class="s">&nbsp;&nbsp;{ eval &quot;use Encode qw( :all)&quot;;</td></tr>
<tr><td class="h">123</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>2669</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$FB_XMLCREF  = 0x0400; # Encode::FB_XMLCREF;</td></tr>
<tr><td class="h">124</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>387</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$FB_HTMLCREF = 0x0200; # Encode::FB_HTMLCREF;</td></tr>
<tr><td class="h">125</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">126</td><td colspan="7"></td></tr><tr><td class="h">127</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># test whether we can use weak references</td></tr>
<tr><td class="h">128</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># set local empty signal handler to trap error messages</td></tr>
<tr><td class="h">129</td><td><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>258</div><div>701</div></td><td class="s">{ local $SIG{__DIE__};</td></tr>
<tr><td class="h">130</td><td><div class="c3">92</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L130">50</a></div><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L130">0</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L130">33</a></div></td><td></td><td></td><td><div>2823</div></td><td class="s">&nbsp;&nbsp;if( eval( &#39;require Scalar::Util&#39;) &amp;&amp; defined( \&amp;Scalar::Util::weaken)) </td></tr>
<tr><td class="h">131</td><td><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>1034</div><div>753</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ import Scalar::Util( &#39;weaken&#39;); $weakrefs= 1; }</td></tr>
<tr><td class="h">132</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;elsif( eval( &#39;require WeakRef&#39;)) </td></tr>
<tr><td class="h">133</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ import WeakRef; $weakrefs= 1;                 }</td></tr>
<tr><td class="h">134</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;else  </td></tr>
<tr><td class="h">135</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ $weakrefs= 0;                                 } </td></tr>
<tr><td class="h">136</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">137</td><td colspan="7"></td></tr><tr><td class="h">138</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>971</div></td><td class="s">import XML::Twig::Elt;</td></tr>
<tr><td class="h">139</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>629</div></td><td class="s">import XML::Twig::Entity;</td></tr>
<tr><td class="h">140</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>572</div></td><td class="s">import XML::Twig::Entity_list;</td></tr>
<tr><td class="h">141</td><td colspan="7"></td></tr><tr><td class="h">142</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># used to store the gi&#39;s</td></tr>
<tr><td class="h">143</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># should be set for each twig really, at least when there are several</td></tr>
<tr><td class="h">144</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># the init ensures that special gi&#39;s are always the same</td></tr>
<tr><td class="h">145</td><td colspan="7"></td></tr><tr><td class="h">146</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># gi =&gt; index</td></tr>
<tr><td class="h">147</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># do NOT use =&gt; or the constants become quoted!</td></tr>
<tr><td class="h">148</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>861</div></td><td class="s">%XML::Twig::gi2index=( PCDATA, 0, CDATA, 1, PI, 2, COMMENT, 3, ENT, 4); </td></tr>
<tr><td class="h">149</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># list of gi&#39;s</td></tr>
<tr><td class="h">150</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>587</div></td><td class="s">@XML::Twig::index2gi=( PCDATA, CDATA, PI, COMMENT, ENT);</td></tr>
<tr><td class="h">151</td><td colspan="7"></td></tr><tr><td class="h">152</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># gi&#39;s under this value are special </td></tr>
<tr><td class="h">153</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>242</div></td><td class="s">$XML::Twig::SPECIAL_GI= @XML::Twig::index2gi;</td></tr>
<tr><td class="h">154</td><td colspan="7"></td></tr><tr><td class="h">155</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>777</div></td><td class="s">%XML::Twig::base_ent= ( &#39;&gt;&#39; =&gt; &#39;&amp;gt;&#39;, &#39;&lt;&#39; =&gt; &#39;&amp;lt;&#39;, &#39;&amp;&#39; =&gt; &#39;&amp;amp;&#39;, &quot;&#39;&quot; =&gt; &#39;&amp;apos;&#39;, &#39;&quot;&#39; =&gt; &#39;&amp;quot;&#39;,);</td></tr>
<tr><td class="h">156</td><td colspan="7"></td></tr><tr><td class="h">157</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># now set some aliases</td></tr>
<tr><td class="h">158</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>347</div></td><td class="s">*find_nodes           = *get_xpath;               # same as XML::XPath</td></tr>
<tr><td class="h">159</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>346</div></td><td class="s">*findnodes            = *get_xpath;               # same as XML::LibXML</td></tr>
<tr><td class="h">160</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>615</div></td><td class="s">*getElementsByTagName = *descendants;</td></tr>
<tr><td class="h">161</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>390</div></td><td class="s">*descendants_or_self  = *descendants;             # valid in XML::Twig, not in XML::Twig::Elt</td></tr>
<tr><td class="h">162</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>383</div></td><td class="s">*find_by_tag_name     = *descendants;</td></tr>
<tr><td class="h">163</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>387</div></td><td class="s">*getElementById       = *elt_id;</td></tr>
<tr><td class="h">164</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>384</div></td><td class="s">*getEltById           = *elt_id;</td></tr>
<tr><td class="h">165</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>511</div></td><td class="s">*toString             = *sprint;</td></tr>
<tr><td class="h">166</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">167</td><td colspan="7"></td></tr><tr><td class="h">168</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">@ISA = qw(XML::Parser);</td></tr>
<tr><td class="h">169</td><td colspan="7"></td></tr><tr><td class="h">170</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># fake gi&#39;s used in twig_handlers and start_tag_handlers</td></tr>
<tr><td class="h">171</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $ALL    = &#39;_all_&#39;;     # the associated function is always called</td></tr>
<tr><td class="h">172</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $DEFAULT= &#39;_default_&#39;; # the function is called if no other handler has been</td></tr>
<tr><td class="h">173</td><td colspan="7"></td></tr><tr><td class="h">174</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># some defaults</td></tr>
<tr><td class="h">175</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $COMMENTS_DEFAULT= &#39;keep&#39;;</td></tr>
<tr><td class="h">176</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $PI_DEFAULT      = &#39;keep&#39;;</td></tr>
<tr><td class="h">177</td><td colspan="7"></td></tr><tr><td class="h">178</td><td colspan="7"></td></tr><tr><td class="h">179</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># handlers used in regular mode</td></tr>
<tr><td class="h">180</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my %twig_handlers=( Start      =&gt; \&amp;_twig_start, </td></tr>
<tr><td class="h">181</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;End        =&gt; \&amp;_twig_end, </td></tr>
<tr><td class="h">182</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Char       =&gt; \&amp;_twig_char, </td></tr>
<tr><td class="h">183</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Entity     =&gt; \&amp;_twig_entity, </td></tr>
<tr><td class="h">184</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;XMLDecl    =&gt; \&amp;_twig_xmldecl, </td></tr>
<tr><td class="h">185</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Doctype    =&gt; \&amp;_twig_doctype, </td></tr>
<tr><td class="h">186</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element    =&gt; \&amp;_twig_element, </td></tr>
<tr><td class="h">187</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attlist    =&gt; \&amp;_twig_attlist, </td></tr>
<tr><td class="h">188</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CdataStart =&gt; \&amp;_twig_cdatastart, </td></tr>
<tr><td class="h">189</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CdataEnd   =&gt; \&amp;_twig_cdataend, </td></tr>
<tr><td class="h">190</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Proc       =&gt; \&amp;_twig_pi,</td></tr>
<tr><td class="h">191</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Comment    =&gt; \&amp;_twig_comment,</td></tr>
<tr><td class="h">192</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default    =&gt; \&amp;_twig_default,</td></tr>
<tr><td class="h">193</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ExternEnt  =&gt; \&amp;_twig_extern_ent,</td></tr>
<tr><td class="h">194</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">195</td><td colspan="7"></td></tr><tr><td class="h">196</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># handlers used when twig_roots is used and we are outside of the roots</td></tr>
<tr><td class="h">197</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my %twig_handlers_roots=</td></tr>
<tr><td class="h">198</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;( Start      =&gt; \&amp;_twig_start_check_roots, </td></tr>
<tr><td class="h">199</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;End        =&gt; \&amp;_twig_end_check_roots, </td></tr>
<tr><td class="h">200</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Doctype    =&gt; \&amp;_twig_doctype, </td></tr>
<tr><td class="h">201</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Char       =&gt; undef, Entity     =&gt; undef, XMLDecl    =&gt; \&amp;_twig_xmldecl, </td></tr>
<tr><td class="h">202</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Element    =&gt; undef, Attlist    =&gt; undef, CdataStart =&gt; undef, </td></tr>
<tr><td class="h">203</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;CdataEnd   =&gt; undef, Proc       =&gt; undef, Comment    =&gt; undef, </td></tr>
<tr><td class="h">204</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Proc       =&gt; \&amp;_twig_pi_check_roots,</td></tr>
<tr><td class="h">205</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Default    =&gt;  sub {}, # hack needed for XML::Parser 2.27</td></tr>
<tr><td class="h">206</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ExternEnt  =&gt; \&amp;_twig_extern_ent,</td></tr>
<tr><td class="h">207</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;);</td></tr>
<tr><td class="h">208</td><td colspan="7"></td></tr><tr><td class="h">209</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># handlers used when twig_roots and print_outside_roots are used and we are</td></tr>
<tr><td class="h">210</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># outside of the roots</td></tr>
<tr><td class="h">211</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my %twig_handlers_roots_print_2_30=</td></tr>
<tr><td class="h">212</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;( Start      =&gt; \&amp;_twig_start_check_roots, </td></tr>
<tr><td class="h">213</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;End        =&gt; \&amp;_twig_end_check_roots, </td></tr>
<tr><td class="h">214</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Char       =&gt; \&amp;_twig_print, </td></tr>
<tr><td class="h">215</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Entity     =&gt; \&amp;_twig_print_entity, </td></tr>
<tr><td class="h">216</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ExternEnt  =&gt; \&amp;_twig_print_entity,</td></tr>
<tr><td class="h">217</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DoctypeFin =&gt; \&amp;_twig_doctype_fin_print,</td></tr>
<tr><td class="h">218</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;XMLDecl    =&gt; sub { _twig_xmldecl( @_); _twig_print( @_); },</td></tr>
<tr><td class="h">219</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Doctype   =&gt;  \&amp;_twig_print_doctype, # because recognized_string is broken here</td></tr>
<tr><td class="h">220</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# Element    =&gt; \&amp;_twig_print, Attlist    =&gt; \&amp;_twig_print, </td></tr>
<tr><td class="h">221</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;CdataStart =&gt; \&amp;_twig_print, CdataEnd   =&gt; \&amp;_twig_print, </td></tr>
<tr><td class="h">222</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Proc       =&gt; \&amp;_twig_pi_check_roots, Comment    =&gt; \&amp;_twig_print, </td></tr>
<tr><td class="h">223</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Default    =&gt; \&amp;_twig_print_check_doctype,</td></tr>
<tr><td class="h">224</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ExternEnt  =&gt; \&amp;_twig_extern_ent,</td></tr>
<tr><td class="h">225</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;);</td></tr>
<tr><td class="h">226</td><td colspan="7"></td></tr><tr><td class="h">227</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># handlers used when twig_roots, print_outside_roots and keep_encoding are used</td></tr>
<tr><td class="h">228</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># and we are outside of the roots</td></tr>
<tr><td class="h">229</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my %twig_handlers_roots_print_original_2_30=</td></tr>
<tr><td class="h">230</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;( Start      =&gt; \&amp;_twig_start_check_roots, </td></tr>
<tr><td class="h">231</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;End        =&gt; \&amp;_twig_end_check_roots, </td></tr>
<tr><td class="h">232</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Char       =&gt; \&amp;_twig_print_original, </td></tr>
<tr><td class="h">233</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# I have no idea why I should not be using this handler!</td></tr>
<tr><td class="h">234</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Entity     =&gt; \&amp;_twig_print_entity, </td></tr>
<tr><td class="h">235</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ExternEnt  =&gt; \&amp;_twig_print_entity,</td></tr>
<tr><td class="h">236</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;DoctypeFin =&gt; \&amp;_twig_doctype_fin_print,</td></tr>
<tr><td class="h">237</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;XMLDecl    =&gt; sub { _twig_xmldecl( @_); _twig_print_original( @_) }, </td></tr>
<tr><td class="h">238</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Doctype    =&gt; \&amp;_twig_print_original_doctype,  # because original_string is broken here</td></tr>
<tr><td class="h">239</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Element    =&gt; \&amp;_twig_print_original, Attlist   =&gt; \&amp;_twig_print_original,</td></tr>
<tr><td class="h">240</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;CdataStart =&gt; \&amp;_twig_print_original, CdataEnd  =&gt; \&amp;_twig_print_original,</td></tr>
<tr><td class="h">241</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Proc       =&gt; \&amp;_twig_pi_check_roots, Comment   =&gt; \&amp;_twig_print_original,</td></tr>
<tr><td class="h">242</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Default    =&gt; \&amp;_twig_print_original_check_doctype, </td></tr>
<tr><td class="h">243</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;);</td></tr>
<tr><td class="h">244</td><td colspan="7"></td></tr><tr><td class="h">245</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># handlers used when twig_roots and print_outside_roots are used and we are</td></tr>
<tr><td class="h">246</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># outside of the roots</td></tr>
<tr><td class="h">247</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my %twig_handlers_roots_print_2_27=</td></tr>
<tr><td class="h">248</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;( Start      =&gt; \&amp;_twig_start_check_roots, </td></tr>
<tr><td class="h">249</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;End        =&gt; \&amp;_twig_end_check_roots, </td></tr>
<tr><td class="h">250</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Char       =&gt; \&amp;_twig_print, </td></tr>
<tr><td class="h">251</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# if the Entity handler is set then it prints the entity declaration</td></tr>
<tr><td class="h">252</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# before the entire internal subset (including the declaration!) is output</td></tr>
<tr><td class="h">253</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Entity     =&gt; sub {},</td></tr>
<tr><td class="h">254</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;XMLDecl    =&gt; \&amp;_twig_print, Doctype    =&gt; \&amp;_twig_print, </td></tr>
<tr><td class="h">255</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;CdataStart =&gt; \&amp;_twig_print, CdataEnd   =&gt; \&amp;_twig_print, </td></tr>
<tr><td class="h">256</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Proc       =&gt; \&amp;_twig_pi_check_roots, Comment    =&gt; \&amp;_twig_print, </td></tr>
<tr><td class="h">257</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Default    =&gt; \&amp;_twig_print, </td></tr>
<tr><td class="h">258</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ExternEnt  =&gt; \&amp;_twig_extern_ent,</td></tr>
<tr><td class="h">259</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;);</td></tr>
<tr><td class="h">260</td><td colspan="7"></td></tr><tr><td class="h">261</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># handlers used when twig_roots, print_outside_roots and keep_encoding are used</td></tr>
<tr><td class="h">262</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># and we are outside of the roots</td></tr>
<tr><td class="h">263</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my %twig_handlers_roots_print_original_2_27=</td></tr>
<tr><td class="h">264</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;( Start      =&gt; \&amp;_twig_start_check_roots, </td></tr>
<tr><td class="h">265</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;End        =&gt; \&amp;_twig_end_check_roots, </td></tr>
<tr><td class="h">266</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Char       =&gt; \&amp;_twig_print_original, </td></tr>
<tr><td class="h">267</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# for some reason original_string is wrong here </td></tr>
<tr><td class="h">268</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# this can be a problem if the doctype includes non ascii characters</td></tr>
<tr><td class="h">269</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;XMLDecl    =&gt; \&amp;_twig_print, Doctype    =&gt; \&amp;_twig_print,</td></tr>
<tr><td class="h">270</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# if the Entity handler is set then it prints the entity declaration</td></tr>
<tr><td class="h">271</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# before the entire internal subset (including the declaration!) is output</td></tr>
<tr><td class="h">272</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Entity     =&gt; sub {}, </td></tr>
<tr><td class="h">273</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#Element    =&gt; undef, Attlist   =&gt; undef,</td></tr>
<tr><td class="h">274</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;CdataStart =&gt; \&amp;_twig_print_original, CdataEnd  =&gt; \&amp;_twig_print_original,</td></tr>
<tr><td class="h">275</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Proc       =&gt; \&amp;_twig_pi_check_roots, Comment   =&gt; \&amp;_twig_print_original,</td></tr>
<tr><td class="h">276</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Default    =&gt; \&amp;_twig_print, #  _twig_print_original does not work</td></tr>
<tr><td class="h">277</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ExternEnt  =&gt; \&amp;_twig_extern_ent,</td></tr>
<tr><td class="h">278</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;);</td></tr>
<tr><td class="h">279</td><td colspan="7"></td></tr><tr><td class="h">280</td><td colspan="7"></td></tr><tr><td class="h">281</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my %twig_handlers_roots_print= $parser_version &gt; 2.27 </td></tr>
<tr><td class="h">282</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;? %twig_handlers_roots_print_2_30 </td></tr>
<tr><td class="h">283</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: %twig_handlers_roots_print_2_27; </td></tr>
<tr><td class="h">284</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my %twig_handlers_roots_print_original= $parser_version &gt; 2.27 </td></tr>
<tr><td class="h">285</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;? %twig_handlers_roots_print_original_2_30 </td></tr>
<tr><td class="h">286</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: %twig_handlers_roots_print_original_2_27; </td></tr>
<tr><td class="h">287</td><td colspan="7"></td></tr><tr><td class="h">288</td><td colspan="7"></td></tr><tr><td class="h">289</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># handlers used when the finish_print method has been called</td></tr>
<tr><td class="h">290</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my %twig_handlers_finish_print=</td></tr>
<tr><td class="h">291</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;( Start      =&gt; \&amp;_twig_print, </td></tr>
<tr><td class="h">292</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;End        =&gt; \&amp;_twig_print, Char       =&gt; \&amp;_twig_print, </td></tr>
<tr><td class="h">293</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Entity     =&gt; \&amp;_twig_print, XMLDecl    =&gt; \&amp;_twig_print, </td></tr>
<tr><td class="h">294</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Doctype    =&gt; \&amp;_twig_print, Element    =&gt; \&amp;_twig_print, </td></tr>
<tr><td class="h">295</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Attlist    =&gt; \&amp;_twig_print, CdataStart =&gt; \&amp;_twig_print, </td></tr>
<tr><td class="h">296</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;CdataEnd   =&gt; \&amp;_twig_print, Proc       =&gt; \&amp;_twig_print, </td></tr>
<tr><td class="h">297</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Comment    =&gt; \&amp;_twig_print, Default    =&gt; \&amp;_twig_print, </td></tr>
<tr><td class="h">298</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ExternEnt  =&gt; \&amp;_twig_extern_ent,</td></tr>
<tr><td class="h">299</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;);</td></tr>
<tr><td class="h">300</td><td colspan="7"></td></tr><tr><td class="h">301</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># handlers used when the finish_print method has been called and the keep_encoding</td></tr>
<tr><td class="h">302</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># option is used</td></tr>
<tr><td class="h">303</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my %twig_handlers_finish_print_original=</td></tr>
<tr><td class="h">304</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;( Start      =&gt; \&amp;_twig_print_original, End      =&gt; \&amp;_twig_print_end_original, </td></tr>
<tr><td class="h">305</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Char       =&gt; \&amp;_twig_print_original, Entity   =&gt; \&amp;_twig_print_original, </td></tr>
<tr><td class="h">306</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;XMLDecl    =&gt; \&amp;_twig_print_original, Doctype  =&gt; \&amp;_twig_print_original, </td></tr>
<tr><td class="h">307</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Element    =&gt; \&amp;_twig_print_original, Attlist  =&gt; \&amp;_twig_print_original, </td></tr>
<tr><td class="h">308</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;CdataStart =&gt; \&amp;_twig_print_original, CdataEnd =&gt; \&amp;_twig_print_original, </td></tr>
<tr><td class="h">309</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Proc       =&gt; \&amp;_twig_print_original, Comment  =&gt; \&amp;_twig_print_original, </td></tr>
<tr><td class="h">310</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Default    =&gt; \&amp;_twig_print_original, </td></tr>
<tr><td class="h">311</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;);</td></tr>
<tr><td class="h">312</td><td colspan="7"></td></tr><tr><td class="h">313</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># handlers used within ignored elements</td></tr>
<tr><td class="h">314</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my %twig_handlers_ignore=</td></tr>
<tr><td class="h">315</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;( Start      =&gt; \&amp;_twig_ignore_start, </td></tr>
<tr><td class="h">316</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;End        =&gt; \&amp;_twig_ignore_end, </td></tr>
<tr><td class="h">317</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Char       =&gt; undef, Entity     =&gt; undef, XMLDecl    =&gt; undef, </td></tr>
<tr><td class="h">318</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Doctype    =&gt; undef, Element    =&gt; undef, Attlist    =&gt; undef, </td></tr>
<tr><td class="h">319</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;CdataStart =&gt; undef, CdataEnd   =&gt; undef, Proc       =&gt; undef, </td></tr>
<tr><td class="h">320</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;Comment    =&gt; undef, Default    =&gt; undef,</td></tr>
<tr><td class="h">321</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;ExternEnt  =&gt; undef,</td></tr>
<tr><td class="h">322</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;);</td></tr>
<tr><td class="h">323</td><td colspan="7"></td></tr><tr><td class="h">324</td><td colspan="7"></td></tr><tr><td class="h">325</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># those handlers are only used if the entities are NOT to be expanded</td></tr>
<tr><td class="h">326</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my %twig_noexpand_handlers= ( ExternEnt =&gt; undef, Default =&gt; \&amp;_twig_default );</td></tr>
<tr><td class="h">327</td><td colspan="7"></td></tr><tr><td class="h">328</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my @saved_default_handler;</td></tr>
<tr><td class="h">329</td><td colspan="7"></td></tr><tr><td class="h">330</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $ID= &#39;id&#39;; # default value, set by the Id argument</td></tr>
<tr><td class="h">331</td><td colspan="7"></td></tr><tr><td class="h">332</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># all allowed options</td></tr>
<tr><td class="h">333</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">%valid_option=</td></tr>
<tr><td class="h">334</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;( # XML::Twig options</td></tr>
<tr><td class="h">335</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TwigHandlers          =&gt; 1, Id                    =&gt; 1,</td></tr>
<tr><td class="h">336</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TwigRoots             =&gt; 1, TwigPrintOutsideRoots =&gt; 1,</td></tr>
<tr><td class="h">337</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StartTagHandlers      =&gt; 1, EndTagHandlers        =&gt; 1,</td></tr>
<tr><td class="h">338</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ForceEndTagHandlersUsage =&gt; 1,</td></tr>
<tr><td class="h">339</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DoNotChainHandlers    =&gt; 1,</td></tr>
<tr><td class="h">340</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IgnoreElts            =&gt; 1,</td></tr>
<tr><td class="h">341</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Index                 =&gt; 1,</td></tr>
<tr><td class="h">342</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CharHandler           =&gt; 1, </td></tr>
<tr><td class="h">343</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TopDownHandlers       =&gt; 1,</td></tr>
<tr><td class="h">344</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;KeepEncoding          =&gt; 1, DoNotEscapeAmpInAtts  =&gt; 1,</td></tr>
<tr><td class="h">345</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ParseStartTag         =&gt; 1, KeepAttsOrder         =&gt; 1,</td></tr>
<tr><td class="h">346</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LoadDTD               =&gt; 1, DTDHandler            =&gt; 1,</td></tr>
<tr><td class="h">347</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DoNotOutputDTD        =&gt; 1, NoProlog              =&gt; 1,</td></tr>
<tr><td class="h">348</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ExpandExternalEnts    =&gt; 1,</td></tr>
<tr><td class="h">349</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DiscardSpaces         =&gt; 1, KeepSpaces            =&gt; 1, </td></tr>
<tr><td class="h">350</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DiscardSpacesIn       =&gt; 1, KeepSpacesIn          =&gt; 1, </td></tr>
<tr><td class="h">351</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PrettyPrint           =&gt; 1, EmptyTags             =&gt; 1, </td></tr>
<tr><td class="h">352</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EscapeGt              =&gt; 1,</td></tr>
<tr><td class="h">353</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Quote                 =&gt; &#39;double&#39;,</td></tr>
<tr><td class="h">354</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Comments              =&gt; 1, Pi                    =&gt; 1, </td></tr>
<tr><td class="h">355</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OutputFilter          =&gt; 1, InputFilter           =&gt; 1,</td></tr>
<tr><td class="h">356</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OutputTextFilter      =&gt; 1, </td></tr>
<tr><td class="h">357</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OutputEncoding        =&gt; 1, </td></tr>
<tr><td class="h">358</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RemoveCdata           =&gt; 1,</td></tr>
<tr><td class="h">359</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EltClass              =&gt; 1,</td></tr>
<tr><td class="h">360</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MapXmlns              =&gt; 1, KeepOriginalPrefix    =&gt; 1,</td></tr>
<tr><td class="h">361</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SkipMissingEnts       =&gt; 1,</td></tr>
<tr><td class="h">362</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# XML::Parser options</td></tr>
<tr><td class="h">363</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ErrorContext          =&gt; 1, ProtocolEncoding      =&gt; 1,</td></tr>
<tr><td class="h">364</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Namespaces            =&gt; 1, NoExpand              =&gt; 1,</td></tr>
<tr><td class="h">365</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Stream_Delimiter      =&gt; 1, ParseParamEnt         =&gt; 1,</td></tr>
<tr><td class="h">366</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NoLWP                 =&gt; 1, Non_Expat_Options     =&gt; 1,</td></tr>
<tr><td class="h">367</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Xmlns                 =&gt; 1,</td></tr>
<tr><td class="h">368</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">369</td><td colspan="7"></td></tr><tr><td class="h">370</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># predefined input and output filters</td></tr>
<tr><td class="h">371</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L371">92</a></div></td><td></td><td><div>758</div><div>190</div><div>863</div></td><td class="s">use vars qw( %filter);</td></tr>
<tr><td class="h">372</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">%filter= ( html       =&gt; \&amp;html_encode,</td></tr>
<tr><td class="h">373</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;safe       =&gt; \&amp;safe_encode,</td></tr>
<tr><td class="h">374</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;safe_hex   =&gt; \&amp;safe_encode_hex,</td></tr>
<tr><td class="h">375</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">376</td><td colspan="7"></td></tr><tr><td class="h">377</td><td colspan="7"></td></tr><tr><td class="h">378</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># trigger types (used to sort them)</td></tr>
<tr><td class="h">379</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my ($XPATH_TRIGGER, $REGEXP_TRIGGER, $LEVEL_TRIGGER)=(1..3);</td></tr>
<tr><td class="h">380</td><td colspan="7"></td></tr><tr><td class="h">381</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub new</td></tr>
<tr><td class="h">382</td><td><div class="c3">2776</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L382">2776</a></div></td><td></td><td><div>473582</div></td><td class="s">&nbsp;&nbsp;{ my ($class, %args) = @_;</td></tr>
<tr><td class="h">383</td><td><div class="c3">2776</div></td><td></td><td></td><td></td><td></td><td><div>7112</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $handlers;</td></tr>
<tr><td class="h">384</td><td colspan="7"></td></tr><tr><td class="h">385</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# change all nice_perlish_names into nicePerlishNames</td></tr>
<tr><td class="h">386</td><td><div class="c3">2776</div></td><td></td><td></td><td></td><td></td><td><div>13455</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;%args= _normalize_args( %args);</td></tr>
<tr><td class="h">387</td><td colspan="7"></td></tr><tr><td class="h">388</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# check options</td></tr>
<tr><td class="h">389</td><td><div class="c3">2776</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L389">100</a></div></td><td></td><td></td><td></td><td><div>16524</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( $args{MoreOptions})</td></tr>
<tr><td class="h">390</td><td><div class="c3">2775</div></td><td></td><td></td><td></td><td></td><td><div>11985</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ foreach my $arg (keys %args)</td></tr>
<tr><td class="h">391</td><td><div class="c3">5069</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L391">100</a></div></td><td></td><td></td><td></td><td><div>25213</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ carp &quot;invalid option $arg&quot; unless $valid_option{$arg}; }</td></tr>
<tr><td class="h">392</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">393</td><td colspan="7"></td></tr><tr><td class="h">394</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# a twig is really an XML::Parser</td></tr>
<tr><td class="h">395</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# my $self= XML::Parser-&gt;new(%args);</td></tr>
<tr><td class="h">396</td><td><div class="c3">2776</div></td><td></td><td></td><td></td><td></td><td><div>6545</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self;</td></tr>
<tr><td class="h">397</td><td><div class="c3">2776</div></td><td></td><td></td><td></td><td></td><td><div>20808</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self= XML::Parser-&gt;new(%args);   </td></tr>
<tr><td class="h">398</td><td colspan="7"></td></tr><tr><td class="h">399</td><td><div class="c3">2776</div></td><td></td><td></td><td></td><td></td><td><div>292246</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;bless $self, $class;</td></tr>
<tr><td class="h">400</td><td colspan="7"></td></tr><tr><td class="h">401</td><td><div class="c3">2776</div></td><td></td><td></td><td></td><td></td><td><div>13234</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{_twig_context_stack}= [];</td></tr>
<tr><td class="h">402</td><td colspan="7"></td></tr><tr><td class="h">403</td><td><div class="c3">2776</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L403">100</a></div></td><td></td><td></td><td></td><td><div>13211</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( exists $args{TwigHandlers})</td></tr>
<tr><td class="h">404</td><td><div class="c3">162</div></td><td></td><td></td><td></td><td></td><td><div>484</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $handlers= $args{TwigHandlers};</td></tr>
<tr><td class="h">405</td><td><div class="c3">162</div></td><td></td><td></td><td></td><td></td><td><div>887</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;setTwigHandlers( $handlers);</td></tr>
<tr><td class="h">406</td><td><div class="c3">156</div></td><td></td><td></td><td></td><td></td><td><div>673</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $args{TwigHandlers};</td></tr>
<tr><td class="h">407</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">408</td><td colspan="7"></td></tr><tr><td class="h">409</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# take care of twig-specific arguments</td></tr>
<tr><td class="h">410</td><td><div class="c3">2770</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L410">100</a></div></td><td></td><td></td><td></td><td><div>10191</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( exists $args{StartTagHandlers})</td></tr>
<tr><td class="h">411</td><td><div class="c3">23</div></td><td></td><td></td><td></td><td></td><td><div>139</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;setStartTagHandlers( $args{StartTagHandlers});</td></tr>
<tr><td class="h">412</td><td><div class="c3">23</div></td><td></td><td></td><td></td><td></td><td><div>91</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $args{StartTagHandlers};</td></tr>
<tr><td class="h">413</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">414</td><td colspan="7"></td></tr><tr><td class="h">415</td><td><div class="c3">2770</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L415">100</a></div></td><td></td><td></td><td></td><td><div>9109</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( exists $args{DoNotChainHandlers})</td></tr>
<tr><td class="h">416</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;{twig_do_not_chain_handlers}=  $args{DoNotChainHandlers}; }</td></tr>
<tr><td class="h">417</td><td colspan="7"></td></tr><tr><td class="h">418</td><td><div class="c3">2770</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L418">100</a></div></td><td></td><td></td><td></td><td><div>9110</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( exists $args{IgnoreElts})</td></tr>
<tr><td class="h">419</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # change array to hash so you can write ignore_elts =&gt; [ qw(foo bar baz)]</td></tr>
<tr><td class="h">420</td><td><div class="c3">4</div><div class="c0">0</div><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L420">50</a></div></td><td></td><td></td><td></td><td><div>25</div><div>0</div><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( isa( $args{IgnoreElts}, &#39;ARRAY&#39;)) { $args{IgnoreElts}= { map { $_ =&gt; 1 } @{$args{IgnoreElts}} }; }</td></tr>
<tr><td class="h">421</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;setIgnoreEltsHandlers( $args{IgnoreElts});</td></tr>
<tr><td class="h">422</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $args{IgnoreElts};</td></tr>
<tr><td class="h">423</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">424</td><td colspan="7"></td></tr><tr><td class="h">425</td><td><div class="c3">2770</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L425">100</a></div></td><td></td><td></td><td></td><td><div>9134</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( exists $args{Index})</td></tr>
<tr><td class="h">426</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $index= $args{Index};</td></tr>
<tr><td class="h">427</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# we really want a hash name =&gt; path, we turn an array into a hash if necessary</td></tr>
<tr><td class="h">428</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L428">100</a></div></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( ref( $index) eq &#39;ARRAY&#39;)</td></tr>
<tr><td class="h">429</td><td><div class="c3">1</div><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>4</div><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my %index= map { $_ =&gt; $_ } @$index;</td></tr>
<tr><td class="h">430</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$index= \%index;</td></tr>
<tr><td class="h">431</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">432</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while( my( $name, $exp)= each %$index)</td></tr>
<tr><td class="h">433</td><td><div class="c3">3</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L433">4</a></div></td><td></td><td><div>31</div><div>7</div><div>25</div><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;setTwigHandler( $exp, sub { push @{$_[0]-&gt;{_twig_index}-&gt;{$name}}, $_; 1; }); }</td></tr>
<tr><td class="h">434</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">435</td><td colspan="7"></td></tr><tr><td class="h">436</td><td><div class="c3">2770</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L436">100</a></div></td><td></td><td></td><td><div>29797</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{twig_elt_class}= $args{EltClass} || &#39;XML::Twig::Elt&#39;;</td></tr>
<tr><td class="h">437</td><td><div class="c3">2770</div><div class="c3">66</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L437">100</a></div></td><td></td><td></td><td></td><td><div>10009</div><div>244</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( exists( $args{EltClass})) { delete $args{EltClass}; }</td></tr>
<tr><td class="h">438</td><td colspan="7"></td></tr><tr><td class="h">439</td><td><div class="c3">2770</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L439">100</a></div></td><td></td><td></td><td></td><td><div>9427</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( exists( $args{MapXmlns}))</td></tr>
<tr><td class="h">440</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>73</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;{twig_map_xmlns}=  $args{MapXmlns};</td></tr>
<tr><td class="h">441</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{Namespaces}=1;</td></tr>
<tr><td class="h">442</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $args{MapXmlns};</td></tr>
<tr><td class="h">443</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">444</td><td colspan="7"></td></tr><tr><td class="h">445</td><td><div class="c3">2770</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L445">100</a></div></td><td></td><td></td><td></td><td><div>8893</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( exists( $args{KeepOriginalPrefix}))</td></tr>
<tr><td class="h">446</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;{twig_keep_original_prefix}= $args{KeepOriginalPrefix};</td></tr>
<tr><td class="h">447</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $args{KeepOriginalPrefix};</td></tr>
<tr><td class="h">448</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">449</td><td colspan="7"></td></tr><tr><td class="h">450</td><td><div class="c3">2770</div></td><td></td><td></td><td></td><td></td><td><div>11748</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{twig_dtd_handler}= $args{DTDHandler};</td></tr>
<tr><td class="h">451</td><td><div class="c3">2770</div></td><td></td><td></td><td></td><td></td><td><div>6955</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $args{DTDHandler};</td></tr>
<tr><td class="h">452</td><td colspan="7"></td></tr><tr><td class="h">453</td><td><div class="c3">2770</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L453">100</a></div></td><td></td><td></td><td></td><td><div>10825</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{ExpandExternalEnts})</td></tr>
<tr><td class="h">454</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;set_expand_external_entities( 1);</td></tr>
<tr><td class="h">455</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{twig_expand_external_ents}= $args{ExpandExternalEnts}; </td></tr>
<tr><td class="h">456</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{twig_read_external_dtd}= 1; # implied by ExpandExternalEnts</td></tr>
<tr><td class="h">457</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L457">100</a></div></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $args{ExpandExternalEnts} == -1) </td></tr>
<tr><td class="h">458</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;{twig_extern_ent_nofail}= 1;</td></tr>
<tr><td class="h">459</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;setHandlers( ExternEnt =&gt; \&amp;_twig_extern_ent_nofail);</td></tr>
<tr><td class="h">460</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">461</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $args{LoadDTD};</td></tr>
<tr><td class="h">462</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $args{ExpandExternalEnts};</td></tr>
<tr><td class="h">463</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">464</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">465</td><td><div class="c3">2766</div></td><td></td><td></td><td></td><td></td><td><div>11966</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;set_expand_external_entities( 0); }</td></tr>
<tr><td class="h">466</td><td colspan="7"></td></tr><tr><td class="h">467</td><td><div class="c3">2770</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L467">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L467">20</a></div></td><td></td><td></td><td><div>20840</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !$args{NoLWP} &amp;&amp; ! _use( &#39;URI&#39;) &amp;&amp; ! _use( &#39;URI::File&#39;) &amp;&amp; ! _use( &#39;LWP&#39;))</td></tr>
<tr><td class="h">468</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;{twig_ext_ent_handler}= \&amp;XML::Parser::initial_ext_ent_handler }</td></tr>
<tr><td class="h">469</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">470</td><td><div class="c3">2770</div></td><td></td><td></td><td></td><td></td><td><div>18465</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;{twig_ext_ent_handler}= \&amp;XML::Parser::file_ext_ent_handler }</td></tr>
<tr><td class="h">471</td><td colspan="7"></td></tr><tr><td class="h">472</td><td><div class="c3">2770</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L472">100</a></div></td><td></td><td></td><td></td><td><div>12800</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{DoNotEscapeAmpInAtts})</td></tr>
<tr><td class="h">473</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;set_do_not_escape_amp_in_atts( 1); </td></tr>
<tr><td class="h">474</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{twig_do_not_escape_amp_in_atts}=1;</td></tr>
<tr><td class="h">475</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">476</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">477</td><td><div class="c3">2769</div></td><td></td><td></td><td></td><td></td><td><div>9965</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;set_do_not_escape_amp_in_atts( 0); </td></tr>
<tr><td class="h">478</td><td><div class="c3">2769</div></td><td></td><td></td><td></td><td></td><td><div>11158</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{twig_do_not_escape_amp_in_atts}=0;</td></tr>
<tr><td class="h">479</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">480</td><td colspan="7"></td></tr><tr><td class="h">481</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# deal with TwigRoots argument, a hash of elements for which</td></tr>
<tr><td class="h">482</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# subtrees will be built (and associated handlers)</td></tr>
<tr><td class="h">483</td><td colspan="7"></td></tr><tr><td class="h">484</td><td><div class="c3">2770</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L484">100</a></div></td><td></td><td></td><td></td><td><div>10362</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{TwigRoots})</td></tr>
<tr><td class="h">485</td><td><div class="c3">63</div></td><td></td><td></td><td></td><td></td><td><div>346</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;setTwigRoots( $args{TwigRoots});</td></tr>
<tr><td class="h">486</td><td><div class="c3">61</div></td><td></td><td></td><td></td><td></td><td><div>228</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $args{TwigRoots}; </td></tr>
<tr><td class="h">487</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">488</td><td colspan="7"></td></tr><tr><td class="h">489</td><td><div class="c3">2768</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L489">100</a></div></td><td></td><td></td><td></td><td><div>9029</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{EndTagHandlers})</td></tr>
<tr><td class="h">490</td><td><div class="c3">11</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L490">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L490">100</a></div></td><td></td><td></td><td><div>95</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ unless ($self-&gt;{twig_roots} || $args{ForceEndTagHandlersUsage})</td></tr>
<tr><td class="h">491</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;you should not use EndTagHandlers without TwigRoots\n&quot;,</td></tr>
<tr><td class="h">492</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;if you want to use it anyway, normally because you have &quot;,</td></tr>
<tr><td class="h">493</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;a start_tag_handlers that calls &#39;ignore&#39; and you want to &quot;,</td></tr>
<tr><td class="h">494</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;call an ent_tag_handlers at the end of the element, then &quot;,</td></tr>
<tr><td class="h">495</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;pass &#39;force_end_tag_handlers_usage =&gt; 1&#39; as an argument &quot;,</td></tr>
<tr><td class="h">496</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;to new&quot;;</td></tr>
<tr><td class="h">497</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">498</td><td colspan="7"></td></tr><tr><td class="h">499</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>56</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;setEndTagHandlers( $args{EndTagHandlers});</td></tr>
<tr><td class="h">500</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $args{EndTagHandlers};</td></tr>
<tr><td class="h">501</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">502</td><td colspan="7"></td></tr><tr><td class="h">503</td><td><div class="c3">2767</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L503">100</a></div></td><td></td><td></td><td></td><td><div>8926</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{TwigPrintOutsideRoots})</td></tr>
<tr><td class="h">504</td><td><div class="c3">34</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L504">100</a></div></td><td></td><td></td><td></td><td><div>165</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;cannot use TwigPrintOutsideRoots without TwigRoots&quot;</td></tr>
<tr><td class="h">505</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( $self-&gt;{twig_roots});</td></tr>
<tr><td class="h">506</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# if the arg is a filehandle then store it</td></tr>
<tr><td class="h">507</td><td><div class="c3">33</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L507">100</a></div></td><td></td><td></td><td></td><td><div>141</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( _is_fh( $args{TwigPrintOutsideRoots}) )</td></tr>
<tr><td class="h">508</td><td><div class="c3">31</div></td><td></td><td></td><td></td><td></td><td><div>148</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;{twig_output_fh}= $args{TwigPrintOutsideRoots}; }</td></tr>
<tr><td class="h">509</td><td><div class="c3">33</div></td><td></td><td></td><td></td><td></td><td><div>206</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{twig_default_print}= $args{TwigPrintOutsideRoots};</td></tr>
<tr><td class="h">510</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">511</td><td colspan="7"></td></tr><tr><td class="h">512</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# space policy</td></tr>
<tr><td class="h">513</td><td><div class="c3">2766</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L513">100</a></div></td><td></td><td></td><td></td><td><div>8389</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{KeepSpaces})</td></tr>
<tr><td class="h">514</td><td><div class="c3">18</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L514">100</a></div></td><td></td><td></td><td></td><td><div>74</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;cannot use both keep_spaces and discard_spaces&quot; if( $args{DiscardSpaces});</td></tr>
<tr><td class="h">515</td><td><div class="c3">17</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L515">100</a></div></td><td></td><td></td><td></td><td><div>66</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;croak &quot;cannot use both keep_spaces and keep_spaces_in&quot; if( $args{KeepSpacesIn});</td></tr>
<tr><td class="h">516</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{twig_keep_spaces}=1;</td></tr>
<tr><td class="h">517</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $args{KeepSpaces}; </td></tr>
<tr><td class="h">518</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">519</td><td><div class="c3">2764</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L519">100</a></div></td><td></td><td></td><td></td><td><div>9073</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{DiscardSpaces})</td></tr>
<tr><td class="h">520</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L520">100</a></div></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;cannot use both discard_spaces and keep_spaces_in&quot; if( $args{KeepSpacesIn});</td></tr>
<tr><td class="h">521</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{twig_discard_spaces}=1; </td></tr>
<tr><td class="h">522</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $args{DiscardSpaces}; </td></tr>
<tr><td class="h">523</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">524</td><td><div class="c3">2763</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L524">100</a></div></td><td></td><td></td><td></td><td><div>8704</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{KeepSpacesIn})</td></tr>
<tr><td class="h">525</td><td><div class="c3">8</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L525">100</a></div></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;cannot use both keep_spaces_in and discard_spaces_in&quot; if( $args{DiscardSpacesIn});</td></tr>
<tr><td class="h">526</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{twig_discard_spaces}=1; </td></tr>
<tr><td class="h">527</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{twig_keep_spaces_in}={}; </td></tr>
<tr><td class="h">528</td><td><div class="c3">7</div><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>13</div><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @tags= @{$args{KeepSpacesIn}}; </td></tr>
<tr><td class="h">529</td><td><div class="c3">7</div><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>25</div><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $tag (@tags) { $self-&gt;{twig_keep_spaces_in}-&gt;{$tag}=1; } </td></tr>
<tr><td class="h">530</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $args{KeepSpacesIn}; </td></tr>
<tr><td class="h">531</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">532</td><td><div class="c3">2762</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L532">100</a></div></td><td></td><td></td><td></td><td><div>8587</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{DiscardSpacesIn})</td></tr>
<tr><td class="h">533</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;{twig_keep_spaces}=1; </td></tr>
<tr><td class="h">534</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{twig_discard_spaces_in}={}; </td></tr>
<tr><td class="h">535</td><td><div class="c3">4</div><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>8</div><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @tags= @{$args{DiscardSpacesIn}};</td></tr>
<tr><td class="h">536</td><td><div class="c3">4</div><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>11</div><div>34</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $tag (@tags) { $self-&gt;{twig_discard_spaces_in}-&gt;{$tag}=1; } </td></tr>
<tr><td class="h">537</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $args{DiscardSpacesIn}; </td></tr>
<tr><td class="h">538</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">539</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# discard spaces by default </td></tr>
<tr><td class="h">540</td><td><div class="c3">2762</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L540">100</a></div></td><td></td><td></td><td></td><td><div>15588</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{twig_discard_spaces}= 1 unless(  $self-&gt;{twig_keep_spaces});</td></tr>
<tr><td class="h">541</td><td colspan="7"></td></tr><tr><td class="h">542</td><td><div class="c3">2762</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L542">50</a></div></td><td></td><td></td><td><div>12210</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$args{Comments}||= $COMMENTS_DEFAULT;</td></tr>
<tr><td class="h">543</td><td><div class="c3">2762</div><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L543">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L543">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L543">100</a></div></td><td></td><td></td><td></td><td><div>19108</div><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{Comments} eq &#39;drop&#39;)       { $self-&gt;{twig_keep_comments}= 0;    }</td></tr>
<tr><td class="h">544</td><td><div class="c3">1873</div></td><td></td><td></td><td></td><td></td><td><div>6981</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $args{Comments} eq &#39;keep&#39;)    { $self-&gt;{twig_keep_comments}= 1;    }</td></tr>
<tr><td class="h">545</td><td><div class="c3">885</div></td><td></td><td></td><td></td><td></td><td><div>3180</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $args{Comments} eq &#39;process&#39;) { $self-&gt;{twig_process_comments}= 1; }</td></tr>
<tr><td class="h">546</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else { croak &quot;wrong value for comments argument: &#39;$args{Comments}&#39; (should be &#39;drop&#39;, &#39;keep&#39; or &#39;process&#39;)&quot;; }</td></tr>
<tr><td class="h">547</td><td><div class="c3">2761</div></td><td></td><td></td><td></td><td></td><td><div>8304</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $args{Comments};</td></tr>
<tr><td class="h">548</td><td colspan="7"></td></tr><tr><td class="h">549</td><td><div class="c3">2761</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L549">50</a></div></td><td></td><td></td><td><div>12000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$args{Pi}||= $PI_DEFAULT;</td></tr>
<tr><td class="h">550</td><td><div class="c3">2761</div><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L550">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L550">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L550">100</a></div></td><td></td><td></td><td></td><td><div>18509</div><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{Pi} eq &#39;drop&#39;)       { $self-&gt;{twig_keep_pi}= 0;    }</td></tr>
<tr><td class="h">551</td><td><div class="c3">1875</div></td><td></td><td></td><td></td><td></td><td><div>6768</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $args{Pi} eq &#39;keep&#39;)    { $self-&gt;{twig_keep_pi}= 1;    }</td></tr>
<tr><td class="h">552</td><td><div class="c3">883</div></td><td></td><td></td><td></td><td></td><td><div>3097</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $args{Pi} eq &#39;process&#39;) { $self-&gt;{twig_process_pi}= 1; }</td></tr>
<tr><td class="h">553</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else { croak &quot;wrong value for pi argument: &#39;$args{Pi}&#39; (should be &#39;drop&#39;, &#39;keep&#39; or &#39;process&#39;)&quot;; }</td></tr>
<tr><td class="h">554</td><td><div class="c3">2760</div></td><td></td><td></td><td></td><td></td><td><div>7298</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $args{Pi};</td></tr>
<tr><td class="h">555</td><td colspan="7"></td></tr><tr><td class="h">556</td><td><div class="c3">2760</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L556">100</a></div></td><td></td><td></td><td></td><td><div>8915</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{KeepEncoding})</td></tr>
<tr><td class="h">557</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">558</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# set it in XML::Twig::Elt so print functions know what to do</td></tr>
<tr><td class="h">559</td><td><div class="c3">968</div></td><td></td><td></td><td></td><td></td><td><div>3487</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;set_keep_encoding( 1); </td></tr>
<tr><td class="h">560</td><td><div class="c3">968</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L560">100</a></div></td><td></td><td></td><td><div>10277</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{parse_start_tag}= $args{ParseStartTag} || \&amp;_parse_start_tag; </td></tr>
<tr><td class="h">561</td><td><div class="c3">968</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L561">100</a></div></td><td></td><td></td><td></td><td><div>3937</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $args{ParseStartTag} if defined( $args{ParseStartTag}) ;</td></tr>
<tr><td class="h">562</td><td><div class="c3">968</div></td><td></td><td></td><td></td><td></td><td><div>2834</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $args{KeepEncoding};</td></tr>
<tr><td class="h">563</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">564</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">565</td><td><div class="c3">1792</div></td><td></td><td></td><td></td><td></td><td><div>7341</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;set_keep_encoding( 0);  </td></tr>
<tr><td class="h">566</td><td><div class="c3">1792</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L566">100</a></div></td><td></td><td></td><td></td><td><div>6480</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $args{ParseStartTag}) </td></tr>
<tr><td class="h">567</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;{parse_start_tag}= $args{ParseStartTag}; }</td></tr>
<tr><td class="h">568</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">569</td><td><div class="c3">1790</div></td><td></td><td></td><td></td><td></td><td><div>5030</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ delete $self-&gt;{parse_start_tag}; }</td></tr>
<tr><td class="h">570</td><td><div class="c3">1792</div></td><td></td><td></td><td></td><td></td><td><div>4376</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $args{ParseStartTag};</td></tr>
<tr><td class="h">571</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">572</td><td colspan="7"></td></tr><tr><td class="h">573</td><td><div class="c3">2760</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L573">100</a></div></td><td></td><td></td><td></td><td><div>8890</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{OutputFilter})</td></tr>
<tr><td class="h">574</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;set_output_filter( $args{OutputFilter}); </td></tr>
<tr><td class="h">575</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $args{OutputFilter};</td></tr>
<tr><td class="h">576</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">577</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">578</td><td><div class="c3">2755</div></td><td></td><td></td><td></td><td></td><td><div>10064</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;set_output_filter( 0); }</td></tr>
<tr><td class="h">579</td><td colspan="7"></td></tr><tr><td class="h">580</td><td><div class="c3">2760</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L580">100</a></div></td><td></td><td></td><td></td><td><div>9651</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{RemoveCdata})</td></tr>
<tr><td class="h">581</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;set_remove_cdata( $args{RemoveCdata}); </td></tr>
<tr><td class="h">582</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $args{RemoveCdata}; </td></tr>
<tr><td class="h">583</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">584</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">585</td><td><div class="c3">2759</div></td><td></td><td></td><td></td><td></td><td><div>9641</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;set_remove_cdata( 0); }</td></tr>
<tr><td class="h">586</td><td colspan="7"></td></tr><tr><td class="h">587</td><td><div class="c3">2760</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L587">100</a></div></td><td></td><td></td><td></td><td><div>9553</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{OutputTextFilter})</td></tr>
<tr><td class="h">588</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;set_output_text_filter( $args{OutputTextFilter}); </td></tr>
<tr><td class="h">589</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $args{OutputTextFilter};</td></tr>
<tr><td class="h">590</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">591</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">592</td><td><div class="c3">2755</div></td><td></td><td></td><td></td><td></td><td><div>9405</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;set_output_text_filter( 0); }</td></tr>
<tr><td class="h">593</td><td colspan="7"></td></tr><tr><td class="h">594</td><td colspan="7"></td></tr><tr><td class="h">595</td><td><div class="c3">2760</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L595">100</a></div></td><td></td><td></td><td></td><td><div>9355</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( exists $args{KeepAttsOrder})</td></tr>
<tr><td class="h">596</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;{keep_atts_order}= $args{KeepAttsOrder};</td></tr>
<tr><td class="h">597</td><td><div class="c3">7</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L597">100</a></div></td><td></td><td></td><td></td><td><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( _use( &#39;Tie::IxHash&#39;))</td></tr>
<tr><td class="h">598</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;set_keep_atts_order(  $self-&gt;{keep_atts_order}); }</td></tr>
<tr><td class="h">599</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else </td></tr>
<tr><td class="h">600</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;Tie::IxHash not available, option keep_atts_order not allowed&quot;; }</td></tr>
<tr><td class="h">601</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">602</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">603</td><td><div class="c3">2753</div></td><td></td><td></td><td></td><td></td><td><div>9228</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;set_keep_atts_order( 0); }</td></tr>
<tr><td class="h">604</td><td colspan="7"></td></tr><tr><td class="h">605</td><td colspan="7"></td></tr><tr><td class="h">606</td><td><div class="c3">2759</div><div class="c3">42</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L606">100</a></div></td><td></td><td></td><td></td><td><div>10753</div><div>258</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{PrettyPrint})    { $self-&gt;set_pretty_print( $args{PrettyPrint}); }</td></tr>
<tr><td class="h">607</td><td><div class="c3">2759</div><div class="c0">0</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L607">50</a></div></td><td></td><td></td><td></td><td><div>9008</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{EscapeGt})       { $self-&gt;escape_gt( $args{EscapeGt});           }</td></tr>
<tr><td class="h">608</td><td><div class="c3">2759</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L608">100</a></div></td><td></td><td></td><td></td><td><div>8286</div><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{Quote})          { $self-&gt;set_quote( $args{Quote});              } </td></tr>
<tr><td class="h">609</td><td><div class="c3">2759</div><div class="c3">12</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L609">100</a></div></td><td></td><td></td><td></td><td><div>8071</div><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{EmptyTags})      { $self-&gt;set_empty_tag_style( $args{EmptyTags}) }</td></tr>
<tr><td class="h">610</td><td colspan="7"></td></tr><tr><td class="h">611</td><td><div class="c3">2759</div><div class="c3">1</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L611">100</a></div></td><td></td><td></td><td></td><td><div>8151</div><div>4</div><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( exists $args{Id})      { $ID= $args{Id};                     delete $args{ID};             }</td></tr>
<tr><td class="h">612</td><td><div class="c3">2759</div><div class="c3">3</div><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L612">100</a></div></td><td></td><td></td><td></td><td><div>8307</div><div>12</div><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{NoProlog})       { $self-&gt;{no_prolog}= 1;              delete $args{NoProlog};       }</td></tr>
<tr><td class="h">613</td><td><div class="c3">2759</div><div class="c3">2</div><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L613">100</a></div></td><td></td><td></td><td></td><td><div>8160</div><div>9</div><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{DoNotOutputDTD}) { $self-&gt;{no_dtd_output}= 1;          delete $args{DoNotOutputDTD}; }</td></tr>
<tr><td class="h">614</td><td><div class="c3">2759</div><div class="c3">9</div><div class="c3">9</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L614">100</a></div></td><td></td><td></td><td></td><td><div>8619</div><div>33</div><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{LoadDTD})        { $self-&gt;{twig_read_external_dtd}= 1; delete $args{LoadDTD};        }</td></tr>
<tr><td class="h">615</td><td><div class="c3">2759</div><div class="c3">1</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L615">100</a></div></td><td></td><td></td><td></td><td><div>8722</div><div>7</div><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{CharHandler})    { $self-&gt;setCharHandler( $args{CharHandler}); delete $args{CharHandler}; }</td></tr>
<tr><td class="h">616</td><td colspan="7"></td></tr><tr><td class="h">617</td><td><div class="c3">2759</div><div class="c3">3</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L617">100</a></div></td><td></td><td></td><td></td><td><div>7930</div><div>20</div><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{InputFilter})    { $self-&gt;set_input_filter(  $args{InputFilter}); delete  $args{InputFilter}; }</td></tr>
<tr><td class="h">618</td><td><div class="c3">2757</div><div class="c3">1</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L618">100</a></div></td><td></td><td></td><td></td><td><div>8483</div><div>8</div><div>69</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $args{NoExpand})       { $self-&gt;setHandlers( %twig_noexpand_handlers); $self-&gt;{twig_no_expand}=1; }</td></tr>
<tr><td class="h">619</td><td><div class="c3">2757</div><div class="c3">2</div><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L619">100</a></div></td><td></td><td></td><td></td><td><div>9816</div><div>10</div><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $output_encoding= $args{OutputEncoding}) { $self-&gt;set_output_encoding( $output_encoding); delete $args{OutputFilter}; }</td></tr>
<tr><td class="h">620</td><td colspan="7"></td></tr><tr><td class="h">621</td><td><div class="c3">2757</div><div class="c3">4</div><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L621">100</a></div></td><td></td><td></td><td></td><td><div>9877</div><div>12</div><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $tdh= $args{TopDownHandlers}) { $self-&gt;{twig_tdh}=1; delete $args{TopDownHandlers}; }</td></tr>
<tr><td class="h">622</td><td colspan="7"></td></tr><tr><td class="h">623</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# set handlers</td></tr>
<tr><td class="h">624</td><td><div class="c3">2757</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L624">100</a></div></td><td></td><td></td><td></td><td><div>9158</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $self-&gt;{twig_roots})</td></tr>
<tr><td class="h">625</td><td><div class="c3">61</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L625">100</a></div></td><td></td><td></td><td></td><td><div>223</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $self-&gt;{twig_default_print})</td></tr>
<tr><td class="h">626</td><td><div class="c3">33</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L626">100</a></div></td><td></td><td></td><td></td><td><div>120</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $self-&gt;{twig_keep_encoding})</td></tr>
<tr><td class="h">627</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>113</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;setHandlers( %twig_handlers_roots_print_original); }</td></tr>
<tr><td class="h">628</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">629</td><td><div class="c3">26</div></td><td></td><td></td><td></td><td></td><td><div>405</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;setHandlers( %twig_handlers_roots_print);  }</td></tr>
<tr><td class="h">630</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">631</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">632</td><td><div class="c3">28</div></td><td></td><td></td><td></td><td></td><td><div>422</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;setHandlers( %twig_handlers_roots); }</td></tr>
<tr><td class="h">633</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">634</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">635</td><td><div class="c3">2696</div></td><td></td><td></td><td></td><td></td><td><div>38030</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $self-&gt;setHandlers( %twig_handlers); }</td></tr>
<tr><td class="h">636</td><td colspan="7"></td></tr><tr><td class="h">637</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# XML::Parser::Expat does not like these handler to be set. So in order to </td></tr>
<tr><td class="h">638</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# use the various sets of handlers on XML::Parser or XML::Parser::Expat</td></tr>
<tr><td class="h">639</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# objects when needed, these ones have to be set only once, here, at </td></tr>
<tr><td class="h">640</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# XML::Parser level</td></tr>
<tr><td class="h">641</td><td><div class="c3">2757</div></td><td></td><td></td><td></td><td></td><td><div>933544</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;setHandlers( Init =&gt; \&amp;_twig_init, Final =&gt; \&amp;_twig_final);</td></tr>
<tr><td class="h">642</td><td colspan="7"></td></tr><tr><td class="h">643</td><td><div class="c3">2757</div></td><td></td><td></td><td></td><td></td><td><div>186696</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{twig_entity_list}= XML::Twig::Entity_list-&gt;new; </td></tr>
<tr><td class="h">644</td><td colspan="7"></td></tr><tr><td class="h">645</td><td><div class="c3">2757</div></td><td></td><td></td><td></td><td></td><td><div>12193</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{twig_id}= $ID; </td></tr>
<tr><td class="h">646</td><td><div class="c3">2757</div></td><td></td><td></td><td></td><td></td><td><div>9743</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{twig_stored_spaces}=&#39;&#39;;</td></tr>
<tr><td class="h">647</td><td colspan="7"></td></tr><tr><td class="h">648</td><td><div class="c3">2757</div></td><td></td><td></td><td></td><td></td><td><div>10111</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{twig_autoflush}= 1; # auto flush by default</td></tr>
<tr><td class="h">649</td><td colspan="7"></td></tr><tr><td class="h">650</td><td><div class="c3">2757</div></td><td></td><td></td><td></td><td></td><td><div>8755</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{twig}= $self;</td></tr>
<tr><td class="h">651</td><td><div class="c3">2757</div><div class="c3">2756</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L651">100</a></div></td><td></td><td></td><td></td><td><div>9966</div><div>18383</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $weakrefs) { weaken( $self-&gt;{twig}); }</td></tr>
<tr><td class="h">652</td><td colspan="7"></td></tr><tr><td class="h">653</td><td><div class="c3">2757</div></td><td></td><td></td><td></td><td></td><td><div>15833</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self;</td></tr>
<tr><td class="h">654</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">655</td><td colspan="7"></td></tr><tr><td class="h">656</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub parse</td></tr>
<tr><td class="h">657</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;{</td></tr>
<tr><td class="h">658</td><td><div class="c3">2815</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L658">2815</a></div></td><td></td><td><div>33423</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t= shift;</td></tr>
<tr><td class="h">659</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# if called as a class method, calls nparse, which creates the twig then parses it</td></tr>
<tr><td class="h">660</td><td><div class="c3">2815</div><div class="c3">35</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L660">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L660">67</a></div></td><td></td><td></td><td><div>34629</div><div>177</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !ref( $t) || !isa( $t, &#39;XML::Twig&#39;)) { return $t-&gt;nparse( @_); }</td></tr>
<tr><td class="h">661</td><td colspan="7"></td></tr><tr><td class="h">662</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# requires 5.006 at least (or the ${^UNICODE} causes a problem)                                       # &gt; perl 5.5</td></tr>
<tr><td class="h">663</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# trap underlying bug in IO::Handle (see RT #17500)                                                   # &gt; perl 5.5</td></tr>
<tr><td class="h">664</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# croak if perl 5.8+, -CD (or PERL_UNICODE set to D) and parsing a pipe                               # &gt; perl 5.5</td></tr>
<tr><td class="h">665</td><td><div class="c3">2780</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L665">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L665">17</a></div></td><td></td><td></td><td><div>36144</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $]&gt;=5.008 &amp;&amp; ${^UNICODE} &amp;&amp; (${^UNICODE} &amp; 24) &amp;&amp; isa( $_[0], &#39;GLOB&#39;) &amp;&amp; -p $_[0] )               # &gt; perl 5.5</td></tr>
<tr><td class="h">666</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak   &quot;cannot parse the output of a pipe when perl is set to use the UTF8 perlIO layer\n&quot;       # &gt; perl 5.5</td></tr>
<tr><td class="h">667</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &quot;set the environment variable PERL_UNICODE or use the -C option (see perldoc perlrun)\n&quot;  # &gt; perl 5.5</td></tr>
<tr><td class="h">668</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &quot;not to include &#39;D&#39;&quot;;                                                                     # &gt; perl 5.5</td></tr>
<tr><td class="h">669</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}                                                                                                   # &gt; perl 5.5</td></tr>
<tr><td class="h">670</td><td><div class="c3">2780</div><div class="c3">2780</div></td><td></td><td></td><td></td><td></td><td><div>6953</div><div>34290</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t= eval { $t-&gt;SUPER::parse( @_); }; </td></tr>
<tr><td class="h">671</td><td><div class="c3">2780</div></td><td></td><td></td><td></td><td></td><td><div>93469</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return _checked_parse_result( $t, $@);</td></tr>
<tr><td class="h">672</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">673</td><td colspan="7"></td></tr><tr><td class="h">674</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub parsefile</td></tr>
<tr><td class="h">675</td><td><div class="c3">27</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L675">27</a></div></td><td></td><td><div>96</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">676</td><td><div class="c3">27</div><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>84</div><div>656</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t= eval { $t-&gt;SUPER::parsefile( @_); };</td></tr>
<tr><td class="h">677</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>336</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return _checked_parse_result( $t, $@);</td></tr>
<tr><td class="h">678</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">679</td><td colspan="7"></td></tr><tr><td class="h">680</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _checked_parse_result</td></tr>
<tr><td class="h">681</td><td><div class="c3">2807</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L681">2807</a></div></td><td></td><td><div>12903</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $returned)= @_;</td></tr>
<tr><td class="h">682</td><td><div class="c3">2807</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L682">100</a></div></td><td></td><td></td><td></td><td><div>10158</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !$t)</td></tr>
<tr><td class="h">683</td><td><div class="c3">22</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L683">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L683">67</a></div></td><td></td><td></td><td><div>197</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( isa( $returned, &#39;XML::Twig&#39;) &amp;&amp; $returned-&gt;{twig_finish_now})</td></tr>
<tr><td class="h">684</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $t= $returned;</td></tr>
<tr><td class="h">685</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $t-&gt;{twig_finish_now};</td></tr>
<tr><td class="h">686</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $t-&gt;_twig_final;</td></tr>
<tr><td class="h">687</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">688</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">689</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>73</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ _croak( $returned, 0); }</td></tr>
<tr><td class="h">690</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">691</td><td><div class="c3">2785</div></td><td></td><td></td><td></td><td></td><td><div>16811</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t;</td></tr>
<tr><td class="h">692</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">693</td><td colspan="7"></td></tr><tr><td class="h">694</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub finish_now</td></tr>
<tr><td class="h">695</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L695">6</a></div></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">696</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_finish_now}=1;</td></tr>
<tr><td class="h">697</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;die $t;    </td></tr>
<tr><td class="h">698</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">699</td><td colspan="7"></td></tr><tr><td class="h">700</td><td colspan="7"></td></tr><tr><td class="h">701</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L701">3</a></div></td><td></td><td><div>22</div></td><td class="s">sub parsefile_inplace      { shift-&gt;_parse_inplace( parsefile      =&gt; @_); }</td></tr>
<tr><td class="h">702</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L702">3</a></div></td><td></td><td><div>21</div></td><td class="s">sub parsefile_html_inplace { shift-&gt;_parse_inplace( parsefile_html =&gt; @_); }</td></tr>
<tr><td class="h">703</td><td colspan="7"></td></tr><tr><td class="h">704</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _parse_inplace</td></tr>
<tr><td class="h">705</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L705">6</a></div></td><td></td><td><div>126</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $method, $file, $suffix)= @_;</td></tr>
<tr><td class="h">706</td><td><div class="c3">6</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L706">50</a></div></td><td></td><td></td><td></td><td><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_use( &#39;File::Temp&#39;) || croak &quot;need File::Temp to use inplace methods\n&quot;;</td></tr>
<tr><td class="h">707</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_use( &#39;File::Basename&#39;);</td></tr>
<tr><td class="h">708</td><td colspan="7"></td></tr><tr><td class="h">709</td><td colspan="7"></td></tr><tr><td class="h">710</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>74</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tmpdir= dirname( $file);</td></tr>
<tr><td class="h">711</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>1378</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $tmpfh, $tmpfile)= File::Temp::tempfile( DIR =&gt; $tmpdir);</td></tr>
<tr><td class="h">712</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $original_fh= select $tmpfh;</td></tr>
<tr><td class="h">713</td><td colspan="7"></td></tr><tr><td class="h">714</td><td><div class="c3">6</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L714">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L714">33</a></div></td><td></td><td></td><td><div>72</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( $t-&gt;{twig_keep_encoding} || $] &lt; 5.006) </td></tr>
<tr><td class="h">715</td><td><div class="c3">6</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L715">50</a></div></td><td></td><td></td><td></td><td><div>85092</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( grep /useperlio=define/, `$^X -V`) # we can only use binmode :utf8 if perl was compiled with useperlio</td></tr>
<tr><td class="h">716</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>105</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ binmode( $tmpfh, &quot;:utf8&quot; ); }</td></tr>
<tr><td class="h">717</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">718</td><td colspan="7"></td></tr><tr><td class="h">719</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>116</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;$method( $file);</td></tr>
<tr><td class="h">720</td><td colspan="7"></td></tr><tr><td class="h">721</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;select $original_fh;</td></tr>
<tr><td class="h">722</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>491</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;close $tmpfh;</td></tr>
<tr><td class="h">723</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>125</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $mode= (stat( $file))[2] &amp; 07777;</td></tr>
<tr><td class="h">724</td><td><div class="c3">6</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L724">50</a></div></td><td></td><td></td><td></td><td><div>100</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;chmod $mode, $tmpfile or croak &quot;cannot change temp file mode to $mode: $!&quot;;</td></tr>
<tr><td class="h">725</td><td colspan="7"></td></tr><tr><td class="h">726</td><td><div class="c3">6</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L726">100</a></div></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $suffix) </td></tr>
<tr><td class="h">727</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $backup;</td></tr>
<tr><td class="h">728</td><td><div class="c3">4</div><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L728">100</a></div></td><td></td><td></td><td></td><td><div>31</div><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $suffix=~ m{\*}) { ($backup = $suffix) =~ s/\*/$file/g; }</td></tr>
<tr><td class="h">729</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else                 { $backup= $file . $suffix; }</td></tr>
<tr><td class="h">730</td><td colspan="7"></td></tr><tr><td class="h">731</td><td><div class="c3">4</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L731">50</a></div></td><td></td><td></td><td></td><td><div>126</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rename( $file, $backup) or croak &quot;cannot backup initial file ($file) to $backup: $!&quot;; </td></tr>
<tr><td class="h">732</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">733</td><td><div class="c3">6</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L733">50</a></div></td><td></td><td></td><td></td><td><div>232</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;rename( $tmpfile, $file) or croak &quot;cannot rename temp file ($tmpfile) to initial file ($file): $!&quot;;</td></tr>
<tr><td class="h">734</td><td colspan="7"></td></tr><tr><td class="h">735</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t;</td></tr>
<tr><td class="h">736</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">737</td><td colspan="7"></td></tr><tr><td class="h">738</td><td colspan="7"></td></tr><tr><td class="h">739</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub parseurl</td></tr>
<tr><td class="h">740</td><td><div class="c3">11</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L740">11</a></div></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">741</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>61</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;_parseurl( 0, @_);</td></tr>
<tr><td class="h">742</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">743</td><td colspan="7"></td></tr><tr><td class="h">744</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub safe_parseurl</td></tr>
<tr><td class="h">745</td><td><div class="c3">9</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L745">9</a></div></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">746</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;_parseurl( 1, @_);</td></tr>
<tr><td class="h">747</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">748</td><td colspan="7"></td></tr><tr><td class="h">749</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub safe_parsefile_html</td></tr>
<tr><td class="h">750</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L750">1</a></div></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">751</td><td><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>2</div><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;eval { $t-&gt;parsefile_html( @_); };</td></tr>
<tr><td class="h">752</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L752">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L752">0</a></div></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $@ ? $t-&gt;_reset_twig &amp;&amp;  0 : $t;</td></tr>
<tr><td class="h">753</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">754</td><td colspan="7"></td></tr><tr><td class="h">755</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub safe_parseurl_html</td></tr>
<tr><td class="h">756</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L756">1</a></div></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">757</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L757">50</a></div></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_use( &#39;LWP::Simple&#39;) or croak &quot;missing LWP::Simple&quot;; </td></tr>
<tr><td class="h">758</td><td><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;eval { $t-&gt;parse_html( LWP::Simple::get( shift()), @_); } ;</td></tr>
<tr><td class="h">759</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L759">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L759">0</a></div></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $@ ? $t-&gt;_reset_twig &amp;&amp;  0 : $t;</td></tr>
<tr><td class="h">760</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">761</td><td colspan="7"></td></tr><tr><td class="h">762</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># uses eval to catch the parser&#39;s death</td></tr>
<tr><td class="h">763</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub safe_parse_html</td></tr>
<tr><td class="h">764</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L764">1</a></div></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">765</td><td><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;eval { $t-&gt;parse_html( @_); } ;</td></tr>
<tr><td class="h">766</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L766">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L766">0</a></div></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $@ ? $t-&gt;_reset_twig &amp;&amp;  0 : $t;</td></tr>
<tr><td class="h">767</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">768</td><td colspan="7"></td></tr><tr><td class="h">769</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub parsefile_html</td></tr>
<tr><td class="h">770</td><td><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L770">5</a></div></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">771</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $file= shift;</td></tr>
<tr><td class="h">772</td><td><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L772">100</a></div></td><td></td><td></td><td></td><td><div>79</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $indent= $t-&gt;{ErrorContext} ? 1 : 0;</td></tr>
<tr><td class="h">773</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;set_empty_tag_style( &#39;html&#39;);</td></tr>
<tr><td class="h">774</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;parse( _html2xml( _slurp( $file), { indent =&gt; $indent }), @_);</td></tr>
<tr><td class="h">775</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t;</td></tr>
<tr><td class="h">776</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">777</td><td colspan="7"></td></tr><tr><td class="h">778</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub parse_html</td></tr>
<tr><td class="h">779</td><td><div class="c3">15</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L779">15</a></div></td><td></td><td><div>59</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">780</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>170</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $content= shift;</td></tr>
<tr><td class="h">781</td><td><div class="c3">15</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L781">50</a></div></td><td></td><td></td><td></td><td><div>78</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $indent= $t-&gt;{ErrorContext} ? 1 : 0;</td></tr>
<tr><td class="h">782</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>63</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;set_empty_tag_style( &#39;html&#39;);</td></tr>
<tr><td class="h">783</td><td><div class="c3">15</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L783">100</a></div></td><td></td><td></td><td></td><td><div>911</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;parse( _html2xml( isa( $content, &#39;GLOB&#39;) ? _slurp_fh( $content) : $content, { indent =&gt; $indent }), @_);</td></tr>
<tr><td class="h">784</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>90</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t;</td></tr>
<tr><td class="h">785</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">786</td><td colspan="7"></td></tr><tr><td class="h">787</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub xparse</td></tr>
<tr><td class="h">788</td><td><div class="c3">1859</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L788">1859</a></div></td><td></td><td><div>4958</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">789</td><td><div class="c3">1859</div></td><td></td><td></td><td></td><td></td><td><div>4290</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $to_parse= $_[0];</td></tr>
<tr><td class="h">790</td><td><div class="c3">1859</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L790">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L790">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L790">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L790">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L790">100</a></div></td><td></td><td></td><td></td><td><div>17724</div><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( isa( $to_parse, &#39;GLOB&#39;))             { $t-&gt;parse( @_);                 }</td></tr>
<tr><td class="h">791</td><td><div class="c3">1847</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L791">100</a></div></td><td></td><td></td><td></td><td><div>12000</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $to_parse=~ m{^\s*&lt;})             { $to_parse=~ m{&lt;html}i ? $t-&gt;_parse_as_xml_or_html( @_)</td></tr>
<tr><td class="h">792</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: $t-&gt;parse( @_);                 </td></tr>
<tr><td class="h">793</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">794</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L794">100</a></div></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $to_parse=~ m{^\w+://.*\.html?$}) { _use( &#39;LWP::Simple&#39;) or croak &quot;missing LWP::Simple&quot;; </td></tr>
<tr><td class="h">795</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;_parse_as_xml_or_html( LWP::Simple::get( shift()), @_);</td></tr>
<tr><td class="h">796</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">797</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L797">100</a></div></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $to_parse=~ m{^\w+://})           { _use( &#39;LWP::Simple&#39;) or croak &quot;missing LWP::Simple&quot;;</td></tr>
<tr><td class="h">798</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $doc= LWP::Simple::get( shift);</td></tr>
<tr><td class="h">799</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $xml_parse_ok= $t-&gt;safe_parse( $doc, @_);</td></tr>
<tr><td class="h">800</td><td><div class="c3">1</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L800">50</a></div></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $xml_parse_ok)</td></tr>
<tr><td class="h">801</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return $xml_parse_ok; }</td></tr>
<tr><td class="h">802</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">803</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $diag= $@;</td></tr>
<tr><td class="h">804</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L804">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $doc=~ m{&lt;html}i)</td></tr>
<tr><td class="h">805</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $t-&gt;parse_html( $doc, @_); }</td></tr>
<tr><td class="h">806</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">807</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak $diag; }</td></tr>
<tr><td class="h">808</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">809</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">810</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $to_parse=~ m{\.html?$})          { my $content= _slurp( shift);</td></tr>
<tr><td class="h">811</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;_parse_as_xml_or_html( $content, @_); </td></tr>
<tr><td class="h">812</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">813</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else                                     { $t-&gt;parsefile( @_);             }</td></tr>
<tr><td class="h">814</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">815</td><td colspan="7"></td></tr><tr><td class="h">816</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _parse_as_xml_or_html</td></tr>
<tr><td class="h">817</td><td><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L817">10</a></div></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift; </td></tr>
<tr><td class="h">818</td><td><div class="c3">10</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L818">100</a></div></td><td></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( _is_well_formed_xml( $_[0]))</td></tr>
<tr><td class="h">819</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $t-&gt;parse( @_) }</td></tr>
<tr><td class="h">820</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">821</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $html= _html2xml( $_[0]);</td></tr>
<tr><td class="h">822</td><td><div class="c3">8</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L822">100</a></div></td><td></td><td></td><td></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( _is_well_formed_xml( $html))</td></tr>
<tr><td class="h">823</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $t-&gt;parse( $html); }</td></tr>
<tr><td class="h">824</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">825</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak $@; }</td></tr>
<tr><td class="h">826</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">827</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}  </td></tr>
<tr><td class="h">828</td><td colspan="7"></td></tr><tr><td class="h">829</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">{ my $parser;</td></tr>
<tr><td class="h">830</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub _is_well_formed_xml</td></tr>
<tr><td class="h">831</td><td><div class="c3">18</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L831">67</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L831">18</a></div></td><td></td><td><div>79</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ $parser ||= XML::Parser-&gt;new;</td></tr>
<tr><td class="h">832</td><td><div class="c3">18</div><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>412</div><div>95</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eval { $parser-&gt;parse( $_[0]); };</td></tr>
<tr><td class="h">833</td><td><div class="c3">18</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L833">100</a></div></td><td></td><td></td><td></td><td><div>256</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $@ ? 0 : 1;</td></tr>
<tr><td class="h">834</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">835</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">836</td><td colspan="7"></td></tr><tr><td class="h">837</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub nparse</td></tr>
<tr><td class="h">838</td><td><div class="c3">1859</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L838">1859</a></div></td><td></td><td><div>48540</div></td><td class="s">&nbsp;&nbsp;{ my $class= shift;</td></tr>
<tr><td class="h">839</td><td><div class="c3">1859</div></td><td></td><td></td><td></td><td></td><td><div>4760</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $to_parse= pop;</td></tr>
<tr><td class="h">840</td><td><div class="c3">1859</div></td><td></td><td></td><td></td><td></td><td><div>8023</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$class-&gt;new( @_)-&gt;xparse( $to_parse);</td></tr>
<tr><td class="h">841</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">842</td><td colspan="7"></td></tr><tr><td class="h">843</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L843">1</a></div></td><td></td><td><div>26</div></td><td class="s">sub nparse_pp   { shift()-&gt;nparse( pretty_print =&gt; &#39;indented&#39;, @_); }</td></tr>
<tr><td class="h">844</td><td><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L844">5</a></div></td><td></td><td><div>1320</div></td><td class="s">sub nparse_e    { shift()-&gt;nparse( error_context =&gt; 1,         @_); }</td></tr>
<tr><td class="h">845</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L845">1</a></div></td><td></td><td><div>27</div></td><td class="s">sub nparse_ppe  { shift()-&gt;nparse( pretty_print =&gt; &#39;indented&#39;, error_context =&gt; 1, @_); }</td></tr>
<tr><td class="h">846</td><td colspan="7"></td></tr><tr><td class="h">847</td><td colspan="7"></td></tr><tr><td class="h">848</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _html2xml</td></tr>
<tr><td class="h">849</td><td><div class="c3">28</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L849">28</a></div></td><td></td><td><div>293</div></td><td class="s">&nbsp;&nbsp;{ my( $html, $options)= @_;</td></tr>
<tr><td class="h">850</td><td><div class="c3">28</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L850">100</a></div></td><td></td><td></td><td></td><td><div>223</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_use( &#39;HTML::TreeBuilder&#39;, &#39;3.13&#39;) or croak &quot;cannot parse HTML: missing HTML::TreeBuilder v &gt;= 3.13\n&quot;; </td></tr>
<tr><td class="h">851</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>268</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tree= HTML::TreeBuilder-&gt;new;</td></tr>
<tr><td class="h">852</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>145</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$tree-&gt;ignore_ignorable_whitespace( 0); </td></tr>
<tr><td class="h">853</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>113</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$tree-&gt;no_space_compacting( 1);</td></tr>
<tr><td class="h">854</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>107</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$tree-&gt;store_comments( 1);</td></tr>
<tr><td class="h">855</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>121</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$tree-&gt;store_pis(1); </td></tr>
<tr><td class="h">856</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>126</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$tree-&gt;parse( $html);</td></tr>
<tr><td class="h">857</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>237</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$tree-&gt;eof;</td></tr>
<tr><td class="h">858</td><td colspan="7"></td></tr><tr><td class="h">859</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>153</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $xml= $tree-&gt;as_XML;</td></tr>
<tr><td class="h">860</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>147</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_fix_xml( $tree, \$xml);</td></tr>
<tr><td class="h">861</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>168</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$tree-&gt;delete;</td></tr>
<tr><td class="h">862</td><td colspan="7"></td></tr><tr><td class="h">863</td><td><div class="c3">27</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L863">100</a></div></td><td></td><td></td><td></td><td><div>130</div><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $options-&gt;{indent}) { _indent_xhtml( \$xml); }</td></tr>
<tr><td class="h">864</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>166</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$tree-&gt;delete;</td></tr>
<tr><td class="h">865</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>4953</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$xml=~ s{\s+$}{}s; # trim end</td></tr>
<tr><td class="h">866</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>1144</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $xml;</td></tr>
<tr><td class="h">867</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">868</td><td colspan="7"></td></tr><tr><td class="h">869</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">{ my %xml_parser_encoding;</td></tr>
<tr><td class="h">870</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub _fix_xml</td></tr>
<tr><td class="h">871</td><td><div class="c3">27</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L871">27</a></div></td><td></td><td><div>99</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my( $tree, $xml)= @_; # $xml is a ref to the xml string</td></tr>
<tr><td class="h">872</td><td colspan="7"></td></tr><tr><td class="h">873</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>61</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $max_tries=5;</td></tr>
<tr><td class="h">874</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>60</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $add_decl;</td></tr>
<tr><td class="h">875</td><td colspan="7"></td></tr><tr><td class="h">876</td><td><div class="c3">27</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L876">100</a></div></td><td></td><td></td><td><div>201</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while( ! _check_xml( $xml) &amp;&amp; $max_tries--)</td></tr>
<tr><td class="h">877</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">878</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# a couple of fixes for weird HTML::TreeBuilder errors</td></tr>
<tr><td class="h">879</td><td><div class="c3">21</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L879">50</a></div><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L879">50</a></div></td><td></td><td></td><td></td><td><div>193</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $@=~ m{^\s*xml declaration not at start of external entity})</td></tr>
<tr><td class="h">880</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $$xml=~ s{&lt;\?xml version.*\?&gt;}{}; </td></tr>
<tr><td class="h">881</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#warn &quot; fixed xml declaration in the wrong place\n&quot;;</td></tr>
<tr><td class="h">882</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">883</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $@=~ m{^\s*not well-formed \(invalid token\)})</td></tr>
<tr><td class="h">884</td><td><div class="c3">21</div></td><td></td><td></td><td></td><td></td><td><div>68</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $encoding= _encoding_from_meta( $tree);</td></tr>
<tr><td class="h">885</td><td><div class="c3">21</div><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L885">100</a></div></td><td></td><td></td><td></td><td><div>69</div><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( keys %xml_parser_encoding) { %xml_parser_encoding= _xml_parser_encodings(); }</td></tr>
<tr><td class="h">886</td><td colspan="7"></td></tr><tr><td class="h">887</td><td><div class="c3">21</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L887">100</a></div></td><td></td><td></td><td></td><td><div>89</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( ! $add_decl)</td></tr>
<tr><td class="h">888</td><td><div class="c3">5</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L888">50</a></div><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L888">0</a></div><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L888">0</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L888">0</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L888">0</a></div></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $xml_parser_encoding{$encoding})</td></tr>
<tr><td class="h">889</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $add_decl=1; }</td></tr>
<tr><td class="h">890</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $encoding eq &#39;euc-jp&#39; &amp;&amp; $xml_parser_encoding{&#39;x-euc-jp-jisx0221&#39;})</td></tr>
<tr><td class="h">891</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $encoding=&quot;x-euc-jp-jisx0221&quot;; $add_decl=1;}</td></tr>
<tr><td class="h">892</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $encoding eq &#39;shift-jis&#39; &amp;&amp; $xml_parser_encoding{&#39;x-sjis-jisx0221&#39;})</td></tr>
<tr><td class="h">893</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $encoding=&quot;x-sjis-jisx0221&quot;;   $add_decl=1;}</td></tr>
<tr><td class="h">894</td><td colspan="7"></td></tr><tr><td class="h">895</td><td><div class="c3">5</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L895">50</a></div></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $add_decl) </td></tr>
<tr><td class="h">896</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>66</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $$xml=~ s{^(&lt;\?xml.*?\?&gt;)?}{&lt;?xml version=&quot;1.0&quot; encoding=&quot;$encoding&quot;?&gt;}s;</td></tr>
<tr><td class="h">897</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#warn &quot;  added decl (encoding $encoding)\n&quot;;</td></tr>
<tr><td class="h">898</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">899</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">900</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $$xml=~ s{^(&lt;\?xml.*?\?&gt;)?}{}s;</td></tr>
<tr><td class="h">901</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#warn &quot;  converting to utf8 from $encoding\n&quot;;</td></tr>
<tr><td class="h">902</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$xml= _to_utf8( $encoding, $$xml);</td></tr>
<tr><td class="h">903</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">904</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">905</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">906</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>178</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $$xml=~ s{^(&lt;\?xml.*?\?&gt;)?}{}s;</td></tr>
<tr><td class="h">907</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#warn &quot;  converting to utf8 from $encoding\n&quot;;</td></tr>
<tr><td class="h">908</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$$xml= _to_utf8( $encoding, $$xml);</td></tr>
<tr><td class="h">909</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">910</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">911</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">912</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">913</td><td colspan="7"></td></tr><tr><td class="h">914</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub _xml_parser_encodings</td></tr>
<tr><td class="h">915</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L915">2</a></div></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my @encodings=( &#39;iso-8859-1&#39;); # this one is included by default, there is no map for it in @INC</td></tr>
<tr><td class="h">916</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $inc (@INC)</td></tr>
<tr><td class="h">917</td><td><div class="c3">25</div><div class="c3">90</div></td><td></td><td></td><td></td><td></td><td><div>3163</div><div>15167</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ push @encodings, map { basename( $_, &#39;.enc&#39;) } glob( File::Spec-&gt;catdir( $inc =&gt; XML =&gt; Parser =&gt; Encodings =&gt; &#39;*.enc&#39;)); }</td></tr>
<tr><td class="h">918</td><td><div class="c3">2</div><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>290</div><div>351</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return map { $_ =&gt; 1 } @encodings;</td></tr>
<tr><td class="h">919</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">920</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">921</td><td colspan="7"></td></tr><tr><td class="h">922</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _check_xml</td></tr>
<tr><td class="h">923</td><td><div class="c3">48</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L923">48</a></div></td><td></td><td><div>142</div></td><td class="s">&nbsp;&nbsp;{ my( $xml)= @_; # $xml is a ref to the xml string</td></tr>
<tr><td class="h">924</td><td><div class="c3">48</div><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>109</div><div>325</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ok= eval { XML::Parser-&gt;new-&gt;parse( $$xml); };</td></tr>
<tr><td class="h">925</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#if( $ok) { warn &quot;  parse OK\n&quot;; }</td></tr>
<tr><td class="h">926</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>1404</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ok;</td></tr>
<tr><td class="h">927</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">928</td><td colspan="7"></td></tr><tr><td class="h">929</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _encoding_from_meta</td></tr>
<tr><td class="h">930</td><td><div class="c3">21</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L930">21</a></div></td><td></td><td><div>64</div></td><td class="s">&nbsp;&nbsp;{ my( $tree)= @_; </td></tr>
<tr><td class="h">931</td><td><div class="c3">21</div></td><td></td><td></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $enc=&quot;iso-8859-1&quot;;</td></tr>
<tr><td class="h">932</td><td><div class="c3">21</div></td><td></td><td></td><td></td><td></td><td><div>92</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @meta= $tree-&gt;find( &#39;meta&#39;);</td></tr>
<tr><td class="h">933</td><td><div class="c3">21</div></td><td></td><td></td><td></td><td></td><td><div>82</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $meta (@meta)</td></tr>
<tr><td class="h">934</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L934">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L934">20</a></div></td><td></td><td></td><td><div>78</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if(    $meta-&gt;{&#39;http-equiv&#39;} &amp;&amp; ($meta-&gt;{&#39;http-equiv&#39;} =~ m{^\s*content-type\s*}i)</td></tr>
<tr><td class="h">935</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; $meta-&gt;{content}      &amp;&amp; ($meta-&gt;{content}      =~ m{^\s*text/html\s*;\s*charset\s*=\s*(\S*)\s*}i)</td></tr>
<tr><td class="h">936</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">937</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $enc= lc $1;</td></tr>
<tr><td class="h">938</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#warn &quot;  encoding from meta tag is &#39;$enc&#39;\n&quot;;</td></tr>
<tr><td class="h">939</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last;</td></tr>
<tr><td class="h">940</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">941</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">942</td><td><div class="c3">21</div></td><td></td><td></td><td></td><td></td><td><div>82</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $enc;</td></tr>
<tr><td class="h">943</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">944</td><td colspan="7"></td></tr><tr><td class="h">945</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">{ sub _to_utf8 </td></tr>
<tr><td class="h">946</td><td><div class="c3">16</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L946">16</a></div></td><td></td><td><div>150</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my( $encoding, $string)= @_;</td></tr>
<tr><td class="h">947</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>135</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $SIG{__DIE__};</td></tr>
<tr><td class="h">948</td><td><div class="c3">16</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L948">50</a></div><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L948">0</a></div><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L948">0</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L948">0</a></div></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( _use(  &#39;Encode&#39;)) </td></tr>
<tr><td class="h">949</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>66</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ Encode::from_to( $string, $encoding =&gt; &#39;utf8&#39;, 0x0400); } # 0x0400 is Encode::FB_XMLCREF</td></tr>
<tr><td class="h">950</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( _use( &#39;Text::Iconv&#39;))</td></tr>
<tr><td class="h">951</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $converter =  eval { Text::Iconv-&gt;new( $encoding =&gt; &quot;utf8&quot;) };</td></tr>
<tr><td class="h">952</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L952">0</a></div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $converter) {  $string= $converter-&gt;convert( $string); }</td></tr>
<tr><td class="h">953</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">954</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( _use( &#39;Unicode::Map8&#39;) &amp;&amp; _use( &#39;Unicode::String&#39;))</td></tr>
<tr><td class="h">955</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $map= Unicode::Map8-&gt;new( $encoding); </td></tr>
<tr><td class="h">956</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string= $map-&gt;tou( $string)-&gt;utf8;</td></tr>
<tr><td class="h">957</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">958</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>1616</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string=~ s{[\x00-\x08\x0B\x0C\x0E-\x1F]}{}g; # get rid of control chars, portable in 5.6</td></tr>
<tr><td class="h">959</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>142</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $string;</td></tr>
<tr><td class="h">960</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">961</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">962</td><td colspan="7"></td></tr><tr><td class="h">963</td><td colspan="7"></td></tr><tr><td class="h">964</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _indent_xhtml</td></tr>
<tr><td class="h">965</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L965">1</a></div></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;{ my( $xhtml)= @_; # $xhtml is a ref</td></tr>
<tr><td class="h">966</td><td><div class="c3">1</div><div class="c3">39</div></td><td></td><td></td><td></td><td></td><td><div>11</div><div>167</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %block_tag= map { $_ =&gt; 1 } qw( html </td></tr>
<tr><td class="h">967</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;head </td></tr>
<tr><td class="h">968</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;meta title link script base</td></tr>
<tr><td class="h">969</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body </td></tr>
<tr><td class="h">970</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h1 h2 h3 h4 h5 h6 </td></tr>
<tr><td class="h">971</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p br address  blockquote pre </td></tr>
<tr><td class="h">972</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ol ul li  dd dl dt </td></tr>
<tr><td class="h">973</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table tr td th tbody tfoot thead  col colgroup caption </td></tr>
<tr><td class="h">974</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;div frame frameset hr</td></tr>
<tr><td class="h">975</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;); </td></tr>
<tr><td class="h">976</td><td colspan="7"></td></tr><tr><td class="h">977</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $level=0;</td></tr>
<tr><td class="h">978</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$$xhtml=~ s{( (?:&lt;!(?:--.*?--&gt;|[CDATA[.*]]&gt;)) # ignore comments and CDATA sections</td></tr>
<tr><td class="h">979</td><td><div class="c3">5</div><div class="c3">5</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L979">50</a></div><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L979">0</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L979">0</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L979">33</a></div></td><td></td><td></td><td><div>62</div><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| &lt;(\w+)                        # start tag</td></tr>
<tr><td class="h">980</td><td><div class="c3">5</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L980">50</a></div></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|(&lt;/\(\w+)                      # end tag </td></tr>
<tr><td class="h">981</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>75</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">982</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">983</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">984</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(    $2 &amp;&amp; $block_tag{$2})  { my $indent= &quot;  &quot; x $level; </td></tr>
<tr><td class="h">985</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$level++ unless( $2=~ m{/&gt;});</td></tr>
<tr><td class="h">986</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;\n$indent&lt;$2&quot;; </td></tr>
<tr><td class="h">987</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">988</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $3  &amp;&amp; $block_tag{$3}) { $level--; &quot;&lt;/$3&quot;; }</td></tr>
<tr><td class="h">989</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else                          { $1; }</td></tr>
<tr><td class="h">990</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}xesg;</td></tr>
<tr><td class="h">991</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">992</td><td colspan="7"></td></tr><tr><td class="h">993</td><td colspan="7"></td></tr><tr><td class="h">994</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub add_stylesheet</td></tr>
<tr><td class="h">995</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L995">2</a></div></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $type, $href)= @_;</td></tr>
<tr><td class="h">996</td><td><div class="c3">2</div><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>7</div><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %text_type= map { $_ =&gt; 1 } qw( xsl css);</td></tr>
<tr><td class="h">997</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ss= $t-&gt;{twig_elt_class}-&gt;new( &#39;#PI&#39;);</td></tr>
<tr><td class="h">998</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L998">100</a></div></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $text_type{$type}) </td></tr>
<tr><td class="h">999</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $ss-&gt;_set_pi( &#39;xml-stylesheet&#39;, qq{type=&quot;text/$type&quot; href=&quot;$href&quot;}); }</td></tr>
<tr><td class="h">1000</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">1001</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;unsupported style sheet type &#39;$type&#39;&quot;; }</td></tr>
<tr><td class="h">1002</td><td colspan="7"></td></tr><tr><td class="h">1003</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;_add_cpi_outside_of_root( leading_cpi =&gt; $ss);</td></tr>
<tr><td class="h">1004</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t;</td></tr>
<tr><td class="h">1005</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1006</td><td colspan="7"></td></tr><tr><td class="h">1007</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">{ my %used;       # module =&gt; 1 if require ok, 0 otherwise</td></tr>
<tr><td class="h">1008</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my %disallowed; # for testing, refuses to _use modules in this hash</td></tr>
<tr><td class="h">1009</td><td colspan="7"></td></tr><tr><td class="h">1010</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub _disallow_use</td></tr>
<tr><td class="h">1011</td><td><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1011">5</a></div></td><td></td><td><div>213</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my( @modules)= @_;</td></tr>
<tr><td class="h">1012</td><td><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>11</div><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$disallowed{$_}= 1 foreach (@modules);</td></tr>
<tr><td class="h">1013</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1014</td><td colspan="7"></td></tr><tr><td class="h">1015</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub _allow_use</td></tr>
<tr><td class="h">1016</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1016">4</a></div></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my( @modules)= @_;</td></tr>
<tr><td class="h">1017</td><td><div class="c3">4</div><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>9</div><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$disallowed{$_}= 0 foreach (@modules);</td></tr>
<tr><td class="h">1018</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1019</td><td colspan="7"></td></tr><tr><td class="h">1020</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub _use</td></tr>
<tr><td class="h">1021</td><td><div class="c3">2964</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1021">2964</a></div></td><td></td><td><div>13260</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my( $module, $version)= @_;</td></tr>
<tr><td class="h">1022</td><td><div class="c3">2964</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L1022">100</a></div></td><td></td><td></td><td><div>12564</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$version ||= 0;</td></tr>
<tr><td class="h">1023</td><td><div class="c3">2964</div><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1023">100</a></div></td><td></td><td></td><td></td><td><div>9326</div><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $disallowed{$module})   { return 0; }</td></tr>
<tr><td class="h">1024</td><td><div class="c3">2959</div><div class="c3">2793</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1024">100</a></div></td><td></td><td></td><td></td><td><div>10412</div><div>23227</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $used{$module})         { return 1; }</td></tr>
<tr><td class="h">1025</td><td><div class="c3">166</div><div class="c3">163</div><div class="c3">163</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1025">100</a></div></td><td></td><td></td><td></td><td><div>10763</div><div>1669</div><div>6812</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( eval &quot;require $module&quot;) { import $module; $used{$module}= 1; </td></tr>
<tr><td class="h">1026</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1026">92</a></div></td><td></td><td><div>986</div><div>207</div><div>607</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no strict &#39;refs&#39;;</td></tr>
<tr><td class="h">1027</td><td><div class="c3">163</div><div class="c3">163</div><div class="c3">163</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L1027">50</a></div></td><td></td><td></td><td></td><td><div>353</div><div>1846</div><div>2250</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( ${&quot;${module}::VERSION&quot;} &gt;= $version ) { return 1; }</td></tr>
<tr><td class="h">1028</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else                                      { return 0; }</td></tr>
<tr><td class="h">1029</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1030</td><td><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>12</div><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else                        {                          $used{$module}= 0; return 0; }</td></tr>
<tr><td class="h">1031</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1032</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1033</td><td colspan="7"></td></tr><tr><td class="h">1034</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># used to solve the [n] predicates while avoiding getting the entire list</td></tr>
<tr><td class="h">1035</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _first_n(&amp;$@)        # needs a prototype to accept passing bare blocks</td></tr>
<tr><td class="h">1036</td><td><div class="c3">106</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1036">106</a></div></td><td></td><td><div>300</div></td><td class="s">&nbsp;&nbsp;{ my $coderef= shift;</td></tr>
<tr><td class="h">1037</td><td><div class="c3">106</div></td><td></td><td></td><td></td><td></td><td><div>222</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $n= shift;         </td></tr>
<tr><td class="h">1038</td><td><div class="c3">106</div></td><td></td><td></td><td></td><td></td><td><div>176</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $i=0;</td></tr>
<tr><td class="h">1039</td><td><div class="c3">106</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1039">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1039">100</a></div></td><td></td><td></td><td></td><td><div>303</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $n &gt; 0)</td></tr>
<tr><td class="h">1040</td><td><div class="c3">99</div><div class="c3">121</div><div class="c3">35</div><div class="c3">35</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1040">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1040">100</a></div></td><td></td><td></td><td></td><td><div>309</div><div>346</div><div>60</div><div>322</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ foreach (@_)         { if( &amp;$coderef) { $i++; return $_ if( $i == $n); } } }</td></tr>
<tr><td class="h">1041</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $n &lt; 0)</td></tr>
<tr><td class="h">1042</td><td><div class="c3">6</div><div class="c3">13</div><div class="c3">11</div><div class="c3">11</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1042">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1042">100</a></div></td><td></td><td></td><td></td><td><div>19</div><div>37</div><div>21</div><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ foreach (reverse @_) { if( &amp;$coderef) { $i--; return $_ if( $i == $n); } } }</td></tr>
<tr><td class="h">1043</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">1044</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;illegal position number 0&quot;; }</td></tr>
<tr><td class="h">1045</td><td><div class="c3">71</div></td><td></td><td></td><td></td><td></td><td><div>603</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return undef;</td></tr>
<tr><td class="h">1046</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1047</td><td colspan="7"></td></tr><tr><td class="h">1048</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _slurp_uri</td></tr>
<tr><td class="h">1049</td><td><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1049">10</a></div></td><td></td><td><div>306</div></td><td class="s">&nbsp;&nbsp;{ my( $uri, $base)= @_;</td></tr>
<tr><td class="h">1050</td><td><div class="c3">10</div><div class="c3">1</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1050">100</a></div></td><td></td><td></td><td></td><td><div>91</div><div>4</div><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $uri=~ m{^\w+://}) { _use( &#39;LWP::Simple&#39;); return LWP::Simple::get( $uri); }</td></tr>
<tr><td class="h">1051</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else                   { return _slurp( _based_filename( $uri, $base));        }</td></tr>
<tr><td class="h">1052</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1053</td><td colspan="7"></td></tr><tr><td class="h">1054</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _based_filename</td></tr>
<tr><td class="h">1055</td><td><div class="c3">25</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1055">25</a></div></td><td></td><td><div>431</div></td><td class="s">&nbsp;&nbsp;{ my( $filename, $base)= @_;</td></tr>
<tr><td class="h">1056</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# cf. XML/Parser.pm&#39;s file_ext_ent_handler</td></tr>
<tr><td class="h">1057</td><td><div class="c3">25</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1057">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1057">67</a></div></td><td></td><td></td><td><div>303</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (defined($base) and not ($filename =~ m{^(?:[\\/]|\w+:)})) </td></tr>
<tr><td class="h">1058</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>115</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $newpath = $base;</td></tr>
<tr><td class="h">1059</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$newpath =~ s{[^\\/:]*$}{$filename};</td></tr>
<tr><td class="h">1060</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$filename = $newpath;</td></tr>
<tr><td class="h">1061</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1062</td><td><div class="c3">25</div></td><td></td><td></td><td></td><td></td><td><div>319</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $filename;</td></tr>
<tr><td class="h">1063</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1064</td><td colspan="7"></td></tr><tr><td class="h">1065</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _slurp</td></tr>
<tr><td class="h">1066</td><td><div class="c3">17</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1066">17</a></div></td><td></td><td><div>170</div></td><td class="s">&nbsp;&nbsp;{ my( $filename)= @_;</td></tr>
<tr><td class="h">1067</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# use bareword filehandle to stay compatible with real old perl</td></tr>
<tr><td class="h">1068</td><td><div class="c3">17</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1068">100</a></div></td><td></td><td></td><td></td><td><div>462</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;open( TWIG_TO_SLURP, &quot;&lt;$filename&quot;) or croak &quot;cannot open &#39;$filename&#39;: $!&quot;; </td></tr>
<tr><td class="h">1069</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>113</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $/= undef;</td></tr>
<tr><td class="h">1070</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>257</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $content= &lt;TWIG_TO_SLURP&gt;;</td></tr>
<tr><td class="h">1071</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>101</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;close TWIG_TO_SLURP;</td></tr>
<tr><td class="h">1072</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>180</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $content;</td></tr>
<tr><td class="h">1073</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1074</td><td colspan="7"></td></tr><tr><td class="h">1075</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _slurp_fh</td></tr>
<tr><td class="h">1076</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1076">1</a></div></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;{ my( $fh)= @_;</td></tr>
<tr><td class="h">1077</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;local $/= undef;</td></tr>
<tr><td class="h">1078</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $content= &lt;$fh&gt;;</td></tr>
<tr><td class="h">1079</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $content;</td></tr>
<tr><td class="h">1080</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}    </td></tr>
<tr><td class="h">1081</td><td colspan="7"></td></tr><tr><td class="h">1082</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># I should really add extra options to allow better configuration of the </td></tr>
<tr><td class="h">1083</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># LWP::UserAgent object</td></tr>
<tr><td class="h">1084</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># this method forks (except on VMS!)</td></tr>
<tr><td class="h">1085</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#   - the child gets the data and copies it to the pipe,</td></tr>
<tr><td class="h">1086</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#   - the parent reads the stream and sends it to XML::Parser</td></tr>
<tr><td class="h">1087</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># the data is cut it chunks the size of the XML::Parser::Expat buffer</td></tr>
<tr><td class="h">1088</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># the method returns the twig and the status</td></tr>
<tr><td class="h">1089</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _parseurl</td></tr>
<tr><td class="h">1090</td><td><div class="c3">20</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1090">20</a></div></td><td></td><td><div>120</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $safe, $url, $agent)= @_;</td></tr>
<tr><td class="h">1091</td><td><div class="c3">20</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1091">50</a></div></td><td></td><td></td><td></td><td><div>72</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_use( &#39;LWP&#39;) || croak &quot;LWP not available, needed to use parseurl methods&quot;;</td></tr>
<tr><td class="h">1092</td><td><div class="c3">20</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L1092">50</a></div></td><td></td><td></td><td></td><td><div>153</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $^O ne &#39;VMS&#39;)</td></tr>
<tr><td class="h">1093</td><td><div class="c3">20</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1093">50</a></div></td><td></td><td></td><td></td><td><div>598</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ pipe( README, WRITEME) or croak  &quot;cannot create connected pipes: $!&quot;;</td></tr>
<tr><td class="h">1094</td><td><div class="c3">20</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1094">100</a></div></td><td></td><td></td><td></td><td><div>819327</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $pid= fork)</td></tr>
<tr><td class="h">1095</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # parent code: parse the incoming file</td></tr>
<tr><td class="h">1096</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>551</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;close WRITEME; # no need to write</td></tr>
<tr><td class="h">1097</td><td><div class="c3">15</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1097">100</a></div></td><td></td><td></td><td></td><td><div>851</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $result= $safe ? $t-&gt;safe_parse( \*README) : $t-&gt;parse( \*README);</td></tr>
<tr><td class="h">1098</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>285</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;close README;</td></tr>
<tr><td class="h">1099</td><td><div class="c3">15</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1099">100</a></div></td><td></td><td></td><td></td><td><div>237</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $@ ? 0 : $t;</td></tr>
<tr><td class="h">1100</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1101</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">1102</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # child</td></tr>
<tr><td class="h">1103</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>583</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;close README; # no need to read</td></tr>
<tr><td class="h">1104</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>178</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$|=1;</td></tr>
<tr><td class="h">1105</td><td><div class="c3">5</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1105">67</a></div></td><td></td><td></td><td><div>530</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$agent    ||= LWP::UserAgent-&gt;new;</td></tr>
<tr><td class="h">1106</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>397</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $request  = HTTP::Request-&gt;new( GET =&gt; $url);</td></tr>
<tr><td class="h">1107</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# _pass_url_content is called with chunks of data the same size as</td></tr>
<tr><td class="h">1108</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# the XML::Parser buffer </td></tr>
<tr><td class="h">1109</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $response = $agent-&gt;request( $request, </td></tr>
<tr><td class="h">1110</td><td><div class="c3">5</div><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1110">4</a></div></td><td></td><td><div>275</div><div>92</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sub { _pass_url_content( \*WRITEME, @_); }, BUFSIZE);</td></tr>
<tr><td class="h">1111</td><td><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1111">100</a></div></td><td></td><td></td><td></td><td><div>67</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$response-&gt;is_success or croak &quot;$url &quot;, $response-&gt;message;</td></tr>
<tr><td class="h">1112</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>84</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;close WRITEME;</td></tr>
<tr><td class="h">1113</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CORE::exit(); # CORE is there for mod_perl (which redefines exit)</td></tr>
<tr><td class="h">1114</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1115</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} </td></tr>
<tr><td class="h">1116</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else </td></tr>
<tr><td class="h">1117</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $|=1;</td></tr>
<tr><td class="h">1118</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1118">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$agent    ||= LWP::UserAgent-&gt;new;</td></tr>
<tr><td class="h">1119</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $request  = HTTP::Request-&gt;new( GET =&gt; $url);</td></tr>
<tr><td class="h">1120</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $response = $agent-&gt;request( $request);</td></tr>
<tr><td class="h">1121</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L1121">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$response-&gt;is_success or croak &quot;$url &quot;, $response-&gt;message;</td></tr>
<tr><td class="h">1122</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L1122">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $result= $safe ? $t-&gt;safe_parse($response-&gt;content) : $t-&gt;parse($response-&gt;content);</td></tr>
<tr><td class="h">1123</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L1123">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $@ ? 0 : $t;</td></tr>
<tr><td class="h">1124</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1125</td><td colspan="7"></td></tr><tr><td class="h">1126</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1127</td><td colspan="7"></td></tr><tr><td class="h">1128</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># get the (hopefully!) XML data from the URL and </td></tr>
<tr><td class="h">1129</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _pass_url_content</td></tr>
<tr><td class="h">1130</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1130">4</a></div></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;{ my( $fh, $data, $response, $protocol)= @_;</td></tr>
<tr><td class="h">1131</td><td><div class="c3">4</div><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>9</div><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;print {$fh} $data;</td></tr>
<tr><td class="h">1132</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1133</td><td colspan="7"></td></tr><tr><td class="h">1134</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub add_options</td></tr>
<tr><td class="h">1135</td><td><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1135">1</a></div></td><td></td><td><div>310</div><div>6</div></td><td class="s">&nbsp;&nbsp;{ my %args= map { $_, 1 } @_;</td></tr>
<tr><td class="h">1136</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;%args= _normalize_args( %args);</td></tr>
<tr><td class="h">1137</td><td><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach (keys %args) { $valid_option{$_}++; } </td></tr>
<tr><td class="h">1138</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1139</td><td colspan="7"></td></tr><tr><td class="h">1140</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1140">0</a></div></td><td></td><td><div>0</div></td><td class="s">sub _pretty_print_styles { return XML::Twig::Elt::_pretty_print_styles(); }</td></tr>
<tr><td class="h">1141</td><td colspan="7"></td></tr><tr><td class="h">1142</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_store_internal_dtd</td></tr>
<tr><td class="h">1143</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;{ </td></tr>
<tr><td class="h">1144</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;# warn &quot; in _twig_store_internal_dtd...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">1145</td><td><div class="c3">160</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1145">160</a></div></td><td></td><td><div>707</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $p, $string)= @_;</td></tr>
<tr><td class="h">1146</td><td><div class="c3">160</div></td><td></td><td></td><td></td><td></td><td><div>545</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t= $p-&gt;{twig};</td></tr>
<tr><td class="h">1147</td><td><div class="c3">160</div><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1147">100</a></div></td><td></td><td></td><td></td><td><div>632</div><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_keep_encoding}) { $string= $p-&gt;original_string(); }</td></tr>
<tr><td class="h">1148</td><td><div class="c3">160</div></td><td></td><td></td><td></td><td></td><td><div>707</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_doctype}-&gt;{internal} .= $string;</td></tr>
<tr><td class="h">1149</td><td><div class="c3">160</div></td><td></td><td></td><td></td><td></td><td><div>302</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1150</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1151</td><td colspan="7"></td></tr><tr><td class="h">1152</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_stop_storing_internal_dtd</td></tr>
<tr><td class="h">1153</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_stop_storing_internal_dtd...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">1154</td><td><div class="c3">76</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1154">76</a></div></td><td></td><td><div>251</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $p= shift;</td></tr>
<tr><td class="h">1155</td><td><div class="c3">76</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L1155">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1155">33</a></div></td><td></td><td></td><td><div>719</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( @saved_default_handler &amp;&amp; defined $saved_default_handler[1])</td></tr>
<tr><td class="h">1156</td><td><div class="c3">76</div></td><td></td><td></td><td></td><td></td><td><div>371</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $p-&gt;setHandlers( @saved_default_handler); }</td></tr>
<tr><td class="h">1157</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">1158</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $t= $p-&gt;{twig};</td></tr>
<tr><td class="h">1159</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$p-&gt;setHandlers( Default =&gt; undef);</td></tr>
<tr><td class="h">1160</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1161</td><td><div class="c3">76</div></td><td></td><td></td><td></td><td></td><td><div>6050</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$p-&gt;{twig}-&gt;{twig_doctype}-&gt;{internal}=~ s{^\s*\[}{};</td></tr>
<tr><td class="h">1162</td><td><div class="c3">76</div></td><td></td><td></td><td></td><td></td><td><div>470</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$p-&gt;{twig}-&gt;{twig_doctype}-&gt;{internal}=~ s{\]\s*$}{};</td></tr>
<tr><td class="h">1163</td><td><div class="c3">76</div></td><td></td><td></td><td></td><td></td><td><div>164</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1164</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1165</td><td colspan="7"></td></tr><tr><td class="h">1166</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_doctype_fin_print</td></tr>
<tr><td class="h">1167</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;{ # warn &quot; in _twig_doctype_fin_print...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">1168</td><td><div class="c3">16</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1168">16</a></div></td><td></td><td><div>64</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $p)= shift;</td></tr>
<tr><td class="h">1169</td><td><div class="c3">16</div><div class="c3">6</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1169">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1169">67</a></div></td><td></td><td></td><td><div>166</div><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $p-&gt;{twig}-&gt;{twig_doctype}-&gt;{has_internal} &amp;&amp; !$expat_1_95_2) { print &#39; ]&gt;&#39;; }</td></tr>
<tr><td class="h">1170</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1171</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1172</td><td colspan="7"></td></tr><tr><td class="h">1173</td><td colspan="7"></td></tr><tr><td class="h">1174</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _normalize_args</td></tr>
<tr><td class="h">1175</td><td><div class="c3">7340</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1175">7340</a></div></td><td></td><td><div>12321</div></td><td class="s">&nbsp;&nbsp;{ my %normalized_args;</td></tr>
<tr><td class="h">1176</td><td><div class="c3">7340</div></td><td></td><td></td><td></td><td></td><td><div>32589</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( my $key= shift )</td></tr>
<tr><td class="h">1177</td><td><div class="c3">5133</div><div class="c3">6843</div></td><td></td><td></td><td></td><td></td><td><div>22873</div><div>29228</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $key= join &#39;&#39;, map { ucfirst } split /_/, $key;</td></tr>
<tr><td class="h">1178</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#$key= &quot;Twig&quot;.$key unless( substr( $key, 0, 4) eq &#39;Twig&#39;);</td></tr>
<tr><td class="h">1179</td><td><div class="c3">5133</div></td><td></td><td></td><td></td><td></td><td><div>35544</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$normalized_args{$key}= shift ;</td></tr>
<tr><td class="h">1180</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1181</td><td><div class="c3">7340</div></td><td></td><td></td><td></td><td></td><td><div>43588</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return %normalized_args;</td></tr>
<tr><td class="h">1182</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}    </td></tr>
<tr><td class="h">1183</td><td colspan="7"></td></tr><tr><td class="h">1184</td><td><div class="c3">3593</div><div class="c3">972</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1184">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1184">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1184">67</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1184">3593</a></div></td><td></td><td><div>12885</div><div>2083</div></td><td class="s">sub _is_fh { return unless $_[0]; return $_[0] if( isa( $_[0], &#39;GLOB&#39;) || isa( $_[0], &#39;IO::Scalar&#39;)); }</td></tr>
<tr><td class="h">1185</td><td colspan="7"></td></tr><tr><td class="h">1186</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _set_handler</td></tr>
<tr><td class="h">1187</td><td><div class="c3">552</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1187">552</a></div></td><td></td><td><div>2382</div></td><td class="s">&nbsp;&nbsp;{ my( $handlers, $path, $handler)= @_;</td></tr>
<tr><td class="h">1188</td><td colspan="7"></td></tr><tr><td class="h">1189</td><td><div class="c3">552</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L1189">100</a></div></td><td></td><td></td><td><div>6167</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $prev_handler= $handlers-&gt;{handlers}-&gt;{string}-&gt;{$path} || undef;</td></tr>
<tr><td class="h">1190</td><td colspan="7"></td></tr><tr><td class="h">1191</td><td><div class="c3">552</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1191">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L1191">100</a></div></td><td></td><td></td><td><div>1997</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_set_special_handler         ( $handlers, $path, $handler, $prev_handler)</td></tr>
<tr><td class="h">1192</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;|| _set_pi_handler              ( $handlers, $path, $handler, $prev_handler)</td></tr>
<tr><td class="h">1193</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;|| _set_level_handler           ( $handlers, $path, $handler, $prev_handler)</td></tr>
<tr><td class="h">1194</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;|| _set_regexp_handler          ( $handlers, $path, $handler, $prev_handler)</td></tr>
<tr><td class="h">1195</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;|| _set_xpath_handler           ( $handlers, $path, $handler, $prev_handler)</td></tr>
<tr><td class="h">1196</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;|| croak &quot;unrecognized expression in handler: &#39;$path&#39;&quot;;</td></tr>
<tr><td class="h">1197</td><td colspan="7"></td></tr><tr><td class="h">1198</td><td colspan="7"></td></tr><tr><td class="h">1199</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# this both takes care of the simple (gi) handlers and store</td></tr>
<tr><td class="h">1200</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# the handler code reference for other handlers</td></tr>
<tr><td class="h">1201</td><td><div class="c3">546</div></td><td></td><td></td><td></td><td></td><td><div>3853</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$handlers-&gt;{handlers}-&gt;{string}-&gt;{$path}= $handler;</td></tr>
<tr><td class="h">1202</td><td colspan="7"></td></tr><tr><td class="h">1203</td><td><div class="c3">546</div></td><td></td><td></td><td></td><td></td><td><div>2762</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $prev_handler;</td></tr>
<tr><td class="h">1204</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1205</td><td colspan="7"></td></tr><tr><td class="h">1206</td><td colspan="7"></td></tr><tr><td class="h">1207</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _set_special_handler</td></tr>
<tr><td class="h">1208</td><td><div class="c3">552</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1208">552</a></div></td><td></td><td><div>2450</div></td><td class="s">&nbsp;&nbsp;{ my( $handlers, $path, $handler, $prev_handler)= @_;</td></tr>
<tr><td class="h">1209</td><td><div class="c3">552</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1209">100</a></div></td><td></td><td></td><td></td><td><div>5660</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $path =~ m{^\s*($ALL|$DEFAULT|#COMMENT)\s*$}io )</td></tr>
<tr><td class="h">1210</td><td><div class="c3">25</div></td><td></td><td></td><td></td><td></td><td><div>168</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $handlers-&gt;{handlers}-&gt;{$1}= $handler; </td></tr>
<tr><td class="h">1211</td><td><div class="c3">25</div></td><td></td><td></td><td></td><td></td><td><div>348</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">1212</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1213</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else </td></tr>
<tr><td class="h">1214</td><td><div class="c3">527</div></td><td></td><td></td><td></td><td></td><td><div>4859</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return 0; }</td></tr>
<tr><td class="h">1215</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1216</td><td colspan="7"></td></tr><tr><td class="h">1217</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _set_xpath_handler</td></tr>
<tr><td class="h">1218</td><td><div class="c3">512</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1218">512</a></div></td><td></td><td><div>2151</div></td><td class="s">&nbsp;&nbsp;{ my( $handlers, $path, $handler, $prev_handler)= @_;</td></tr>
<tr><td class="h">1219</td><td><div class="c3">512</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1219">100</a></div></td><td></td><td></td><td></td><td><div>1759</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $handler_data= _parse_xpath_handler( $path, $handler))</td></tr>
<tr><td class="h">1220</td><td><div class="c3">506</div></td><td></td><td></td><td></td><td></td><td><div>1995</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ _add_handler( $handlers, $handler_data, $path, $prev_handler);</td></tr>
<tr><td class="h">1221</td><td><div class="c3">506</div></td><td></td><td></td><td></td><td></td><td><div>5107</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">1222</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1223</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else </td></tr>
<tr><td class="h">1224</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>62</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return 0; }</td></tr>
<tr><td class="h">1225</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1226</td><td colspan="7"></td></tr><tr><td class="h">1227</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _add_handler</td></tr>
<tr><td class="h">1228</td><td><div class="c3">512</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1228">512</a></div></td><td></td><td><div>2383</div></td><td class="s">&nbsp;&nbsp;{ my( $handlers, $handler_data, $path, $prev_handler)= @_;</td></tr>
<tr><td class="h">1229</td><td colspan="7"></td></tr><tr><td class="h">1230</td><td><div class="c3">512</div></td><td></td><td></td><td></td><td></td><td><div>2228</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tag= $handler_data-&gt;{tag};</td></tr>
<tr><td class="h">1231</td><td><div class="c3">512</div><div class="c3">114</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1231">100</a></div></td><td></td><td></td><td></td><td><div>3088</div><div>742</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @handlers= $handlers-&gt;{xpath_handler}-&gt;{$tag} ? @{$handlers-&gt;{xpath_handler}-&gt;{$tag}} : ();</td></tr>
<tr><td class="h">1232</td><td colspan="7"></td></tr><tr><td class="h">1233</td><td><div class="c3">512</div><div class="c3">61</div><div class="c3">151</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1233">100</a></div></td><td></td><td></td><td></td><td><div>1710</div><div>168</div><div>782</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $prev_handler) { @handlers= grep { $_-&gt;{path} ne $path } @handlers; }</td></tr>
<tr><td class="h">1234</td><td colspan="7"></td></tr><tr><td class="h">1235</td><td><div class="c3">512</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1235">100</a></div></td><td></td><td></td><td></td><td><div>2589</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;push @handlers, $handler_data if( $handler_data-&gt;{handler});</td></tr>
<tr><td class="h">1236</td><td colspan="7"></td></tr><tr><td class="h">1237</td><td colspan="7"></td></tr><tr><td class="h">1238</td><td><div class="c3">512</div><div class="c3">249</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1238">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1238">50</a></div><div class="c1"><a href="blib-lib-XML-Twig-pm--condition.html#L1238">75</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1238">50</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1238">50</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1238">50</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1238">50</a></div><div class="c1"><a href="blib-lib-XML-Twig-pm--condition.html#L1238">75</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1238">50</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1238">50</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L1238">100</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L1238">100</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1238">50</a></div></td><td></td><td></td><td><div>1711</div><div>14676</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;@handlers= sort {    (($a-&gt;{score}-&gt;{type}        || 0)  &lt;=&gt;  ($b-&gt;{score}-&gt;{type}        || 0))</td></tr>
<tr><td class="h">1239</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| (($b-&gt;{score}-&gt;{anchored}    || 0)  &lt;=&gt;  ($a-&gt;{score}-&gt;{anchored}    || 0))</td></tr>
<tr><td class="h">1240</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| (($b-&gt;{score}-&gt;{steps}       || 0)  &lt;=&gt;  ($a-&gt;{score}-&gt;{steps}       || 0))</td></tr>
<tr><td class="h">1241</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| (($b-&gt;{score}-&gt;{predicates}  || 0)  &lt;=&gt;  ($a-&gt;{score}-&gt;{predicates}  || 0))</td></tr>
<tr><td class="h">1242</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| (($b-&gt;{score}-&gt;{tests}       || 0)  &lt;=&gt;  ($a-&gt;{score}-&gt;{tests}       || 0))</td></tr>
<tr><td class="h">1243</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| ($a-&gt;{path} cmp $a-&gt;{path})</td></tr>
<tr><td class="h">1244</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} @handlers;</td></tr>
<tr><td class="h">1245</td><td colspan="7"></td></tr><tr><td class="h">1246</td><td><div class="c3">512</div></td><td></td><td></td><td></td><td></td><td><div>3845</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$handlers-&gt;{xpath_handler}-&gt;{$tag}= \@handlers;</td></tr>
<tr><td class="h">1247</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1248</td><td colspan="7"></td></tr><tr><td class="h">1249</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _set_pi_handler</td></tr>
<tr><td class="h">1250</td><td><div class="c3">527</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1250">527</a></div></td><td></td><td><div>2521</div></td><td class="s">&nbsp;&nbsp;{ my( $handlers, $path, $handler, $prev_handler)= @_;</td></tr>
<tr><td class="h">1251</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# PI conditions ( &#39;?target&#39; =&gt; \&amp;handler or &#39;?&#39; =&gt; \&amp;handler</td></tr>
<tr><td class="h">1252</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#             or &#39;#PItarget&#39; =&gt; \&amp;handler or &#39;#PI&#39; =&gt; \&amp;handler)</td></tr>
<tr><td class="h">1253</td><td><div class="c3">527</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1253">100</a></div></td><td></td><td></td><td></td><td><div>3239</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $path=~ /^\s*(?:\?|#PI)\s*(?:([^\s]*)\s*)$/)</td></tr>
<tr><td class="h">1254</td><td><div class="c3">9</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L1254">100</a></div></td><td></td><td></td><td><div>74</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $target= $1 || &#39;&#39;;</td></tr>
<tr><td class="h">1255</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# update the path_handlers count, knowing that</td></tr>
<tr><td class="h">1256</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# either the previous or the new handler can be undef</td></tr>
<tr><td class="h">1257</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>60</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$handlers-&gt;{pi_handlers}-&gt;{$1}= $handler;</td></tr>
<tr><td class="h">1258</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>104</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">1259</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1260</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else </td></tr>
<tr><td class="h">1261</td><td><div class="c3">518</div></td><td></td><td></td><td></td><td></td><td><div>5524</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return 0; </td></tr>
<tr><td class="h">1262</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1263</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1264</td><td colspan="7"></td></tr><tr><td class="h">1265</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _set_level_handler</td></tr>
<tr><td class="h">1266</td><td><div class="c3">518</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1266">518</a></div></td><td></td><td><div>2429</div></td><td class="s">&nbsp;&nbsp;{ my( $handlers, $path, $handler, $prev_handler)= @_;</td></tr>
<tr><td class="h">1267</td><td><div class="c3">518</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1267">100</a></div></td><td></td><td></td><td></td><td><div>1852</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $path =~ m{^ \s* level \s* \( \s* ([0-9]+) \s* \) \s* $}ox )</td></tr>
<tr><td class="h">1268</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $level= $1;</td></tr>
<tr><td class="h">1269</td><td><div class="c3">3</div><div class="c3">13</div><div class="c3">13</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1269">67</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1269">13</a></div></td><td></td><td><div>23</div><div>34</div><div>217</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $sub= sub { my( $stack)= @_; return( ($stack-&gt;[-1]-&gt;{_tag} !~ m{^#}) &amp;&amp; (scalar @$stack == $level + 1) ) }; </td></tr>
<tr><td class="h">1270</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $handler_data=  { tag=&gt; &#39;*&#39;, score =&gt; { type =&gt; $LEVEL_TRIGGER}, trigger =&gt; $sub, </td></tr>
<tr><td class="h">1271</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path =&gt; $path, handler =&gt; $handler, test_on_text =&gt; 0</td></tr>
<tr><td class="h">1272</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">1273</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_add_handler( $handlers, $handler_data, $path, $prev_handler);</td></tr>
<tr><td class="h">1274</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">1275</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1276</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else </td></tr>
<tr><td class="h">1277</td><td><div class="c3">515</div></td><td></td><td></td><td></td><td></td><td><div>5315</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return 0; }</td></tr>
<tr><td class="h">1278</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1279</td><td colspan="7"></td></tr><tr><td class="h">1280</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _set_regexp_handler</td></tr>
<tr><td class="h">1281</td><td><div class="c3">515</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1281">515</a></div></td><td></td><td><div>2318</div></td><td class="s">&nbsp;&nbsp;{ my( $handlers, $path, $handler, $prev_handler)= @_; </td></tr>
<tr><td class="h">1282</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# if the expression was a regexp it is now a string (it was stringified when it became a hash key)</td></tr>
<tr><td class="h">1283</td><td><div class="c3">515</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1283">100</a></div></td><td></td><td></td><td></td><td><div>1866</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $path=~ m{^\(\?([xism]*)(?:-[xism]*)?:(.*)\)$}) </td></tr>
<tr><td class="h">1284</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>74</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $regexp= qr/(?$1:$2)/; # convert it back into a regexp</td></tr>
<tr><td class="h">1285</td><td><div class="c3">3</div><div class="c3">21</div><div class="c3">21</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1285">21</a></div></td><td></td><td><div>24</div><div>56</div><div>247</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $sub= sub { my( $stack)= @_; return( $stack-&gt;[-1]-&gt;{_tag} =~ $regexp ) }; </td></tr>
<tr><td class="h">1286</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>36</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $handler_data=  { tag=&gt; &#39;*&#39;, score =&gt; { type =&gt; $REGEXP_TRIGGER} , trigger =&gt; $sub, </td></tr>
<tr><td class="h">1287</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path =&gt; $path, handler =&gt; $handler, test_on_text =&gt; 0 </td></tr>
<tr><td class="h">1288</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">1289</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_add_handler( $handlers, $handler_data, $path, $prev_handler);</td></tr>
<tr><td class="h">1290</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">1291</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1292</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else </td></tr>
<tr><td class="h">1293</td><td><div class="c3">512</div></td><td></td><td></td><td></td><td></td><td><div>4785</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return 0; }</td></tr>
<tr><td class="h">1294</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1295</td><td colspan="7"></td></tr><tr><td class="h">1296</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _parse_xpath_handler</td></tr>
<tr><td class="h">1297</td><td><div class="c3">512</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1297">512</a></div></td><td></td><td><div>1700</div></td><td class="s">&nbsp;&nbsp;{ my( $xpath, $handler)= @_;</td></tr>
<tr><td class="h">1298</td><td><div class="c3">512</div></td><td></td><td></td><td></td><td></td><td><div>1268</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $xpath_original= $xpath;</td></tr>
<tr><td class="h">1299</td><td colspan="7"></td></tr><tr><td class="h">1300</td><td><div class="c3">512</div></td><td></td><td></td><td></td><td></td><td><div>1026</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $DEBUG_HANDLER= 0; # 0 or 1 (output the handler checking code) or 2 (super verbose)</td></tr>
<tr><td class="h">1301</td><td colspan="7"></td></tr><tr><td class="h">1302</td><td><div class="c3">512</div><div class="c0">0</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1302">50</a></div></td><td></td><td></td><td></td><td><div>1730</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $DEBUG_HANDLER &gt;=1) { warn &quot;\n\nparsing path &#39;$xpath&#39;\n&quot;; }</td></tr>
<tr><td class="h">1303</td><td colspan="7"></td></tr><tr><td class="h">1304</td><td><div class="c3">512</div></td><td></td><td></td><td></td><td></td><td><div>1120</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $path_to_check= $xpath;</td></tr>
<tr><td class="h">1305</td><td><div class="c3">512</div></td><td></td><td></td><td></td><td></td><td><div>14387</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$path_to_check=~ s{/?/?$REG_NAME_W?\s*(?:$REG_PREDICATE\s*)?}{}g;</td></tr>
<tr><td class="h">1306</td><td><div class="c3">512</div><div class="c0">0</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1306">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1306">33</a></div></td><td></td><td></td><td><div>2295</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $DEBUG_HANDLER &amp;&amp; $path_to_check=~ /\S/) { warn &quot;left: $path_to_check\n&quot;; }</td></tr>
<tr><td class="h">1307</td><td><div class="c3">512</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1307">100</a></div></td><td></td><td></td><td></td><td><div>1491</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return if( $path_to_check=~ /\S/);</td></tr>
<tr><td class="h">1308</td><td colspan="7"></td></tr><tr><td class="h">1309</td><td><div class="c3">510</div></td><td></td><td></td><td></td><td></td><td><div>4311</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;(my $xpath_to_display= $xpath)=~ s{([&quot;{}&#39;\[\]\@\$])}{\\$1}g;</td></tr>
<tr><td class="h">1310</td><td colspan="7"></td></tr><tr><td class="h">1311</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#my @xpath_steps= split /(?&lt;!\\)(\/\/?)/, $xpath; </td></tr>
<tr><td class="h">1312</td><td><div class="c3">510</div></td><td></td><td></td><td></td><td></td><td><div>885</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @xpath_steps;</td></tr>
<tr><td class="h">1313</td><td><div class="c3">510</div></td><td></td><td></td><td></td><td></td><td><div>750</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $last_token_is_sep;</td></tr>
<tr><td class="h">1314</td><td><div class="c3">510</div></td><td></td><td></td><td></td><td></td><td><div>14772</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $xpath=~ s{^\s*</td></tr>
<tr><td class="h">1315</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( (//?)                                      # separator</td></tr>
<tr><td class="h">1316</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (?:$REG_NAME_W\s*(?:$REG_PREDICATE\s*)?) # tag name and optional predicate</td></tr>
<tr><td class="h">1317</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (?:$REG_PREDICATE)                       # just a predicate</td></tr>
<tr><td class="h">1318</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">1319</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1320</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{}x</td></tr>
<tr><td class="h">1321</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">1322</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # check that we have alternating separators and steps</td></tr>
<tr><td class="h">1323</td><td><div class="c3">629</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1323">100</a></div></td><td></td><td></td><td></td><td><div>2693</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $2) # found a separator</td></tr>
<tr><td class="h">1324</td><td><div class="c3">71</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1324">100</a></div></td><td></td><td></td><td></td><td><div>194</div><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if(  $last_token_is_sep) { return 0; } # 2 seps in a row</td></tr>
<tr><td class="h">1325</td><td><div class="c3">70</div></td><td></td><td></td><td></td><td></td><td><div>149</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$last_token_is_sep= 1;</td></tr>
<tr><td class="h">1326</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1327</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">1328</td><td><div class="c3">558</div><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1328">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L1328">100</a></div></td><td></td><td></td><td><div>2494</div><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( defined( $last_token_is_sep) &amp;&amp; !$last_token_is_sep) { return 0; } # 2 steps in a row</td></tr>
<tr><td class="h">1329</td><td><div class="c3">556</div></td><td></td><td></td><td></td><td></td><td><div>1226</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$last_token_is_sep= 0;</td></tr>
<tr><td class="h">1330</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1331</td><td colspan="7"></td></tr><tr><td class="h">1332</td><td><div class="c3">626</div></td><td></td><td></td><td></td><td></td><td><div>7499</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @xpath_steps, $1;</td></tr>
<tr><td class="h">1333</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1334</td><td><div class="c3">507</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1334">100</a></div></td><td></td><td></td><td></td><td><div>1295</div><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $last_token_is_sep) { return 0; } # expression cannot end with a separator </td></tr>
<tr><td class="h">1335</td><td colspan="7"></td></tr><tr><td class="h">1336</td><td><div class="c3">506</div></td><td></td><td></td><td></td><td></td><td><div>950</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $i=-1;</td></tr>
<tr><td class="h">1337</td><td colspan="7"></td></tr><tr><td class="h">1338</td><td><div class="c3">506</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1338">33</a></div></td><td></td><td></td><td><div>3273</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $perlfunc= _join_n( $NO_WARNINGS . &#39;;&#39;,</td></tr>
<tr><td class="h">1339</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q|my( $stack)= @_;                    |,</td></tr>
<tr><td class="h">1340</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q|my @current_elts= (scalar @$stack); |,</td></tr>
<tr><td class="h">1341</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q|my @new_current_elts;               |,</td></tr>
<tr><td class="h">1342</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q|my $elt;                            |,</td></tr>
<tr><td class="h">1343</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($DEBUG_HANDLER &gt;= 1) &amp;&amp; (qq#warn q{checking path &#39;$xpath_to_display&#39;\n};#),</td></tr>
<tr><td class="h">1344</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1345</td><td colspan="7"></td></tr><tr><td class="h">1346</td><td colspan="7"></td></tr><tr><td class="h">1347</td><td><div class="c3">506</div></td><td></td><td></td><td></td><td></td><td><div>1250</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $last_tag=&#39;&#39;;</td></tr>
<tr><td class="h">1348</td><td><div class="c3">506</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1348">100</a></div></td><td></td><td></td><td></td><td><div>2111</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $anchored= $xpath_original=~ m{^\s*/(?!/)} ? 1 : 0; </td></tr>
<tr><td class="h">1349</td><td><div class="c3">506</div></td><td></td><td></td><td></td><td></td><td><div>2804</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $score={ type =&gt; $XPATH_TRIGGER, anchored =&gt; $anchored };</td></tr>
<tr><td class="h">1350</td><td><div class="c3">506</div></td><td></td><td></td><td></td><td></td><td><div>1843</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $flag= { test_on_text =&gt; 0 };</td></tr>
<tr><td class="h">1351</td><td><div class="c3">506</div></td><td></td><td></td><td></td><td></td><td><div>1315</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $sep=&#39;/&#39;;  # &#39;/&#39; or &#39;//&#39;</td></tr>
<tr><td class="h">1352</td><td><div class="c3">506</div></td><td></td><td></td><td></td><td></td><td><div>2300</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( my $xpath_step= pop @xpath_steps)</td></tr>
<tr><td class="h">1353</td><td><div class="c3">553</div></td><td></td><td></td><td></td><td></td><td><div>7384</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my( $tag, $predicate)= $xpath_step =~ m{^($REG_NAME_W)?(?:\[(.*)\])?\s*$};</td></tr>
<tr><td class="h">1354</td><td><div class="c3">553</div></td><td></td><td></td><td></td><td></td><td><div>2242</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$score-&gt;{steps}++;</td></tr>
<tr><td class="h">1355</td><td><div class="c3">553</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L1355">100</a></div></td><td></td><td></td><td><div>1817</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tag||=&#39;*&#39;;</td></tr>
<tr><td class="h">1356</td><td colspan="7"></td></tr><tr><td class="h">1357</td><td><div class="c3">553</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1357">50</a></div></td><td></td><td></td><td></td><td><div>1901</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $warn_empty_stack= $DEBUG_HANDLER &gt;= 2 ? qq{warn &quot;return with empty stack\\n&quot;;} : &#39;&#39;;</td></tr>
<tr><td class="h">1358</td><td colspan="7"></td></tr><tr><td class="h">1359</td><td><div class="c3">553</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1359">100</a></div></td><td></td><td></td><td></td><td><div>1434</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $predicate)</td></tr>
<tr><td class="h">1360</td><td><div class="c3">169</div><div class="c0">0</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1360">50</a></div></td><td></td><td></td><td></td><td><div>481</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $DEBUG_HANDLER &gt;= 2)  { warn &quot;predicate is: &#39;$predicate&#39;\n&quot;; }</td></tr>
<tr><td class="h">1361</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# changes $predicate (from an XPath expression to a Perl one)</td></tr>
<tr><td class="h">1362</td><td><div class="c3">169</div></td><td></td><td></td><td></td><td></td><td><div>549</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_parse_predicate_in_handler( $predicate, $flag, $score);</td></tr>
<tr><td class="h">1363</td><td><div class="c3">169</div><div class="c0">0</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1363">50</a></div></td><td></td><td></td><td></td><td><div>820</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $DEBUG_HANDLER &gt;= 2) { warn &quot;predicate becomes: &#39;$predicate&#39;\n&quot;; }</td></tr>
<tr><td class="h">1364</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1365</td><td colspan="7"></td></tr><tr><td class="h">1366</td><td><div class="c3">553</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1366">100</a></div></td><td></td><td></td><td></td><td><div>2643</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $tag_cond=  $tag ne &#39;*&#39; ? qq#(\$elt-&gt;{_tag} eq &quot;$tag&quot;)# : &#39;&#39;;</td></tr>
<tr><td class="h">1367</td><td><div class="c3">553</div><div class="c3">1106</div></td><td></td><td></td><td></td><td></td><td><div>1517</div><div>3517</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $cond= join( &quot; &amp;&amp; &quot;, grep { $_ } $tag_cond, $predicate);</td></tr>
<tr><td class="h">1368</td><td colspan="7"></td></tr><tr><td class="h">1369</td><td><div class="c3">553</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1369">67</a></div></td><td></td><td></td><td><div>1956</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$last_tag ||= $tag;</td></tr>
<tr><td class="h">1370</td><td colspan="7"></td></tr><tr><td class="h">1371</td><td colspan="7"></td></tr><tr><td class="h">1372</td><td><div class="c3">553</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1372">100</a></div><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L1372">50</a></div></td><td></td><td></td><td></td><td><div>1677</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $sep eq &#39;/&#39;)</td></tr>
<tr><td class="h">1373</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">1374</td><td><div class="c3">552</div></td><td></td><td></td><td></td><td></td><td><div>2181</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$perlfunc .= sprintf( _join_n(  q#foreach my $current_elt (@current_elts)              #,</td></tr>
<tr><td class="h">1375</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q#  { next if( !$current_elt);                         #,</td></tr>
<tr><td class="h">1376</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q#    $current_elt--;                                  #,</td></tr>
<tr><td class="h">1377</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q#    $elt= $stack-&gt;[$current_elt];                    #,</td></tr>
<tr><td class="h">1378</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q#    if( %s) { push @new_current_elts, $current_elt;} #,</td></tr>
<tr><td class="h">1379</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q#  }                                                  #,</td></tr>
<tr><td class="h">1380</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;),</td></tr>
<tr><td class="h">1381</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$cond</td></tr>
<tr><td class="h">1382</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1383</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1384</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $sep eq &#39;//&#39;)</td></tr>
<tr><td class="h">1385</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">1386</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$perlfunc .= sprintf( _join_n(  q#foreach my $current_elt (@current_elts)                #,</td></tr>
<tr><td class="h">1387</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q#  { next if( !$current_elt);                           #,</td></tr>
<tr><td class="h">1388</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q#    $current_elt--;                                    #,</td></tr>
<tr><td class="h">1389</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q#    my $candidate= $current_elt;                       #,</td></tr>
<tr><td class="h">1390</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q#    while( $candidate &gt;=0)                             #,</td></tr>
<tr><td class="h">1391</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q#      { $elt= $stack-&gt;[$candidate];                    #,</td></tr>
<tr><td class="h">1392</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q#        if( %s) { push @new_current_elts, $candidate;} #,</td></tr>
<tr><td class="h">1393</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q#        $candidate--;                                  #,</td></tr>
<tr><td class="h">1394</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q#      }                                                #,</td></tr>
<tr><td class="h">1395</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q#  }                                                    #,</td></tr>
<tr><td class="h">1396</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;),</td></tr>
<tr><td class="h">1397</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$cond</td></tr>
<tr><td class="h">1398</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1399</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1400</td><td><div class="c3">553</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1400">50</a></div></td><td></td><td></td><td></td><td><div>2505</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $warn= $DEBUG_HANDLER &gt;= 2 ? _join_n( qq#warn qq%fail at cond &#39;$cond&#39;%;#) : &#39;&#39;;</td></tr>
<tr><td class="h">1401</td><td><div class="c3">553</div></td><td></td><td></td><td></td><td></td><td><div>1857</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$perlfunc .= sprintf( _join_n( q#unless( @new_current_elts) { %s return 0; } #,</td></tr>
<tr><td class="h">1402</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q#@current_elts= @new_current_elts;           #,</td></tr>
<tr><td class="h">1403</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q#@new_current_elts=();                       #,</td></tr>
<tr><td class="h">1404</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;),</td></tr>
<tr><td class="h">1405</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$warn</td></tr>
<tr><td class="h">1406</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1407</td><td colspan="7"></td></tr><tr><td class="h">1408</td><td><div class="c3">553</div></td><td></td><td></td><td></td><td></td><td><div>3881</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sep= pop @xpath_steps;</td></tr>
<tr><td class="h">1409</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1410</td><td colspan="7"></td></tr><tr><td class="h">1411</td><td><div class="c3">506</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1411">100</a></div></td><td></td><td></td><td></td><td><div>1243</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $anchored) # there should be a better way, but this works</td></tr>
<tr><td class="h">1412</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{  </td></tr>
<tr><td class="h">1413</td><td><div class="c3">21</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1413">50</a></div></td><td></td><td></td><td></td><td><div>84</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $warn= $DEBUG_HANDLER &gt;= 2 ? _join_n( qq#warn qq{fail, stack not empty};#) : &#39;&#39;;</td></tr>
<tr><td class="h">1414</td><td><div class="c3">21</div></td><td></td><td></td><td></td><td></td><td><div>68</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$perlfunc .= sprintf( _join_n( q#if( ! grep { $_ == 0 } @current_elts) { %s return 0;}#), $warn);</td></tr>
<tr><td class="h">1415</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1416</td><td colspan="7"></td></tr><tr><td class="h">1417</td><td><div class="c3">506</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1417">50</a></div></td><td></td><td></td><td></td><td><div>1455</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$perlfunc.= qq{warn &quot;handler for &#39;$xpath_to_display&#39; triggered\\n&quot;;\n} if( $DEBUG_HANDLER &gt;=2);</td></tr>
<tr><td class="h">1418</td><td><div class="c3">506</div></td><td></td><td></td><td></td><td></td><td><div>1970</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$perlfunc.= qq{return q{$xpath_original};\n};</td></tr>
<tr><td class="h">1419</td><td><div class="c3">506</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1419">50</a></div></td><td></td><td></td><td></td><td><div>1640</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;warn &quot;\nperlfunc:\n$perlfunc\n&quot; if( $DEBUG_HANDLER&gt;=1);</td></tr>
<tr><td class="h">1420</td><td><div class="c3">506</div><div class="c3">11</div><div class="c3">11</div><div class="c3">11</div><div class="c3">10</div><div class="c3">10</div><div class="c3">10</div><div class="c3">11</div><div class="c3">11</div><div class="c3">11</div><div class="c3">10</div><div class="c3">10</div><div class="c3">10</div><div class="c3">12</div><div class="c3">12</div><div class="c3">12</div><div class="c3">10</div><div class="c3">10</div><div class="c3">10</div><div class="c3">12</div><div class="c3">12</div><div class="c3">12</div><div class="c3">14</div><div class="c3">14</div><div class="c3">14</div><div class="c3">15</div><div class="c3">13</div><div class="c3">13</div><div class="c3">12</div><div class="c3">12</div><div class="c3">12</div><div class="c3">12</div><div class="c3">12</div><div class="c3">12</div><div class="c3">6</div><div class="c3">6</div><div class="c3">6</div><div class="c3">7</div><div class="c3">7</div><div class="c3">7</div><div class="c3">8</div><div class="c3">8</div><div class="c3">8</div><div class="c3">7</div><div class="c3">7</div><div class="c3">7</div><div class="c3">5</div><div class="c3">5</div><div class="c3">5</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">11</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">10</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">11</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">10</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">12</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">10</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">12</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">14</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">15</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">12</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">12</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">6</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">7</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">8</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">7</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">5</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">4</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">4</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">3</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">3</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1420">1</a></div></td><td></td><td><div>1191</div><div>82</div><div>24</div><div>105</div><div>73</div><div>21</div><div>59</div><div>87</div><div>30</div><div>77</div><div>90</div><div>21</div><div>68</div><div>95</div><div>24</div><div>72</div><div>79</div><div>23</div><div>68</div><div>96</div><div>26</div><div>64</div><div>104</div><div>30</div><div>87</div><div>262</div><div>32</div><div>76</div><div>93</div><div>52</div><div>73</div><div>84</div><div>2206</div><div>81</div><div>52</div><div>16</div><div>40</div><div>48</div><div>23</div><div>42</div><div>63</div><div>19</div><div>49</div><div>67</div><div>16</div><div>55</div><div>41</div><div>11</div><div>29</div><div>32</div><div>7</div><div>24</div><div>22</div><div>13</div><div>19</div><div>19</div><div>8</div><div>16</div><div>21</div><div>7</div><div>18</div><div>15</div><div>5</div><div>11</div><div>16</div><div>3</div><div>13</div><div>16</div><div>4</div><div>14</div><div>14</div><div>3</div><div>11</div><div>15</div><div>4</div><div>11</div><div>13</div><div>4</div><div>10</div><div>16</div><div>4</div><div>10</div><div>16</div><div>3</div><div>13</div><div>14</div><div>4</div><div>11</div><div>20</div><div>4</div><div>11</div><div>14</div><div>4</div><div>10</div><div>17</div><div>4</div><div>11</div><div>20</div><div>5</div><div>15</div><div>21</div><div>5</div><div>11</div><div>14</div><div>6</div><div>13</div><div>15</div><div>4</div><div>11</div><div>20</div><div>4</div><div>12</div><div>17</div><div>4</div><div>13</div><div>16</div><div>5</div><div>10</div><div>15</div><div>4</div><div>11</div><div>14</div><div>6</div><div>11</div><div>16</div><div>4</div><div>19</div><div>17</div><div>4</div><div>16</div><div>14</div><div>5</div><div>13</div><div>14</div><div>5</div><div>13</div><div>20</div><div>4</div><div>14</div><div>19</div><div>5</div><div>15</div><div>9</div><div>2</div><div>7</div><div>7</div><div>2</div><div>6</div><div>10</div><div>2</div><div>7</div><div>7</div><div>2</div><div>6</div><div>7</div><div>2</div><div>5</div><div>7</div><div>2</div><div>6</div><div>7</div><div>1</div><div>5</div><div>8</div><div>2</div><div>6</div><div>8</div><div>1</div><div>6</div><div>13</div><div>2</div><div>7</div><div>8</div><div>2</div><div>7</div><div>7</div><div>2</div><div>6</div><div>10</div><div>3</div><div>7</div><div>7</div><div>2</div><div>5</div><div>7</div><div>2</div><div>5</div><div>7</div><div>2</div><div>5</div><div>9</div><div>2</div><div>6</div><div>8</div><div>2</div><div>6</div><div>7</div><div>2</div><div>5</div><div>8</div><div>2</div><div>6</div><div>7</div><div>2</div><div>5</div><div>9</div><div>2</div><div>8</div><div>8</div><div>2</div><div>6</div><div>6</div><div>2</div><div>5</div><div>8</div><div>1</div><div>6</div><div>7</div><div>3</div><div>7</div><div>15</div><div>3</div><div>6</div><div>7</div><div>3</div><div>6</div><div>7</div><div>2</div><div>6</div><div>8</div><div>1</div><div>7</div><div>7</div><div>2</div><div>6</div><div>11</div><div>2</div><div>8</div><div>6</div><div>2</div><div>6</div><div>7</div><div>2</div><div>5</div><div>7</div><div>2</div><div>6</div><div>7</div><div>2</div><div>5</div><div>7</div><div>3</div><div>6</div><div>7</div><div>3</div><div>5</div><div>7</div><div>2</div><div>5</div><div>11</div><div>2</div><div>9</div><div>18</div><div>4</div><div>12</div><div>15</div><div>4</div><div>12</div><div>7</div><div>3</div><div>5</div><div>6</div><div>2</div><div>13</div><div>10</div><div>2</div><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $s= eval &quot;sub { $perlfunc }&quot;;</td></tr>
<tr><td class="h">1421</td><td><div class="c3">506</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1421">50</a></div></td><td></td><td></td><td></td><td><div>2329</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $@) </td></tr>
<tr><td class="h">1422</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;wrong handler condition &#39;$xpath&#39; ($@);&quot; }</td></tr>
<tr><td class="h">1423</td><td colspan="7"></td></tr><tr><td class="h">1424</td><td><div class="c3">506</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1424">50</a></div></td><td></td><td></td><td></td><td><div>1614</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;warn &quot;last tag: &#39;$last_tag&#39;, test_on_text: &#39;$flag-&gt;{test_on_text}&#39;\n&quot; if( $DEBUG_HANDLER &gt;=1);</td></tr>
<tr><td class="h">1425</td><td><div class="c3">506</div><div class="c0">0</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1425">50</a></div></td><td></td><td></td><td></td><td><div>1479</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;warn &quot;score: &quot;, join( &#39; &#39;, map { &quot;$_: $score-&gt;{$_}&quot; } sort keys %$score), &quot;\n&quot; if( $DEBUG_HANDLER &gt;=1);</td></tr>
<tr><td class="h">1426</td><td><div class="c3">506</div></td><td></td><td></td><td></td><td></td><td><div>9103</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return { tag=&gt; $last_tag, score =&gt; $score, trigger =&gt; $s, path =&gt; $xpath_original, handler =&gt; $handler, test_on_text =&gt; $flag-&gt;{test_on_text} };</td></tr>
<tr><td class="h">1427</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1428</td><td colspan="7"></td></tr><tr><td class="h">1429</td><td><div class="c3">1633</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1429">1633</a></div></td><td></td><td><div>16239</div></td><td class="s">sub _join_n { return join( &quot;\n&quot;, @_, &#39;&#39;); }</td></tr>
<tr><td class="h">1430</td><td colspan="7"></td></tr><tr><td class="h">1431</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># input: the predicate ($_[0]) which will be changed in place</td></tr>
<tr><td class="h">1432</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#        flags, a hashref with various flags (like test_on_text)</td></tr>
<tr><td class="h">1433</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#        the score </td></tr>
<tr><td class="h">1434</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _parse_predicate_in_handler</td></tr>
<tr><td class="h">1435</td><td><div class="c3">169</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1435">169</a></div></td><td></td><td><div>971</div></td><td class="s">&nbsp;&nbsp;{ my( $flag, $score)= @_[1..2];</td></tr>
<tr><td class="h">1436</td><td><div class="c3">169</div><div class="c3">409</div></td><td></td><td></td><td></td><td></td><td><div>6016</div><div>4298</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$_[0]=~ s{(   ($REG_STRING)                        # strings</td></tr>
<tr><td class="h">1437</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|\@($REG_NAME)(?=\s*(?:[&gt;&lt;=!]|!~|=~)) # @att (followed by a comparison operator)</td></tr>
<tr><td class="h">1438</td><td><div class="c3">409</div></td><td></td><td></td><td></td><td></td><td><div>1551</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|\@($REG_NAME)                        # @att (not followed by a comparison operator)</td></tr>
<tr><td class="h">1439</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|=~|!~                                # matching operators</td></tr>
<tr><td class="h">1440</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|([&gt;&lt;]=?|=|!=)(?=\s*[\d+-])           # test before a number</td></tr>
<tr><td class="h">1441</td><td><div class="c3">409</div><div class="c3">44</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1441">100</a></div></td><td><div class="c1"><a href="blib-lib-XML-Twig-pm--condition.html#L1441">80</a></div></td><td></td><td></td><td><div>5758</div><div>145</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|([&gt;&lt;]=?|=|!=)                        # test, other cases</td></tr>
<tr><td class="h">1442</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|($REG_FUNCTION)                      # no arg functions</td></tr>
<tr><td class="h">1443</td><td><div class="c3">409</div><div class="c3">89</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1443">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1443">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1443">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1443">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1443">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1443">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1443">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1443">100</a></div><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1443">50</a></div><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1443">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1443">33</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L1443">100</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1443">67</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1443">67</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1443">67</a></div></td><td></td><td></td><td><div>3464</div><div>533</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# this bit is a mess, but it is the only solution with this half-baked parser</td></tr>
<tr><td class="h">1444</td><td><div class="c3">111</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1444">100</a></div></td><td></td><td></td><td></td><td><div>1181</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|(string\(\s*$REG_NAME\s*\)\s*$REG_MATCH\s*$REG_REGEXP)  # string( child)=~ /regexp/</td></tr>
<tr><td class="h">1445</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|(string\(\s*$REG_NAME\s*\)\s*$REG_COMP\s*$REG_STRING) # string( child) = &quot;value&quot; (or other test)</td></tr>
<tr><td class="h">1446</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|(string\(\s*$REG_NAME\s*\)\s*$REG_COMP\s*$REG_NUMBER) # string( child) = nb (or other test)</td></tr>
<tr><td class="h">1447</td><td><div class="c3">14</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1447">100</a></div></td><td></td><td></td><td></td><td><div>129</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|(and|or)</td></tr>
<tr><td class="h">1448</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)}</td></tr>
<tr><td class="h">1449</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my( $token, $string, $att, $bare_att, $num_test, $alpha_test, $func, $string_regexp, $string_test_alpha, $string_test_num, $and_or) </td></tr>
<tr><td class="h">1450</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= ( $1,     $2,      $3,   $4,        $5,        $6,          $7,    $8,             $9,                 $10,              $11); </td></tr>
<tr><td class="h">1451</td><td colspan="7"></td></tr><tr><td class="h">1452</td><td><div class="c3">40</div></td><td></td><td></td><td></td><td></td><td><div>294</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$score-&gt;{predicates}++;</td></tr>
<tr><td class="h">1453</td><td colspan="7"></td></tr><tr><td class="h">1454</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# store tests on text (they are not always allowed)</td></tr>
<tr><td class="h">1455</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $func || $string_regexp || $string_test_num || $string_test_alpha ) { $flag-&gt;{test_on_text}= 1;   }</td></tr>
<tr><td class="h">1456</td><td colspan="7"></td></tr><tr><td class="h">1457</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined $string)   { $token }</td></tr>
<tr><td class="h">1458</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $att)           { $att=~ m{^#} ? qq{ (\$elt-&gt;{_elt} &amp;&amp; \$elt-&gt;{_elt}-&gt;{att}-&gt;{&#39;$att&#39;})}</td></tr>
<tr><td class="h">1459</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L1459">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: qq{\$elt-&gt;{&#39;$att&#39;}}</td></tr>
<tr><td class="h">1460</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1461</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $bare_att)      { $bare_att=~ m{^#} ? qq{(\$elt-&gt;{_elt} &amp;&amp; defined(\$elt-&gt;{_elt}-&gt;{att}-&gt;{&#39;$bare_att&#39;}))}</td></tr>
<tr><td class="h">1462</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L1462">0</a></div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: qq{defined( \$elt-&gt;{&#39;$bare_att&#39;})}</td></tr>
<tr><td class="h">1463</td><td><div class="c3">60</div></td><td></td><td></td><td></td><td></td><td><div>872</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1464</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $num_test &amp;&amp; ($num_test eq &#39;=&#39;) ) { &quot;==&quot; } # others tests are unchanged</td></tr>
<tr><td class="h">1465</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $alpha_test)    { $PERL_ALPHA_TEST{$alpha_test} }</td></tr>
<tr><td class="h">1466</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $func &amp;&amp; $func=~ m{^string})</td></tr>
<tr><td class="h">1467</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ &quot;\$elt-&gt;{_elt}-&gt;text&quot;; }</td></tr>
<tr><td class="h">1468</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $string_regexp &amp;&amp; $string_regexp =~ m{string\(\s*($REG_NAME)\s*\)\s*($REG_MATCH)\s*($REG_REGEXP)})</td></tr>
<tr><td class="h">1469</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ &quot;defined( _first_n {  \$_-&gt;text $2 $3 } 1, \$elt-&gt;{_elt}-&gt;_children( &#39;$1&#39;))&quot;; }</td></tr>
<tr><td class="h">1470</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $string_test_alpha &amp;&amp; $string_test_alpha     =~ m{string\(\s*($REG_NAME)\s*\)\s*($REG_COMP)\s*($REG_STRING)})</td></tr>
<tr><td class="h">1471</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my( $tag, $op, $str)= ($1, $2, $3);</td></tr>
<tr><td class="h">1472</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str=~ s{(?&lt;=.)&#39;(?=.)}{\\&#39;}g; # escape a quote within the string </td></tr>
<tr><td class="h">1473</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str=~ s{^&quot;}{&#39;};</td></tr>
<tr><td class="h">1474</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str=~ s{&quot;$}{&#39;};</td></tr>
<tr><td class="h">1475</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;defined( _first_n { \$_-&gt;text $PERL_ALPHA_TEST{$op} $str } 1, \$elt-&gt;{_elt}-&gt;children( &#39;$tag&#39;))&quot;; }</td></tr>
<tr><td class="h">1476</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $string_test_num &amp;&amp; $string_test_num   =~ m{string\(\s*($REG_NAME)\s*\)\s*($REG_COMP)\s*($REG_NUMBER)})</td></tr>
<tr><td class="h">1477</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $test= ($2 eq &#39;=&#39;) ? &#39;==&#39; : $2;</td></tr>
<tr><td class="h">1478</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;defined( _first_n { \$_-&gt;text $test $3 } 1, \$elt-&gt;{_elt}-&gt;children( &#39;$1&#39;))&quot;; </td></tr>
<tr><td class="h">1479</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1480</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $and_or)        { $score-&gt;{tests}++; $and_or eq &#39;and&#39; ? &#39;&amp;&amp;&#39; : &#39;||&#39; ; }</td></tr>
<tr><td class="h">1481</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else                   { $token; }</td></tr>
<tr><td class="h">1482</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}gexs;</td></tr>
<tr><td class="h">1483</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1484</td><td colspan="7"></td></tr><tr><td class="h">1485</td><td colspan="7"></td></tr><tr><td class="h">1486</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub setCharHandler</td></tr>
<tr><td class="h">1487</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1487">1</a></div></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $handler)= @_;</td></tr>
<tr><td class="h">1488</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_char_handler}= $handler;</td></tr>
<tr><td class="h">1489</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1490</td><td colspan="7"></td></tr><tr><td class="h">1491</td><td colspan="7"></td></tr><tr><td class="h">1492</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _reset_handlers</td></tr>
<tr><td class="h">1493</td><td><div class="c3">296</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1493">296</a></div></td><td></td><td><div>1176</div></td><td class="s">&nbsp;&nbsp;{ my $handlers= shift;</td></tr>
<tr><td class="h">1494</td><td><div class="c3">296</div></td><td></td><td></td><td></td><td></td><td><div>895</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $handlers-&gt;{handlers};</td></tr>
<tr><td class="h">1495</td><td><div class="c3">296</div></td><td></td><td></td><td></td><td></td><td><div>647</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $handlers-&gt;{path_handlers};</td></tr>
<tr><td class="h">1496</td><td><div class="c3">296</div></td><td></td><td></td><td></td><td></td><td><div>1701</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $handlers-&gt;{subpath_handlers};</td></tr>
<tr><td class="h">1497</td><td><div class="c3">296</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1497">50</a></div></td><td></td><td></td><td></td><td><div>1170</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$handlers-&gt;{attcond_handlers_exp}=[] if( $handlers-&gt;{attcond_handlers});</td></tr>
<tr><td class="h">1498</td><td><div class="c3">296</div></td><td></td><td></td><td></td><td></td><td><div>1227</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $handlers-&gt;{attcond_handlers};</td></tr>
<tr><td class="h">1499</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1500</td><td colspan="7"></td></tr><tr><td class="h">1501</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _set_handlers</td></tr>
<tr><td class="h">1502</td><td><div class="c3">296</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1502">67</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1502">296</a></div></td><td></td><td><div>1147</div></td><td class="s">&nbsp;&nbsp;{ my $handlers= shift || return;</td></tr>
<tr><td class="h">1503</td><td><div class="c3">295</div></td><td></td><td></td><td></td><td></td><td><div>684</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $set_handlers= {};</td></tr>
<tr><td class="h">1504</td><td><div class="c3">295</div><div class="c3">295</div></td><td></td><td></td><td></td><td></td><td><div>776</div><div>1612</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $path (keys %{$handlers})</td></tr>
<tr><td class="h">1505</td><td><div class="c3">439</div></td><td></td><td></td><td></td><td></td><td><div>1864</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ _set_handler( $set_handlers, $path, $handlers-&gt;{$path}); }</td></tr>
<tr><td class="h">1506</td><td><div class="c3">289</div></td><td></td><td></td><td></td><td></td><td><div>1727</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $set_handlers;</td></tr>
<tr><td class="h">1507</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1508</td><td colspan="7"></td></tr><tr><td class="h">1509</td><td colspan="7"></td></tr><tr><td class="h">1510</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub setTwigHandler</td></tr>
<tr><td class="h">1511</td><td><div class="c3">63</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1511">63</a></div></td><td></td><td><div>1561</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $path, $handler)= @_;</td></tr>
<tr><td class="h">1512</td><td><div class="c3">63</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L1512">100</a></div></td><td></td><td></td><td><div>381</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_handlers} ||={};</td></tr>
<tr><td class="h">1513</td><td><div class="c3">63</div></td><td></td><td></td><td></td><td></td><td><div>301</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return _set_handler( $t-&gt;{twig_handlers}, $path, $handler);</td></tr>
<tr><td class="h">1514</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1515</td><td colspan="7"></td></tr><tr><td class="h">1516</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub setTwigHandlers</td></tr>
<tr><td class="h">1517</td><td><div class="c3">193</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1517">193</a></div></td><td></td><td><div>1479</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $handlers)= @_;</td></tr>
<tr><td class="h">1518</td><td><div class="c3">193</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L1518">100</a></div></td><td></td><td></td><td><div>1811</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $previous_handlers= $t-&gt;{twig_handlers} || undef;</td></tr>
<tr><td class="h">1519</td><td><div class="c3">193</div></td><td></td><td></td><td></td><td></td><td><div>1338</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_reset_handlers( $t-&gt;{twig_handlers});</td></tr>
<tr><td class="h">1520</td><td><div class="c3">193</div></td><td></td><td></td><td></td><td></td><td><div>715</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_handlers}= _set_handlers( $handlers);</td></tr>
<tr><td class="h">1521</td><td><div class="c3">187</div></td><td></td><td></td><td></td><td></td><td><div>768</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $previous_handlers;</td></tr>
<tr><td class="h">1522</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1523</td><td colspan="7"></td></tr><tr><td class="h">1524</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub setStartTagHandler</td></tr>
<tr><td class="h">1525</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1525">3</a></div></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $path, $handler)= @_;</td></tr>
<tr><td class="h">1526</td><td><div class="c3">3</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1526">50</a></div></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_starttag_handlers}||={};</td></tr>
<tr><td class="h">1527</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return _set_handler( $t-&gt;{twig_starttag_handlers}, $path, $handler);</td></tr>
<tr><td class="h">1528</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1529</td><td colspan="7"></td></tr><tr><td class="h">1530</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub setStartTagHandlers</td></tr>
<tr><td class="h">1531</td><td><div class="c3">26</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1531">26</a></div></td><td></td><td><div>146</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $handlers)= @_;</td></tr>
<tr><td class="h">1532</td><td><div class="c3">26</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L1532">100</a></div></td><td></td><td></td><td><div>284</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $previous_handlers= $t-&gt;{twig_starttag_handlers} || undef;</td></tr>
<tr><td class="h">1533</td><td><div class="c3">26</div></td><td></td><td></td><td></td><td></td><td><div>168</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_reset_handlers( $t-&gt;{twig_starttag_handlers});</td></tr>
<tr><td class="h">1534</td><td><div class="c3">26</div></td><td></td><td></td><td></td><td></td><td><div>100</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_starttag_handlers}= _set_handlers( $handlers);</td></tr>
<tr><td class="h">1535</td><td><div class="c3">26</div></td><td></td><td></td><td></td><td></td><td><div>171</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $previous_handlers;</td></tr>
<tr><td class="h">1536</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1537</td><td colspan="7"></td></tr><tr><td class="h">1538</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub setIgnoreEltsHandler</td></tr>
<tr><td class="h">1539</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1539">1</a></div></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $path, $action)= @_;</td></tr>
<tr><td class="h">1540</td><td><div class="c3">1</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1540">50</a></div></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_ignore_elts_handlers}||={};</td></tr>
<tr><td class="h">1541</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return _set_handler( $t-&gt;{twig_ignore_elts_handlers}, $path, $action );</td></tr>
<tr><td class="h">1542</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1543</td><td colspan="7"></td></tr><tr><td class="h">1544</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub setIgnoreEltsHandlers</td></tr>
<tr><td class="h">1545</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1545">4</a></div></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $handlers)= @_;</td></tr>
<tr><td class="h">1546</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $previous_handlers= $t-&gt;{twig_ignore_elts_handlers};</td></tr>
<tr><td class="h">1547</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_reset_handlers( $t-&gt;{twig_ignore_elts_handlers});</td></tr>
<tr><td class="h">1548</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_ignore_elts_handlers}= _set_handlers( $handlers);</td></tr>
<tr><td class="h">1549</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $previous_handlers;</td></tr>
<tr><td class="h">1550</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1551</td><td colspan="7"></td></tr><tr><td class="h">1552</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub setEndTagHandler</td></tr>
<tr><td class="h">1553</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1553">2</a></div></td><td></td><td><div>731</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $path, $handler)= @_;</td></tr>
<tr><td class="h">1554</td><td><div class="c3">2</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L1554">100</a></div></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_endtag_handlers}||={};</td></tr>
<tr><td class="h">1555</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return _set_handler( $t-&gt;{twig_endtag_handlers}, $path,$handler);</td></tr>
<tr><td class="h">1556</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1557</td><td colspan="7"></td></tr><tr><td class="h">1558</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub setEndTagHandlers</td></tr>
<tr><td class="h">1559</td><td><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1559">10</a></div></td><td></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $handlers)= @_;</td></tr>
<tr><td class="h">1560</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $previous_handlers= $t-&gt;{twig_endtag_handlers};</td></tr>
<tr><td class="h">1561</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>60</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_reset_handlers( $t-&gt;{twig_endtag_handlers});</td></tr>
<tr><td class="h">1562</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_endtag_handlers}= _set_handlers( $handlers);</td></tr>
<tr><td class="h">1563</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $previous_handlers;</td></tr>
<tr><td class="h">1564</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1565</td><td colspan="7"></td></tr><tr><td class="h">1566</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># a little more complex: set the twig_handlers only if a code ref is given</td></tr>
<tr><td class="h">1567</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub setTwigRoots</td></tr>
<tr><td class="h">1568</td><td><div class="c3">63</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1568">63</a></div></td><td></td><td><div>222</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $handlers)= @_;</td></tr>
<tr><td class="h">1569</td><td><div class="c3">63</div></td><td></td><td></td><td></td><td></td><td><div>242</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $previous_roots= $t-&gt;{twig_roots};</td></tr>
<tr><td class="h">1570</td><td><div class="c3">63</div></td><td></td><td></td><td></td><td></td><td><div>391</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_reset_handlers($t-&gt;{twig_roots});</td></tr>
<tr><td class="h">1571</td><td><div class="c3">63</div></td><td></td><td></td><td></td><td></td><td><div>243</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_roots}= _set_handlers( $handlers);</td></tr>
<tr><td class="h">1572</td><td colspan="7"></td></tr><tr><td class="h">1573</td><td><div class="c3">63</div></td><td></td><td></td><td></td><td></td><td><div>315</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_check_illegal_twig_roots_handlers( $t-&gt;{twig_roots});</td></tr>
<tr><td class="h">1574</td><td colspan="7"></td></tr><tr><td class="h">1575</td><td><div class="c3">61</div><div class="c3">61</div></td><td></td><td></td><td></td><td></td><td><div>117</div><div>242</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $path (keys %{$handlers})</td></tr>
<tr><td class="h">1576</td><td><div class="c3">60</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L1576">100</a></div></td><td></td><td></td><td><div>403</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $t-&gt;{twig_handlers}||= {};</td></tr>
<tr><td class="h">1577</td><td><div class="c3">60</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1577">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1577">67</a></div></td><td></td><td></td><td><div>846</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_set_handler( $t-&gt;{twig_handlers}, $path, $handlers-&gt;{$path})</td></tr>
<tr><td class="h">1578</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( ref($handlers-&gt;{$path}) &amp;&amp; isa( $handlers-&gt;{$path}, &#39;CODE&#39;)); </td></tr>
<tr><td class="h">1579</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1580</td><td><div class="c3">61</div></td><td></td><td></td><td></td><td></td><td><div>202</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $previous_roots;</td></tr>
<tr><td class="h">1581</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1582</td><td colspan="7"></td></tr><tr><td class="h">1583</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _check_illegal_twig_roots_handlers</td></tr>
<tr><td class="h">1584</td><td><div class="c3">63</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1584">63</a></div></td><td></td><td><div>201</div></td><td class="s">&nbsp;&nbsp;{ my( $handlers)= @_;</td></tr>
<tr><td class="h">1585</td><td><div class="c3">63</div><div class="c3">63</div></td><td></td><td></td><td></td><td></td><td><div>141</div><div>362</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $tag_handlers (values %{$handlers-&gt;{xpath_handler}})</td></tr>
<tr><td class="h">1586</td><td><div class="c3">61</div></td><td></td><td></td><td></td><td></td><td><div>188</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ foreach my $handler_data (@$tag_handlers)</td></tr>
<tr><td class="h">1587</td><td><div class="c3">61</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1587">100</a></div></td><td></td><td></td><td></td><td><div>492</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( my $type= $handler_data-&gt;{test_on_text})</td></tr>
<tr><td class="h">1588</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;string() condition not supported on twig_roots option&quot;; }</td></tr>
<tr><td class="h">1589</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1590</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1591</td><td><div class="c3">61</div></td><td></td><td></td><td></td><td></td><td><div>146</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1592</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1593</td><td colspan="7"></td></tr><tr><td class="h">1594</td><td colspan="7"></td></tr><tr><td class="h">1595</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># just store the reference to the expat object in the twig</td></tr>
<tr><td class="h">1596</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_init</td></tr>
<tr><td class="h">1597</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_init...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">1598</td><td colspan="7"></td></tr><tr><td class="h">1599</td><td><div class="c3">2780</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1599">2780</a></div></td><td></td><td><div>2480448</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $p= shift;</td></tr>
<tr><td class="h">1600</td><td><div class="c3">2780</div></td><td></td><td></td><td></td><td></td><td><div>10402</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t=$p-&gt;{twig};</td></tr>
<tr><td class="h">1601</td><td colspan="7"></td></tr><tr><td class="h">1602</td><td><div class="c3">2780</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1602">100</a></div></td><td></td><td></td><td></td><td><div>11450</div><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_parsing} ) { croak &quot;cannot reuse a twig that is already parsing&quot;; }</td></tr>
<tr><td class="h">1603</td><td><div class="c3">2779</div></td><td></td><td></td><td></td><td></td><td><div>10125</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_parsing}=1;</td></tr>
<tr><td class="h">1604</td><td colspan="7"></td></tr><tr><td class="h">1605</td><td><div class="c3">2779</div></td><td></td><td></td><td></td><td></td><td><div>9360</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_parser}= $p; </td></tr>
<tr><td class="h">1606</td><td><div class="c3">2779</div><div class="c3">2778</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1606">100</a></div></td><td></td><td></td><td></td><td><div>8332</div><div>17712</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $weakrefs) { weaken( $t-&gt;{twig_parser}); }</td></tr>
<tr><td class="h">1607</td><td colspan="7"></td></tr><tr><td class="h">1608</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# in case they had been created by a previous parse</td></tr>
<tr><td class="h">1609</td><td><div class="c3">2779</div></td><td></td><td></td><td></td><td></td><td><div>7693</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $t-&gt;{twig_dtd};</td></tr>
<tr><td class="h">1610</td><td><div class="c3">2779</div></td><td></td><td></td><td></td><td></td><td><div>6431</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $t-&gt;{twig_doctype};</td></tr>
<tr><td class="h">1611</td><td><div class="c3">2779</div></td><td></td><td></td><td></td><td></td><td><div>6108</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $t-&gt;{twig_xmldecl};</td></tr>
<tr><td class="h">1612</td><td><div class="c3">2779</div></td><td></td><td></td><td></td><td></td><td><div>6936</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $t-&gt;{twig_root};</td></tr>
<tr><td class="h">1613</td><td colspan="7"></td></tr><tr><td class="h">1614</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# if needed set the output filehandle</td></tr>
<tr><td class="h">1615</td><td><div class="c3">2779</div></td><td></td><td></td><td></td><td></td><td><div>10142</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;_set_fh_to_twig_output_fh();</td></tr>
<tr><td class="h">1616</td><td><div class="c3">2779</div></td><td></td><td></td><td></td><td></td><td><div>8289</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1617</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1618</td><td colspan="7"></td></tr><tr><td class="h">1619</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># uses eval to catch the parser&#39;s death</td></tr>
<tr><td class="h">1620</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub safe_parse</td></tr>
<tr><td class="h">1621</td><td><div class="c3">9</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1621">9</a></div></td><td></td><td><div>168</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">1622</td><td><div class="c3">9</div><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>132</div><div>219</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;eval { $t-&gt;parse( @_); } ;</td></tr>
<tr><td class="h">1623</td><td><div class="c3">9</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1623">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1623">50</a></div></td><td></td><td></td><td><div>108</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $@ ? $t-&gt;_reset_twig &amp;&amp;  0 : $t;</td></tr>
<tr><td class="h">1624</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1625</td><td colspan="7"></td></tr><tr><td class="h">1626</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub safe_parsefile</td></tr>
<tr><td class="h">1627</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1627">3</a></div></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">1628</td><td><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>5</div><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;eval { $t-&gt;parsefile( @_); } ;</td></tr>
<tr><td class="h">1629</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1629">100</a></div></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $@ ? $t-&gt;_reset_twig : $t;</td></tr>
<tr><td class="h">1630</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1631</td><td colspan="7"></td></tr><tr><td class="h">1632</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># restore a twig in a proper state so it can be reused for a new parse</td></tr>
<tr><td class="h">1633</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _reset_twig</td></tr>
<tr><td class="h">1634</td><td><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1634">5</a></div></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">1635</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_parsing}= 0;</td></tr>
<tr><td class="h">1636</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $t-&gt;{twig_current};</td></tr>
<tr><td class="h">1637</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $t-&gt;{extra_data};</td></tr>
<tr><td class="h">1638</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $t-&gt;{twig_dtd};</td></tr>
<tr><td class="h">1639</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $t-&gt;{twig_in_pcdata};</td></tr>
<tr><td class="h">1640</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $t-&gt;{twig_in_cdata};</td></tr>
<tr><td class="h">1641</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $t-&gt;{twig_stored_space};</td></tr>
<tr><td class="h">1642</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $t-&gt;{twig_entity_list};</td></tr>
<tr><td class="h">1643</td><td><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1643">100</a></div></td><td></td><td></td><td></td><td><div>77</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;root-&gt;delete if( $t-&gt;root);</td></tr>
<tr><td class="h">1644</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $t-&gt;{root};</td></tr>
<tr><td class="h">1645</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1646</td><td colspan="7"></td></tr><tr><td class="h">1647</td><td colspan="7"></td></tr><tr><td class="h">1648</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _add_or_discard_stored_spaces</td></tr>
<tr><td class="h">1649</td><td><div class="c3">20666</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1649">20666</a></div></td><td></td><td><div>46177</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">1650</td><td><div class="c3">20666</div></td><td></td><td></td><td></td><td></td><td><div>55588</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %option= @_;</td></tr>
<tr><td class="h">1651</td><td colspan="7"></td></tr><tr><td class="h">1652</td><td><div class="c3">20666</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1652">100</a></div></td><td></td><td></td><td></td><td><div>81399</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return unless( $t-&gt;{twig_current}); # ugly hack, with ignore on, twig_current can disappear </td></tr>
<tr><td class="h">1653</td><td><div class="c3">17890</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1653">100</a></div></td><td><div class="c1"><a href="blib-lib-XML-Twig-pm--condition.html#L1653">75</a></div></td><td></td><td></td><td><div>222333</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_stored_spaces} || $option{force} || $t-&gt;{twig_preserve_space})</td></tr>
<tr><td class="h">1654</td><td><div class="c3">1757</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1654">100</a></div></td><td></td><td></td><td></td><td><div>7697</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $t-&gt;{twig_current}-&gt;is_pcdata)</td></tr>
<tr><td class="h">1655</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $t-&gt;{twig_current}-&gt;append_pcdata($t-&gt;{twig_stored_spaces}); }</td></tr>
<tr><td class="h">1656</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">1657</td><td><div class="c3">1755</div></td><td></td><td></td><td></td><td></td><td><div>10097</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $current_gi= $t-&gt;{twig_current}-&gt;gi;</td></tr>
<tr><td class="h">1658</td><td><div class="c3">1755</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1658">100</a></div></td><td></td><td></td><td></td><td><div>10059</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( defined( $t-&gt;{twig_space_policy}-&gt;{$current_gi}))</td></tr>
<tr><td class="h">1659</td><td><div class="c3">455</div></td><td></td><td></td><td></td><td></td><td><div>1793</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $t-&gt;{twig_space_policy}-&gt;{$current_gi}= _space_policy( $t, $current_gi); }</td></tr>
<tr><td class="h">1660</td><td colspan="7"></td></tr><tr><td class="h">1661</td><td><div class="c3">1755</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1661">100</a></div></td><td><div class="c1"><a href="blib-lib-XML-Twig-pm--condition.html#L1661">80</a></div></td><td></td><td></td><td><div>37065</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(    $t-&gt;{twig_space_policy}-&gt;{$current_gi} ||  ($t-&gt;{twig_stored_spaces}!~ m{\n})</td></tr>
<tr><td class="h">1662</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| $option{force} || $t-&gt;{twig_preserve_space}</td></tr>
<tr><td class="h">1663</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">1664</td><td><div class="c3">90</div></td><td></td><td></td><td></td><td></td><td><div>379</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ _insert_pcdata( $t, $t-&gt;{twig_stored_spaces} ); }</td></tr>
<tr><td class="h">1665</td><td><div class="c3">1755</div></td><td></td><td></td><td></td><td></td><td><div>7208</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_stored_spaces}=&#39;&#39;;</td></tr>
<tr><td class="h">1666</td><td colspan="7"></td></tr><tr><td class="h">1667</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1668</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1669</td><td><div class="c3">17890</div></td><td></td><td></td><td></td><td></td><td><div>44323</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1670</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1671</td><td colspan="7"></td></tr><tr><td class="h">1672</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># the default twig handlers, which build the tree</td></tr>
<tr><td class="h">1673</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_start</td></tr>
<tr><td class="h">1674</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_start...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">1675</td><td colspan="7"></td></tr><tr><td class="h">1676</td><td><div class="c3">10367</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1676">10367</a></div></td><td></td><td><div>58274</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($p, $gi, @att)= @_;</td></tr>
<tr><td class="h">1677</td><td><div class="c3">10367</div></td><td></td><td></td><td></td><td></td><td><div>37777</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t=$p-&gt;{twig};</td></tr>
<tr><td class="h">1678</td><td colspan="7"></td></tr><tr><td class="h">1679</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# empty the stored pcdata (space stored in case they are really part of </td></tr>
<tr><td class="h">1680</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# a pcdata element) or stored it if the space policy dictades so</td></tr>
<tr><td class="h">1681</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# create a pcdata element with the spaces if need be</td></tr>
<tr><td class="h">1682</td><td><div class="c3">10367</div></td><td></td><td></td><td></td><td></td><td><div>29329</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_add_or_discard_stored_spaces( $t);</td></tr>
<tr><td class="h">1683</td><td><div class="c3">10367</div></td><td></td><td></td><td></td><td></td><td><div>32308</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $parent= $t-&gt;{twig_current};</td></tr>
<tr><td class="h">1684</td><td colspan="7"></td></tr><tr><td class="h">1685</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# if we were parsing PCDATA then we exit the pcdata</td></tr>
<tr><td class="h">1686</td><td><div class="c3">10367</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1686">100</a></div></td><td></td><td></td><td></td><td><div>34465</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_in_pcdata})</td></tr>
<tr><td class="h">1687</td><td><div class="c3">103</div></td><td></td><td></td><td></td><td></td><td><div>320</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $t-&gt;{twig_in_pcdata}= 0;</td></tr>
<tr><td class="h">1688</td><td><div class="c3">103</div></td><td></td><td></td><td></td><td></td><td><div>277</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $parent-&gt;{&#39;twig_current&#39;};</td></tr>
<tr><td class="h">1689</td><td><div class="c3">103</div></td><td></td><td></td><td></td><td></td><td><div>332</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$parent= $parent-&gt;{parent};</td></tr>
<tr><td class="h">1690</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1691</td><td colspan="7"></td></tr><tr><td class="h">1692</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# if we choose to keep the encoding then we need to parse the tag</td></tr>
<tr><td class="h">1693</td><td><div class="c3">10367</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1693">100</a></div><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1693">50</a></div></td><td></td><td></td><td></td><td><div>56579</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $func = $t-&gt;{parse_start_tag})</td></tr>
<tr><td class="h">1694</td><td><div class="c3">1310</div></td><td></td><td></td><td></td><td></td><td><div>5864</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ ($gi, @att)= &amp;$func($p-&gt;original_string); }</td></tr>
<tr><td class="h">1695</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $t-&gt;{twig_entities_in_attribute})</td></tr>
<tr><td class="h">1696</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">1697</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($gi,@att)= _parse_start_tag( $p-&gt;recognized_string); </td></tr>
<tr><td class="h">1698</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_entities_in_attribute}=0;</td></tr>
<tr><td class="h">1699</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1700</td><td colspan="7"></td></tr><tr><td class="h">1701</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# if we are using an external DTD, we need to fill the default attributes</td></tr>
<tr><td class="h">1702</td><td><div class="c3">10367</div><div class="c3">48</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1702">100</a></div></td><td></td><td></td><td></td><td><div>34405</div><div>177</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_read_external_dtd}) { _fill_default_atts( $t, $gi, \@att); }</td></tr>
<tr><td class="h">1703</td><td colspan="7"></td></tr><tr><td class="h">1704</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# filter the input data if need be  </td></tr>
<tr><td class="h">1705</td><td><div class="c3">10367</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1705">100</a></div></td><td></td><td></td><td></td><td><div>35871</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $filter= $t-&gt;{twig_input_filter})</td></tr>
<tr><td class="h">1706</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $gi= $filter-&gt;( $gi);</td></tr>
<tr><td class="h">1707</td><td><div class="c3">5</div><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>58</div><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@att= map { $filter-&gt;($_) } @att; </td></tr>
<tr><td class="h">1708</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1709</td><td colspan="7"></td></tr><tr><td class="h">1710</td><td><div class="c3">10367</div><div class="c3">46</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1710">100</a></div></td><td></td><td></td><td></td><td><div>31588</div><div>191</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_map_xmlns}) { _replace_ns( $t, \$gi, \@att); }</td></tr>
<tr><td class="h">1711</td><td colspan="7"></td></tr><tr><td class="h">1712</td><td><div class="c3">10367</div></td><td></td><td></td><td></td><td></td><td><div>56864</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $elt= $t-&gt;{twig_elt_class}-&gt;new( $gi);</td></tr>
<tr><td class="h">1713</td><td><div class="c3">10367</div></td><td></td><td></td><td></td><td></td><td><div>40093</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;set_atts( @att);</td></tr>
<tr><td class="h">1714</td><td colspan="7"></td></tr><tr><td class="h">1715</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# now we can store the tag and atts</td></tr>
<tr><td class="h">1716</td><td><div class="c3">10367</div></td><td></td><td></td><td></td><td></td><td><div>58899</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $context= { _tag =&gt; $gi, _elt =&gt; $elt, @att};</td></tr>
<tr><td class="h">1717</td><td><div class="c3">10367</div><div class="c3">10363</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1717">100</a></div></td><td></td><td></td><td></td><td><div>32029</div><div>57164</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $weakrefs) { weaken( $context-&gt;{_elt}); }</td></tr>
<tr><td class="h">1718</td><td><div class="c3">10367</div><div class="c3">10367</div></td><td></td><td></td><td></td><td></td><td><div>17002</div><div>42309</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;push @{$t-&gt;{_twig_context_stack}}, $context;</td></tr>
<tr><td class="h">1719</td><td colspan="7"></td></tr><tr><td class="h">1720</td><td><div class="c3">10367</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1720">100</a></div></td><td></td><td></td><td></td><td><div>37854</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $parent-&gt;{&#39;twig_current&#39;} if( $parent);</td></tr>
<tr><td class="h">1721</td><td><div class="c3">10367</div></td><td></td><td></td><td></td><td></td><td><div>32139</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_current}= $elt;</td></tr>
<tr><td class="h">1722</td><td><div class="c3">10367</div></td><td></td><td></td><td></td><td></td><td><div>30837</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{&#39;twig_current&#39;}=1;</td></tr>
<tr><td class="h">1723</td><td colspan="7"></td></tr><tr><td class="h">1724</td><td><div class="c3">10367</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1724">100</a></div></td><td></td><td></td><td></td><td><div>24368</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $parent)</td></tr>
<tr><td class="h">1725</td><td><div class="c3">7591</div></td><td></td><td></td><td></td><td></td><td><div>21392</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $prev_sibling= $parent-&gt;{last_child};</td></tr>
<tr><td class="h">1726</td><td><div class="c3">7591</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1726">100</a></div></td><td></td><td></td><td></td><td><div>19400</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $prev_sibling) </td></tr>
<tr><td class="h">1727</td><td><div class="c3">5644</div></td><td></td><td></td><td></td><td></td><td><div>16499</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $prev_sibling-&gt;{next_sibling}=  $elt; </td></tr>
<tr><td class="h">1728</td><td><div class="c3">5644</div><div class="c3">5644</div><div class="c3">5642</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1728">100</a></div></td><td></td><td></td><td></td><td><div>16419</div><div>14125</div><div>24805</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{prev_sibling}=$prev_sibling; if( $XML::Twig::weakrefs) { weaken( $elt-&gt;{prev_sibling});} ;</td></tr>
<tr><td class="h">1729</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1730</td><td colspan="7"></td></tr><tr><td class="h">1731</td><td><div class="c3">7591</div><div class="c3">7591</div><div class="c3">7588</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1731">100</a></div></td><td></td><td></td><td></td><td><div>23443</div><div>18675</div><div>30880</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{parent}=$parent; if( $XML::Twig::weakrefs) { weaken( $elt-&gt;{parent});} ;</td></tr>
<tr><td class="h">1732</td><td><div class="c3">7591</div><div class="c3">1947</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1732">100</a></div></td><td></td><td></td><td></td><td><div>27299</div><div>6386</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( $parent-&gt;{first_child}) { $parent-&gt;{first_child}=  $elt; } </td></tr>
<tr><td class="h">1733</td><td><div class="c3">7591</div><div class="c3">7591</div><div class="c3">7591</div><div class="c3">7588</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1733">100</a></div></td><td></td><td></td><td></td><td><div>19034</div><div>22077</div><div>18862</div><div>32668</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $parent-&gt;{empty}; $parent-&gt;{last_child}=$elt; if( $XML::Twig::weakrefs) { weaken( $parent-&gt;{last_child});} ;</td></tr>
<tr><td class="h">1734</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1735</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else </td></tr>
<tr><td class="h">1736</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # processing root</td></tr>
<tr><td class="h">1737</td><td><div class="c3">2776</div></td><td></td><td></td><td></td><td></td><td><div>11273</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;set_root( $elt);</td></tr>
<tr><td class="h">1738</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# call dtd handler if need be</td></tr>
<tr><td class="h">1739</td><td><div class="c3">2776</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1739">50</a></div></td><td></td><td></td><td></td><td><div>11879</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_dtd_handler}-&gt;($t, $t-&gt;{twig_dtd})</td></tr>
<tr><td class="h">1740</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined $t-&gt;{twig_dtd_handler});</td></tr>
<tr><td class="h">1741</td><td colspan="7"></td></tr><tr><td class="h">1742</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# set this so we can catch external entities</td></tr>
<tr><td class="h">1743</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# (the handler was modified during DTD processing)</td></tr>
<tr><td class="h">1744</td><td><div class="c3">2776</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1744">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1744">100</a></div></td><td></td><td></td><td></td><td><div>14819</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_default_print})</td></tr>
<tr><td class="h">1745</td><td><div class="c3">33</div></td><td></td><td></td><td></td><td></td><td><div>194</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $p-&gt;setHandlers( Default =&gt; \&amp;_twig_print); }</td></tr>
<tr><td class="h">1746</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $t-&gt;{twig_roots})</td></tr>
<tr><td class="h">1747</td><td><div class="c3">33</div><div class="c3">127</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1747">127</a></div></td><td></td><td><div>285</div><div>253</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $p-&gt;setHandlers( Default =&gt; sub { return }); }</td></tr>
<tr><td class="h">1748</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">1749</td><td><div class="c3">2710</div></td><td></td><td></td><td></td><td></td><td><div>16334</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $p-&gt;setHandlers( Default =&gt; \&amp;_twig_default); }</td></tr>
<tr><td class="h">1750</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1751</td><td colspan="7"></td></tr><tr><td class="h">1752</td><td><div class="c3">10367</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1752">100</a></div></td><td></td><td></td><td></td><td><div>174884</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{empty}=  $p-&gt;recognized_string=~ m{/\s*&gt;$}s ? 1 : 0;</td></tr>
<tr><td class="h">1753</td><td colspan="7"></td></tr><tr><td class="h">1754</td><td><div class="c3">10367</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1754">100</a></div></td><td></td><td></td><td></td><td><div>264774</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{extra_data}= $t-&gt;{extra_data} if( $t-&gt;{extra_data});</td></tr>
<tr><td class="h">1755</td><td><div class="c3">10367</div></td><td></td><td></td><td></td><td></td><td><div>34320</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{extra_data}=&#39;&#39;;</td></tr>
<tr><td class="h">1756</td><td colspan="7"></td></tr><tr><td class="h">1757</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# if the element is ID-ed then store that info</td></tr>
<tr><td class="h">1758</td><td><div class="c3">10367</div></td><td></td><td></td><td></td><td></td><td><div>38836</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $id= $elt-&gt;{&#39;att&#39;}-&gt;{$ID};</td></tr>
<tr><td class="h">1759</td><td><div class="c3">10367</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1759">100</a></div></td><td></td><td></td><td></td><td><div>28117</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $id)</td></tr>
<tr><td class="h">1760</td><td><div class="c3">500</div></td><td></td><td></td><td></td><td></td><td><div>2289</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $t-&gt;{twig_id_list}-&gt;{$id}= $elt; </td></tr>
<tr><td class="h">1761</td><td><div class="c3">500</div><div class="c3">497</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1761">100</a></div></td><td></td><td></td><td></td><td><div>1459</div><div>3172</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $weakrefs) { weaken( $t-&gt;{twig_id_list}-&gt;{$id}); }</td></tr>
<tr><td class="h">1762</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1763</td><td colspan="7"></td></tr><tr><td class="h">1764</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# call user handler if need be</td></tr>
<tr><td class="h">1765</td><td><div class="c3">10367</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1765">100</a></div></td><td></td><td></td><td></td><td><div>37322</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_starttag_handlers})</td></tr>
<tr><td class="h">1766</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # call all appropriate handlers</td></tr>
<tr><td class="h">1767</td><td><div class="c3">100</div></td><td></td><td></td><td></td><td></td><td><div>455</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @handlers= _handler( $t, $t-&gt;{twig_starttag_handlers}, $gi);</td></tr>
<tr><td class="h">1768</td><td colspan="7"></td></tr><tr><td class="h">1769</td><td><div class="c3">100</div></td><td></td><td></td><td></td><td></td><td><div>688</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $_= $elt;</td></tr>
<tr><td class="h">1770</td><td colspan="7"></td></tr><tr><td class="h">1771</td><td><div class="c3">100</div></td><td></td><td></td><td></td><td></td><td><div>358</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $handler ( @handlers)</td></tr>
<tr><td class="h">1772</td><td><div class="c3">31</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1772">100</a></div></td><td></td><td></td><td></td><td><div>126</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $handler-&gt;($t, $elt) || last; }</td></tr>
<tr><td class="h">1773</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# call _all_ handler if needed</td></tr>
<tr><td class="h">1774</td><td><div class="c3">100</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1774">100</a></div></td><td></td><td></td><td></td><td><div>815</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $all= $t-&gt;{twig_starttag_handlers}-&gt;{handlers}-&gt;{$ALL})</td></tr>
<tr><td class="h">1775</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $all-&gt;($t, $elt); }</td></tr>
<tr><td class="h">1776</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1777</td><td colspan="7"></td></tr><tr><td class="h">1778</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# check if the tag is in the list of tags to be ignored</td></tr>
<tr><td class="h">1779</td><td><div class="c3">10367</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1779">100</a></div></td><td></td><td></td><td></td><td><div>33711</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_ignore_elts_handlers})</td></tr>
<tr><td class="h">1780</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>213</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my @handlers= _handler( $t, $t-&gt;{twig_ignore_elts_handlers}, $gi);</td></tr>
<tr><td class="h">1781</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# only the first handler counts, it contains the action (discard/print/string)</td></tr>
<tr><td class="h">1782</td><td><div class="c3">48</div><div class="c3">13</div><div class="c3">13</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1782">100</a></div></td><td></td><td></td><td></td><td><div>140</div><div>31</div><div>56</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( @handlers) { my $action= shift @handlers; $t-&gt;ignore( $action); }</td></tr>
<tr><td class="h">1783</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1784</td><td colspan="7"></td></tr><tr><td class="h">1785</td><td><div class="c3">10367</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1785">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1785">67</a></div></td><td></td><td></td><td><div>46821</div><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;{&#39;att&#39;}-&gt;{&#39;xml:space&#39;} &amp;&amp; (  $elt-&gt;{&#39;att&#39;}-&gt;{&#39;xml:space&#39;} eq &#39;preserve&#39;)) { $t-&gt;{twig_preserve_space}++; }</td></tr>
<tr><td class="h">1786</td><td colspan="7"></td></tr><tr><td class="h">1787</td><td><div class="c3">10367</div></td><td></td><td></td><td></td><td></td><td><div>26303</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1788</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1789</td><td colspan="7"></td></tr><tr><td class="h">1790</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _replace_ns</td></tr>
<tr><td class="h">1791</td><td><div class="c3">48</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1791">48</a></div></td><td></td><td><div>286</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $gi, $atts)= @_;</td></tr>
<tr><td class="h">1792</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>203</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $new_prefix ( $t-&gt;parser-&gt;new_ns_prefixes)</td></tr>
<tr><td class="h">1793</td><td><div class="c3">28</div></td><td></td><td></td><td></td><td></td><td><div>419</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $uri= $t-&gt;parser-&gt;expand_ns_prefix( $new_prefix);</td></tr>
<tr><td class="h">1794</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# replace the prefix if it is mapped</td></tr>
<tr><td class="h">1795</td><td><div class="c3">28</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1795">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L1795">100</a></div></td><td></td><td></td><td><div>1096</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( !$t-&gt;{twig_keep_original_prefix} &amp;&amp; (my $mapped_prefix= $t-&gt;{twig_map_xmlns}-&gt;{$uri}))</td></tr>
<tr><td class="h">1796</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $new_prefix= $mapped_prefix; }</td></tr>
<tr><td class="h">1797</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# now put the namespace declaration back in the element</td></tr>
<tr><td class="h">1798</td><td><div class="c3">28</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1798">100</a></div></td><td></td><td></td><td></td><td><div>97</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $new_prefix eq &#39;#default&#39;)</td></tr>
<tr><td class="h">1799</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ push @$atts, &quot;xmlns&quot; =&gt;  $uri; } </td></tr>
<tr><td class="h">1800</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">1801</td><td><div class="c3">25</div></td><td></td><td></td><td></td><td></td><td><div>163</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ push @$atts, &quot;xmlns:$new_prefix&quot; =&gt;  $uri; } </td></tr>
<tr><td class="h">1802</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1803</td><td colspan="7"></td></tr><tr><td class="h">1804</td><td><div class="c3">48</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1804">100</a></div></td><td></td><td></td><td></td><td><div>792</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_keep_original_prefix})</td></tr>
<tr><td class="h">1805</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # things become more complex: we need to find the original prefix</td></tr>
<tr><td class="h">1806</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# and store both prefixes</td></tr>
<tr><td class="h">1807</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ns_info= $t-&gt;_ns_info( $$gi);</td></tr>
<tr><td class="h">1808</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $map_att;</td></tr>
<tr><td class="h">1809</td><td><div class="c3">13</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1809">100</a></div></td><td></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $ns_info-&gt;{mapped_prefix})</td></tr>
<tr><td class="h">1810</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>61</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $$gi= &quot;$ns_info-&gt;{mapped_prefix}:$$gi&quot;;</td></tr>
<tr><td class="h">1811</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>62</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$map_att-&gt;{$ns_info-&gt;{mapped_prefix}}= $ns_info-&gt;{prefix};</td></tr>
<tr><td class="h">1812</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1813</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $att_name=1;</td></tr>
<tr><td class="h">1814</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach( @$atts) </td></tr>
<tr><td class="h">1815</td><td><div class="c3">30</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1815">100</a></div></td><td></td><td></td><td></td><td><div>69</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $att_name) </td></tr>
<tr><td class="h">1816</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">1817</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ns_info= $t-&gt;_ns_info( $_);</td></tr>
<tr><td class="h">1818</td><td><div class="c3">15</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1818">100</a></div></td><td></td><td></td><td></td><td><div>61</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $ns_info-&gt;{mapped_prefix})</td></tr>
<tr><td class="h">1819</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $_= &quot;$ns_info-&gt;{mapped_prefix}:$_&quot;;</td></tr>
<tr><td class="h">1820</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$map_att-&gt;{$ns_info-&gt;{mapped_prefix}}= $ns_info-&gt;{prefix};</td></tr>
<tr><td class="h">1821</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1822</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>73</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$att_name=0; </td></tr>
<tr><td class="h">1823</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1824</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else           </td></tr>
<tr><td class="h">1825</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{  $att_name=1; }</td></tr>
<tr><td class="h">1826</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1827</td><td><div class="c3">13</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1827">100</a></div></td><td></td><td></td><td></td><td><div>85</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$atts, &#39;#original_gi&#39;, $map_att if( $map_att);</td></tr>
<tr><td class="h">1828</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1829</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">1830</td><td><div class="c3">35</div></td><td></td><td></td><td></td><td></td><td><div>1642</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $$gi= $t-&gt;_replace_prefix( $$gi); </td></tr>
<tr><td class="h">1831</td><td><div class="c3">35</div></td><td></td><td></td><td></td><td></td><td><div>77</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $att_name=1;</td></tr>
<tr><td class="h">1832</td><td><div class="c3">35</div></td><td></td><td></td><td></td><td></td><td><div>117</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach( @$atts) </td></tr>
<tr><td class="h">1833</td><td><div class="c3">88</div><div class="c3">44</div><div class="c3">44</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1833">100</a></div></td><td></td><td></td><td></td><td><div>259</div><div>138</div><div>138</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $att_name) { $_= $t-&gt;_replace_prefix( $_); $att_name=0; }</td></tr>
<tr><td class="h">1834</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>151</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else           {  $att_name=1; }</td></tr>
<tr><td class="h">1835</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1836</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1837</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>125</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1838</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1839</td><td colspan="7"></td></tr><tr><td class="h">1840</td><td colspan="7"></td></tr><tr><td class="h">1841</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># extract prefix, local_name, uri, mapped_prefix from a name</td></tr>
<tr><td class="h">1842</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># will only work if called from a start or end tag handler</td></tr>
<tr><td class="h">1843</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _ns_info</td></tr>
<tr><td class="h">1844</td><td><div class="c3">28</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1844">28</a></div></td><td></td><td><div>105</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $name)= @_;</td></tr>
<tr><td class="h">1845</td><td><div class="c3">28</div></td><td></td><td></td><td></td><td></td><td><div>78</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ns_info={};</td></tr>
<tr><td class="h">1846</td><td><div class="c3">28</div></td><td></td><td></td><td></td><td></td><td><div>85</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $p= $t-&gt;parser;</td></tr>
<tr><td class="h">1847</td><td><div class="c3">28</div></td><td></td><td></td><td></td><td></td><td><div>114</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$ns_info-&gt;{uri}= $p-&gt;namespace( $name); </td></tr>
<tr><td class="h">1848</td><td><div class="c3">28</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1848">100</a></div></td><td></td><td></td><td></td><td><div>708</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ns_info unless( $ns_info-&gt;{uri});</td></tr>
<tr><td class="h">1849</td><td colspan="7"></td></tr><tr><td class="h">1850</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>75</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$ns_info-&gt;{prefix}= _a_proper_ns_prefix( $p, $ns_info-&gt;{uri});</td></tr>
<tr><td class="h">1851</td><td><div class="c3">15</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1851">67</a></div></td><td></td><td></td><td><div>142</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$ns_info-&gt;{mapped_prefix}= $t-&gt;{twig_map_xmlns}-&gt;{$ns_info-&gt;{uri}} || $ns_info-&gt;{prefix};</td></tr>
<tr><td class="h">1852</td><td colspan="7"></td></tr><tr><td class="h">1853</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ns_info;</td></tr>
<tr><td class="h">1854</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1855</td><td colspan="7"></td></tr><tr><td class="h">1856</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _a_proper_ns_prefix</td></tr>
<tr><td class="h">1857</td><td><div class="c3">22</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1857">22</a></div></td><td></td><td><div>95</div></td><td class="s">&nbsp;&nbsp;{ my( $p, $uri)= @_;</td></tr>
<tr><td class="h">1858</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>99</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $prefix ($p-&gt;current_ns_prefixes)</td></tr>
<tr><td class="h">1859</td><td><div class="c3">36</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1859">100</a></div></td><td></td><td></td><td></td><td><div>1247</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $p-&gt;expand_ns_prefix( $prefix) eq $uri)</td></tr>
<tr><td class="h">1860</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>741</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return $prefix; }</td></tr>
<tr><td class="h">1861</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1862</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1863</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1864</td><td colspan="7"></td></tr><tr><td class="h">1865</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _fill_default_atts</td></tr>
<tr><td class="h">1866</td><td><div class="c3">48</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1866">48</a></div></td><td></td><td><div>204</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $gi, $atts)= @_;</td></tr>
<tr><td class="h">1867</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>163</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dtd= $t-&gt;{twig_dtd};</td></tr>
<tr><td class="h">1868</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>165</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $attlist= $dtd-&gt;{att}-&gt;{$gi};</td></tr>
<tr><td class="h">1869</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>250</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %value= @$atts;</td></tr>
<tr><td class="h">1870</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>249</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $att (keys %$attlist)</td></tr>
<tr><td class="h">1871</td><td><div class="c3">66</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1871">100</a></div></td><td><div class="c1"><a href="blib-lib-XML-Twig-pm--condition.html#L1871">75</a></div></td><td></td><td></td><td><div>648</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if(   !exists( $value{$att}) </td></tr>
<tr><td class="h">1872</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; exists( $attlist-&gt;{$att}-&gt;{default})</td></tr>
<tr><td class="h">1873</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; ( $attlist-&gt;{$att}-&gt;{default} ne &#39;#IMPLIED&#39;)</td></tr>
<tr><td class="h">1874</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">1875</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # the quotes are included in the default, so we need to remove them</td></tr>
<tr><td class="h">1876</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>68</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $default_value= substr( $attlist-&gt;{$att}-&gt;{default}, 1, -1);</td></tr>
<tr><td class="h">1877</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>59</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @$atts, $att, $default_value;</td></tr>
<tr><td class="h">1878</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1879</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1880</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>184</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1881</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1882</td><td colspan="7"></td></tr><tr><td class="h">1883</td><td colspan="7"></td></tr><tr><td class="h">1884</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># the default function to parse a start tag (in keep_encoding mode)</td></tr>
<tr><td class="h">1885</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># can be overridden with the parse_start_tag method</td></tr>
<tr><td class="h">1886</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># only works for 1-byte character sets</td></tr>
<tr><td class="h">1887</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _parse_start_tag</td></tr>
<tr><td class="h">1888</td><td><div class="c3">1338</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1888">1338</a></div></td><td></td><td><div>26496</div></td><td class="s">&nbsp;&nbsp;{ my $string= shift;</td></tr>
<tr><td class="h">1889</td><td><div class="c3">1338</div></td><td></td><td></td><td></td><td></td><td><div>2862</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $gi, @atts);</td></tr>
<tr><td class="h">1890</td><td colspan="7"></td></tr><tr><td class="h">1891</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# get the gi (between &lt; and the first space, / or &gt; character)</td></tr>
<tr><td class="h">1892</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#if( $string=~ s{^&lt;\s*([^\s&gt;/]*)[\s&gt;/]*}{}s)</td></tr>
<tr><td class="h">1893</td><td><div class="c3">1338</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1893">100</a></div></td><td></td><td></td><td></td><td><div>18919</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $string=~ s{^&lt;\s*($REG_NAME)\s*[\s&gt;/]}{}s)</td></tr>
<tr><td class="h">1894</td><td><div class="c3">1320</div></td><td></td><td></td><td></td><td></td><td><div>5938</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $gi= $1; }</td></tr>
<tr><td class="h">1895</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">1896</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>84</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;error parsing tag &#39;$string&#39;&quot;; }</td></tr>
<tr><td class="h">1897</td><td><div class="c3">1320</div></td><td></td><td></td><td></td><td></td><td><div>5811</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $string=~ s{^([^\s=]*)\s*=\s*([&quot;&#39;])(.*?)\2\s*}{}s)</td></tr>
<tr><td class="h">1898</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td></td><td><div>1394</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ push @atts, $1, $3; }</td></tr>
<tr><td class="h">1899</td><td><div class="c3">1320</div></td><td></td><td></td><td></td><td></td><td><div>7982</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $gi, @atts;</td></tr>
<tr><td class="h">1900</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1901</td><td colspan="7"></td></tr><tr><td class="h">1902</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_root</td></tr>
<tr><td class="h">1903</td><td><div class="c3">2780</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1903">2780</a></div></td><td></td><td><div>9894</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $elt)= @_;</td></tr>
<tr><td class="h">1904</td><td><div class="c3">2780</div></td><td></td><td></td><td></td><td></td><td><div>11421</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_root}= $elt;</td></tr>
<tr><td class="h">1905</td><td><div class="c3">2780</div></td><td></td><td></td><td></td><td></td><td><div>8499</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{twig}= $t;</td></tr>
<tr><td class="h">1906</td><td><div class="c3">2780</div><div class="c3">2779</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1906">100</a></div></td><td></td><td></td><td></td><td><div>7796</div><div>12116</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $weakrefs) { weaken(  $elt-&gt;{twig}); }</td></tr>
<tr><td class="h">1907</td><td><div class="c3">2780</div></td><td></td><td></td><td></td><td></td><td><div>6675</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t;</td></tr>
<tr><td class="h">1908</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1909</td><td colspan="7"></td></tr><tr><td class="h">1910</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_end</td></tr>
<tr><td class="h">1911</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_end...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">1912</td><td><div class="c3">10272</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1912">10272</a></div></td><td></td><td><div>44146</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($p, $gi)  = @_;</td></tr>
<tr><td class="h">1913</td><td colspan="7"></td></tr><tr><td class="h">1914</td><td><div class="c3">10272</div></td><td></td><td></td><td></td><td></td><td><div>35443</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t=$p-&gt;{twig};</td></tr>
<tr><td class="h">1915</td><td colspan="7"></td></tr><tr><td class="h">1916</td><td><div class="c3">10272</div><div class="c3">46</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1916">100</a></div></td><td></td><td></td><td></td><td><div>37699</div><div>179</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_map_xmlns}) { $gi= $t-&gt;_replace_prefix( $gi); }</td></tr>
<tr><td class="h">1917</td><td colspan="7"></td></tr><tr><td class="h">1918</td><td><div class="c3">10272</div></td><td></td><td></td><td></td><td></td><td><div>27603</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_add_or_discard_stored_spaces( $t);</td></tr>
<tr><td class="h">1919</td><td colspan="7"></td></tr><tr><td class="h">1920</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# the new twig_current is the parent</td></tr>
<tr><td class="h">1921</td><td><div class="c3">10272</div></td><td></td><td></td><td></td><td></td><td><div>31013</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $elt= $t-&gt;{twig_current};</td></tr>
<tr><td class="h">1922</td><td><div class="c3">10272</div></td><td></td><td></td><td></td><td></td><td><div>27331</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $elt-&gt;{&#39;twig_current&#39;};</td></tr>
<tr><td class="h">1923</td><td colspan="7"></td></tr><tr><td class="h">1924</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# if we were parsing PCDATA then we exit the pcdata too</td></tr>
<tr><td class="h">1925</td><td><div class="c3">10272</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1925">100</a></div></td><td></td><td></td><td></td><td><div>36386</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_in_pcdata})</td></tr>
<tr><td class="h">1926</td><td><div class="c3">6141</div></td><td></td><td></td><td></td><td></td><td><div>16613</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $t-&gt;{twig_in_pcdata}= 0;</td></tr>
<tr><td class="h">1927</td><td><div class="c3">6141</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L1927">50</a></div></td><td></td><td></td><td></td><td><div>29121</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt= $elt-&gt;{parent} if($elt-&gt;{parent});</td></tr>
<tr><td class="h">1928</td><td><div class="c3">6141</div></td><td></td><td></td><td></td><td></td><td><div>14780</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $elt-&gt;{&#39;twig_current&#39;};</td></tr>
<tr><td class="h">1929</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1930</td><td colspan="7"></td></tr><tr><td class="h">1931</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# parent is the new current element</td></tr>
<tr><td class="h">1932</td><td><div class="c3">10272</div></td><td></td><td></td><td></td><td></td><td><div>27602</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $parent= $elt-&gt;{parent};</td></tr>
<tr><td class="h">1933</td><td><div class="c3">10272</div></td><td></td><td></td><td></td><td></td><td><div>30223</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_current}= $parent;</td></tr>
<tr><td class="h">1934</td><td colspan="7"></td></tr><tr><td class="h">1935</td><td><div class="c3">10272</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1935">100</a></div></td><td></td><td></td><td></td><td><div>24640</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $parent)</td></tr>
<tr><td class="h">1936</td><td><div class="c3">7518</div></td><td></td><td></td><td></td><td></td><td><div>23029</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $parent-&gt;{&#39;twig_current&#39;}=1;</td></tr>
<tr><td class="h">1937</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# twig_to_be_normalized</td></tr>
<tr><td class="h">1938</td><td><div class="c3">7518</div><div class="c3">5</div><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1938">100</a></div></td><td></td><td></td><td></td><td><div>27251</div><div>19</div><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $parent-&gt;{twig_to_be_normalized}) { $parent-&gt;normalize; $parent-&gt;{twig_to_be_normalized}=0; }</td></tr>
<tr><td class="h">1939</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1940</td><td colspan="7"></td></tr><tr><td class="h">1941</td><td><div class="c3">10272</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1941">100</a></div></td><td></td><td></td><td></td><td><div>33185</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{extra_data}) </td></tr>
<tr><td class="h">1942</td><td><div class="c3">317</div></td><td></td><td></td><td></td><td></td><td><div>1450</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;_set_extra_data_before_end_tag( $t-&gt;{extra_data});  </td></tr>
<tr><td class="h">1943</td><td><div class="c3">317</div></td><td></td><td></td><td></td><td></td><td><div>1137</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{extra_data}=&#39;&#39;;</td></tr>
<tr><td class="h">1944</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1945</td><td colspan="7"></td></tr><tr><td class="h">1946</td><td><div class="c3">10272</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1946">100</a></div></td><td></td><td></td><td></td><td><div>32065</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_handlers})</td></tr>
<tr><td class="h">1947</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # look for handlers</td></tr>
<tr><td class="h">1948</td><td><div class="c3">3099</div></td><td></td><td></td><td></td><td></td><td><div>14054</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @handlers= _handler( $t, $t-&gt;{twig_handlers}, $gi);</td></tr>
<tr><td class="h">1949</td><td colspan="7"></td></tr><tr><td class="h">1950</td><td><div class="c3">3099</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1950">100</a></div></td><td></td><td></td><td></td><td><div>12506</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_tdh})</td></tr>
<tr><td class="h">1951</td><td><div class="c3">48</div><div class="c3">29</div><div class="c3">29</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1951">100</a></div></td><td></td><td></td><td></td><td><div>125</div><div>44</div><div>242</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( @handlers) { push @{$t-&gt;{twig_handlers_to_trigger}}, [ $elt, \@handlers ]; }</td></tr>
<tr><td class="h">1952</td><td><div class="c3">48</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1952">100</a></div></td><td></td><td></td><td></td><td><div>325</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $all= $t-&gt;{twig_handlers}-&gt;{handlers}-&gt;{$ALL}) </td></tr>
<tr><td class="h">1953</td><td><div class="c3">12</div><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>17</div><div>79</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ push @{$t-&gt;{twig_handlers_to_trigger}}, [ $elt, [$all] ]; }</td></tr>
<tr><td class="h">1954</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1955</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">1956</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">1957</td><td><div class="c3">3051</div></td><td></td><td></td><td></td><td></td><td><div>6630</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $_= $elt; # so we can use $_ in the handlers</td></tr>
<tr><td class="h">1958</td><td colspan="7"></td></tr><tr><td class="h">1959</td><td><div class="c3">3051</div></td><td></td><td></td><td></td><td></td><td><div>9137</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $handler ( @handlers)</td></tr>
<tr><td class="h">1960</td><td><div class="c3">535</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1960">100</a></div></td><td></td><td></td><td></td><td><div>2188</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $handler-&gt;($t, $elt) || last; }</td></tr>
<tr><td class="h">1961</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# call _all_ handler if needed</td></tr>
<tr><td class="h">1962</td><td><div class="c3">3039</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1962">100</a></div></td><td></td><td></td><td></td><td><div>31825</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $all= $t-&gt;{twig_handlers}-&gt;{handlers}-&gt;{$ALL})</td></tr>
<tr><td class="h">1963</td><td><div class="c3">33</div></td><td></td><td></td><td></td><td></td><td><div>123</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $all-&gt;($t, $elt); }</td></tr>
<tr><td class="h">1964</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1965</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1966</td><td colspan="7"></td></tr><tr><td class="h">1967</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# if twig_roots is set for the element then set appropriate handler</td></tr>
<tr><td class="h">1968</td><td><div class="c3">10260</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1968">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L1968">100</a></div></td><td></td><td></td><td><div>41205</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if(  $t-&gt;{twig_root_depth} and ($p-&gt;depth == $t-&gt;{twig_root_depth}) )</td></tr>
<tr><td class="h">1969</td><td><div class="c3">76</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1969">100</a></div></td><td></td><td></td><td></td><td><div>1513</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $t-&gt;{twig_default_print})</td></tr>
<tr><td class="h">1970</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # select the proper fh (and store the currently selected one)</td></tr>
<tr><td class="h">1971</td><td><div class="c3">24</div></td><td></td><td></td><td></td><td></td><td><div>86</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;_set_fh_to_twig_output_fh(); </td></tr>
<tr><td class="h">1972</td><td><div class="c3">24</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1972">100</a></div></td><td></td><td></td><td></td><td><div>109</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_keep_encoding})</td></tr>
<tr><td class="h">1973</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>78</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $p-&gt;setHandlers( %twig_handlers_roots_print_original); }</td></tr>
<tr><td class="h">1974</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">1975</td><td><div class="c3">19</div></td><td></td><td></td><td></td><td></td><td><div>233</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $p-&gt;setHandlers( %twig_handlers_roots_print); }</td></tr>
<tr><td class="h">1976</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1977</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">1978</td><td><div class="c3">52</div></td><td></td><td></td><td></td><td></td><td><div>751</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $p-&gt;setHandlers( %twig_handlers_roots); }</td></tr>
<tr><td class="h">1979</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1980</td><td colspan="7"></td></tr><tr><td class="h">1981</td><td><div class="c3">10260</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1981">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L1981">67</a></div></td><td></td><td></td><td><div>76115</div><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;{&#39;att&#39;}-&gt;{&#39;xml:space&#39;} &amp;&amp; (  $elt-&gt;{&#39;att&#39;}-&gt;{&#39;xml:space&#39;} eq &#39;preserve&#39;)) { $t-&gt;{twig_preserve_space}--; }</td></tr>
<tr><td class="h">1982</td><td colspan="7"></td></tr><tr><td class="h">1983</td><td><div class="c3">10260</div><div class="c3">10260</div></td><td></td><td></td><td></td><td></td><td><div>14351</div><div>35899</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;pop @{$t-&gt;{_twig_context_stack}};</td></tr>
<tr><td class="h">1984</td><td><div class="c3">10260</div></td><td></td><td></td><td></td><td></td><td><div>41547</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1985</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1986</td><td colspan="7"></td></tr><tr><td class="h">1987</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _trigger_tdh</td></tr>
<tr><td class="h">1988</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L1988">4</a></div></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;{ my( $t)= @_;</td></tr>
<tr><td class="h">1989</td><td colspan="7"></td></tr><tr><td class="h">1990</td><td><div class="c3">4</div><div class="c3">4</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L1990">50</a></div></td><td></td><td></td><td></td><td><div>8</div><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( @{$t-&gt;{twig_handlers_to_trigger}})</td></tr>
<tr><td class="h">1991</td><td><div class="c3">4</div><div class="c3">78</div><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>7</div><div>380</div><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my @handlers_to_trigger_now= sort { $a-&gt;[0]-&gt;cmp( $b-&gt;[0]) } @{$t-&gt;{twig_handlers_to_trigger}};</td></tr>
<tr><td class="h">1992</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $elt_handlers (@handlers_to_trigger_now)</td></tr>
<tr><td class="h">1993</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td></td><td><div>132</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my( $handled_elt, $handlers_to_trigger)= @$elt_handlers;</td></tr>
<tr><td class="h">1994</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td></td><td><div>110</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $handler ( @$handlers_to_trigger) </td></tr>
<tr><td class="h">1995</td><td><div class="c3">41</div><div class="c3">41</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L1995">50</a></div></td><td></td><td></td><td></td><td><div>78</div><div>123</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ local $_= $handled_elt; $handler-&gt;($t, $handled_elt) || last; }</td></tr>
<tr><td class="h">1996</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1997</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1998</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1999</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2000</td><td colspan="7"></td></tr><tr><td class="h">2001</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># return the list of handler that can be activated for an element </td></tr>
<tr><td class="h">2002</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># (either of CODE ref&#39;s or 1&#39;s for twig_roots)</td></tr>
<tr><td class="h">2003</td><td colspan="7"></td></tr><tr><td class="h">2004</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _handler</td></tr>
<tr><td class="h">2005</td><td><div class="c3">3705</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2005">3705</a></div></td><td></td><td><div>17798</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $handlers, $gi)= @_;</td></tr>
<tr><td class="h">2006</td><td colspan="7"></td></tr><tr><td class="h">2007</td><td><div class="c3">3705</div></td><td></td><td></td><td></td><td></td><td><div>10274</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @found_handlers=();</td></tr>
<tr><td class="h">2008</td><td><div class="c3">3705</div></td><td></td><td></td><td></td><td></td><td><div>5076</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $found_handler;</td></tr>
<tr><td class="h">2009</td><td colspan="7"></td></tr><tr><td class="h">2010</td><td><div class="c3">3705</div><div class="c3">777</div><div class="c3">7410</div></td><td></td><td></td><td></td><td></td><td><div>27104</div><div>3227</div><div>25032</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $handler ( map { @$_ } grep { $_ } $handlers-&gt;{xpath_handler}-&gt;{$gi}, $handlers-&gt;{xpath_handler}-&gt;{&#39;*&#39;})</td></tr>
<tr><td class="h">2011</td><td><div class="c3">1075</div></td><td></td><td></td><td></td><td></td><td><div>3533</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{  my $trigger= $handler-&gt;{trigger};</td></tr>
<tr><td class="h">2012</td><td><div class="c3">1075</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2012">100</a></div></td><td></td><td></td><td></td><td><div>5017</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $found_path= $trigger-&gt;( $t-&gt;{_twig_context_stack}))</td></tr>
<tr><td class="h">2013</td><td><div class="c3">695</div></td><td></td><td></td><td></td><td></td><td><div>2316</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $found_handler= $handler-&gt;{handler};</td></tr>
<tr><td class="h">2014</td><td><div class="c3">695</div></td><td></td><td></td><td></td><td></td><td><div>3358</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @found_handlers, $found_handler; </td></tr>
<tr><td class="h">2015</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2016</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2017</td><td colspan="7"></td></tr><tr><td class="h">2018</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# if no handler found call default handler if defined</td></tr>
<tr><td class="h">2019</td><td><div class="c3">3705</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2019">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L2019">100</a></div></td><td></td><td></td><td><div>36317</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !@found_handlers &amp;&amp; defined $handlers-&gt;{handlers}-&gt;{$DEFAULT})</td></tr>
<tr><td class="h">2020</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td></td><td><div>201</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ push @found_handlers, $handlers-&gt;{handlers}-&gt;{$DEFAULT}; }</td></tr>
<tr><td class="h">2021</td><td colspan="7"></td></tr><tr><td class="h">2022</td><td><div class="c3">3705</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2022">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L2022">100</a></div></td><td></td><td></td><td><div>17001</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( @found_handlers and $t-&gt;{twig_do_not_chain_handlers}) </td></tr>
<tr><td class="h">2023</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ @found_handlers= ($found_handlers[0]); }</td></tr>
<tr><td class="h">2024</td><td colspan="7"></td></tr><tr><td class="h">2025</td><td><div class="c3">3705</div></td><td></td><td></td><td></td><td></td><td><div>15194</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @found_handlers; # empty if no handler found</td></tr>
<tr><td class="h">2026</td><td colspan="7"></td></tr><tr><td class="h">2027</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2028</td><td colspan="7"></td></tr><tr><td class="h">2029</td><td colspan="7"></td></tr><tr><td class="h">2030</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _replace_prefix</td></tr>
<tr><td class="h">2031</td><td><div class="c3">125</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2031">125</a></div></td><td></td><td><div>478</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $name)= @_;</td></tr>
<tr><td class="h">2032</td><td><div class="c3">125</div></td><td></td><td></td><td></td><td></td><td><div>462</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $p= $t-&gt;parser;</td></tr>
<tr><td class="h">2033</td><td><div class="c3">125</div></td><td></td><td></td><td></td><td></td><td><div>614</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $uri= $p-&gt;namespace( $name);</td></tr>
<tr><td class="h">2034</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# try to get the namespace from default if none is found (for attributes)</td></tr>
<tr><td class="h">2035</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# this should probably be an option</td></tr>
<tr><td class="h">2036</td><td><div class="c3">125</div><div class="c3">34</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2036">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L2036">100</a></div></td><td></td><td></td><td><div>3344</div><div>150</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !$uri and( $name!~/^xml/)) { $uri= $p-&gt;expand_ns_prefix( &#39;#default&#39;); }</td></tr>
<tr><td class="h">2037</td><td><div class="c3">125</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2037">100</a></div></td><td></td><td></td><td></td><td><div>976</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $uri)</td></tr>
<tr><td class="h">2038</td><td><div class="c3">75</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2038">100</a></div></td><td></td><td></td><td></td><td><div>385</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if (my $mapped_prefix= $t-&gt;{twig_map_xmlns}-&gt;{$uri})</td></tr>
<tr><td class="h">2039</td><td><div class="c3">68</div></td><td></td><td></td><td></td><td></td><td><div>354</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return &quot;$mapped_prefix:$name&quot;; }</td></tr>
<tr><td class="h">2040</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">2041</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $prefix= _a_proper_ns_prefix( $p, $uri);</td></tr>
<tr><td class="h">2042</td><td><div class="c3">7</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2042">100</a></div></td><td></td><td></td><td></td><td><div>33</div><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $prefix eq &#39;#default&#39;) { $prefix=&#39;&#39;; }</td></tr>
<tr><td class="h">2043</td><td><div class="c3">7</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2043">100</a></div></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $prefix ? &quot;$prefix:$name&quot; : $name; </td></tr>
<tr><td class="h">2044</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2045</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2046</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">2047</td><td><div class="c3">50</div></td><td></td><td></td><td></td><td></td><td><div>211</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return $name; }</td></tr>
<tr><td class="h">2048</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2049</td><td colspan="7"></td></tr><tr><td class="h">2050</td><td colspan="7"></td></tr><tr><td class="h">2051</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_char</td></tr>
<tr><td class="h">2052</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_char...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">2053</td><td colspan="7"></td></tr><tr><td class="h">2054</td><td><div class="c3">15976</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2054">15976</a></div></td><td></td><td><div>67009</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my ($p, $string)= @_;</td></tr>
<tr><td class="h">2055</td><td><div class="c3">15976</div></td><td></td><td></td><td></td><td></td><td><div>53719</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t=$p-&gt;{twig}; </td></tr>
<tr><td class="h">2056</td><td colspan="7"></td></tr><tr><td class="h">2057</td><td><div class="c3">15976</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2057">100</a></div></td><td></td><td></td><td></td><td><div>59470</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_keep_encoding})</td></tr>
<tr><td class="h">2058</td><td><div class="c3">6556</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2058">100</a></div></td><td></td><td></td><td></td><td><div>21208</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( !$t-&gt;{twig_in_cdata})</td></tr>
<tr><td class="h">2059</td><td><div class="c3">461</div></td><td></td><td></td><td></td><td></td><td><div>1727</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $string= $p-&gt;original_string(); }</td></tr>
<tr><td class="h">2060</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">2061</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">2062</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2062">92</a></div></td><td></td><td><div>1025</div><div>222</div><div>967</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use bytes; # &gt; perl 5.5</td></tr>
<tr><td class="h">2063</td><td><div class="c3">6095</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2063">100</a></div></td><td></td><td></td><td></td><td><div>17077</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( length( $string) &lt; 1024)</td></tr>
<tr><td class="h">2064</td><td><div class="c3">6055</div></td><td></td><td></td><td></td><td></td><td><div>21312</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $string= $p-&gt;original_string(); }</td></tr>
<tr><td class="h">2065</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">2066</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ #warn &quot;dodgy case&quot;;</td></tr>
<tr><td class="h">2067</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# TODO original_string does not hold the entire string, but $string is wrong</td></tr>
<tr><td class="h">2068</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# I believe due to a bug in XML::Parser</td></tr>
<tr><td class="h">2069</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# for now, we use the original string, even if it means that it&#39;s been converted to utf8</td></tr>
<tr><td class="h">2070</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2071</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2072</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2073</td><td colspan="7"></td></tr><tr><td class="h">2074</td><td><div class="c3">15976</div><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2074">100</a></div></td><td></td><td></td><td></td><td><div>153809</div><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_input_filter}) { $string= $t-&gt;{twig_input_filter}-&gt;( $string); }</td></tr>
<tr><td class="h">2075</td><td><div class="c3">15976</div><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2075">100</a></div></td><td></td><td></td><td></td><td><div>55025</div><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_char_handler}) { $string= $t-&gt;{twig_char_handler}-&gt;( $string); }</td></tr>
<tr><td class="h">2076</td><td colspan="7"></td></tr><tr><td class="h">2077</td><td><div class="c3">15976</div></td><td></td><td></td><td></td><td></td><td><div>43354</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $elt= $t-&gt;{twig_current};</td></tr>
<tr><td class="h">2078</td><td colspan="7"></td></tr><tr><td class="h">2079</td><td><div class="c3">15976</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2079">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2079">100</a></div></td><td></td><td></td><td></td><td><div>66418</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if(    $t-&gt;{twig_in_cdata})</td></tr>
<tr><td class="h">2080</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # text is the continuation of a previously created cdata</td></tr>
<tr><td class="h">2081</td><td><div class="c3">6142</div></td><td></td><td></td><td></td><td></td><td><div>29677</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{cdata}.=  $t-&gt;{twig_stored_spaces} . $string;</td></tr>
<tr><td class="h">2082</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} </td></tr>
<tr><td class="h">2083</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $t-&gt;{twig_in_pcdata})</td></tr>
<tr><td class="h">2084</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # text is the continuation of a previously created cdata</td></tr>
<tr><td class="h">2085</td><td><div class="c3">257</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2085">100</a></div></td><td></td><td></td><td></td><td><div>901</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{extra_data})</td></tr>
<tr><td class="h">2086</td><td><div class="c3">72</div></td><td></td><td></td><td></td><td></td><td><div>449</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;_push_extra_data_in_pcdata( $t-&gt;{extra_data}, length( $elt-&gt;{pcdata}));</td></tr>
<tr><td class="h">2087</td><td><div class="c3">72</div></td><td></td><td></td><td></td><td></td><td><div>270</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{extra_data}=&#39;&#39;;</td></tr>
<tr><td class="h">2088</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2089</td><td><div class="c3">257</div></td><td></td><td></td><td></td><td></td><td><div>930</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{pcdata}.=  $string; </td></tr>
<tr><td class="h">2090</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} </td></tr>
<tr><td class="h">2091</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">2092</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # text is just space, which might be discarded later</td></tr>
<tr><td class="h">2093</td><td><div class="c3">9577</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2093">100</a></div></td><td></td><td></td><td></td><td><div>38742</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $string=~/\A\s*\Z/s)</td></tr>
<tr><td class="h">2094</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">2095</td><td><div class="c3">3296</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2095">100</a></div></td><td></td><td></td><td></td><td><div>12253</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{extra_data})</td></tr>
<tr><td class="h">2096</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # we got extra data (comment, pi), lets add the spaces to it</td></tr>
<tr><td class="h">2097</td><td><div class="c3">34</div></td><td></td><td></td><td></td><td></td><td><div>135</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{extra_data} .= $string; </td></tr>
<tr><td class="h">2098</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2099</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">2100</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # no extra data, just store the spaces</td></tr>
<tr><td class="h">2101</td><td><div class="c3">3262</div></td><td></td><td></td><td></td><td></td><td><div>13298</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_stored_spaces}.= $string;</td></tr>
<tr><td class="h">2102</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2103</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} </td></tr>
<tr><td class="h">2104</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">2105</td><td><div class="c3">6281</div></td><td></td><td></td><td></td><td></td><td><div>32616</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $new_elt= _insert_pcdata( $t, $t-&gt;{twig_stored_spaces}.$string);</td></tr>
<tr><td class="h">2106</td><td><div class="c3">6281</div></td><td></td><td></td><td></td><td></td><td><div>17435</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $elt-&gt;{&#39;twig_current&#39;};</td></tr>
<tr><td class="h">2107</td><td><div class="c3">6281</div></td><td></td><td></td><td></td><td></td><td><div>18457</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$new_elt-&gt;{&#39;twig_current&#39;}=1;</td></tr>
<tr><td class="h">2108</td><td><div class="c3">6281</div></td><td></td><td></td><td></td><td></td><td><div>17906</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_current}= $new_elt;</td></tr>
<tr><td class="h">2109</td><td><div class="c3">6281</div></td><td></td><td></td><td></td><td></td><td><div>17638</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_in_pcdata}=1;</td></tr>
<tr><td class="h">2110</td><td><div class="c3">6281</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2110">100</a></div></td><td></td><td></td><td></td><td><div>26754</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{extra_data})</td></tr>
<tr><td class="h">2111</td><td><div class="c3">23</div></td><td></td><td></td><td></td><td></td><td><div>114</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $new_elt-&gt;_push_extra_data_in_pcdata( $t-&gt;{extra_data}, 0);</td></tr>
<tr><td class="h">2112</td><td><div class="c3">23</div></td><td></td><td></td><td></td><td></td><td><div>106</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{extra_data}=&#39;&#39;;</td></tr>
<tr><td class="h">2113</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2114</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2115</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2116</td><td><div class="c3">15976</div></td><td></td><td></td><td></td><td></td><td><div>30080</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return; </td></tr>
<tr><td class="h">2117</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2118</td><td colspan="7"></td></tr><tr><td class="h">2119</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_cdatastart</td></tr>
<tr><td class="h">2120</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_cdatastart...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">2121</td><td colspan="7"></td></tr><tr><td class="h">2122</td><td><div class="c3">95</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2122">95</a></div></td><td></td><td><div>295</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $p= shift;</td></tr>
<tr><td class="h">2123</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>314</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t=$p-&gt;{twig};</td></tr>
<tr><td class="h">2124</td><td colspan="7"></td></tr><tr><td class="h">2125</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>323</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_in_cdata}=1;</td></tr>
<tr><td class="h">2126</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>466</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $cdata=  $t-&gt;{twig_elt_class}-&gt;new( &#39;#CDATA&#39;);</td></tr>
<tr><td class="h">2127</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>324</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $twig_current= $t-&gt;{twig_current};</td></tr>
<tr><td class="h">2128</td><td colspan="7"></td></tr><tr><td class="h">2129</td><td><div class="c3">95</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2129">100</a></div></td><td></td><td></td><td></td><td><div>348</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_in_pcdata})</td></tr>
<tr><td class="h">2130</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # create the node as a sibling of the #PCDATA</td></tr>
<tr><td class="h">2131</td><td><div class="c3">17</div><div class="c3">17</div><div class="c3">17</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2131">50</a></div></td><td></td><td></td><td></td><td><div>54</div><div>53</div><div>77</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$cdata-&gt;{prev_sibling}=$twig_current; if( $XML::Twig::weakrefs) { weaken( $cdata-&gt;{prev_sibling});} ;</td></tr>
<tr><td class="h">2132</td><td><div class="c3">17</div></td><td></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$twig_current-&gt;{next_sibling}=  $cdata;</td></tr>
<tr><td class="h">2133</td><td><div class="c3">17</div></td><td></td><td></td><td></td><td></td><td><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $parent= $twig_current-&gt;{parent};</td></tr>
<tr><td class="h">2134</td><td><div class="c3">17</div><div class="c3">17</div><div class="c3">17</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2134">50</a></div></td><td></td><td></td><td></td><td><div>48</div><div>50</div><div>65</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$cdata-&gt;{parent}=$parent; if( $XML::Twig::weakrefs) { weaken( $cdata-&gt;{parent});} ;</td></tr>
<tr><td class="h">2135</td><td><div class="c3">17</div><div class="c3">17</div><div class="c3">17</div><div class="c3">17</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2135">50</a></div></td><td></td><td></td><td></td><td><div>46</div><div>53</div><div>44</div><div>83</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $parent-&gt;{empty}; $parent-&gt;{last_child}=$cdata; if( $XML::Twig::weakrefs) { weaken( $parent-&gt;{last_child});} ;</td></tr>
<tr><td class="h">2136</td><td><div class="c3">17</div></td><td></td><td></td><td></td><td></td><td><div>59</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_in_pcdata}=0;</td></tr>
<tr><td class="h">2137</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2138</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">2139</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # we have to create a PCDATA element if we need to store spaces</td></tr>
<tr><td class="h">2140</td><td><div class="c3">78</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2140">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L2140">67</a></div></td><td></td><td></td><td><div>451</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;_space_policy($XML::Twig::index2gi[$twig_current-&gt;{&#39;gi&#39;}]) &amp;&amp; $t-&gt;{twig_stored_spaces})</td></tr>
<tr><td class="h">2141</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ _insert_pcdata( $t, $t-&gt;{twig_stored_spaces}); }</td></tr>
<tr><td class="h">2142</td><td><div class="c3">78</div></td><td></td><td></td><td></td><td></td><td><div>267</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_stored_spaces}=&#39;&#39;;</td></tr>
<tr><td class="h">2143</td><td colspan="7"></td></tr><tr><td class="h">2144</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# create the node as a child of the current element      </td></tr>
<tr><td class="h">2145</td><td><div class="c3">78</div><div class="c3">78</div><div class="c3">78</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2145">50</a></div></td><td></td><td></td><td></td><td><div>325</div><div>229</div><div>350</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$cdata-&gt;{parent}=$twig_current; if( $XML::Twig::weakrefs) { weaken( $cdata-&gt;{parent});} ;</td></tr>
<tr><td class="h">2146</td><td><div class="c3">78</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2146">100</a></div></td><td></td><td></td><td></td><td><div>312</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $prev_sibling= $twig_current-&gt;{last_child})</td></tr>
<tr><td class="h">2147</td><td><div class="c3">8</div><div class="c3">8</div><div class="c3">8</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2147">50</a></div></td><td></td><td></td><td></td><td><div>26</div><div>27</div><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $cdata-&gt;{prev_sibling}=$prev_sibling; if( $XML::Twig::weakrefs) { weaken( $cdata-&gt;{prev_sibling});} ;</td></tr>
<tr><td class="h">2148</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$prev_sibling-&gt;{next_sibling}=  $cdata;</td></tr>
<tr><td class="h">2149</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2150</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">2151</td><td><div class="c3">70</div></td><td></td><td></td><td></td><td></td><td><div>248</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $twig_current-&gt;{first_child}=  $cdata; }</td></tr>
<tr><td class="h">2152</td><td><div class="c3">78</div><div class="c3">78</div><div class="c3">78</div><div class="c3">78</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2152">50</a></div></td><td></td><td></td><td></td><td><div>215</div><div>2233</div><div>241</div><div>563</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $twig_current-&gt;{empty}; $twig_current-&gt;{last_child}=$cdata; if( $XML::Twig::weakrefs) { weaken( $twig_current-&gt;{last_child});} ;</td></tr>
<tr><td class="h">2153</td><td colspan="7"></td></tr><tr><td class="h">2154</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2155</td><td colspan="7"></td></tr><tr><td class="h">2156</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>256</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $twig_current-&gt;{&#39;twig_current&#39;};</td></tr>
<tr><td class="h">2157</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>284</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_current}= $cdata;</td></tr>
<tr><td class="h">2158</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>289</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$cdata-&gt;{&#39;twig_current&#39;}=1;</td></tr>
<tr><td class="h">2159</td><td><div class="c3">95</div><div class="c3">4</div><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2159">100</a></div></td><td></td><td></td><td></td><td><div>360</div><div>18</div><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{extra_data}) { $cdata-&gt;set_extra_data( $t-&gt;{extra_data}); $t-&gt;{extra_data}=&#39;&#39; };</td></tr>
<tr><td class="h">2160</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>192</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">2161</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2162</td><td colspan="7"></td></tr><tr><td class="h">2163</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_cdataend</td></tr>
<tr><td class="h">2164</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_cdataend...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">2165</td><td colspan="7"></td></tr><tr><td class="h">2166</td><td><div class="c3">95</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2166">95</a></div></td><td></td><td><div>279</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $p= shift;</td></tr>
<tr><td class="h">2167</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>296</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t=$p-&gt;{twig};</td></tr>
<tr><td class="h">2168</td><td colspan="7"></td></tr><tr><td class="h">2169</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>274</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_in_cdata}=0;</td></tr>
<tr><td class="h">2170</td><td colspan="7"></td></tr><tr><td class="h">2171</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>260</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $elt= $t-&gt;{twig_current};</td></tr>
<tr><td class="h">2172</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>255</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $elt-&gt;{&#39;twig_current&#39;};</td></tr>
<tr><td class="h">2173</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>393</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $cdata= $elt-&gt;{cdata};</td></tr>
<tr><td class="h">2174</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>341</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;_set_cdata( $cdata);</td></tr>
<tr><td class="h">2175</td><td colspan="7"></td></tr><tr><td class="h">2176</td><td><div class="c3">95</div><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>158</div><div>606</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;push @{$t-&gt;{_twig_context_stack}}, { _tag =&gt; &#39;#CDATA&#39; };</td></tr>
<tr><td class="h">2177</td><td colspan="7"></td></tr><tr><td class="h">2178</td><td><div class="c3">95</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2178">100</a></div></td><td></td><td></td><td></td><td><div>434</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_handlers})</td></tr>
<tr><td class="h">2179</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # look for handlers</td></tr>
<tr><td class="h">2180</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>74</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @handlers= _handler( $t, $t-&gt;{twig_handlers}, CDATA);</td></tr>
<tr><td class="h">2181</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>36</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local $_= $elt; # so we can use $_ in the handlers</td></tr>
<tr><td class="h">2182</td><td><div class="c3">16</div><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2182">100</a></div></td><td></td><td></td><td></td><td><div>60</div><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $handler ( @handlers) { $handler-&gt;($t, $elt) || last; }</td></tr>
<tr><td class="h">2183</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2184</td><td colspan="7"></td></tr><tr><td class="h">2185</td><td><div class="c3">95</div><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>143</div><div>331</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;pop @{$t-&gt;{_twig_context_stack}};</td></tr>
<tr><td class="h">2186</td><td colspan="7"></td></tr><tr><td class="h">2187</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>416</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt= $elt-&gt;{parent};</td></tr>
<tr><td class="h">2188</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>279</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_current}= $elt;</td></tr>
<tr><td class="h">2189</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>292</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{&#39;twig_current&#39;}=1;</td></tr>
<tr><td class="h">2190</td><td colspan="7"></td></tr><tr><td class="h">2191</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>326</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_long_cdata}=0;</td></tr>
<tr><td class="h">2192</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>194</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">2193</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2194</td><td colspan="7"></td></tr><tr><td class="h">2195</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _pi_elt_handlers</td></tr>
<tr><td class="h">2196</td><td><div class="c3">1463</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2196">1463</a></div></td><td></td><td><div>7390</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $pi)= @_;</td></tr>
<tr><td class="h">2197</td><td><div class="c3">1463</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L2197">67</a></div></td><td></td><td></td><td><div>11112</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $pi_handlers= $t-&gt;{twig_handlers}-&gt;{pi_handlers} || return;</td></tr>
<tr><td class="h">2198</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>59</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $handler ( $pi_handlers-&gt;{$pi-&gt;{target}}, $pi_handlers-&gt;{&#39;&#39;})</td></tr>
<tr><td class="h">2199</td><td><div class="c3">14</div><div class="c3">7</div><div class="c3">7</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2199">50</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2199">100</a></div></td><td></td><td></td><td></td><td><div>67</div><div>15</div><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $handler) { local $_= $pi; $handler-&gt;( $t, $pi) || last; } }</td></tr>
<tr><td class="h">2200</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2201</td><td colspan="7"></td></tr><tr><td class="h">2202</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _pi_text_handler</td></tr>
<tr><td class="h">2203</td><td><div class="c3">1503</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2203">1503</a></div></td><td></td><td><div>6627</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $target, $data)= @_;</td></tr>
<tr><td class="h">2204</td><td><div class="c3">1503</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2204">100</a></div></td><td></td><td></td><td></td><td><div>10352</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $handler= $t-&gt;{twig_handlers}-&gt;{pi_handlers}-&gt;{$target})</td></tr>
<tr><td class="h">2205</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return $handler-&gt;( $t, $target, $data); }</td></tr>
<tr><td class="h">2206</td><td><div class="c3">1502</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2206">100</a></div></td><td></td><td></td><td></td><td><div>7944</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $handler= $t-&gt;{twig_handlers}-&gt;{pi_handlers}-&gt;{&#39;&#39;})</td></tr>
<tr><td class="h">2207</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return $handler-&gt;( $t, $target, $data); }</td></tr>
<tr><td class="h">2208</td><td><div class="c3">1501</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2208">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L2208">100</a></div></td><td></td><td></td><td><div>19921</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return defined( $data) &amp;&amp; $data ne &#39;&#39;  ? &quot;&lt;?$target $data?&gt;&quot; : &quot;&lt;?$target?&gt;&quot; ;</td></tr>
<tr><td class="h">2209</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2210</td><td colspan="7"></td></tr><tr><td class="h">2211</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _comment_elt_handler</td></tr>
<tr><td class="h">2212</td><td><div class="c3">1753</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2212">1753</a></div></td><td></td><td><div>6054</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $comment)= @_; </td></tr>
<tr><td class="h">2213</td><td><div class="c3">1753</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2213">100</a></div></td><td></td><td></td><td></td><td><div>15605</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $handler= $t-&gt;{twig_handlers}-&gt;{handlers}-&gt;{&#39;#COMMENT&#39;})</td></tr>
<tr><td class="h">2214</td><td><div class="c3">6</div><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>15</div><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ local $_= $comment; $handler-&gt;($t, $comment); }</td></tr>
<tr><td class="h">2215</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2216</td><td colspan="7"></td></tr><tr><td class="h">2217</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _comment_text_handler</td></tr>
<tr><td class="h">2218</td><td><div class="c3">1879</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2218">1879</a></div></td><td></td><td><div>7157</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $comment)= @_; </td></tr>
<tr><td class="h">2219</td><td><div class="c3">1879</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2219">100</a></div></td><td></td><td></td><td></td><td><div>13523</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $handler= $t-&gt;{twig_handlers}-&gt;{handlers}-&gt;{&#39;#COMMENT&#39;})</td></tr>
<tr><td class="h">2220</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $comment= $handler-&gt;($t, $comment); </td></tr>
<tr><td class="h">2221</td><td><div class="c3">4</div><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2221">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L2221">100</a></div></td><td></td><td></td><td><div>89</div><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( !defined $comment || $comment eq &#39;&#39;) { return &#39;&#39;; }</td></tr>
<tr><td class="h">2222</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2223</td><td><div class="c3">1877</div></td><td></td><td></td><td></td><td></td><td><div>10246</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return &quot;&lt;!--$comment--&gt;&quot;;</td></tr>
<tr><td class="h">2224</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2225</td><td colspan="7"></td></tr><tr><td class="h">2226</td><td colspan="7"></td></tr><tr><td class="h">2227</td><td colspan="7"></td></tr><tr><td class="h">2228</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_comment</td></tr>
<tr><td class="h">2229</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_comment...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">2230</td><td colspan="7"></td></tr><tr><td class="h">2231</td><td><div class="c3">3637</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2231">3637</a></div></td><td></td><td><div>16773</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $p, $comment_text)= @_;</td></tr>
<tr><td class="h">2232</td><td><div class="c3">3637</div></td><td></td><td></td><td></td><td></td><td><div>13777</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t=$p-&gt;{twig};</td></tr>
<tr><td class="h">2233</td><td colspan="7"></td></tr><tr><td class="h">2234</td><td><div class="c3">3637</div><div class="c3">1751</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2234">100</a></div></td><td></td><td></td><td></td><td><div>15600</div><div>7350</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_keep_encoding}) { $comment_text= substr( $p-&gt;original_string(), 4, -3); }</td></tr>
<tr><td class="h">2235</td><td colspan="7"></td></tr><tr><td class="h">2236</td><td><div class="c3">3637</div></td><td></td><td></td><td></td><td></td><td><div>60259</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;_twig_pi_comment( $p, &#39;#COMMENT&#39;, $t-&gt;{twig_keep_comments}, $t-&gt;{twig_process_comments},</td></tr>
<tr><td class="h">2237</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;_set_comment&#39;, &#39;_comment_elt_handler&#39;, &#39;_comment_text_handler&#39;, $comment_text</td></tr>
<tr><td class="h">2238</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">2239</td><td><div class="c3">3637</div></td><td></td><td></td><td></td><td></td><td><div>8722</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">2240</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2241</td><td colspan="7"></td></tr><tr><td class="h">2242</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_pi</td></tr>
<tr><td class="h">2243</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_pi...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">2244</td><td colspan="7"></td></tr><tr><td class="h">2245</td><td><div class="c3">2972</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2245">2972</a></div></td><td></td><td><div>16027</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $p, $target, $data)= @_;</td></tr>
<tr><td class="h">2246</td><td><div class="c3">2972</div></td><td></td><td></td><td></td><td></td><td><div>11684</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t=$p-&gt;{twig};</td></tr>
<tr><td class="h">2247</td><td colspan="7"></td></tr><tr><td class="h">2248</td><td><div class="c3">2972</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2248">100</a></div></td><td></td><td></td><td></td><td><div>12157</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_keep_encoding}) </td></tr>
<tr><td class="h">2249</td><td><div class="c3">1459</div></td><td></td><td></td><td></td><td></td><td><div>6180</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $pi_text= substr( $p-&gt;original_string(), 2, -2); </td></tr>
<tr><td class="h">2250</td><td><div class="c3">1459</div></td><td></td><td></td><td></td><td></td><td><div>33363</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($target, $data)= split( /\s+/, $pi_text, 2);</td></tr>
<tr><td class="h">2251</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2252</td><td colspan="7"></td></tr><tr><td class="h">2253</td><td><div class="c3">2972</div></td><td></td><td></td><td></td><td></td><td><div>24428</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;_twig_pi_comment( $p, &#39;#PI&#39;, $t-&gt;{twig_keep_pi}, $t-&gt;{twig_process_pi},</td></tr>
<tr><td class="h">2254</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;_set_pi&#39;, &#39;_pi_elt_handlers&#39;, &#39;_pi_text_handler&#39;, $target, $data</td></tr>
<tr><td class="h">2255</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">2256</td><td><div class="c3">2972</div></td><td></td><td></td><td></td><td></td><td><div>7031</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">2257</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2258</td><td colspan="7"></td></tr><tr><td class="h">2259</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_pi_comment</td></tr>
<tr><td class="h">2260</td><td><div class="c3">6609</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2260">6609</a></div></td><td></td><td><div>65316</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $p, $type, $keep, $process, $set, $elt_handler, $text_handler, @parser_args)= @_;</td></tr>
<tr><td class="h">2261</td><td colspan="7"></td></tr><tr><td class="h">2262</td><td><div class="c3">6609</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2262">100</a></div></td><td></td><td></td><td></td><td><div>35031</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_input_filter})</td></tr>
<tr><td class="h">2263</td><td><div class="c3">2</div><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>6</div><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ foreach my $arg (@parser_args) { $arg= $t-&gt;{twig_input_filter}-&gt;( $arg); } }</td></tr>
<tr><td class="h">2264</td><td colspan="7"></td></tr><tr><td class="h">2265</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# if pi/comments are to be kept then we piggiback them to the current element</td></tr>
<tr><td class="h">2266</td><td><div class="c3">6609</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2266">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2266">100</a></div></td><td></td><td></td><td></td><td><div>22012</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $keep)</td></tr>
<tr><td class="h">2267</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # first add spaces</td></tr>
<tr><td class="h">2268</td><td><div class="c3">3382</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2268">100</a></div></td><td></td><td></td><td></td><td><div>11852</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_stored_spaces})</td></tr>
<tr><td class="h">2269</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>100</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $t-&gt;{extra_data}.= $t-&gt;{twig_stored_spaces};</td></tr>
<tr><td class="h">2270</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>77</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_stored_spaces}= &#39;&#39;;</td></tr>
<tr><td class="h">2271</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2272</td><td colspan="7"></td></tr><tr><td class="h">2273</td><td><div class="c3">3382</div></td><td></td><td></td><td></td><td></td><td><div>13384</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $extra_data= $t-&gt;$text_handler( @parser_args);</td></tr>
<tr><td class="h">2274</td><td><div class="c3">3382</div></td><td></td><td></td><td></td><td></td><td><div>18380</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{extra_data}.= $extra_data;</td></tr>
<tr><td class="h">2275</td><td colspan="7"></td></tr><tr><td class="h">2276</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2277</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $process)</td></tr>
<tr><td class="h">2278</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">2279</td><td><div class="c3">3216</div></td><td></td><td></td><td></td><td></td><td><div>9624</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $twig_current= $t-&gt;{twig_current}; # defined unless we are outside of the root</td></tr>
<tr><td class="h">2280</td><td colspan="7"></td></tr><tr><td class="h">2281</td><td><div class="c3">3216</div></td><td></td><td></td><td></td><td></td><td><div>17146</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $elt= $t-&gt;{twig_elt_class}-&gt;new( $type);</td></tr>
<tr><td class="h">2282</td><td><div class="c3">3216</div></td><td></td><td></td><td></td><td></td><td><div>12352</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;$set( @parser_args);</td></tr>
<tr><td class="h">2283</td><td><div class="c3">3216</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2283">100</a></div></td><td></td><td></td><td></td><td><div>12694</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{extra_data}) </td></tr>
<tr><td class="h">2284</td><td><div class="c3">676</div></td><td></td><td></td><td></td><td></td><td><div>2708</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;set_extra_data( $t-&gt;{extra_data});</td></tr>
<tr><td class="h">2285</td><td><div class="c3">676</div></td><td></td><td></td><td></td><td></td><td><div>2384</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{extra_data}=&#39;&#39;;</td></tr>
<tr><td class="h">2286</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2287</td><td colspan="7"></td></tr><tr><td class="h">2288</td><td><div class="c3">3216</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2288">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2288">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2288">100</a></div></td><td></td><td></td><td></td><td><div>9761</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( $t-&gt;root) </td></tr>
<tr><td class="h">2289</td><td><div class="c3">1451</div></td><td></td><td></td><td></td><td></td><td><div>4960</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $t-&gt;_add_cpi_outside_of_root( leading_cpi =&gt; $elt);</td></tr>
<tr><td class="h">2290</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2291</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $t-&gt;{twig_in_pcdata})</td></tr>
<tr><td class="h">2292</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # create the node as a sibling of the #PCDATA</td></tr>
<tr><td class="h">2293</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;paste_after( $twig_current);</td></tr>
<tr><td class="h">2294</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_in_pcdata}=0;</td></tr>
<tr><td class="h">2295</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2296</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $twig_current)</td></tr>
<tr><td class="h">2297</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # we have to create a PCDATA element if we need to store spaces</td></tr>
<tr><td class="h">2298</td><td><div class="c3">312</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2298">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L2298">67</a></div></td><td></td><td></td><td><div>2005</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;_space_policy($XML::Twig::index2gi[$twig_current-&gt;{&#39;gi&#39;}]) &amp;&amp; $t-&gt;{twig_stored_spaces})</td></tr>
<tr><td class="h">2299</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ _insert_pcdata( $t, $t-&gt;{twig_stored_spaces}); }</td></tr>
<tr><td class="h">2300</td><td><div class="c3">312</div></td><td></td><td></td><td></td><td></td><td><div>1082</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_stored_spaces}=&#39;&#39;;</td></tr>
<tr><td class="h">2301</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# create the node as a child of the current element</td></tr>
<tr><td class="h">2302</td><td><div class="c3">312</div></td><td></td><td></td><td></td><td></td><td><div>1045</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;paste_last_child( $twig_current);</td></tr>
<tr><td class="h">2303</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2304</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">2305</td><td><div class="c3">1446</div></td><td></td><td></td><td></td><td></td><td><div>4872</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $t-&gt;_add_cpi_outside_of_root( trailing_cpi =&gt; $elt); }</td></tr>
<tr><td class="h">2306</td><td colspan="7"></td></tr><tr><td class="h">2307</td><td><div class="c3">3216</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2307">100</a></div></td><td></td><td></td><td></td><td><div>8853</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $twig_current)</td></tr>
<tr><td class="h">2308</td><td><div class="c3">319</div></td><td></td><td></td><td></td><td></td><td><div>899</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ delete $twig_current-&gt;{&#39;twig_current&#39;};</td></tr>
<tr><td class="h">2309</td><td><div class="c3">319</div></td><td></td><td></td><td></td><td></td><td><div>976</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $parent= $elt-&gt;{parent};</td></tr>
<tr><td class="h">2310</td><td><div class="c3">319</div></td><td></td><td></td><td></td><td></td><td><div>1059</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_current}= $parent;</td></tr>
<tr><td class="h">2311</td><td><div class="c3">319</div></td><td></td><td></td><td></td><td></td><td><div>1102</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$parent-&gt;{&#39;twig_current&#39;}=1;</td></tr>
<tr><td class="h">2312</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2313</td><td colspan="7"></td></tr><tr><td class="h">2314</td><td><div class="c3">3216</div></td><td></td><td></td><td></td><td></td><td><div>12668</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;$elt_handler( $elt);</td></tr>
<tr><td class="h">2315</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2316</td><td colspan="7"></td></tr><tr><td class="h">2317</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2318</td><td colspan="7"></td></tr><tr><td class="h">2319</td><td colspan="7"></td></tr><tr><td class="h">2320</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># add a comment or pi before the first element</td></tr>
<tr><td class="h">2321</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _add_cpi_outside_of_root</td></tr>
<tr><td class="h">2322</td><td><div class="c3">2902</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2322">2902</a></div></td><td></td><td><div>12443</div></td><td class="s">&nbsp;&nbsp;{ my($t, $type, $elt)= @_; # $type is &#39;leading_cpi&#39; or &#39;trailing_cpi&#39;</td></tr>
<tr><td class="h">2323</td><td><div class="c3">2902</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L2323">67</a></div></td><td></td><td></td><td><div>18364</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{$type} ||= $t-&gt;{twig_elt_class}-&gt;new( &#39;#CPI&#39;);</td></tr>
<tr><td class="h">2324</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# create the node as a child of the current element</td></tr>
<tr><td class="h">2325</td><td><div class="c3">2902</div></td><td></td><td></td><td></td><td></td><td><div>12648</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;paste_last_child( $t-&gt;{$type});</td></tr>
<tr><td class="h">2326</td><td><div class="c3">2902</div></td><td></td><td></td><td></td><td></td><td><div>6862</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t;</td></tr>
<tr><td class="h">2327</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2328</td><td colspan="7"></td></tr><tr><td class="h">2329</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_final</td></tr>
<tr><td class="h">2330</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_final...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">2331</td><td colspan="7"></td></tr><tr><td class="h">2332</td><td><div class="c3">2767</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2332">2767</a></div></td><td></td><td><div>80264</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $p= shift;</td></tr>
<tr><td class="h">2333</td><td><div class="c3">2767</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2333">100</a></div></td><td></td><td></td><td></td><td><div>28226</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t= $p-&gt;isa( &#39;XML::Twig&#39;) ? $p : $p-&gt;{twig};</td></tr>
<tr><td class="h">2334</td><td colspan="7"></td></tr><tr><td class="h">2335</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# store trailing data</td></tr>
<tr><td class="h">2336</td><td><div class="c3">2767</div><div class="c3">579</div><div class="c3">579</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2336">100</a></div></td><td></td><td></td><td></td><td><div>11283</div><div>2975</div><div>1873</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{extra_data}) { $t-&gt;{trailing_cpi_text} = $t-&gt;{extra_data}; $t-&gt;{extra_data}=&#39;&#39;; }</td></tr>
<tr><td class="h">2337</td><td><div class="c3">2767</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L2337">100</a></div></td><td></td><td></td><td><div>27724</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{trailing_spaces}= $t-&gt;{twig_stored_spaces} || &#39;&#39;; </td></tr>
<tr><td class="h">2338</td><td><div class="c3">2767</div><div class="c3">2767</div></td><td></td><td></td><td></td><td></td><td><div>8815</div><div>7989</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $s=  $t-&gt;{twig_stored_spaces}; $s=~s{\n}{\\n}g;</td></tr>
<tr><td class="h">2339</td><td><div class="c3">2767</div><div class="c3">236</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2339">100</a></div></td><td></td><td></td><td></td><td><div>10517</div><div>843</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_stored_spaces}) { my $s=  $t-&gt;{twig_stored_spaces}; }</td></tr>
<tr><td class="h">2340</td><td colspan="7"></td></tr><tr><td class="h">2341</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# restore the selected filehandle if needed</td></tr>
<tr><td class="h">2342</td><td><div class="c3">2767</div></td><td></td><td></td><td></td><td></td><td><div>9597</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;_set_fh_to_selected_fh();</td></tr>
<tr><td class="h">2343</td><td colspan="7"></td></tr><tr><td class="h">2344</td><td><div class="c3">2767</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2344">100</a></div></td><td></td><td></td><td></td><td><div>9778</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;_trigger_tdh if( $t-&gt;{twig_tdh});</td></tr>
<tr><td class="h">2345</td><td colspan="7"></td></tr><tr><td class="h">2346</td><td><div class="c3">2767</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2346">100</a></div></td><td></td><td></td><td></td><td><div>8963</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;select $t-&gt;{twig_original_selected_fh} if($t-&gt;{twig_original_selected_fh}); # probably dodgy</td></tr>
<tr><td class="h">2347</td><td colspan="7"></td></tr><tr><td class="h">2348</td><td><div class="c3">2767</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2348">100</a></div></td><td></td><td></td><td></td><td><div>9506</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( exists $t-&gt;{twig_autoflush_data})</td></tr>
<tr><td class="h">2349</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my @args;</td></tr>
<tr><td class="h">2350</td><td><div class="c3">11</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2350">100</a></div></td><td></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @args,  $t-&gt;{twig_autoflush_data}-&gt;{fh}      if( $t-&gt;{twig_autoflush_data}-&gt;{fh});</td></tr>
<tr><td class="h">2351</td><td><div class="c3">11</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2351">100</a></div></td><td></td><td></td><td></td><td><div>80</div><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @args,  @{$t-&gt;{twig_autoflush_data}-&gt;{args}} if( $t-&gt;{twig_autoflush_data}-&gt;{args});</td></tr>
<tr><td class="h">2352</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;flush( @args);</td></tr>
<tr><td class="h">2353</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $t-&gt;{twig_autoflush_data};</td></tr>
<tr><td class="h">2354</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>74</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;root-&gt;delete;</td></tr>
<tr><td class="h">2355</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2356</td><td colspan="7"></td></tr><tr><td class="h">2357</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# tries to clean-up (probably not very well at the moment)</td></tr>
<tr><td class="h">2358</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#undef $p-&gt;{twig};</td></tr>
<tr><td class="h">2359</td><td><div class="c3">2767</div></td><td></td><td></td><td></td><td></td><td><div>8905</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;undef $t-&gt;{twig_parser};</td></tr>
<tr><td class="h">2360</td><td><div class="c3">2767</div></td><td></td><td></td><td></td><td></td><td><div>9146</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $t-&gt;{twig_parsing};</td></tr>
<tr><td class="h">2361</td><td><div class="c3">2767</div><div class="c3">2767</div></td><td></td><td></td><td></td><td></td><td><div>7834</div><div>16708</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;@{$t}{ qw( twig_parser twig_parsing _twig_context_stack twig_current) }=();</td></tr>
<tr><td class="h">2362</td><td colspan="7"></td></tr><tr><td class="h">2363</td><td><div class="c3">2767</div></td><td></td><td></td><td></td><td></td><td><div>14089</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t;</td></tr>
<tr><td class="h">2364</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2365</td><td colspan="7"></td></tr><tr><td class="h">2366</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _insert_pcdata</td></tr>
<tr><td class="h">2367</td><td><div class="c3">6377</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2367">6377</a></div></td><td></td><td><div>24907</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $string)= @_;</td></tr>
<tr><td class="h">2368</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# create a new #PCDATA element</td></tr>
<tr><td class="h">2369</td><td><div class="c3">6377</div></td><td></td><td></td><td></td><td></td><td><div>21853</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $parent= $t-&gt;{twig_current};    # always defined</td></tr>
<tr><td class="h">2370</td><td><div class="c3">6377</div></td><td></td><td></td><td></td><td></td><td><div>30371</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $elt=  $t-&gt;{twig_elt_class}-&gt;new( PCDATA);</td></tr>
<tr><td class="h">2371</td><td><div class="c3">6377</div></td><td></td><td></td><td></td><td></td><td><div>20198</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;_set_pcdata( $string);</td></tr>
<tr><td class="h">2372</td><td><div class="c3">6377</div></td><td></td><td></td><td></td><td></td><td><div>18632</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $prev_sibling= $parent-&gt;{last_child};</td></tr>
<tr><td class="h">2373</td><td><div class="c3">6377</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2373">100</a></div></td><td></td><td></td><td></td><td><div>15483</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $prev_sibling) </td></tr>
<tr><td class="h">2374</td><td><div class="c3">156</div></td><td></td><td></td><td></td><td></td><td><div>560</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $prev_sibling-&gt;{next_sibling}=  $elt; </td></tr>
<tr><td class="h">2375</td><td><div class="c3">156</div><div class="c3">156</div><div class="c3">156</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2375">50</a></div></td><td></td><td></td><td></td><td><div>450</div><div>485</div><div>721</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{prev_sibling}=$prev_sibling; if( $XML::Twig::weakrefs) { weaken( $elt-&gt;{prev_sibling});} ;</td></tr>
<tr><td class="h">2376</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2377</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">2378</td><td><div class="c3">6221</div></td><td></td><td></td><td></td><td></td><td><div>21010</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $parent-&gt;{first_child}=  $elt; }</td></tr>
<tr><td class="h">2379</td><td colspan="7"></td></tr><tr><td class="h">2380</td><td><div class="c3">6377</div><div class="c3">6377</div><div class="c3">6376</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2380">100</a></div></td><td></td><td></td><td></td><td><div>18388</div><div>17322</div><div>26845</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{parent}=$parent; if( $XML::Twig::weakrefs) { weaken( $elt-&gt;{parent});} ;</td></tr>
<tr><td class="h">2381</td><td><div class="c3">6377</div><div class="c3">6377</div><div class="c3">6377</div><div class="c3">6376</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2381">100</a></div></td><td></td><td></td><td></td><td><div>18053</div><div>18676</div><div>16924</div><div>30106</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $parent-&gt;{empty}; $parent-&gt;{last_child}=$elt; if( $XML::Twig::weakrefs) { weaken( $parent-&gt;{last_child});} ;</td></tr>
<tr><td class="h">2382</td><td><div class="c3">6377</div></td><td></td><td></td><td></td><td></td><td><div>21019</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_stored_spaces}=&#39;&#39;;</td></tr>
<tr><td class="h">2383</td><td><div class="c3">6377</div></td><td></td><td></td><td></td><td></td><td><div>19578</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">2384</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2385</td><td colspan="7"></td></tr><tr><td class="h">2386</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _space_policy</td></tr>
<tr><td class="h">2387</td><td><div class="c3">845</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2387">845</a></div></td><td></td><td><div>3764</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $gi)= @_;</td></tr>
<tr><td class="h">2388</td><td><div class="c3">845</div></td><td></td><td></td><td></td><td></td><td><div>1742</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $policy;</td></tr>
<tr><td class="h">2389</td><td><div class="c3">845</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2389">100</a></div></td><td></td><td></td><td></td><td><div>3877</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$policy=0 if( $t-&gt;{twig_discard_spaces});</td></tr>
<tr><td class="h">2390</td><td><div class="c3">845</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2390">100</a></div></td><td></td><td></td><td></td><td><div>3202</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$policy=1 if( $t-&gt;{twig_keep_spaces});</td></tr>
<tr><td class="h">2391</td><td><div class="c3">845</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2391">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L2391">100</a></div></td><td></td><td></td><td><div>3721</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$policy=1 if( $t-&gt;{twig_keep_spaces_in}</td></tr>
<tr><td class="h">2392</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; $t-&gt;{twig_keep_spaces_in}-&gt;{$gi});</td></tr>
<tr><td class="h">2393</td><td><div class="c3">845</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2393">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L2393">100</a></div></td><td></td><td></td><td><div>3947</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$policy=0 if( $t-&gt;{twig_discard_spaces_in} </td></tr>
<tr><td class="h">2394</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; $t-&gt;{twig_discard_spaces_in}-&gt;{$gi});</td></tr>
<tr><td class="h">2395</td><td><div class="c3">845</div></td><td></td><td></td><td></td><td></td><td><div>4703</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $policy;</td></tr>
<tr><td class="h">2396</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2397</td><td colspan="7"></td></tr><tr><td class="h">2398</td><td colspan="7"></td></tr><tr><td class="h">2399</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_entity($$$$$$)</td></tr>
<tr><td class="h">2400</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_entity...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">2401</td><td colspan="7"></td></tr><tr><td class="h">2402</td><td><div class="c3">68</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2402">68</a></div></td><td></td><td><div>465</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $p, $name, $val, $sysid, $pubid, $ndata, $param)= @_;</td></tr>
<tr><td class="h">2403</td><td><div class="c3">68</div></td><td></td><td></td><td></td><td></td><td><div>279</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t=$p-&gt;{twig};</td></tr>
<tr><td class="h">2404</td><td colspan="7"></td></tr><tr><td class="h">2405</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#{ no warnings; my $base= $p-&gt;base; warn &quot;_twig_entity called: expand: &#39;$t-&gt;{twig_expand_external_ents}&#39;, base: &#39;$base&#39;, name: &#39;$name&#39;, val: &#39;$val&#39;, sysid: &#39;$sysid&#39;, pubid: &#39;$pubid&#39;, ndata: &#39;$ndata&#39;, param: &#39;$param&#39;\n&quot;;}</td></tr>
<tr><td class="h">2406</td><td colspan="7"></td></tr><tr><td class="h">2407</td><td><div class="c3">68</div></td><td></td><td></td><td></td><td></td><td><div>131</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $missing_entity=0;</td></tr>
<tr><td class="h">2408</td><td colspan="7"></td></tr><tr><td class="h">2409</td><td><div class="c3">68</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2409">100</a></div></td><td></td><td></td><td></td><td><div>210</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $sysid) </td></tr>
<tr><td class="h">2410</td><td><div class="c3">31</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2410">100</a></div></td><td></td><td></td><td></td><td><div>86</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if($ndata)</td></tr>
<tr><td class="h">2411</td><td><div class="c3">15</div><div class="c3">14</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2411">100</a></div></td><td></td><td></td><td></td><td><div>78</div><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( ! -f _based_filename( $sysid, $p-&gt;base)) { $missing_entity= 1; }</td></tr>
<tr><td class="h">2412</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2413</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">2414</td><td><div class="c3">16</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2414">100</a></div></td><td></td><td></td><td></td><td><div>75</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $t-&gt;{twig_expand_external_ents})</td></tr>
<tr><td class="h">2415</td><td><div class="c3">4</div><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>4</div><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $val= eval { _slurp_uri( $sysid, $p-&gt;base) };</td></tr>
<tr><td class="h">2416</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2416">100</a></div></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( ! defined $val) </td></tr>
<tr><td class="h">2417</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2417">100</a></div></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $t-&gt;{twig_extern_ent_nofail}) </td></tr>
<tr><td class="h">2418</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $missing_entity= 1; }</td></tr>
<tr><td class="h">2419</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">2420</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ _croak( &quot;cannot load SYSTEM entity &#39;$name&#39; from &#39;$sysid&#39;: $@&quot;, 3); }</td></tr>
<tr><td class="h">2421</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2422</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2423</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2424</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2425</td><td colspan="7"></td></tr><tr><td class="h">2426</td><td><div class="c3">67</div></td><td></td><td></td><td></td><td></td><td><div>461</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ent=XML::Twig::Entity-&gt;new( $name, $val, $sysid, $pubid, $ndata, $param);</td></tr>
<tr><td class="h">2427</td><td><div class="c3">67</div><div class="c3">15</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2427">100</a></div></td><td></td><td></td><td></td><td><div>211</div><div>92</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $missing_entity) { $t-&gt;{twig_missing_system_entities}-&gt;{$name}= $ent; }</td></tr>
<tr><td class="h">2428</td><td colspan="7"></td></tr><tr><td class="h">2429</td><td><div class="c3">67</div></td><td></td><td></td><td></td><td></td><td><div>264</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $entity_list= $t-&gt;entity_list;</td></tr>
<tr><td class="h">2430</td><td><div class="c3">67</div><div class="c3">67</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2430">50</a></div></td><td></td><td></td><td></td><td><div>224</div><div>233</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $entity_list) { $entity_list-&gt;add( $ent); }</td></tr>
<tr><td class="h">2431</td><td colspan="7"></td></tr><tr><td class="h">2432</td><td><div class="c3">67</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2432">50</a></div></td><td></td><td></td><td></td><td><div>247</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $parser_version &gt; 2.27) </td></tr>
<tr><td class="h">2433</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # this is really ugly, but with some versions of XML::Parser the value </td></tr>
<tr><td class="h">2434</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# of the entity is not properly returned by the default handler</td></tr>
<tr><td class="h">2435</td><td><div class="c3">67</div></td><td></td><td></td><td></td><td></td><td><div>219</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ent_decl= $ent-&gt;text;</td></tr>
<tr><td class="h">2436</td><td><div class="c3">67</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2436">100</a></div></td><td></td><td></td><td></td><td><div>350</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_keep_encoding})</td></tr>
<tr><td class="h">2437</td><td><div class="c3">3</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2437">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L2437">33</a></div></td><td></td><td></td><td><div>66</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( defined $ent-&gt;{val} &amp;&amp; ($ent_decl !~ /[&quot;&#39;]/))</td></tr>
<tr><td class="h">2438</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $val=  $ent-&gt;{val};</td></tr>
<tr><td class="h">2439</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2439">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ent_decl .= $val =~ /&quot;/ ? qq{&#39;$val&#39; } : qq{&quot;$val&quot; }; </td></tr>
<tr><td class="h">2440</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2441</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# for my solaris box (perl 5.6.1, XML::Parser 2.31, expat?)</td></tr>
<tr><td class="h">2442</td><td><div class="c3">3</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>115</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_doctype}-&gt;{internal}=~ s{&lt;!ENTITY\s+$name\s+$}{substr( $ent_decl, 0, -1)}e;</td></tr>
<tr><td class="h">2443</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2444</td><td><div class="c3">67</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2444">50</a></div></td><td></td><td></td><td></td><td><div>2168</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_doctype}-&gt;{internal} .= $ent_decl </td></tr>
<tr><td class="h">2445</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( $t-&gt;{twig_doctype}-&gt;{internal}=~ m{&lt;!ENTITY\s+$name\s+});</td></tr>
<tr><td class="h">2446</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2447</td><td colspan="7"></td></tr><tr><td class="h">2448</td><td><div class="c3">67</div></td><td></td><td></td><td></td><td></td><td><div>197</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">2449</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2450</td><td colspan="7"></td></tr><tr><td class="h">2451</td><td colspan="7"></td></tr><tr><td class="h">2452</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_extern_ent</td></tr>
<tr><td class="h">2453</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_extern_ent...I (&quot;, $_[0]-&gt;original_string, &quot;)\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">2454</td><td><div class="c3">7</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2454">7</a></div></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $p, $base, $sysid, $pubid)= @_;</td></tr>
<tr><td class="h">2455</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t= $p-&gt;{twig};</td></tr>
<tr><td class="h">2456</td><td><div class="c3">7</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2456">50</a></div></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_no_expand}) </td></tr>
<tr><td class="h">2457</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2457">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $ent_name= $t-&gt;{twig_keep_encoding} ? $p-&gt;original_string : $p-&gt;recognized_string;</td></tr>
<tr><td class="h">2458</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_twig_insert_ent( $t, $ent_name);</td></tr>
<tr><td class="h">2459</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return &#39;&#39;;</td></tr>
<tr><td class="h">2460</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2461</td><td><div class="c3">7</div><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>7</div><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ent_content= eval { $t-&gt;{twig_ext_ent_handler}-&gt;( $p, $base, $sysid) };</td></tr>
<tr><td class="h">2462</td><td><div class="c3">7</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2462">100</a></div></td><td></td><td></td><td></td><td><div>1365</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( ! defined $ent_content)</td></tr>
<tr><td class="h">2463</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">2464</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ent_name = $p-&gt;recognized_string;</td></tr>
<tr><td class="h">2465</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $file     =  _based_filename( $sysid, $base);</td></tr>
<tr><td class="h">2466</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $error_message= &quot;cannot expand $ent_name - cannot load &#39;$file&#39;&quot;;</td></tr>
<tr><td class="h">2467</td><td><div class="c3">1</div><div class="c0">0</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2467">50</a></div></td><td></td><td></td><td></td><td><div>6</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_extern_ent_nofail}) { return &quot;&lt;!-- $error_message --&gt;&quot;; }</td></tr>
<tr><td class="h">2468</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else                              { _croak( $error_message);   }</td></tr>
<tr><td class="h">2469</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2470</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ent_content; </td></tr>
<tr><td class="h">2471</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2472</td><td colspan="7"></td></tr><tr><td class="h">2473</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># I use this so I can change the $Carp::CarpLevel (which determines how many call frames to skip when reporting an error)</td></tr>
<tr><td class="h">2474</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _croak</td></tr>
<tr><td class="h">2475</td><td><div class="c3">42</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2475">42</a></div></td><td></td><td><div>174</div></td><td class="s">&nbsp;&nbsp;{ my( $message, $level)= @_;</td></tr>
<tr><td class="h">2476</td><td><div class="c3">42</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L2476">100</a></div></td><td></td><td></td><td><div>322</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$Carp::CarpLevel= $level || 0;</td></tr>
<tr><td class="h">2477</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td></td><td><div>153</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;croak $message;</td></tr>
<tr><td class="h">2478</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2479</td><td colspan="7"></td></tr><tr><td class="h">2480</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_xmldecl</td></tr>
<tr><td class="h">2481</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_xmldecl...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">2482</td><td colspan="7"></td></tr><tr><td class="h">2483</td><td><div class="c3">102</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2483">102</a></div></td><td></td><td><div>453</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $p= shift;</td></tr>
<tr><td class="h">2484</td><td><div class="c3">102</div></td><td></td><td></td><td></td><td></td><td><div>384</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t=$p-&gt;{twig};</td></tr>
<tr><td class="h">2485</td><td><div class="c3">102</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L2485">50</a></div></td><td></td><td></td><td><div>620</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_xmldecl}||={};                 # could have been set by set_output_encoding</td></tr>
<tr><td class="h">2486</td><td><div class="c3">102</div></td><td></td><td></td><td></td><td></td><td><div>604</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_xmldecl}-&gt;{version}= shift;</td></tr>
<tr><td class="h">2487</td><td><div class="c3">102</div></td><td></td><td></td><td></td><td></td><td><div>479</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_xmldecl}-&gt;{encoding}= shift; </td></tr>
<tr><td class="h">2488</td><td><div class="c3">102</div></td><td></td><td></td><td></td><td></td><td><div>452</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_xmldecl}-&gt;{standalone}= shift;</td></tr>
<tr><td class="h">2489</td><td><div class="c3">102</div></td><td></td><td></td><td></td><td></td><td><div>220</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">2490</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2491</td><td colspan="7"></td></tr><tr><td class="h">2492</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_doctype</td></tr>
<tr><td class="h">2493</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_doctype...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">2494</td><td><div class="c3">77</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2494">77</a></div></td><td></td><td><div>602</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $p, $name, $sysid, $pub, $internal)= @_;</td></tr>
<tr><td class="h">2495</td><td><div class="c3">77</div></td><td></td><td></td><td></td><td></td><td><div>347</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t=$p-&gt;{twig};</td></tr>
<tr><td class="h">2496</td><td><div class="c3">77</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L2496">50</a></div></td><td></td><td></td><td><div>484</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_doctype}||= {};                   # create </td></tr>
<tr><td class="h">2497</td><td><div class="c3">77</div></td><td></td><td></td><td></td><td></td><td><div>434</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_doctype}-&gt;{name}= $name;          # always there</td></tr>
<tr><td class="h">2498</td><td><div class="c3">77</div></td><td></td><td></td><td></td><td></td><td><div>329</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_doctype}-&gt;{sysid}= $sysid;        #  </td></tr>
<tr><td class="h">2499</td><td><div class="c3">77</div></td><td></td><td></td><td></td><td></td><td><div>317</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_doctype}-&gt;{pub}= $pub;            #  </td></tr>
<tr><td class="h">2500</td><td colspan="7"></td></tr><tr><td class="h">2501</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# now let&#39;s try to cope with XML::Parser 2.28 and above</td></tr>
<tr><td class="h">2502</td><td><div class="c3">77</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2502">50</a></div></td><td></td><td></td><td></td><td><div>319</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $parser_version &gt; 2.27)</td></tr>
<tr><td class="h">2503</td><td><div class="c3">77</div></td><td></td><td></td><td></td><td></td><td><div>572</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ @saved_default_handler= $p-&gt;setHandlers( Default     =&gt; \&amp;_twig_store_internal_dtd,</td></tr>
<tr><td class="h">2504</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Entity      =&gt; \&amp;_twig_entity,</td></tr>
<tr><td class="h">2505</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">2506</td><td><div class="c3">77</div></td><td></td><td></td><td></td><td></td><td><div>6632</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$p-&gt;setHandlers( DoctypeFin  =&gt; \&amp;_twig_stop_storing_internal_dtd);</td></tr>
<tr><td class="h">2507</td><td><div class="c3">77</div></td><td></td><td></td><td></td><td></td><td><div>3721</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_doctype}-&gt;{internal}=&#39;&#39;;</td></tr>
<tr><td class="h">2508</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2509</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else            </td></tr>
<tr><td class="h">2510</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# for XML::Parser before 2.28</td></tr>
<tr><td class="h">2511</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L2511">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $internal||=&#39;&#39;;</td></tr>
<tr><td class="h">2512</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$internal=~ s{^\s*\[}{}; </td></tr>
<tr><td class="h">2513</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$internal=~ s{]\s*$}{}; </td></tr>
<tr><td class="h">2514</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_doctype}-&gt;{internal}=$internal; </td></tr>
<tr><td class="h">2515</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2516</td><td colspan="7"></td></tr><tr><td class="h">2517</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# now check if we want to get the DTD info</td></tr>
<tr><td class="h">2518</td><td><div class="c3">77</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2518">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L2518">100</a></div></td><td></td><td></td><td><div>524</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_read_external_dtd} &amp;&amp; $sysid)</td></tr>
<tr><td class="h">2519</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # let&#39;s build a fake document with an internal DTD</td></tr>
<tr><td class="h">2520</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $dtd=  &quot;&lt;!DOCTYPE $name [&quot; . _slurp_uri( $sysid) .  &quot;]&gt;&lt;$name/&gt;&quot;;</td></tr>
<tr><td class="h">2521</td><td colspan="7"></td></tr><tr><td class="h">2522</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;save_global_state();            # save the globals (they will be reset by the following new)  </td></tr>
<tr><td class="h">2523</td><td><div class="c3">5</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L2523">100</a></div></td><td></td><td></td><td><div>76</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $t_dtd= XML::Twig-&gt;new( load_DTD =&gt; 1, ParseParamEnt =&gt; 1, error_context =&gt; $t-&gt;{ErrorContext} || 0);          # create a temp twig</td></tr>
<tr><td class="h">2524</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t_dtd-&gt;parse( $dtd);               # parse it</td></tr>
<tr><td class="h">2525</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_dtd}= $t_dtd-&gt;{twig_dtd}; # grab the dtd info</td></tr>
<tr><td class="h">2526</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#$t-&gt;{twig_dtd_is_external}=1;</td></tr>
<tr><td class="h">2527</td><td><div class="c3">5</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2527">50</a></div></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;entity_list-&gt;_add_list( $t_dtd-&gt;entity_list) if( $t_dtd-&gt;entity_list); # grab the entity info</td></tr>
<tr><td class="h">2528</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;restore_global_state();</td></tr>
<tr><td class="h">2529</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2530</td><td><div class="c3">77</div></td><td></td><td></td><td></td><td></td><td><div>316</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">2531</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2532</td><td colspan="7"></td></tr><tr><td class="h">2533</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_element</td></tr>
<tr><td class="h">2534</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_element...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">2535</td><td colspan="7"></td></tr><tr><td class="h">2536</td><td><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2536">44</a></div></td><td></td><td><div>251</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $p, $name, $model)= @_;</td></tr>
<tr><td class="h">2537</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>172</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t=$p-&gt;{twig};</td></tr>
<tr><td class="h">2538</td><td><div class="c3">44</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L2538">100</a></div></td><td></td><td></td><td><div>219</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_dtd}||= {};                      # may create the dtd </td></tr>
<tr><td class="h">2539</td><td><div class="c3">44</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L2539">100</a></div></td><td></td><td></td><td><div>233</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_dtd}-&gt;{model}||= {};             # may create the model hash </td></tr>
<tr><td class="h">2540</td><td><div class="c3">44</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L2540">100</a></div></td><td></td><td></td><td><div>244</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_dtd}-&gt;{elt_list}||= [];          # ordered list of elements </td></tr>
<tr><td class="h">2541</td><td><div class="c3">44</div><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>107</div><div>228</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;push @{$t-&gt;{twig_dtd}-&gt;{elt_list}}, $name; # store the elt</td></tr>
<tr><td class="h">2542</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>233</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_dtd}-&gt;{model}-&gt;{$name}= $model;  # store the model</td></tr>
<tr><td class="h">2543</td><td><div class="c3">44</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2543">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L2543">33</a></div></td><td></td><td></td><td><div>1707</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( ($parser_version &gt; 2.27) &amp;&amp; ($t-&gt;{twig_doctype}-&gt;{internal}=~ m{(^|&gt;)\s*$}) ) </td></tr>
<tr><td class="h">2544</td><td><div class="c3">44</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2544">50</a></div></td><td></td><td></td><td></td><td><div>314</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $text= $XML::Twig::Elt::keep_encoding ? $p-&gt;original_string : $p-&gt;recognized_string; </td></tr>
<tr><td class="h">2545</td><td><div class="c3">44</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2545">50</a></div></td><td></td><td></td><td></td><td><div>957</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( $text)</td></tr>
<tr><td class="h">2546</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # this version of XML::Parser does not return the text in the *_string method</td></tr>
<tr><td class="h">2547</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# we need to rebuild it</td></tr>
<tr><td class="h">2548</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>67</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$text= &quot;&lt;!ELEMENT $name $model&gt;&quot;;</td></tr>
<tr><td class="h">2549</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2550</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>3151</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_doctype}-&gt;{internal} .= $text;</td></tr>
<tr><td class="h">2551</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2552</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>113</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">2553</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2554</td><td colspan="7"></td></tr><tr><td class="h">2555</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_attlist</td></tr>
<tr><td class="h">2556</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_attlist...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">2557</td><td colspan="7"></td></tr><tr><td class="h">2558</td><td><div class="c3">37</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2558">37</a></div></td><td></td><td><div>257</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $p, $gi, $att, $type, $default, $fixed)= @_;</td></tr>
<tr><td class="h">2559</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#warn &quot;in attlist: gi: &#39;$gi&#39;, att: &#39;$att&#39;, type: &#39;$type&#39;, default: &#39;$default&#39;, fixed: &#39;$fixed&#39;\n&quot;;</td></tr>
<tr><td class="h">2560</td><td><div class="c3">37</div></td><td></td><td></td><td></td><td></td><td><div>142</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t=$p-&gt;{twig};</td></tr>
<tr><td class="h">2561</td><td><div class="c3">37</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L2561">50</a></div></td><td></td><td></td><td><div>147</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_dtd}||= {};                      # create dtd if need be </td></tr>
<tr><td class="h">2562</td><td><div class="c3">37</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L2562">100</a></div></td><td></td><td></td><td><div>178</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_dtd}-&gt;{$gi}||= {};               # create elt if need be </td></tr>
<tr><td class="h">2563</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#$t-&gt;{twig_dtd}-&gt;{$gi}-&gt;{att}||= {};        # create att if need be </td></tr>
<tr><td class="h">2564</td><td><div class="c3">37</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2564">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L2564">33</a></div></td><td></td><td></td><td><div>2830</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( ($parser_version &gt; 2.27) &amp;&amp; ($t-&gt;{twig_doctype}-&gt;{internal}=~ m{(^|&gt;)\s*$}) ) </td></tr>
<tr><td class="h">2565</td><td><div class="c3">37</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2565">50</a></div></td><td></td><td></td><td></td><td><div>232</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $text= $XML::Twig::Elt::keep_encoding ? $p-&gt;original_string : $p-&gt;recognized_string; </td></tr>
<tr><td class="h">2566</td><td><div class="c3">37</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2566">50</a></div></td><td></td><td></td><td></td><td><div>720</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( $text)</td></tr>
<tr><td class="h">2567</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # this version of XML::Parser does not return the text in the *_string method</td></tr>
<tr><td class="h">2568</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# we need to rebuild it</td></tr>
<tr><td class="h">2569</td><td><div class="c3">37</div></td><td></td><td></td><td></td><td></td><td><div>149</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $att_decl=&quot;$att $type&quot;;</td></tr>
<tr><td class="h">2570</td><td><div class="c3">37</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2570">100</a></div></td><td></td><td></td><td></td><td><div>112</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$att_decl .= &quot; #FIXED&quot;   if( $fixed);</td></tr>
<tr><td class="h">2571</td><td><div class="c3">37</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2571">50</a></div></td><td></td><td></td><td></td><td><div>144</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$att_decl .= &quot; $default&quot; if( defined $default);</td></tr>
<tr><td class="h">2572</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 2 cases: there is already an attlist on that element or not</td></tr>
<tr><td class="h">2573</td><td><div class="c3">37</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2573">100</a></div></td><td></td><td></td><td></td><td><div>211</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_dtd}-&gt;{att}-&gt;{$gi})</td></tr>
<tr><td class="h">2574</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # there is already an attlist, add to it</td></tr>
<tr><td class="h">2575</td><td><div class="c3">15</div><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>597</div><div>213</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_doctype}-&gt;{internal}=~ s{(&lt;!ATTLIST\s*$gi )(.*?)\n?&gt;}</td></tr>
<tr><td class="h">2576</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ &quot;$1$2\n&quot; . &#39; &#39; x length( $1) . &quot;$att_decl\n&gt;&quot;}es;</td></tr>
<tr><td class="h">2577</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2578</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">2579</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # create the attlist</td></tr>
<tr><td class="h">2580</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>187</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_doctype}-&gt;{internal}.= &quot;&lt;!ATTLIST $gi $att_decl&gt;&quot;</td></tr>
<tr><td class="h">2581</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2582</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2583</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2584</td><td><div class="c3">37</div></td><td></td><td></td><td></td><td></td><td><div>351</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_dtd}-&gt;{att}-&gt;{$gi}-&gt;{$att}= {} ;</td></tr>
<tr><td class="h">2585</td><td><div class="c3">37</div></td><td></td><td></td><td></td><td></td><td><div>270</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_dtd}-&gt;{att}-&gt;{$gi}-&gt;{$att}-&gt;{type}= $type; </td></tr>
<tr><td class="h">2586</td><td><div class="c3">37</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2586">50</a></div></td><td></td><td></td><td></td><td><div>292</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_dtd}-&gt;{att}-&gt;{$gi}-&gt;{$att}-&gt;{default}= $default if( defined $default);</td></tr>
<tr><td class="h">2587</td><td><div class="c3">37</div></td><td></td><td></td><td></td><td></td><td><div>223</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_dtd}-&gt;{att}-&gt;{$gi}-&gt;{$att}-&gt;{fixed}= $fixed; </td></tr>
<tr><td class="h">2588</td><td><div class="c3">37</div></td><td></td><td></td><td></td><td></td><td><div>74</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">2589</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2590</td><td colspan="7"></td></tr><tr><td class="h">2591</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_default</td></tr>
<tr><td class="h">2592</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_default...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">2593</td><td colspan="7"></td></tr><tr><td class="h">2594</td><td><div class="c3">333</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2594">333</a></div></td><td></td><td><div>1651</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $p, $string)= @_;</td></tr>
<tr><td class="h">2595</td><td colspan="7"></td></tr><tr><td class="h">2596</td><td><div class="c3">333</div></td><td></td><td></td><td></td><td></td><td><div>1276</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t= $p-&gt;{twig};</td></tr>
<tr><td class="h">2597</td><td colspan="7"></td></tr><tr><td class="h">2598</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# we need to process the data in 2 cases: entity, or spaces after the closing tag</td></tr>
<tr><td class="h">2599</td><td colspan="7"></td></tr><tr><td class="h">2600</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# after the closing tag (no twig_current and root has been created)</td></tr>
<tr><td class="h">2601</td><td><div class="c3">333</div><div class="c3">236</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2601">100</a></div></td><td><div class="c1"><a href="blib-lib-XML-Twig-pm--condition.html#L2601">75</a></div></td><td></td><td></td><td><div>5493</div><div>985</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if(  ! $t-&gt;{twig_current} &amp;&amp; $t-&gt;{twig_root} &amp;&amp; $string=~ m{^\s+$}m) { $t-&gt;{twig_stored_spaces} .= $string; }</td></tr>
<tr><td class="h">2602</td><td colspan="7"></td></tr><tr><td class="h">2603</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# process only if we have an entity</td></tr>
<tr><td class="h">2604</td><td><div class="c3">333</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2604">100</a></div></td><td></td><td></td><td></td><td><div>1887</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $string=~ m{^&amp;([^;]*);$})</td></tr>
<tr><td class="h">2605</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # the entity has to be pure pcdata, or we have a problem</td></tr>
<tr><td class="h">2606</td><td><div class="c3">36</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2606">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L2606">33</a></div></td><td></td><td></td><td><div>1022</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( ($p-&gt;original_string=~ m{^&lt;}) &amp;&amp; ($p-&gt;original_string=~ m{&gt;$}) ) </td></tr>
<tr><td class="h">2607</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # string is a tag, entity is in an attribute</td></tr>
<tr><td class="h">2608</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2608">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_entities_in_attribute}=1 if( $t-&gt;{twig_do_not_escape_amp_in_atts});</td></tr>
<tr><td class="h">2609</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2610</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">2611</td><td><div class="c3">36</div></td><td></td><td></td><td></td><td></td><td><div>751</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $ent;</td></tr>
<tr><td class="h">2612</td><td><div class="c3">36</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2612">100</a></div></td><td></td><td></td><td></td><td><div>145</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_keep_encoding}) </td></tr>
<tr><td class="h">2613</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ _twig_char( $p, $string); </td></tr>
<tr><td class="h">2614</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ent= substr( $string, 1, -1);</td></tr>
<tr><td class="h">2615</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2616</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">2617</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>86</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $ent= _twig_insert_ent( $t, $string); </td></tr>
<tr><td class="h">2618</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2619</td><td colspan="7"></td></tr><tr><td class="h">2620</td><td><div class="c3">36</div></td><td></td><td></td><td></td><td></td><td><div>101</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $ent;</td></tr>
<tr><td class="h">2621</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2622</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return</td></tr>
<tr><td class="h">2623</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2624</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2625</td><td colspan="7"></td></tr><tr><td class="h">2626</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_insert_ent</td></tr>
<tr><td class="h">2627</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">2628</td><td><div class="c3">27</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2628">27</a></div></td><td></td><td><div>109</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $t, $string)=@_;</td></tr>
<tr><td class="h">2629</td><td colspan="7"></td></tr><tr><td class="h">2630</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>1043</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $twig_current= $t-&gt;{twig_current};</td></tr>
<tr><td class="h">2631</td><td colspan="7"></td></tr><tr><td class="h">2632</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>131</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ent=  $t-&gt;{twig_elt_class}-&gt;new( &#39;#ENT&#39;);</td></tr>
<tr><td class="h">2633</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>95</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$ent-&gt;{ent}=  $string;</td></tr>
<tr><td class="h">2634</td><td colspan="7"></td></tr><tr><td class="h">2635</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>82</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_add_or_discard_stored_spaces( $t, force =&gt; 0);</td></tr>
<tr><td class="h">2636</td><td colspan="7"></td></tr><tr><td class="h">2637</td><td><div class="c3">27</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2637">100</a></div></td><td></td><td></td><td></td><td><div>107</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_in_pcdata})</td></tr>
<tr><td class="h">2638</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # create the node as a sibling of the #PCDATA</td></tr>
<tr><td class="h">2639</td><td colspan="7"></td></tr><tr><td class="h">2640</td><td><div class="c3">13</div><div class="c3">13</div><div class="c3">13</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2640">50</a></div></td><td></td><td></td><td></td><td><div>44</div><div>38</div><div>62</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ent-&gt;{prev_sibling}=$twig_current; if( $XML::Twig::weakrefs) { weaken( $ent-&gt;{prev_sibling});} ;</td></tr>
<tr><td class="h">2641</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$twig_current-&gt;{next_sibling}=  $ent;</td></tr>
<tr><td class="h">2642</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $parent= $twig_current-&gt;{parent};</td></tr>
<tr><td class="h">2643</td><td><div class="c3">13</div><div class="c3">13</div><div class="c3">13</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2643">50</a></div></td><td></td><td></td><td></td><td><div>40</div><div>40</div><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ent-&gt;{parent}=$parent; if( $XML::Twig::weakrefs) { weaken( $ent-&gt;{parent});} ;</td></tr>
<tr><td class="h">2644</td><td><div class="c3">13</div><div class="c3">13</div><div class="c3">13</div><div class="c3">13</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2644">50</a></div></td><td></td><td></td><td></td><td><div>30</div><div>42</div><div>37</div><div>62</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $parent-&gt;{empty}; $parent-&gt;{last_child}=$ent; if( $XML::Twig::weakrefs) { weaken( $parent-&gt;{last_child});} ;</td></tr>
<tr><td class="h">2645</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# the twig_current is now the parent</td></tr>
<tr><td class="h">2646</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $twig_current-&gt;{&#39;twig_current&#39;};</td></tr>
<tr><td class="h">2647</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_current}= $parent;</td></tr>
<tr><td class="h">2648</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# we left pcdata</td></tr>
<tr><td class="h">2649</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_in_pcdata}=0;</td></tr>
<tr><td class="h">2650</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2651</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">2652</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # create the node as a child of the current element</td></tr>
<tr><td class="h">2653</td><td><div class="c3">14</div><div class="c3">14</div><div class="c3">14</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2653">50</a></div></td><td></td><td></td><td></td><td><div>46</div><div>39</div><div>62</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ent-&gt;{parent}=$twig_current; if( $XML::Twig::weakrefs) { weaken( $ent-&gt;{parent});} ;</td></tr>
<tr><td class="h">2654</td><td><div class="c3">14</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2654">100</a></div></td><td></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $prev_sibling= $twig_current-&gt;{last_child})</td></tr>
<tr><td class="h">2655</td><td><div class="c3">8</div><div class="c3">8</div><div class="c3">8</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2655">50</a></div></td><td></td><td></td><td></td><td><div>24</div><div>22</div><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $ent-&gt;{prev_sibling}=$prev_sibling; if( $XML::Twig::weakrefs) { weaken( $ent-&gt;{prev_sibling});} ;</td></tr>
<tr><td class="h">2656</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$prev_sibling-&gt;{next_sibling}=  $ent;</td></tr>
<tr><td class="h">2657</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2658</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">2659</td><td><div class="c3">6</div><div class="c3">6</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2659">50</a></div></td><td></td><td></td><td></td><td><div>17</div><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $twig_current) { $twig_current-&gt;{first_child}=  $ent; } }</td></tr>
<tr><td class="h">2660</td><td><div class="c3">14</div><div class="c3">14</div><div class="c3">14</div><div class="c3">14</div><div class="c3">14</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2660">50</a></div><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2660">50</a></div></td><td></td><td></td><td></td><td><div>38</div><div>33</div><div>43</div><div>37</div><div>72</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $twig_current) {  delete $twig_current-&gt;{empty}; $twig_current-&gt;{last_child}=$ent; if( $XML::Twig::weakrefs) { weaken( $twig_current-&gt;{last_child});} ; }</td></tr>
<tr><td class="h">2661</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2662</td><td colspan="7"></td></tr><tr><td class="h">2663</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# meant to trigger entity handler, does not seem to be activated at this time</td></tr>
<tr><td class="h">2664</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#if( my $handler= $t-&gt;{twig_handlers}-&gt;{gi}-&gt;{&#39;#ENT&#39;})</td></tr>
<tr><td class="h">2665</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#  { local $_= $ent; $handler-&gt;( $t, $ent); }</td></tr>
<tr><td class="h">2666</td><td colspan="7"></td></tr><tr><td class="h">2667</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>92</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ent;</td></tr>
<tr><td class="h">2668</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2669</td><td colspan="7"></td></tr><tr><td class="h">2670</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub parser</td></tr>
<tr><td class="h">2671</td><td><div class="c3">231</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2671">231</a></div></td><td></td><td><div>1351</div></td><td class="s">&nbsp;&nbsp;{ return $_[0]-&gt;{twig_parser}; }</td></tr>
<tr><td class="h">2672</td><td colspan="7"></td></tr><tr><td class="h">2673</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># returns the declaration text (or a default one)</td></tr>
<tr><td class="h">2674</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub xmldecl</td></tr>
<tr><td class="h">2675</td><td><div class="c3">2271</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2675">2271</a></div></td><td></td><td><div>5578</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">2676</td><td><div class="c3">2271</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2676">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L2676">100</a></div></td><td></td><td></td><td><div>31177</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return &#39;&#39; unless( $t-&gt;{twig_xmldecl} || $t-&gt;{output_encoding});</td></tr>
<tr><td class="h">2677</td><td><div class="c3">55</div></td><td></td><td></td><td></td><td></td><td><div>95</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $decl_string;</td></tr>
<tr><td class="h">2678</td><td><div class="c3">55</div></td><td></td><td></td><td></td><td></td><td><div>178</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $decl= $t-&gt;{twig_xmldecl};</td></tr>
<tr><td class="h">2679</td><td><div class="c3">55</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2679">100</a></div></td><td></td><td></td><td></td><td><div>155</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $decl)</td></tr>
<tr><td class="h">2680</td><td><div class="c3">51</div></td><td></td><td></td><td></td><td></td><td><div>152</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $version= $decl-&gt;{version};</td></tr>
<tr><td class="h">2681</td><td><div class="c3">51</div></td><td></td><td></td><td></td><td></td><td><div>107</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$decl_string= q{&lt;?xml};</td></tr>
<tr><td class="h">2682</td><td><div class="c3">51</div></td><td></td><td></td><td></td><td></td><td><div>242</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$decl_string .= qq{ version=&quot;$version&quot;};</td></tr>
<tr><td class="h">2683</td><td colspan="7"></td></tr><tr><td class="h">2684</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# encoding can either have been set (in $decl-&gt;{output_encoding})</td></tr>
<tr><td class="h">2685</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# or come from the document (in $decl-&gt;{encoding})</td></tr>
<tr><td class="h">2686</td><td><div class="c3">51</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2686">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2686">100</a></div></td><td></td><td></td><td></td><td><div>329</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{output_encoding})</td></tr>
<tr><td class="h">2687</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>123</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $encoding= $t-&gt;{output_encoding};</td></tr>
<tr><td class="h">2688</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$decl_string .= qq{ encoding=&quot;$encoding&quot;};</td></tr>
<tr><td class="h">2689</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2690</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $decl-&gt;{encoding})</td></tr>
<tr><td class="h">2691</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $encoding= $decl-&gt;{encoding};</td></tr>
<tr><td class="h">2692</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>62</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$decl_string .= qq{ encoding=&quot;$encoding&quot;};</td></tr>
<tr><td class="h">2693</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2694</td><td colspan="7"></td></tr><tr><td class="h">2695</td><td><div class="c3">51</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2695">100</a></div></td><td></td><td></td><td></td><td><div>292</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined( $decl-&gt;{standalone}))</td></tr>
<tr><td class="h">2696</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $decl_string .= q{ standalone=&quot;};  </td></tr>
<tr><td class="h">2697</td><td><div class="c3">10</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2697">100</a></div></td><td></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$decl_string .= $decl-&gt;{standalone} ? &quot;yes&quot; : &quot;no&quot;;  </td></tr>
<tr><td class="h">2698</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$decl_string .= q{&quot;}; </td></tr>
<tr><td class="h">2699</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2700</td><td colspan="7"></td></tr><tr><td class="h">2701</td><td><div class="c3">51</div></td><td></td><td></td><td></td><td></td><td><div>147</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$decl_string .= &quot;?&gt;\n&quot;;</td></tr>
<tr><td class="h">2702</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2703</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">2704</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $encoding= $t-&gt;{output_encoding};</td></tr>
<tr><td class="h">2705</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$decl_string= qq{&lt;?xml version=&quot;1.0&quot; encoding=&quot;$encoding&quot;?&gt;};</td></tr>
<tr><td class="h">2706</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2707</td><td colspan="7"></td></tr><tr><td class="h">2708</td><td><div class="c3">55</div></td><td></td><td></td><td></td><td></td><td><div>178</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $output_filter= XML::Twig::Elt::output_filter();</td></tr>
<tr><td class="h">2709</td><td><div class="c3">55</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2709">100</a></div></td><td></td><td></td><td></td><td><div>431</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $output_filter ? $output_filter-&gt;( $decl_string) : $decl_string;</td></tr>
<tr><td class="h">2710</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2711</td><td colspan="7"></td></tr><tr><td class="h">2712</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_doctype</td></tr>
<tr><td class="h">2713</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2713">4</a></div></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $name, $system, $public, $internal)= @_;</td></tr>
<tr><td class="h">2714</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2714">100</a></div></td><td></td><td></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_doctype}= {} unless defined $t-&gt;{twig_doctype};</td></tr>
<tr><td class="h">2715</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $doctype= $t-&gt;{twig_doctype};</td></tr>
<tr><td class="h">2716</td><td><div class="c3">4</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2716">50</a></div></td><td></td><td></td><td></td><td><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$doctype-&gt;{name}     = $name     if( defined $name);</td></tr>
<tr><td class="h">2717</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2717">100</a></div></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$doctype-&gt;{sysid}    = $system   if( defined $system);</td></tr>
<tr><td class="h">2718</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2718">100</a></div></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$doctype-&gt;{pub}      = $public   if( defined $public);</td></tr>
<tr><td class="h">2719</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2719">100</a></div></td><td></td><td></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$doctype-&gt;{internal} = $internal if( defined $internal);</td></tr>
<tr><td class="h">2720</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2721</td><td colspan="7"></td></tr><tr><td class="h">2722</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub doctype_name</td></tr>
<tr><td class="h">2723</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2723">4</a></div></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">2724</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2724">100</a></div></td><td></td><td></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $doctype= $t-&gt;{twig_doctype} or return &#39;&#39;;</td></tr>
<tr><td class="h">2725</td><td><div class="c3">3</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L2725">50</a></div></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $doctype-&gt;{name} || &#39;&#39;;</td></tr>
<tr><td class="h">2726</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2727</td><td colspan="7"></td></tr><tr><td class="h">2728</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub system_id</td></tr>
<tr><td class="h">2729</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2729">4</a></div></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">2730</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2730">100</a></div></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $doctype= $t-&gt;{twig_doctype} or return &#39;&#39;;</td></tr>
<tr><td class="h">2731</td><td><div class="c3">3</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L2731">100</a></div></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $doctype-&gt;{sysid} || &#39;&#39;;</td></tr>
<tr><td class="h">2732</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2733</td><td colspan="7"></td></tr><tr><td class="h">2734</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub public_id</td></tr>
<tr><td class="h">2735</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2735">4</a></div></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">2736</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2736">100</a></div></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $doctype= $t-&gt;{twig_doctype} or return &#39;&#39;;</td></tr>
<tr><td class="h">2737</td><td><div class="c3">3</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L2737">100</a></div></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $doctype-&gt;{pub} || &#39;&#39;;</td></tr>
<tr><td class="h">2738</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2739</td><td colspan="7"></td></tr><tr><td class="h">2740</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub internal_subset</td></tr>
<tr><td class="h">2741</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2741">4</a></div></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">2742</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2742">100</a></div></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $doctype= $t-&gt;{twig_doctype} or return &#39;&#39;;</td></tr>
<tr><td class="h">2743</td><td><div class="c3">3</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L2743">100</a></div></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $doctype-&gt;{internal} || &#39;&#39;;</td></tr>
<tr><td class="h">2744</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2745</td><td colspan="7"></td></tr><tr><td class="h">2746</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># return the dtd object</td></tr>
<tr><td class="h">2747</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub dtd</td></tr>
<tr><td class="h">2748</td><td><div class="c3">7</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2748">7</a></div></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">2749</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>74</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t-&gt;{twig_dtd};</td></tr>
<tr><td class="h">2750</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2751</td><td colspan="7"></td></tr><tr><td class="h">2752</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># return an element model, or the list of element models</td></tr>
<tr><td class="h">2753</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub model</td></tr>
<tr><td class="h">2754</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2754">3</a></div></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">2755</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>431</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $elt= shift;</td></tr>
<tr><td class="h">2756</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2756">100</a></div></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t-&gt;dtd-&gt;{model}-&gt;{$elt} if( $elt);</td></tr>
<tr><td class="h">2757</td><td><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return sort keys %{$t-&gt;dtd-&gt;{model}};</td></tr>
<tr><td class="h">2758</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2759</td><td colspan="7"></td></tr><tr><td class="h">2760</td><td colspan="7"></td></tr><tr><td class="h">2761</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># return the entity_list object </td></tr>
<tr><td class="h">2762</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub entity_list($)</td></tr>
<tr><td class="h">2763</td><td><div class="c3">157</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2763">157</a></div></td><td></td><td><div>838</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">2764</td><td><div class="c3">157</div></td><td></td><td></td><td></td><td></td><td><div>911</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t-&gt;{twig_entity_list};</td></tr>
<tr><td class="h">2765</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2766</td><td colspan="7"></td></tr><tr><td class="h">2767</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># return the list of entity names </td></tr>
<tr><td class="h">2768</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub entity_names($)</td></tr>
<tr><td class="h">2769</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2769">6</a></div></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">2770</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t-&gt;entity_list-&gt;entity_names;</td></tr>
<tr><td class="h">2771</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2772</td><td colspan="7"></td></tr><tr><td class="h">2773</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># return the entity object </td></tr>
<tr><td class="h">2774</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub entity($$)</td></tr>
<tr><td class="h">2775</td><td><div class="c3">14</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2775">14</a></div></td><td></td><td><div>630</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">2776</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $entity_name= shift;</td></tr>
<tr><td class="h">2777</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t-&gt;entity_list-&gt;ent( $entity_name);</td></tr>
<tr><td class="h">2778</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2779</td><td colspan="7"></td></tr><tr><td class="h">2780</td><td colspan="7"></td></tr><tr><td class="h">2781</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub print_prolog</td></tr>
<tr><td class="h">2782</td><td><div class="c3">886</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2782">886</a></div></td><td></td><td><div>2557</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">2783</td><td><div class="c3">886</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2783">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L2783">33</a></div></td><td></td><td></td><td><div>3465</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $fh=  _is_fh($_[0])  ? shift : $t-&gt;{twig_output_fh} || select() || \*STDOUT;</td></tr>
<tr><td class="h">2784</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2784">92</a></div></td><td></td><td><div>927</div><div>251</div><div>899</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;no strict &#39;refs&#39;;</td></tr>
<tr><td class="h">2785</td><td><div class="c3">886</div><div class="c3">886</div></td><td></td><td></td><td></td><td></td><td><div>4522</div><div>5469</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;print {$fh} $t-&gt;prolog( @_);</td></tr>
<tr><td class="h">2786</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2787</td><td colspan="7"></td></tr><tr><td class="h">2788</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub prolog</td></tr>
<tr><td class="h">2789</td><td><div class="c3">2272</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2789">2272</a></div></td><td></td><td><div>5602</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">2790</td><td><div class="c3">2272</div><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2790">100</a></div></td><td></td><td></td><td></td><td><div>8694</div><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{no_prolog}){ return &#39;&#39;; }</td></tr>
<tr><td class="h">2791</td><td colspan="7"></td></tr><tr><td class="h">2792</td><td><div class="c3">2269</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2792">100</a></div><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2792">50</a></div></td><td></td><td></td><td></td><td><div>17049</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return   $t-&gt;{no_prolog}             ? &#39;&#39; </td></tr>
<tr><td class="h">2793</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: defined $t-&gt;{no_dtd_output} ? $t-&gt;xmldecl</td></tr>
<tr><td class="h">2794</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:                               $t-&gt;xmldecl . $t-&gt;doctype( @_);</td></tr>
<tr><td class="h">2795</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2796</td><td colspan="7"></td></tr><tr><td class="h">2797</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub doctype</td></tr>
<tr><td class="h">2798</td><td><div class="c3">2271</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2798">2271</a></div></td><td></td><td><div>7251</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">2799</td><td><div class="c3">2271</div></td><td></td><td></td><td></td><td></td><td><div>6919</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %args= _normalize_args( @_);</td></tr>
<tr><td class="h">2800</td><td><div class="c3">2271</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L2800">100</a></div></td><td></td><td></td><td><div>15781</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $update_dtd = $args{UpdateDTD} || &#39;&#39;;</td></tr>
<tr><td class="h">2801</td><td><div class="c3">2271</div></td><td></td><td></td><td></td><td></td><td><div>4389</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $doctype_text=&#39;&#39;;</td></tr>
<tr><td class="h">2802</td><td colspan="7"></td></tr><tr><td class="h">2803</td><td><div class="c3">2271</div></td><td></td><td></td><td></td><td></td><td><div>7280</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $doctype= $t-&gt;{twig_doctype};</td></tr>
<tr><td class="h">2804</td><td colspan="7"></td></tr><tr><td class="h">2805</td><td><div class="c3">2271</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2805">100</a></div></td><td></td><td></td><td></td><td><div>5514</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $doctype)</td></tr>
<tr><td class="h">2806</td><td><div class="c3">43</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2806">50</a></div></td><td></td><td></td><td></td><td><div>285</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $doctype_text .= qq{&lt;!DOCTYPE $doctype-&gt;{name}} if( $doctype-&gt;{name});</td></tr>
<tr><td class="h">2807</td><td><div class="c3">43</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2807">100</a></div></td><td></td><td></td><td></td><td><div>182</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$doctype_text .= qq{ PUBLIC &quot;$doctype-&gt;{pub}&quot;}  if( $doctype-&gt;{pub});</td></tr>
<tr><td class="h">2808</td><td><div class="c3">43</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2808">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L2808">100</a></div></td><td></td><td></td><td><div>378</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$doctype_text .= qq{ SYSTEM}                    if( $doctype-&gt;{sysid} &amp;&amp; !$doctype-&gt;{pub});</td></tr>
<tr><td class="h">2809</td><td><div class="c3">43</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2809">100</a></div></td><td></td><td></td><td></td><td><div>269</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$doctype_text .= qq{ &quot;$doctype-&gt;{sysid}&quot;}       if( $doctype-&gt;{sysid});</td></tr>
<tr><td class="h">2810</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2811</td><td colspan="7"></td></tr><tr><td class="h">2812</td><td><div class="c3">2271</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2812">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2812">100</a></div></td><td></td><td></td><td></td><td><div>6958</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $update_dtd)</td></tr>
<tr><td class="h">2813</td><td><div class="c3">9</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2813">100</a></div><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2813">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L2813">33</a></div></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $doctype)  </td></tr>
<tr><td class="h">2814</td><td><div class="c3">7</div><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>26</div><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $internal=$doctype-&gt;{internal};</td></tr>
<tr><td class="h">2815</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# awfull hack, but at least it works a little better that what was there before</td></tr>
<tr><td class="h">2816</td><td><div class="c3">7</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2816">100</a></div></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $internal)</td></tr>
<tr><td class="h">2817</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # remove entity declarations (they will be re-generated from the updated entity list)</td></tr>
<tr><td class="h">2818</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$internal=~ s{&lt;! \s* ENTITY \s+ $REG_NAME \s+ ( (&quot;[^&quot;]*&quot;|&#39;[^&#39;]*&#39;) \s* | SYSTEM [^&gt;]*) &gt;\s*}{}xg;</td></tr>
<tr><td class="h">2819</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>76</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$internal=~ s{^\n}{};</td></tr>
<tr><td class="h">2820</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2821</td><td><div class="c3">7</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2821">50</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L2821">100</a></div></td><td></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$internal .= $t-&gt;entity_list-&gt;text ||&#39;&#39; if( $t-&gt;entity_list);</td></tr>
<tr><td class="h">2822</td><td><div class="c3">7</div><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2822">100</a></div></td><td></td><td></td><td></td><td><div>39</div><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $internal) { $doctype_text .= &quot;[\n$internal]&gt;\n&quot;; }</td></tr>
<tr><td class="h">2823</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2824</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( !$t-&gt;{&#39;twig_dtd&#39;} &amp;&amp; keys %{$t-&gt;entity_list}) </td></tr>
<tr><td class="h">2825</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $doctype_text .= &quot;&lt;!DOCTYPE &quot; . $t-&gt;root-&gt;gi . &quot; [\n&quot; . $t-&gt;entity_list-&gt;text . &quot;\n]&gt;&quot;;;}</td></tr>
<tr><td class="h">2826</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">2827</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $doctype_text= $t-&gt;{twig_dtd};</td></tr>
<tr><td class="h">2828</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$doctype_text .= $t-&gt;dtd_text;</td></tr>
<tr><td class="h">2829</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}            </td></tr>
<tr><td class="h">2830</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2831</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $doctype)</td></tr>
<tr><td class="h">2832</td><td><div class="c3">36</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2832">100</a></div></td><td></td><td></td><td></td><td><div>184</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( my $internal= $doctype-&gt;{internal}) </td></tr>
<tr><td class="h">2833</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # add opening and closing brackets if not already there</td></tr>
<tr><td class="h">2834</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# plus some spaces and newlines for a nice formating</td></tr>
<tr><td class="h">2835</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# I test it here because I can&#39;t remember which version of</td></tr>
<tr><td class="h">2836</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# XML::Parser need it or not, nor guess which one will in the</td></tr>
<tr><td class="h">2837</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# future, so this about the best I can do</td></tr>
<tr><td class="h">2838</td><td><div class="c3">23</div></td><td></td><td></td><td></td><td></td><td><div>230</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$internal=~ s{^\s*(\[\s*)?}{ [\n};</td></tr>
<tr><td class="h">2839</td><td><div class="c3">23</div></td><td></td><td></td><td></td><td></td><td><div>2378</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$internal=~ s{\s*(\]\s*(&gt;\s*)?)?\s*$}{\n]&gt;\n};</td></tr>
<tr><td class="h">2840</td><td><div class="c3">23</div></td><td></td><td></td><td></td><td></td><td><div>89</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$doctype_text .=  $internal; </td></tr>
<tr><td class="h">2841</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2842</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2843</td><td colspan="7"></td></tr><tr><td class="h">2844</td><td><div class="c3">2271</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2844">100</a></div></td><td></td><td></td><td></td><td><div>5133</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $doctype_text)</td></tr>
<tr><td class="h">2845</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">2846</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# terrible hack, as I can&#39;t figure out in which case the darn prolog</td></tr>
<tr><td class="h">2847</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# should get an extra &gt; (depends on XML::Parser and expat versions)</td></tr>
<tr><td class="h">2848</td><td><div class="c3">45</div></td><td></td><td></td><td></td><td></td><td><div>2834</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$doctype_text=~ s/(&gt;\s*)*$/&gt;\n/; # if($doctype_text);</td></tr>
<tr><td class="h">2849</td><td colspan="7"></td></tr><tr><td class="h">2850</td><td><div class="c3">45</div></td><td></td><td></td><td></td><td></td><td><div>162</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $output_filter= XML::Twig::Elt::output_filter();</td></tr>
<tr><td class="h">2851</td><td><div class="c3">45</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2851">50</a></div></td><td></td><td></td><td></td><td><div>512</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $output_filter ? $output_filter-&gt;( $doctype_text) : $doctype_text;</td></tr>
<tr><td class="h">2852</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2853</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">2854</td><td><div class="c3">2226</div></td><td></td><td></td><td></td><td></td><td><div>13097</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return $doctype_text; }</td></tr>
<tr><td class="h">2855</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2856</td><td colspan="7"></td></tr><tr><td class="h">2857</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _leading_cpi</td></tr>
<tr><td class="h">2858</td><td><div class="c3">2271</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2858">2271</a></div></td><td></td><td><div>5405</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">2859</td><td><div class="c3">2271</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L2859">67</a></div></td><td></td><td></td><td><div>14413</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $leading_cpi= $t-&gt;{leading_cpi} || return &#39;&#39;;</td></tr>
<tr><td class="h">2860</td><td><div class="c3">777</div></td><td></td><td></td><td></td><td></td><td><div>2738</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $leading_cpi-&gt;xml_string;</td></tr>
<tr><td class="h">2861</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2862</td><td colspan="7"></td></tr><tr><td class="h">2863</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _trailing_cpi</td></tr>
<tr><td class="h">2864</td><td><div class="c3">2262</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2864">2262</a></div></td><td></td><td><div>5718</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">2865</td><td><div class="c3">2262</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L2865">67</a></div></td><td></td><td></td><td><div>15064</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $trailing_cpi= $t-&gt;{trailing_cpi} || return &#39;&#39;;</td></tr>
<tr><td class="h">2866</td><td><div class="c3">772</div></td><td></td><td></td><td></td><td></td><td><div>2556</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $trailing_cpi-&gt;xml_string;</td></tr>
<tr><td class="h">2867</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2868</td><td colspan="7"></td></tr><tr><td class="h">2869</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _trailing_cpi_text</td></tr>
<tr><td class="h">2870</td><td><div class="c3">2262</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2870">2262</a></div></td><td></td><td><div>5368</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">2871</td><td><div class="c3">2262</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L2871">100</a></div></td><td></td><td></td><td><div>16047</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t-&gt;{trailing_cpi_text} || &#39;&#39;;</td></tr>
<tr><td class="h">2872</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2873</td><td colspan="7"></td></tr><tr><td class="h">2874</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub print_to_file</td></tr>
<tr><td class="h">2875</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2875">2</a></div></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $filename)= (shift, shift);</td></tr>
<tr><td class="h">2876</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2876">100</a></div></td><td></td><td></td><td></td><td><div>105</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;open( TWIG_PRINT_TO_FILE, &quot;&gt;$filename&quot;) or _croak( &quot;cannot create file $filename: $!&quot;);</td></tr>
<tr><td class="h">2877</td><td><div class="c3">1</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2877">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L2877">33</a></div></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $] &gt; 5.006 &amp;&amp; ! $t-&gt;{twig_keep_encoding}) </td></tr>
<tr><td class="h">2878</td><td><div class="c3">1</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2878">50</a></div></td><td></td><td></td><td></td><td><div>15666</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( grep /useperlio=define/, `$^X -V`) # we can only use binmode :utf8 if perl was compiled with useperlio</td></tr>
<tr><td class="h">2879</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ binmode( TWIG_PRINT_TO_FILE, &quot;:utf8&quot; ); }</td></tr>
<tr><td class="h">2880</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2881</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;print( \*TWIG_PRINT_TO_FILE, @_);</td></tr>
<tr><td class="h">2882</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>68</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;close TWIG_PRINT_TO_FILE;</td></tr>
<tr><td class="h">2883</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t;</td></tr>
<tr><td class="h">2884</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2885</td><td colspan="7"></td></tr><tr><td class="h">2886</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub print</td></tr>
<tr><td class="h">2887</td><td><div class="c3">20</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2887">20</a></div></td><td></td><td><div>594</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">2888</td><td><div class="c3">20</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2888">100</a></div></td><td></td><td></td><td></td><td><div>99</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $fh=  _is_fh( $_[0])  ? shift : undef;</td></tr>
<tr><td class="h">2889</td><td><div class="c3">20</div></td><td></td><td></td><td></td><td></td><td><div>104</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %args= _normalize_args( @_);</td></tr>
<tr><td class="h">2890</td><td colspan="7"></td></tr><tr><td class="h">2891</td><td><div class="c3">20</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2891">100</a></div></td><td></td><td></td><td></td><td><div>152</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $old_select    = defined $fh                  ? select $fh                                 : undef;</td></tr>
<tr><td class="h">2892</td><td><div class="c3">20</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2892">100</a></div></td><td></td><td></td><td></td><td><div>94</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $old_pretty    = defined ($args{PrettyPrint}) ? $t-&gt;set_pretty_print( $args{PrettyPrint})  : undef;</td></tr>
<tr><td class="h">2893</td><td><div class="c3">20</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2893">100</a></div></td><td></td><td></td><td></td><td><div>571</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $old_empty_tag = defined ($args{EmptyTags})   ? $t-&gt;set_empty_tag_style( $args{EmptyTags}) : undef;</td></tr>
<tr><td class="h">2894</td><td colspan="7"></td></tr><tr><td class="h">2895</td><td><div class="c3">20</div></td><td></td><td></td><td></td><td></td><td><div>117</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print  $t-&gt;prolog( %args) . $t-&gt;_leading_cpi( %args);</td></tr>
<tr><td class="h">2896</td><td><div class="c3">20</div></td><td></td><td></td><td></td><td></td><td><div>283</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_root}-&gt;print;</td></tr>
<tr><td class="h">2897</td><td><div class="c3">20</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L2897">67</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L2897">100</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L2897">50</a></div></td><td></td><td></td><td><div>78</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print $t-&gt;_trailing_cpi        # trailing comments and pi&#39;s (elements, in &#39;process&#39; mode)</td></tr>
<tr><td class="h">2898</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. $t-&gt;_trailing_cpi_text   # trailing comments and pi&#39;s (in &#39;keep&#39; mode)</td></tr>
<tr><td class="h">2899</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. ( ($t-&gt;{twig_keep_spaces}||&#39;&#39;) &amp;&amp; ($t-&gt;{trailing_spaces} || &#39;&#39;))</td></tr>
<tr><td class="h">2900</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;</td></tr>
<tr><td class="h">2901</td><td colspan="7"></td></tr><tr><td class="h">2902</td><td colspan="7"></td></tr><tr><td class="h">2903</td><td><div class="c3">20</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2903">100</a></div></td><td></td><td></td><td></td><td><div>294</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;set_pretty_print( $old_pretty)       if( defined $old_pretty); </td></tr>
<tr><td class="h">2904</td><td><div class="c3">20</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2904">100</a></div></td><td></td><td></td><td></td><td><div>71</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;set_empty_tag_style( $old_empty_tag) if( defined $old_empty_tag); </td></tr>
<tr><td class="h">2905</td><td><div class="c3">20</div><div class="c3">17</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2905">100</a></div></td><td></td><td></td><td></td><td><div>57</div><div>109</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $fh) { select $old_select; }</td></tr>
<tr><td class="h">2906</td><td colspan="7"></td></tr><tr><td class="h">2907</td><td><div class="c3">20</div></td><td></td><td></td><td></td><td></td><td><div>86</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t;</td></tr>
<tr><td class="h">2908</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2909</td><td colspan="7"></td></tr><tr><td class="h">2910</td><td colspan="7"></td></tr><tr><td class="h">2911</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub flush</td></tr>
<tr><td class="h">2912</td><td><div class="c3">909</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L2912">909</a></div></td><td></td><td><div>2424</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">2913</td><td colspan="7"></td></tr><tr><td class="h">2914</td><td><div class="c3">909</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2914">50</a></div></td><td></td><td></td><td></td><td><div>3834</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;_trigger_tdh if $t-&gt;{twig_tdh};</td></tr>
<tr><td class="h">2915</td><td colspan="7"></td></tr><tr><td class="h">2916</td><td><div class="c3">909</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2916">100</a></div></td><td></td><td></td><td></td><td><div>2902</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return if( $t-&gt;{twig_completely_flushed});</td></tr>
<tr><td class="h">2917</td><td colspan="7"></td></tr><tr><td class="h">2918</td><td><div class="c3">901</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2918">100</a></div></td><td></td><td></td><td></td><td><div>3239</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $fh=  _is_fh( $_[0]) ? shift : undef;</td></tr>
<tr><td class="h">2919</td><td><div class="c3">901</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2919">100</a></div></td><td></td><td></td><td></td><td><div>8964</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $old_select= defined $fh ? select $fh : undef;</td></tr>
<tr><td class="h">2920</td><td><div class="c3">901</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2920">100</a></div></td><td></td><td></td><td></td><td><div>2808</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $up_to= ref $_[0] ? shift : undef;</td></tr>
<tr><td class="h">2921</td><td><div class="c3">901</div></td><td></td><td></td><td></td><td></td><td><div>3210</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %args= _normalize_args( @_);</td></tr>
<tr><td class="h">2922</td><td colspan="7"></td></tr><tr><td class="h">2923</td><td><div class="c3">901</div></td><td></td><td></td><td></td><td></td><td><div>1411</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $old_pretty;</td></tr>
<tr><td class="h">2924</td><td><div class="c3">901</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2924">100</a></div></td><td></td><td></td><td></td><td><div>3342</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $args{PrettyPrint})</td></tr>
<tr><td class="h">2925</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $old_pretty= $t-&gt;set_pretty_print( $args{PrettyPrint}); </td></tr>
<tr><td class="h">2926</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $args{PrettyPrint};</td></tr>
<tr><td class="h">2927</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2928</td><td colspan="7"></td></tr><tr><td class="h">2929</td><td><div class="c3">901</div></td><td></td><td></td><td></td><td></td><td><div>1290</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $old_empty_tag_style;</td></tr>
<tr><td class="h">2930</td><td><div class="c3">901</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2930">100</a></div></td><td></td><td></td><td></td><td><div>2546</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $args{EmptyTags})</td></tr>
<tr><td class="h">2931</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $old_empty_tag_style= $t-&gt;set_empty_tag_style( $args{EmptyTags}); </td></tr>
<tr><td class="h">2932</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $args{EmptyTags};</td></tr>
<tr><td class="h">2933</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2934</td><td colspan="7"></td></tr><tr><td class="h">2935</td><td colspan="7"></td></tr><tr><td class="h">2936</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# the &quot;real&quot; last element processed, as _twig_end has closed it</td></tr>
<tr><td class="h">2937</td><td><div class="c3">901</div></td><td></td><td></td><td></td><td></td><td><div>1221</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $last_elt;</td></tr>
<tr><td class="h">2938</td><td><div class="c3">901</div></td><td></td><td></td><td></td><td></td><td><div>1569</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $flush_trailing_data=0;</td></tr>
<tr><td class="h">2939</td><td><div class="c3">901</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2939">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2939">100</a></div></td><td></td><td></td><td></td><td><div>3772</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $up_to)</td></tr>
<tr><td class="h">2940</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $last_elt= $up_to; }</td></tr>
<tr><td class="h">2941</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $t-&gt;{twig_current})</td></tr>
<tr><td class="h">2942</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $last_elt= $t-&gt;{twig_current}-&gt;_last_child; }</td></tr>
<tr><td class="h">2943</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">2944</td><td><div class="c3">877</div></td><td></td><td></td><td></td><td></td><td><div>2281</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $last_elt= $t-&gt;{twig_root};</td></tr>
<tr><td class="h">2945</td><td><div class="c3">877</div></td><td></td><td></td><td></td><td></td><td><div>1509</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$flush_trailing_data=1;</td></tr>
<tr><td class="h">2946</td><td><div class="c3">877</div></td><td></td><td></td><td></td><td></td><td><div>4284</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_completely_flushed}=1;</td></tr>
<tr><td class="h">2947</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2948</td><td colspan="7"></td></tr><tr><td class="h">2949</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# flush the DTD unless it has ready flushed (ie root has been flushed)</td></tr>
<tr><td class="h">2950</td><td><div class="c3">901</div></td><td></td><td></td><td></td><td></td><td><div>3183</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $elt= $t-&gt;{twig_root};</td></tr>
<tr><td class="h">2951</td><td><div class="c3">901</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2951">100</a></div></td><td></td><td></td><td></td><td><div>3455</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( $elt-&gt;_flushed)</td></tr>
<tr><td class="h">2952</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # store flush info so we can auto-flush later</td></tr>
<tr><td class="h">2953</td><td><div class="c3">886</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2953">100</a></div></td><td></td><td></td><td></td><td><div>3755</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_autoflush})</td></tr>
<tr><td class="h">2954</td><td><div class="c3">877</div></td><td></td><td></td><td></td><td></td><td><div>3518</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $t-&gt;{twig_autoflush_data}={};</td></tr>
<tr><td class="h">2955</td><td><div class="c3">877</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2955">100</a></div></td><td></td><td></td><td></td><td><div>1376</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_autoflush_data}-&gt;{fh}   = $fh  if( $fh);</td></tr>
<tr><td class="h">2956</td><td><div class="c3">877</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2956">100</a></div></td><td></td><td></td><td></td><td><div>8149</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_autoflush_data}-&gt;{args} = \@_  if( @_);</td></tr>
<tr><td class="h">2957</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2958</td><td><div class="c3">886</div></td><td></td><td></td><td></td><td></td><td><div>4695</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;print_prolog( %args); </td></tr>
<tr><td class="h">2959</td><td><div class="c3">886</div></td><td></td><td></td><td></td><td></td><td><div>29923</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print $t-&gt;_leading_cpi;</td></tr>
<tr><td class="h">2960</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2961</td><td colspan="7"></td></tr><tr><td class="h">2962</td><td><div class="c3">901</div></td><td></td><td></td><td></td><td></td><td><div>28413</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $elt)</td></tr>
<tr><td class="h">2963</td><td><div class="c3">951</div></td><td></td><td></td><td></td><td></td><td><div>1537</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $next_elt; </td></tr>
<tr><td class="h">2964</td><td><div class="c3">951</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2964">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L2964">67</a></div></td><td></td><td></td><td><div>5934</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $last_elt &amp;&amp; $last_elt-&gt;in( $elt))</td></tr>
<tr><td class="h">2965</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">2966</td><td><div class="c3">31</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2966">100</a></div></td><td></td><td></td><td></td><td><div>215</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( $elt-&gt;_flushed) </td></tr>
<tr><td class="h">2967</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # just output the front tag</td></tr>
<tr><td class="h">2968</td><td><div class="c3">25</div></td><td></td><td></td><td></td><td></td><td><div>118</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print $elt-&gt;start_tag();</td></tr>
<tr><td class="h">2969</td><td><div class="c3">25</div></td><td></td><td></td><td></td><td></td><td><div>372</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;_set_flushed;</td></tr>
<tr><td class="h">2970</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2971</td><td><div class="c3">31</div></td><td></td><td></td><td></td><td></td><td><div>107</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$next_elt= $elt-&gt;{first_child};</td></tr>
<tr><td class="h">2972</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2973</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">2974</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # an element before the last one or the last one,</td></tr>
<tr><td class="h">2975</td><td><div class="c3">920</div></td><td></td><td></td><td></td><td></td><td><div>3170</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$next_elt= $elt-&gt;{next_sibling};  </td></tr>
<tr><td class="h">2976</td><td><div class="c3">920</div></td><td></td><td></td><td></td><td></td><td><div>3005</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;_flush();</td></tr>
<tr><td class="h">2977</td><td><div class="c3">920</div></td><td></td><td></td><td></td><td></td><td><div>3445</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;delete; </td></tr>
<tr><td class="h">2978</td><td><div class="c3">920</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2978">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L2978">67</a></div></td><td></td><td></td><td><div>8808</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last if( $last_elt &amp;&amp; ($elt == $last_elt));</td></tr>
<tr><td class="h">2979</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2980</td><td><div class="c3">50</div></td><td></td><td></td><td></td><td></td><td><div>147</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt= $next_elt;</td></tr>
<tr><td class="h">2981</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2982</td><td colspan="7"></td></tr><tr><td class="h">2983</td><td><div class="c3">901</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2983">100</a></div></td><td></td><td></td><td></td><td><div>2676</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $flush_trailing_data)</td></tr>
<tr><td class="h">2984</td><td><div class="c3">877</div></td><td></td><td></td><td></td><td></td><td><div>2789</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ print $t-&gt;_trailing_cpi        # trailing comments and pi&#39;s (elements, in &#39;process&#39; mode)</td></tr>
<tr><td class="h">2985</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;, $t-&gt;_trailing_cpi_text   # trailing comments and pi&#39;s (in &#39;keep&#39; mode)</td></tr>
<tr><td class="h">2986</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2987</td><td colspan="7"></td></tr><tr><td class="h">2988</td><td><div class="c3">901</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2988">100</a></div></td><td></td><td></td><td></td><td><div>29690</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;select $old_select if( defined $old_select);</td></tr>
<tr><td class="h">2989</td><td><div class="c3">901</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2989">100</a></div></td><td></td><td></td><td></td><td><div>2759</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;set_pretty_print( $old_pretty) if( defined $old_pretty); </td></tr>
<tr><td class="h">2990</td><td><div class="c3">901</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2990">100</a></div></td><td></td><td></td><td></td><td><div>2120</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;set_empty_tag_style( $old_empty_tag_style) if( defined $old_empty_tag_style); </td></tr>
<tr><td class="h">2991</td><td colspan="7"></td></tr><tr><td class="h">2992</td><td><div class="c3">901</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L2992">50</a></div></td><td></td><td></td><td></td><td><div>3920</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $ids= $t-&gt;{twig_id_list}) </td></tr>
<tr><td class="h">2993</td><td><div class="c0">0</div><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L2993">0</a></div></td><td></td><td></td><td></td><td><div>0</div><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ while( my ($id, $elt)= each %$ids) { if( ! defined $elt) { delete $t-&gt;{twig_id_list}-&gt;{$id} } } }</td></tr>
<tr><td class="h">2994</td><td colspan="7"></td></tr><tr><td class="h">2995</td><td><div class="c3">901</div></td><td></td><td></td><td></td><td></td><td><div>4085</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t;</td></tr>
<tr><td class="h">2996</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">2997</td><td colspan="7"></td></tr><tr><td class="h">2998</td><td colspan="7"></td></tr><tr><td class="h">2999</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># flushes up to an element</td></tr>
<tr><td class="h">3000</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># this method just reorders the arguments and calls flush</td></tr>
<tr><td class="h">3001</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub flush_up_to</td></tr>
<tr><td class="h">3002</td><td><div class="c3">18</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3002">18</a></div></td><td></td><td><div>65</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">3003</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $up_to= shift;</td></tr>
<tr><td class="h">3004</td><td><div class="c3">18</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3004">100</a></div></td><td></td><td></td><td></td><td><div>122</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( _is_fh( $_[0]))</td></tr>
<tr><td class="h">3005</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $fh=  shift;</td></tr>
<tr><td class="h">3006</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;flush( $fh, $up_to, @_);</td></tr>
<tr><td class="h">3007</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3008</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">3009</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>58</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $t-&gt;flush( $up_to, @_); }</td></tr>
<tr><td class="h">3010</td><td colspan="7"></td></tr><tr><td class="h">3011</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>124</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t;</td></tr>
<tr><td class="h">3012</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3013</td><td colspan="7"></td></tr><tr><td class="h">3014</td><td colspan="7"></td></tr><tr><td class="h">3015</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># same as print except the entire document text is returned as a string</td></tr>
<tr><td class="h">3016</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub sprint</td></tr>
<tr><td class="h">3017</td><td><div class="c3">1365</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3017">1365</a></div></td><td></td><td><div>9944</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">3018</td><td><div class="c3">1365</div></td><td></td><td></td><td></td><td></td><td><div>4901</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %args= _normalize_args( @_);</td></tr>
<tr><td class="h">3019</td><td colspan="7"></td></tr><tr><td class="h">3020</td><td><div class="c3">1365</div></td><td></td><td></td><td></td><td></td><td><div>2369</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $old_pretty;</td></tr>
<tr><td class="h">3021</td><td><div class="c3">1365</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3021">100</a></div></td><td></td><td></td><td></td><td><div>5448</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $args{PrettyPrint})</td></tr>
<tr><td class="h">3022</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>114</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $old_pretty= $t-&gt;set_pretty_print( $args{PrettyPrint}); </td></tr>
<tr><td class="h">3023</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $args{PrettyPrint};</td></tr>
<tr><td class="h">3024</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3025</td><td colspan="7"></td></tr><tr><td class="h">3026</td><td><div class="c3">1365</div></td><td></td><td></td><td></td><td></td><td><div>2825</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $old_empty_tag_style;</td></tr>
<tr><td class="h">3027</td><td><div class="c3">1365</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3027">100</a></div></td><td></td><td></td><td></td><td><div>4568</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined $args{EmptyTags})</td></tr>
<tr><td class="h">3028</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>134</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $old_empty_tag_style= $t-&gt;set_empty_tag_style( $args{EmptyTags}); </td></tr>
<tr><td class="h">3029</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $args{EmptyTags};</td></tr>
<tr><td class="h">3030</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3031</td><td colspan="7"></td></tr><tr><td class="h">3032</td><td><div class="c3">1365</div></td><td></td><td></td><td></td><td></td><td><div>6123</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $string=   $t-&gt;prolog( %args)       # xml declaration and doctype</td></tr>
<tr><td class="h">3033</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. $t-&gt;_leading_cpi( %args) # leading comments and pi&#39;s in &#39;process&#39; mode</td></tr>
<tr><td class="h">3034</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. $t-&gt;{twig_root}-&gt;sprint  </td></tr>
<tr><td class="h">3035</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. $t-&gt;_trailing_cpi        # trailing comments and pi&#39;s (elements, in &#39;process&#39; mode)</td></tr>
<tr><td class="h">3036</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. $t-&gt;_trailing_cpi_text   # trailing comments and pi&#39;s (in &#39;keep&#39; mode)</td></tr>
<tr><td class="h">3037</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;</td></tr>
<tr><td class="h">3038</td><td><div class="c3">1365</div><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3038">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L3038">100</a></div></td><td></td><td></td><td><div>8596</div><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_keep_spaces} &amp;&amp; $t-&gt;{trailing_spaces}) { $string .= $t-&gt;{trailing_spaces}; }</td></tr>
<tr><td class="h">3039</td><td colspan="7"></td></tr><tr><td class="h">3040</td><td><div class="c3">1365</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3040">100</a></div></td><td></td><td></td><td></td><td><div>3600</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;set_pretty_print( $old_pretty) if( defined $old_pretty); </td></tr>
<tr><td class="h">3041</td><td><div class="c3">1365</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3041">100</a></div></td><td></td><td></td><td></td><td><div>3235</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;set_empty_tag_style( $old_empty_tag_style) if( defined $old_empty_tag_style); </td></tr>
<tr><td class="h">3042</td><td colspan="7"></td></tr><tr><td class="h">3043</td><td><div class="c3">1365</div></td><td></td><td></td><td></td><td></td><td><div>11116</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $string;</td></tr>
<tr><td class="h">3044</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3045</td><td colspan="7"></td></tr><tr><td class="h">3046</td><td colspan="7"></td></tr><tr><td class="h">3047</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># this method discards useless elements in a tree</td></tr>
<tr><td class="h">3048</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># it does the same thing as a flush except it does not print it</td></tr>
<tr><td class="h">3049</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># the second argument is an element, the last purged element</td></tr>
<tr><td class="h">3050</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># (this argument is usually set through the purge_up_to method)</td></tr>
<tr><td class="h">3051</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub purge</td></tr>
<tr><td class="h">3052</td><td><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3052">10</a></div></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">3053</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $up_to= shift;</td></tr>
<tr><td class="h">3054</td><td colspan="7"></td></tr><tr><td class="h">3055</td><td><div class="c3">10</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3055">50</a></div></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;_trigger_tdh if $t-&gt;{twig_tdh};</td></tr>
<tr><td class="h">3056</td><td colspan="7"></td></tr><tr><td class="h">3057</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# the &quot;real&quot; last element processed, as _twig_end has closed it</td></tr>
<tr><td class="h">3058</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $last_elt;</td></tr>
<tr><td class="h">3059</td><td><div class="c3">10</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3059">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3059">100</a></div></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $up_to)</td></tr>
<tr><td class="h">3060</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $last_elt= $up_to; }</td></tr>
<tr><td class="h">3061</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $t-&gt;{twig_current})</td></tr>
<tr><td class="h">3062</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $last_elt= $t-&gt;{twig_current}-&gt;_last_child; }</td></tr>
<tr><td class="h">3063</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">3064</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $last_elt= $t-&gt;{twig_root}; }</td></tr>
<tr><td class="h">3065</td><td colspan="7"></td></tr><tr><td class="h">3066</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $elt= $t-&gt;{twig_root};</td></tr>
<tr><td class="h">3067</td><td colspan="7"></td></tr><tr><td class="h">3068</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $elt)</td></tr>
<tr><td class="h">3069</td><td><div class="c3">29</div></td><td></td><td></td><td></td><td></td><td><div>65</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $next_elt; </td></tr>
<tr><td class="h">3070</td><td><div class="c3">29</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3070">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3070">67</a></div></td><td></td><td></td><td><div>177</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $last_elt &amp;&amp; $last_elt-&gt;in( $elt))</td></tr>
<tr><td class="h">3071</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;_set_flushed;</td></tr>
<tr><td class="h">3072</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$next_elt= $elt-&gt;{first_child};</td></tr>
<tr><td class="h">3073</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3074</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">3075</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # an element before the last one or the last one,</td></tr>
<tr><td class="h">3076</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$next_elt= $elt-&gt;{next_sibling};  </td></tr>
<tr><td class="h">3077</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;delete; </td></tr>
<tr><td class="h">3078</td><td><div class="c3">16</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3078">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3078">67</a></div></td><td></td><td></td><td><div>145</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last if( $last_elt &amp;&amp; ($elt == $last_elt) );</td></tr>
<tr><td class="h">3079</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3080</td><td><div class="c3">19</div></td><td></td><td></td><td></td><td></td><td><div>63</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt= $next_elt;</td></tr>
<tr><td class="h">3081</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3082</td><td colspan="7"></td></tr><tr><td class="h">3083</td><td><div class="c3">10</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3083">100</a></div></td><td></td><td></td><td></td><td><div>58</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $ids= $t-&gt;{twig_id_list}) </td></tr>
<tr><td class="h">3084</td><td><div class="c3">2</div><div class="c3">8</div><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3084">100</a></div></td><td></td><td></td><td></td><td><div>16</div><div>43</div><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ while( my ($id, $elt)= each %$ids) { if( ! defined $elt) { delete $t-&gt;{twig_id_list}-&gt;{$id} } } }</td></tr>
<tr><td class="h">3085</td><td colspan="7"></td></tr><tr><td class="h">3086</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t;</td></tr>
<tr><td class="h">3087</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3088</td><td colspan="7"></td></tr><tr><td class="h">3089</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># flushes up to an element. This method just calls purge</td></tr>
<tr><td class="h">3090</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub purge_up_to</td></tr>
<tr><td class="h">3091</td><td><div class="c3">7</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3091">7</a></div></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">3092</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t-&gt;purge( @_);</td></tr>
<tr><td class="h">3093</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3094</td><td colspan="7"></td></tr><tr><td class="h">3095</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub root</td></tr>
<tr><td class="h">3096</td><td><div class="c3">4732</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3096">4732</a></div></td><td></td><td><div>41591</div></td><td class="s">&nbsp;&nbsp;{ return $_[0]-&gt;{twig_root}; }</td></tr>
<tr><td class="h">3097</td><td colspan="7"></td></tr><tr><td class="h">3098</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub normalize</td></tr>
<tr><td class="h">3099</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3099">1</a></div></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;{ return $_[0]-&gt;root-&gt;normalize; }</td></tr>
<tr><td class="h">3100</td><td colspan="7"></td></tr><tr><td class="h">3101</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># create accessor methods on attribute names</td></tr>
<tr><td class="h">3102</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">{ my %accessor; # memorize accessor names so re-creating them won&#39;t trigger an error</td></tr>
<tr><td class="h">3103</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub create_accessors</td></tr>
<tr><td class="h">3104</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">3105</td><td><div class="c3">3</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3105">50</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3105">3</a></div></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_croak( &quot;cannot use the create_accessors method with perl 5.005&quot;) if( $] &lt; 5.006);</td></tr>
<tr><td class="h">3106</td><td colspan="7"></td></tr><tr><td class="h">3107</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $twig_or_class= shift;</td></tr>
<tr><td class="h">3108</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3108">100</a></div></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $elt_class= ref $twig_or_class ? $twig_or_class-&gt;{twig_elt_class}</td></tr>
<tr><td class="h">3109</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: &#39;XML::Twig::Elt&#39;</td></tr>
<tr><td class="h">3110</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;</td></tr>
<tr><td class="h">3111</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3111">92</a></div></td><td></td><td><div>882</div><div>208</div><div>831</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;no strict &#39;refs&#39;;</td></tr>
<tr><td class="h">3112</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $att (@_)</td></tr>
<tr><td class="h">3113</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3113">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L3113">100</a></div></td><td></td><td></td><td><div>64</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ _croak( &quot;attempt to redefine existing method $att using create_accessors&quot;)</td></tr>
<tr><td class="h">3114</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $elt_class-&gt;can( $att) &amp;&amp; !$accessor{$att});</td></tr>
<tr><td class="h">3115</td><td colspan="7"></td></tr><tr><td class="h">3116</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3116">100</a></div></td><td></td><td></td><td></td><td><div>58</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( !$accessor{$att})                                # &gt; perl 5.5</td></tr>
<tr><td class="h">3117</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ *{&quot;$elt_class\::$att&quot;}=                          # &gt; perl 5.5</td></tr>
<tr><td class="h">3118</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sub :lvalue                                  # &gt; perl 5.5</td></tr>
<tr><td class="h">3119</td><td><div class="c3">11</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3119">11</a></div></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $elt= shift;                          # &gt; perl 5.5</td></tr>
<tr><td class="h">3120</td><td><div class="c3">11</div><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3120">100</a></div></td><td></td><td></td><td></td><td><div>33</div><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( @_) { $elt-&gt;{att}-&gt;{$att}= $_[0]; }  # &gt; perl 5.5</td></tr>
<tr><td class="h">3121</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>79</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{att}-&gt;{$att};                     # &gt; perl 5.5</td></tr>
<tr><td class="h">3122</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};                                         # &gt; perl 5.5</td></tr>
<tr><td class="h">3123</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$accessor{$att}=1;                               # &gt; perl 5.5</td></tr>
<tr><td class="h">3124</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}                                                  # &gt; perl 5.5</td></tr>
<tr><td class="h">3125</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3126</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $twig_or_class;</td></tr>
<tr><td class="h">3127</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3128</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">3129</td><td colspan="7"></td></tr><tr><td class="h">3130</td><td colspan="7"></td></tr><tr><td class="h">3131</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub first_elt</td></tr>
<tr><td class="h">3132</td><td><div class="c3">87</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3132">87</a></div></td><td></td><td><div>1964</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $cond)= @_;</td></tr>
<tr><td class="h">3133</td><td><div class="c3">87</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3133">33</a></div></td><td></td><td></td><td><div>350</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $root= $t-&gt;root || return undef;</td></tr>
<tr><td class="h">3134</td><td><div class="c3">87</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3134">100</a></div></td><td></td><td></td><td></td><td><div>351</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $root if( $root-&gt;passes( $cond));</td></tr>
<tr><td class="h">3135</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td></td><td><div>405</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $root-&gt;next_elt( $cond); </td></tr>
<tr><td class="h">3136</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3137</td><td colspan="7"></td></tr><tr><td class="h">3138</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub last_elt</td></tr>
<tr><td class="h">3139</td><td><div class="c3">7</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3139">7</a></div></td><td></td><td><div>255</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $cond)= @_;</td></tr>
<tr><td class="h">3140</td><td><div class="c3">7</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3140">33</a></div></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $root= $t-&gt;root || return undef;</td></tr>
<tr><td class="h">3141</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $root-&gt;last_descendant( $cond); </td></tr>
<tr><td class="h">3142</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3143</td><td colspan="7"></td></tr><tr><td class="h">3144</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub next_n_elt</td></tr>
<tr><td class="h">3145</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3145">4</a></div></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $offset, $cond)= @_;</td></tr>
<tr><td class="h">3146</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3146">100</a></div></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$offset -- if( $t-&gt;root-&gt;matches( $cond) );</td></tr>
<tr><td class="h">3147</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t-&gt;root-&gt;next_n_elt( $offset, $cond);</td></tr>
<tr><td class="h">3148</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3149</td><td colspan="7"></td></tr><tr><td class="h">3150</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub get_xpath</td></tr>
<tr><td class="h">3151</td><td><div class="c3">150</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3151">150</a></div></td><td></td><td><div>12839</div></td><td class="s">&nbsp;&nbsp;{ my $twig= shift;</td></tr>
<tr><td class="h">3152</td><td><div class="c3">150</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3152">100</a></div></td><td></td><td></td><td></td><td><div>937</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( isa( $_[0], &#39;ARRAY&#39;))</td></tr>
<tr><td class="h">3153</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $elt_array= shift;</td></tr>
<tr><td class="h">3154</td><td><div class="c3">1</div><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>4</div><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return _unique_elts( map { $_-&gt;get_xpath( @_) } @$elt_array);</td></tr>
<tr><td class="h">3155</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3156</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">3157</td><td><div class="c3">149</div></td><td></td><td></td><td></td><td></td><td><div>505</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return $twig-&gt;root-&gt;get_xpath( @_); }</td></tr>
<tr><td class="h">3158</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3159</td><td colspan="7"></td></tr><tr><td class="h">3160</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># get a list of elts and return a sorted list of unique elts</td></tr>
<tr><td class="h">3161</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _unique_elts</td></tr>
<tr><td class="h">3162</td><td><div class="c3">172</div><div class="c3">190</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3162">172</a></div></td><td></td><td><div>610</div><div>643</div></td><td class="s">&nbsp;&nbsp;{ my @sorted= sort { $a -&gt;cmp( $b) } @_;</td></tr>
<tr><td class="h">3163</td><td><div class="c3">172</div></td><td></td><td></td><td></td><td></td><td><div>499</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @unique;</td></tr>
<tr><td class="h">3164</td><td><div class="c3">172</div></td><td></td><td></td><td></td><td></td><td><div>815</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( my $current= shift @sorted)</td></tr>
<tr><td class="h">3165</td><td><div class="c3">279</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3165">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L3165">100</a></div></td><td></td><td></td><td><div>2481</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ push @unique, $current unless( @unique &amp;&amp; ($unique[-1] == $current)); }</td></tr>
<tr><td class="h">3166</td><td><div class="c3">172</div></td><td></td><td></td><td></td><td></td><td><div>1133</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @unique;</td></tr>
<tr><td class="h">3167</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3168</td><td colspan="7"></td></tr><tr><td class="h">3169</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub findvalue</td></tr>
<tr><td class="h">3170</td><td><div class="c3">12</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3170">12</a></div></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;{ my $twig= shift;</td></tr>
<tr><td class="h">3171</td><td><div class="c3">12</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3171">100</a></div></td><td></td><td></td><td></td><td><div>66</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( isa( $_[0], &#39;ARRAY&#39;))</td></tr>
<tr><td class="h">3172</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>2</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $elt_array= shift;</td></tr>
<tr><td class="h">3173</td><td><div class="c3">1</div><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>4</div><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return join( &#39;&#39;, map { $_-&gt;findvalue( @_) } @$elt_array);</td></tr>
<tr><td class="h">3174</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3175</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">3176</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return $twig-&gt;root-&gt;findvalue( @_); }</td></tr>
<tr><td class="h">3177</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3178</td><td colspan="7"></td></tr><tr><td class="h">3179</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_id_seed</td></tr>
<tr><td class="h">3180</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3180">2</a></div></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">3181</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;XML::Twig::Elt-&gt;set_id_seed( @_);</td></tr>
<tr><td class="h">3182</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t;</td></tr>
<tr><td class="h">3183</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3184</td><td colspan="7"></td></tr><tr><td class="h">3185</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># return an array ref to an index, or undef</td></tr>
<tr><td class="h">3186</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub index</td></tr>
<tr><td class="h">3187</td><td><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3187">10</a></div></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;{ my( $twig, $name, $index)= @_;</td></tr>
<tr><td class="h">3188</td><td><div class="c3">10</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3188">100</a></div></td><td></td><td></td><td></td><td><div>84</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return defined( $index) ? $twig-&gt;{_twig_index}-&gt;{$name}-&gt;[$index] : $twig-&gt;{_twig_index}-&gt;{$name};</td></tr>
<tr><td class="h">3189</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3190</td><td colspan="7"></td></tr><tr><td class="h">3191</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># return a list with just the root</td></tr>
<tr><td class="h">3192</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># if a condition is given then return an empty list unless the root matches</td></tr>
<tr><td class="h">3193</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub children</td></tr>
<tr><td class="h">3194</td><td><div class="c3">82</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3194">82</a></div></td><td></td><td><div>357</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $cond)= @_;</td></tr>
<tr><td class="h">3195</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td></td><td><div>281</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $root= $t-&gt;root;</td></tr>
<tr><td class="h">3196</td><td><div class="c3">82</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3196">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L3196">100</a></div></td><td></td><td></td><td><div>558</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( $cond &amp;&amp; !($root-&gt;passes( $cond)) )</td></tr>
<tr><td class="h">3197</td><td><div class="c3">79</div></td><td></td><td></td><td></td><td></td><td><div>370</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return ($root); }</td></tr>
<tr><td class="h">3198</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">3199</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return (); }</td></tr>
<tr><td class="h">3200</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3201</td><td colspan="7"></td></tr><tr><td class="h">3202</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3202">1</a></div></td><td></td><td><div>6</div></td><td class="s">sub _children { return ($_[0]-&gt;root); }</td></tr>
<tr><td class="h">3203</td><td colspan="7"></td></tr><tr><td class="h">3204</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># weird, but here for completude</td></tr>
<tr><td class="h">3205</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># used to solve (non-sensical) /doc[1] XPath queries</td></tr>
<tr><td class="h">3206</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub child</td></tr>
<tr><td class="h">3207</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3207">2</a></div></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">3208</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $nb= shift;</td></tr>
<tr><td class="h">3209</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return ($t-&gt;children( @_))[$nb];</td></tr>
<tr><td class="h">3210</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3211</td><td colspan="7"></td></tr><tr><td class="h">3212</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub descendants</td></tr>
<tr><td class="h">3213</td><td><div class="c3">79</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3213">79</a></div></td><td></td><td><div>375</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $cond)= @_;</td></tr>
<tr><td class="h">3214</td><td><div class="c3">79</div></td><td></td><td></td><td></td><td></td><td><div>327</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $root= $t-&gt;root;</td></tr>
<tr><td class="h">3215</td><td><div class="c3">79</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3215">100</a></div></td><td></td><td></td><td></td><td><div>279</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $root-&gt;passes( $cond) )</td></tr>
<tr><td class="h">3216</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>184</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return ($root, $root-&gt;descendants( $cond)); }</td></tr>
<tr><td class="h">3217</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">3218</td><td><div class="c3">35</div></td><td></td><td></td><td></td><td></td><td><div>155</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return ( $root-&gt;descendants( $cond)); }</td></tr>
<tr><td class="h">3219</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3220</td><td colspan="7"></td></tr><tr><td class="h">3221</td><td><div class="c3">2</div><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3221">2</a></div></td><td></td><td><div>34</div><div>8</div></td><td class="s">sub simplify  { my $t= shift; $t-&gt;root-&gt;simplify( @_);  }</td></tr>
<tr><td class="h">3222</td><td><div class="c3">17</div><div class="c3">17</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3222">17</a></div></td><td></td><td><div>175</div><div>63</div></td><td class="s">sub subs_text { my $t= shift; $t-&gt;root-&gt;subs_text( @_); }</td></tr>
<tr><td class="h">3223</td><td><div class="c3">18</div><div class="c3">18</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3223">18</a></div></td><td></td><td><div>40</div><div>55</div></td><td class="s">sub trim      { my $t= shift; $t-&gt;root-&gt;trim( @_);      }</td></tr>
<tr><td class="h">3224</td><td colspan="7"></td></tr><tr><td class="h">3225</td><td colspan="7"></td></tr><tr><td class="h">3226</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_keep_encoding</td></tr>
<tr><td class="h">3227</td><td><div class="c3">2763</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3227">2763</a></div></td><td></td><td><div>9155</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $keep)= @_;</td></tr>
<tr><td class="h">3228</td><td><div class="c3">2763</div></td><td></td><td></td><td></td><td></td><td><div>12912</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_keep_encoding}= $keep;</td></tr>
<tr><td class="h">3229</td><td><div class="c3">2763</div></td><td></td><td></td><td></td><td></td><td><div>10558</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{NoExpand}= $keep;</td></tr>
<tr><td class="h">3230</td><td><div class="c3">2763</div></td><td></td><td></td><td></td><td></td><td><div>9421</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return XML::Twig::Elt::set_keep_encoding( $keep);</td></tr>
<tr><td class="h">3231</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3232</td><td colspan="7"></td></tr><tr><td class="h">3233</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_expand_external_entities</td></tr>
<tr><td class="h">3234</td><td><div class="c3">2771</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3234">2771</a></div></td><td></td><td><div>11234</div></td><td class="s">&nbsp;&nbsp;{ return XML::Twig::Elt::set_expand_external_entities( @_); }</td></tr>
<tr><td class="h">3235</td><td colspan="7"></td></tr><tr><td class="h">3236</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub escape_gt</td></tr>
<tr><td class="h">3237</td><td><div class="c0">0</div><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3237">0</a></div></td><td></td><td><div>0</div><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift; $t-&gt;{twig_escape_gt}= 1; return XML::Twig::Elt::escape_gt( @_); }</td></tr>
<tr><td class="h">3238</td><td colspan="7"></td></tr><tr><td class="h">3239</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub do_not_escape_gt</td></tr>
<tr><td class="h">3240</td><td><div class="c0">0</div><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3240">0</a></div></td><td></td><td><div>0</div><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift; $t-&gt;{twig_escape_gt}= 0; return XML::Twig::Elt::do_not_escape_gt( @_); }</td></tr>
<tr><td class="h">3241</td><td colspan="7"></td></tr><tr><td class="h">3242</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># WARNING: at the moment the id list is not updated reliably</td></tr>
<tr><td class="h">3243</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub elt_id</td></tr>
<tr><td class="h">3244</td><td><div class="c3">65</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3244">65</a></div></td><td></td><td><div>1789</div></td><td class="s">&nbsp;&nbsp;{ return $_[0]-&gt;{twig_id_list}-&gt;{$_[1]}; }</td></tr>
<tr><td class="h">3245</td><td colspan="7"></td></tr><tr><td class="h">3246</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># change it in ALL twigs at the moment</td></tr>
<tr><td class="h">3247</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub change_gi </td></tr>
<tr><td class="h">3248</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3248">4</a></div></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;{ my( $twig, $old_gi, $new_gi)= @_;</td></tr>
<tr><td class="h">3249</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $index;</td></tr>
<tr><td class="h">3250</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3250">100</a></div></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return unless($index= $XML::Twig::gi2index{$old_gi});</td></tr>
<tr><td class="h">3251</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$XML::Twig::index2gi[$index]= $new_gi;</td></tr>
<tr><td class="h">3252</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $XML::Twig::gi2index{$old_gi};</td></tr>
<tr><td class="h">3253</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$XML::Twig::gi2index{$new_gi}= $index;</td></tr>
<tr><td class="h">3254</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $twig;</td></tr>
<tr><td class="h">3255</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3256</td><td colspan="7"></td></tr><tr><td class="h">3257</td><td colspan="7"></td></tr><tr><td class="h">3258</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># builds the DTD from the stored (possibly updated) data</td></tr>
<tr><td class="h">3259</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub dtd_text</td></tr>
<tr><td class="h">3260</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3260">4</a></div></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">3261</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dtd= $t-&gt;{twig_dtd};</td></tr>
<tr><td class="h">3262</td><td><div class="c3">4</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3262">50</a></div></td><td></td><td></td><td></td><td><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $doctype= $t-&gt;{twig_doctype} or return &#39;&#39;;</td></tr>
<tr><td class="h">3263</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $string= &quot;&lt;!DOCTYPE &quot;.$doctype-&gt;{name};</td></tr>
<tr><td class="h">3264</td><td colspan="7"></td></tr><tr><td class="h">3265</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$string .= &quot; [\n&quot;;</td></tr>
<tr><td class="h">3266</td><td colspan="7"></td></tr><tr><td class="h">3267</td><td><div class="c3">4</div><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>11</div><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $gi (@{$dtd-&gt;{elt_list}})</td></tr>
<tr><td class="h">3268</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $string.= &quot;&lt;!ELEMENT $gi &quot;.$dtd-&gt;{model}-&gt;{$gi}.&quot;&gt;\n&quot; ;</td></tr>
<tr><td class="h">3269</td><td><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3269">100</a></div></td><td></td><td></td><td></td><td><div>349</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $dtd-&gt;{att}-&gt;{$gi})</td></tr>
<tr><td class="h">3270</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $attlist= $dtd-&gt;{att}-&gt;{$gi};</td></tr>
<tr><td class="h">3271</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string.= &quot;&lt;!ATTLIST $gi\n&quot;;</td></tr>
<tr><td class="h">3272</td><td><div class="c3">2</div><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>5</div><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $att ( sort keys %{$attlist})</td></tr>
<tr><td class="h">3273</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">3274</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3274">100</a></div></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $attlist-&gt;{$att}-&gt;{fixed})</td></tr>
<tr><td class="h">3275</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $string.= &quot;   $att $attlist-&gt;{$att}-&gt;{type} #FIXED $attlist-&gt;{$att}-&gt;{default}&quot;; }</td></tr>
<tr><td class="h">3276</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">3277</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $string.= &quot;   $att $attlist-&gt;{$att}-&gt;{type} $attlist-&gt;{$att}-&gt;{default}&quot;; }</td></tr>
<tr><td class="h">3278</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string.= &quot;\n&quot;;</td></tr>
<tr><td class="h">3279</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3280</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string.= &quot;&gt;\n&quot;;</td></tr>
<tr><td class="h">3281</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3282</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3283</td><td><div class="c3">4</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3283">50</a></div></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$string.= $t-&gt;entity_list-&gt;text if( $t-&gt;entity_list);</td></tr>
<tr><td class="h">3284</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$string.= &quot;\n]&gt;\n&quot;;</td></tr>
<tr><td class="h">3285</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $string;</td></tr>
<tr><td class="h">3286</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3287</td><td colspan="7"></td></tr><tr><td class="h">3288</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># prints the DTD from the stored (possibly updated) data</td></tr>
<tr><td class="h">3289</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub dtd_print</td></tr>
<tr><td class="h">3290</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3290">3</a></div></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">3291</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3291">100</a></div></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $fh=  _is_fh( $_[0])  ? shift : undef;</td></tr>
<tr><td class="h">3292</td><td><div class="c3">3</div><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3292">100</a></div></td><td></td><td></td><td></td><td><div>9</div><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $fh) { print $fh $t-&gt;dtd_text; }</td></tr>
<tr><td class="h">3293</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else     { print $t-&gt;dtd_text;     }</td></tr>
<tr><td class="h">3294</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>76</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t;</td></tr>
<tr><td class="h">3295</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3296</td><td colspan="7"></td></tr><tr><td class="h">3297</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># build the subs that call directly expat</td></tr>
<tr><td class="h">3298</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">BEGIN</td></tr>
<tr><td class="h">3299</td><td><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3299">92</a></div></td><td></td><td><div>1613</div></td><td class="s">&nbsp;&nbsp;{ my @expat_methods= qw( depth in_element within_element context</td></tr>
<tr><td class="h">3300</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;current_line current_column current_byte</td></tr>
<tr><td class="h">3301</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;recognized_string original_string </td></tr>
<tr><td class="h">3302</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xpcroak xpcarp </td></tr>
<tr><td class="h">3303</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xml_escape</td></tr>
<tr><td class="h">3304</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base current_element element_index </td></tr>
<tr><td class="h">3305</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;position_in_context);</td></tr>
<tr><td class="h">3306</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>354</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $method (@expat_methods)</td></tr>
<tr><td class="h">3307</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3307">92</a></div></td><td></td><td><div>854</div><div>229</div><div>560</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ no strict &#39;refs&#39;;</td></tr>
<tr><td class="h">3308</td><td><div class="c3">1472</div><div class="c3">34</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3308">34</a></div></td><td></td><td><div>13273</div><div>695</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*{$method}= sub { my $t= shift;</td></tr>
<tr><td class="h">3309</td><td><div class="c3">34</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3309">100</a></div></td><td></td><td></td><td></td><td><div>221</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_croak( &quot;calling $method after parsing is finished&quot;) unless( $t-&gt;{twig_parsing}); </td></tr>
<tr><td class="h">3310</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>118</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $t-&gt;{twig_parser}-&gt;$method(@_); </td></tr>
<tr><td class="h">3311</td><td><div class="c3">1472</div></td><td></td><td></td><td></td><td></td><td><div>11673</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">3312</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3313</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3314</td><td colspan="7"></td></tr><tr><td class="h">3315</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub path</td></tr>
<tr><td class="h">3316</td><td><div class="c3">17</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3316">17</a></div></td><td></td><td><div>134</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $gi)= @_;</td></tr>
<tr><td class="h">3317</td><td><div class="c3">17</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3317">50</a></div></td><td></td><td></td><td></td><td><div>67</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_map_xmlns})</td></tr>
<tr><td class="h">3318</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return &quot;/&quot; . join( &quot;/&quot;, map { $t-&gt;_replace_prefix( $_)} ($t-&gt;{twig_parser}-&gt;context, $gi)); }</td></tr>
<tr><td class="h">3319</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">3320</td><td><div class="c3">17</div></td><td></td><td></td><td></td><td></td><td><div>93</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return &quot;/&quot; . join( &quot;/&quot;, ($t-&gt;{twig_parser}-&gt;context, $gi)); }</td></tr>
<tr><td class="h">3321</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3322</td><td colspan="7"></td></tr><tr><td class="h">3323</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub finish</td></tr>
<tr><td class="h">3324</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3324">1</a></div></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">3325</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t-&gt;{twig_parser}-&gt;finish;</td></tr>
<tr><td class="h">3326</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3327</td><td colspan="7"></td></tr><tr><td class="h">3328</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># just finish the parse by printing the rest of the document</td></tr>
<tr><td class="h">3329</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub finish_print</td></tr>
<tr><td class="h">3330</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3330">6</a></div></td><td></td><td><div>94</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $fh)= @_;</td></tr>
<tr><td class="h">3331</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $old_fh;</td></tr>
<tr><td class="h">3332</td><td><div class="c3">6</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3332">100</a></div><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3332">50</a></div></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( defined $fh)</td></tr>
<tr><td class="h">3333</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $t-&gt;_set_fh_to_twig_output_fh(); }</td></tr>
<tr><td class="h">3334</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( defined $fh)</td></tr>
<tr><td class="h">3335</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $old_fh= select $fh; </td></tr>
<tr><td class="h">3336</td><td><div class="c3">4</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3336">50</a></div></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_original_selected_fh}= $old_fh if( $old_fh); </td></tr>
<tr><td class="h">3337</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3338</td><td colspan="7"></td></tr><tr><td class="h">3339</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $p=$t-&gt;{twig_parser};</td></tr>
<tr><td class="h">3340</td><td><div class="c3">6</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3340">100</a></div></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_keep_encoding})</td></tr>
<tr><td class="h">3341</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $p-&gt;setHandlers( %twig_handlers_finish_print); }</td></tr>
<tr><td class="h">3342</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">3343</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>84</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $p-&gt;setHandlers( %twig_handlers_finish_print_original); }</td></tr>
<tr><td class="h">3344</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>2382</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t;</td></tr>
<tr><td class="h">3345</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3346</td><td colspan="7"></td></tr><tr><td class="h">3347</td><td><div class="c3">2760</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3347">2760</a></div></td><td></td><td><div>9303</div></td><td class="s">sub set_remove_cdata { return XML::Twig::Elt::set_remove_cdata( @_); }</td></tr>
<tr><td class="h">3348</td><td colspan="7"></td></tr><tr><td class="h">3349</td><td><div class="c3">19</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3349">19</a></div></td><td></td><td><div>66</div></td><td class="s">sub output_filter          { return XML::Twig::Elt::output_filter( @_);          }</td></tr>
<tr><td class="h">3350</td><td><div class="c3">2783</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3350">2783</a></div></td><td></td><td><div>9045</div></td><td class="s">sub set_output_filter      { return XML::Twig::Elt::set_output_filter( @_);      }</td></tr>
<tr><td class="h">3351</td><td colspan="7"></td></tr><tr><td class="h">3352</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3352">2</a></div></td><td></td><td><div>20</div></td><td class="s">sub output_text_filter     { return XML::Twig::Elt::output_text_filter( @_);     }</td></tr>
<tr><td class="h">3353</td><td><div class="c3">2769</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3353">2769</a></div></td><td></td><td><div>14683</div></td><td class="s">sub set_output_text_filter { return XML::Twig::Elt::set_output_text_filter( @_); }</td></tr>
<tr><td class="h">3354</td><td colspan="7"></td></tr><tr><td class="h">3355</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_input_filter</td></tr>
<tr><td class="h">3356</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3356">4</a></div></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $input_filter)= @_;</td></tr>
<tr><td class="h">3357</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $old_filter= $t-&gt;{twig_input_filter};</td></tr>
<tr><td class="h">3358</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3358">100</a></div><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3358">50</a></div><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3358">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3358">67</a></div></td><td></td><td></td><td><div>59</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( !$input_filter || isa( $input_filter, &#39;CODE&#39;) )</td></tr>
<tr><td class="h">3359</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $t-&gt;{twig_input_filter}= $input_filter; }</td></tr>
<tr><td class="h">3360</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $input_filter eq &#39;latin1&#39;)</td></tr>
<tr><td class="h">3361</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{  $t-&gt;{twig_input_filter}= latin1(); }</td></tr>
<tr><td class="h">3362</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $filter{$input_filter})</td></tr>
<tr><td class="h">3363</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{  $t-&gt;{twig_input_filter}= $filter{$input_filter}; }</td></tr>
<tr><td class="h">3364</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">3365</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ _croak( &quot;invalid input filter: $input_filter&quot;); }</td></tr>
<tr><td class="h">3366</td><td colspan="7"></td></tr><tr><td class="h">3367</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $old_filter;</td></tr>
<tr><td class="h">3368</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3369</td><td colspan="7"></td></tr><tr><td class="h">3370</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_empty_tag_style</td></tr>
<tr><td class="h">3371</td><td><div class="c3">85</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3371">85</a></div></td><td></td><td><div>544</div></td><td class="s">&nbsp;&nbsp;{ return XML::Twig::Elt::set_empty_tag_style( @_); }</td></tr>
<tr><td class="h">3372</td><td colspan="7"></td></tr><tr><td class="h">3373</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_pretty_print</td></tr>
<tr><td class="h">3374</td><td><div class="c3">89</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3374">89</a></div></td><td></td><td><div>433</div></td><td class="s">&nbsp;&nbsp;{ return XML::Twig::Elt::set_pretty_print( @_); }</td></tr>
<tr><td class="h">3375</td><td colspan="7"></td></tr><tr><td class="h">3376</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_quote</td></tr>
<tr><td class="h">3377</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3377">4</a></div></td><td></td><td><div>60</div></td><td class="s">&nbsp;&nbsp;{ return XML::Twig::Elt::set_quote( @_); }</td></tr>
<tr><td class="h">3378</td><td colspan="7"></td></tr><tr><td class="h">3379</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_indent</td></tr>
<tr><td class="h">3380</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3380">4</a></div></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;{ return XML::Twig::Elt::set_indent( @_); }</td></tr>
<tr><td class="h">3381</td><td colspan="7"></td></tr><tr><td class="h">3382</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_keep_atts_order</td></tr>
<tr><td class="h">3383</td><td><div class="c3">2760</div><div class="c3">2760</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3383">2760</a></div></td><td></td><td><div>5519</div><div>9042</div></td><td class="s">&nbsp;&nbsp;{ shift; return XML::Twig::Elt::set_keep_atts_order( @_); }</td></tr>
<tr><td class="h">3384</td><td colspan="7"></td></tr><tr><td class="h">3385</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub keep_atts_order</td></tr>
<tr><td class="h">3386</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3386">2</a></div></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;{ return XML::Twig::Elt::keep_atts_order( @_); }</td></tr>
<tr><td class="h">3387</td><td colspan="7"></td></tr><tr><td class="h">3388</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_do_not_escape_amp_in_atts</td></tr>
<tr><td class="h">3389</td><td><div class="c3">2770</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3389">2770</a></div></td><td></td><td><div>10372</div></td><td class="s">&nbsp;&nbsp;{ return XML::Twig::Elt::set_do_not_escape_amp_in_atts( @_); }</td></tr>
<tr><td class="h">3390</td><td colspan="7"></td></tr><tr><td class="h">3391</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># save and restore package globals (the ones in XML::Twig::Elt)</td></tr>
<tr><td class="h">3392</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># should probably return the XML::Twig object itself, but instead</td></tr>
<tr><td class="h">3393</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># returns the state (as a hashref) for backward compatibility</td></tr>
<tr><td class="h">3394</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub save_global_state</td></tr>
<tr><td class="h">3395</td><td><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3395">10</a></div></td><td></td><td><div>218</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">3396</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t-&gt;{twig_saved_state}= XML::Twig::Elt::global_state();</td></tr>
<tr><td class="h">3397</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3398</td><td colspan="7"></td></tr><tr><td class="h">3399</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub restore_global_state</td></tr>
<tr><td class="h">3400</td><td><div class="c3">16</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3400">16</a></div></td><td></td><td><div>632</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">3401</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>82</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;XML::Twig::Elt::set_global_state( $t-&gt;{twig_saved_state});</td></tr>
<tr><td class="h">3402</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3403</td><td colspan="7"></td></tr><tr><td class="h">3404</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub global_state</td></tr>
<tr><td class="h">3405</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3405">1</a></div></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;{ return XML::Twig::Elt::global_state(); }</td></tr>
<tr><td class="h">3406</td><td colspan="7"></td></tr><tr><td class="h">3407</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_global_state</td></tr>
<tr><td class="h">3408</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3408">1</a></div></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;{  return XML::Twig::Elt::set_global_state( $_[1]); }</td></tr>
<tr><td class="h">3409</td><td colspan="7"></td></tr><tr><td class="h">3410</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub dispose</td></tr>
<tr><td class="h">3411</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3411">3</a></div></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">3412</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;DESTROY;</td></tr>
<tr><td class="h">3413</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">3414</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3415</td><td colspan="7"></td></tr><tr><td class="h">3416</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub DESTROY</td></tr>
<tr><td class="h">3417</td><td><div class="c3">2756</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3417">2756</a></div></td><td></td><td><div>8996</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">3418</td><td><div class="c3">2756</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3418">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3418">67</a></div></td><td></td><td></td><td><div>39706</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_root} &amp;&amp; isa(  $t-&gt;{twig_root}, &#39;XML::Twig&#39;)) </td></tr>
<tr><td class="h">3419</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $t-&gt;{twig_root}-&gt;delete } </td></tr>
<tr><td class="h">3420</td><td colspan="7"></td></tr><tr><td class="h">3421</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# added to break circular references</td></tr>
<tr><td class="h">3422</td><td><div class="c3">2756</div></td><td></td><td></td><td></td><td></td><td><div>9872</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;undef $t-&gt;{twig};</td></tr>
<tr><td class="h">3423</td><td><div class="c3">2756</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3423">100</a></div></td><td></td><td></td><td></td><td><div>16406</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;undef $t-&gt;{twig_root}-&gt;{twig} if( $t-&gt;{twig_root});</td></tr>
<tr><td class="h">3424</td><td><div class="c3">2756</div></td><td></td><td></td><td></td><td></td><td><div>9519</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;undef $t-&gt;{twig_parser};</td></tr>
<tr><td class="h">3425</td><td colspan="7"></td></tr><tr><td class="h">3426</td><td><div class="c3">2756</div></td><td></td><td></td><td></td><td></td><td><div>8363</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t={}; # prevents memory leaks (especially when using mod_perl)</td></tr>
<tr><td class="h">3427</td><td><div class="c3">2756</div></td><td></td><td></td><td></td><td></td><td><div>6415</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;undef $t;</td></tr>
<tr><td class="h">3428</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}        </td></tr>
<tr><td class="h">3429</td><td colspan="7"></td></tr><tr><td class="h">3430</td><td colspan="7"></td></tr><tr><td class="h">3431</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">3432</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#  non standard handlers</td></tr>
<tr><td class="h">3433</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">3434</td><td colspan="7"></td></tr><tr><td class="h">3435</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># kludge: expat 1.95.2 calls both Default AND Doctype handlers</td></tr>
<tr><td class="h">3436</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># so if the default handler finds &#39;&lt;!DOCTYPE&#39; then it must </td></tr>
<tr><td class="h">3437</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># unset itself (_twig_print_doctype will reset it)</td></tr>
<tr><td class="h">3438</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_print_check_doctype</td></tr>
<tr><td class="h">3439</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_print_check_doctype...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">3440</td><td colspan="7"></td></tr><tr><td class="h">3441</td><td><div class="c3">15</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3441">15</a></div></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $p= shift;</td></tr>
<tr><td class="h">3442</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $string= $p-&gt;recognized_string();</td></tr>
<tr><td class="h">3443</td><td><div class="c3">15</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3443">50</a></div></td><td></td><td></td><td></td><td><div>294</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $string eq &#39;&lt;!DOCTYPE&#39;) </td></tr>
<tr><td class="h">3444</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">3445</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$p-&gt;setHandlers( Default =&gt; undef); </td></tr>
<tr><td class="h">3446</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$p-&gt;setHandlers( Entity =&gt; undef); </td></tr>
<tr><td class="h">3447</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$expat_1_95_2=1; </td></tr>
<tr><td class="h">3448</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3449</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else                        </td></tr>
<tr><td class="h">3450</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ print $string; }</td></tr>
<tr><td class="h">3451</td><td colspan="7"></td></tr><tr><td class="h">3452</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">3453</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3454</td><td colspan="7"></td></tr><tr><td class="h">3455</td><td colspan="7"></td></tr><tr><td class="h">3456</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_print</td></tr>
<tr><td class="h">3457</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_print...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">3458</td><td><div class="c3">474</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3458">474</a></div></td><td></td><td><div>1458</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $p= shift;</td></tr>
<tr><td class="h">3459</td><td><div class="c3">474</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3459">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3459">25</a></div></td><td></td><td></td><td><div>2228</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $expat_1_95_2 &amp;&amp; ($p-&gt;recognized_string eq &#39;[&#39;) &amp;&amp; !$p-&gt;{twig}-&gt;{expat_1_95_2_seen_bracket})</td></tr>
<tr><td class="h">3460</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # otherwise the opening square bracket of the doctype gets printed twice </td></tr>
<tr><td class="h">3461</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$p-&gt;{twig}-&gt;{expat_1_95_2_seen_bracket}=1;</td></tr>
<tr><td class="h">3462</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3463</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">3464</td><td><div class="c3">474</div></td><td></td><td></td><td></td><td></td><td><div>1783</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ print $p-&gt;recognized_string(); }</td></tr>
<tr><td class="h">3465</td><td><div class="c3">474</div></td><td></td><td></td><td></td><td></td><td><div>8619</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">3466</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3467</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># recognized_string does not seem to work for entities, go figure!</td></tr>
<tr><td class="h">3468</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># so this handler is used to print them anyway</td></tr>
<tr><td class="h">3469</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_print_entity</td></tr>
<tr><td class="h">3470</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_print_entity...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">3471</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3471">6</a></div></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $p= shift; </td></tr>
<tr><td class="h">3472</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;XML::Twig::Entity-&gt;new( @_)-&gt;print;</td></tr>
<tr><td class="h">3473</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3474</td><td colspan="7"></td></tr><tr><td class="h">3475</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># kludge: expat 1.95.2 calls both Default AND Doctype handlers</td></tr>
<tr><td class="h">3476</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># so if the default handler finds &#39;&lt;!DOCTYPE&#39; then it must </td></tr>
<tr><td class="h">3477</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># unset itself (_twig_print_doctype will reset it)</td></tr>
<tr><td class="h">3478</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_print_original_check_doctype</td></tr>
<tr><td class="h">3479</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_print_original_check_doctype...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">3480</td><td colspan="7"></td></tr><tr><td class="h">3481</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3481">3</a></div></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $p= shift;</td></tr>
<tr><td class="h">3482</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $string= $p-&gt;original_string();</td></tr>
<tr><td class="h">3483</td><td><div class="c3">3</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3483">50</a></div></td><td></td><td></td><td></td><td><div>67</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $string eq &#39;&lt;!DOCTYPE&#39;) </td></tr>
<tr><td class="h">3484</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $p-&gt;setHandlers( Default =&gt; undef); </td></tr>
<tr><td class="h">3485</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$p-&gt;setHandlers( Entity =&gt; undef); </td></tr>
<tr><td class="h">3486</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$expat_1_95_2=1; </td></tr>
<tr><td class="h">3487</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3488</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else                        </td></tr>
<tr><td class="h">3489</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ print $string; }</td></tr>
<tr><td class="h">3490</td><td colspan="7"></td></tr><tr><td class="h">3491</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;    </td></tr>
<tr><td class="h">3492</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3493</td><td colspan="7"></td></tr><tr><td class="h">3494</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_print_original</td></tr>
<tr><td class="h">3495</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_print_original...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">3496</td><td><div class="c3">41</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3496">41</a></div></td><td></td><td><div>186</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $p= shift; </td></tr>
<tr><td class="h">3497</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td></td><td><div>163</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;print $p-&gt;original_string();</td></tr>
<tr><td class="h">3498</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td></td><td><div>819</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;    </td></tr>
<tr><td class="h">3499</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3500</td><td colspan="7"></td></tr><tr><td class="h">3501</td><td colspan="7"></td></tr><tr><td class="h">3502</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_print_original_doctype</td></tr>
<tr><td class="h">3503</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_print_original_doctype...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">3504</td><td colspan="7"></td></tr><tr><td class="h">3505</td><td><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3505">5</a></div></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my(  $p, $name, $sysid, $pubid, $internal)= @_;</td></tr>
<tr><td class="h">3506</td><td><div class="c3">5</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3506">50</a></div></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $name)</td></tr>
<tr><td class="h">3507</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # with recent versions of XML::Parser original_string does not work,</td></tr>
<tr><td class="h">3508</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# hence we need to rebuild the doctype declaration</td></tr>
<tr><td class="h">3509</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $doctype=&#39;&#39;;</td></tr>
<tr><td class="h">3510</td><td><div class="c3">5</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3510">50</a></div></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$doctype .= qq{&lt;!DOCTYPE $name}    if( $name);</td></tr>
<tr><td class="h">3511</td><td><div class="c3">5</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3511">50</a></div></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$doctype .=  qq{ PUBLIC  &quot;$pubid&quot;}  if( $pubid);</td></tr>
<tr><td class="h">3512</td><td><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3512">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3512">67</a></div></td><td></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$doctype .=  qq{ SYSTEM}            if( $sysid &amp;&amp; !$pubid);</td></tr>
<tr><td class="h">3513</td><td><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3513">100</a></div></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$doctype .=  qq{ &quot;$sysid&quot;}          if( $sysid); </td></tr>
<tr><td class="h">3514</td><td><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3514">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3514">67</a></div></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$doctype .=  &#39; [&#39; if( $internal &amp;&amp; !$expat_1_95_2) ;</td></tr>
<tr><td class="h">3515</td><td><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3515">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3515">67</a></div></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$doctype .=  qq{&gt;} unless( $internal || $expat_1_95_2);</td></tr>
<tr><td class="h">3516</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$p-&gt;{twig}-&gt;{twig_doctype}-&gt;{has_internal}=$internal;</td></tr>
<tr><td class="h">3517</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>56</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print $doctype;</td></tr>
<tr><td class="h">3518</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3519</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$p-&gt;setHandlers( Default =&gt; \&amp;_twig_print_original);</td></tr>
<tr><td class="h">3520</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>237</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;    </td></tr>
<tr><td class="h">3521</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3522</td><td colspan="7"></td></tr><tr><td class="h">3523</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_print_doctype</td></tr>
<tr><td class="h">3524</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_print_doctype...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">3525</td><td><div class="c3">11</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3525">11</a></div></td><td></td><td><div>88</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my(  $p, $name, $sysid, $pubid, $internal)= @_;</td></tr>
<tr><td class="h">3526</td><td><div class="c3">11</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3526">50</a></div></td><td></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $name)</td></tr>
<tr><td class="h">3527</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # with recent versions of XML::Parser original_string does not work,</td></tr>
<tr><td class="h">3528</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# hence we need to rebuild the doctype declaration</td></tr>
<tr><td class="h">3529</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $doctype=&#39;&#39;;</td></tr>
<tr><td class="h">3530</td><td><div class="c3">11</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3530">50</a></div></td><td></td><td></td><td></td><td><div>92</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$doctype .= qq{&lt;!DOCTYPE $name}    if( $name);</td></tr>
<tr><td class="h">3531</td><td><div class="c3">11</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3531">50</a></div></td><td></td><td></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$doctype .=  qq{ PUBLIC  &quot;$pubid&quot;}  if( $pubid);</td></tr>
<tr><td class="h">3532</td><td><div class="c3">11</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3532">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3532">67</a></div></td><td></td><td></td><td><div>94</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$doctype .=  qq{ SYSTEM}            if( $sysid &amp;&amp; !$pubid);</td></tr>
<tr><td class="h">3533</td><td><div class="c3">11</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3533">100</a></div></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$doctype .=  qq{ &quot;$sysid&quot;}          if( $sysid); </td></tr>
<tr><td class="h">3534</td><td><div class="c3">11</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3534">100</a></div></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$doctype .=  &#39; [&#39; if( $internal) ;</td></tr>
<tr><td class="h">3535</td><td><div class="c3">11</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3535">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3535">67</a></div></td><td></td><td></td><td><div>92</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$doctype .=  qq{&gt;} unless( $internal || $expat_1_95_2);</td></tr>
<tr><td class="h">3536</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>96</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$p-&gt;{twig}-&gt;{twig_doctype}-&gt;{has_internal}=$internal;</td></tr>
<tr><td class="h">3537</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>70</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print $doctype;</td></tr>
<tr><td class="h">3538</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3539</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>70</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$p-&gt;setHandlers( Default =&gt; \&amp;_twig_print);</td></tr>
<tr><td class="h">3540</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>514</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;    </td></tr>
<tr><td class="h">3541</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3542</td><td colspan="7"></td></tr><tr><td class="h">3543</td><td colspan="7"></td></tr><tr><td class="h">3544</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_print_original_default</td></tr>
<tr><td class="h">3545</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_print_original_default...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">3546</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3546">2</a></div></td><td></td><td><div>64</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $p= shift;</td></tr>
<tr><td class="h">3547</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;print $p-&gt;original_string();</td></tr>
<tr><td class="h">3548</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;    </td></tr>
<tr><td class="h">3549</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3550</td><td colspan="7"></td></tr><tr><td class="h">3551</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># account for the case where the element is empty</td></tr>
<tr><td class="h">3552</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_print_end_original</td></tr>
<tr><td class="h">3553</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_print_end_original...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">3554</td><td><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3554">10</a></div></td><td></td><td><div>64</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $p= shift;</td></tr>
<tr><td class="h">3555</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;print $p-&gt;original_string();</td></tr>
<tr><td class="h">3556</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>229</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;    </td></tr>
<tr><td class="h">3557</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3558</td><td colspan="7"></td></tr><tr><td class="h">3559</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_start_check_roots</td></tr>
<tr><td class="h">3560</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_start_check_roots...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">3561</td><td><div class="c3">373</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3561">373</a></div></td><td></td><td><div>1255</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $p= shift;</td></tr>
<tr><td class="h">3562</td><td><div class="c3">373</div></td><td></td><td></td><td></td><td></td><td><div>942</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $gi= shift;</td></tr>
<tr><td class="h">3563</td><td colspan="7"></td></tr><tr><td class="h">3564</td><td><div class="c3">373</div></td><td></td><td></td><td></td><td></td><td><div>1191</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t= $p-&gt;{twig};</td></tr>
<tr><td class="h">3565</td><td colspan="7"></td></tr><tr><td class="h">3566</td><td><div class="c3">373</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3566">67</a></div></td><td></td><td></td><td><div>3302</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $fh= $t-&gt;{twig_output_fh} || select() || \*STDOUT;</td></tr>
<tr><td class="h">3567</td><td colspan="7"></td></tr><tr><td class="h">3568</td><td><div class="c3">373</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3568">100</a></div></td><td></td><td></td><td></td><td><div>1523</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( $p-&gt;depth == 0)</td></tr>
<tr><td class="h">3569</td><td><div class="c3">307</div><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3569">100</a></div></td><td></td><td></td><td></td><td><div>5127</div><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $t-&gt;{twig_map_xmlns}) { _replace_ns( $t, \$gi, \@_); }</td></tr>
<tr><td class="h">3570</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3571</td><td colspan="7"></td></tr><tr><td class="h">3572</td><td><div class="c3">373</div><div class="c3">373</div></td><td></td><td></td><td></td><td></td><td><div>1667</div><div>2696</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;push @{$t-&gt;{_twig_context_stack}}, { _tag =&gt; $gi, @_};</td></tr>
<tr><td class="h">3573</td><td><div class="c3">373</div></td><td></td><td></td><td></td><td></td><td><div>1483</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %att= @_;</td></tr>
<tr><td class="h">3574</td><td colspan="7"></td></tr><tr><td class="h">3575</td><td><div class="c3">373</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3575">100</a></div></td><td></td><td></td><td></td><td><div>1871</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( _handler( $t, $t-&gt;{twig_roots}, $gi))</td></tr>
<tr><td class="h">3576</td><td><div class="c3">78</div></td><td></td><td></td><td></td><td></td><td><div>1083</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $p-&gt;setHandlers( %twig_handlers); # restore regular handlers</td></tr>
<tr><td class="h">3577</td><td><div class="c3">78</div></td><td></td><td></td><td></td><td></td><td><div>32063</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_root_depth}= $p-&gt;depth; </td></tr>
<tr><td class="h">3578</td><td><div class="c3">78</div><div class="c3">78</div></td><td></td><td></td><td></td><td></td><td><div>1113</div><div>297</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pop @{$t-&gt;{_twig_context_stack}}; # will be pushed back in _twig_start</td></tr>
<tr><td class="h">3579</td><td><div class="c3">78</div></td><td></td><td></td><td></td><td></td><td><div>432</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_twig_start( $p, $gi, @_);</td></tr>
<tr><td class="h">3580</td><td><div class="c3">78</div></td><td></td><td></td><td></td><td></td><td><div>194</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">3581</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3582</td><td colspan="7"></td></tr><tr><td class="h">3583</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# $tag will always be true if it needs to be printed (the tag string is never empty)</td></tr>
<tr><td class="h">3584</td><td><div class="c3">295</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3584">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3584">100</a></div></td><td></td><td></td><td></td><td><div>1796</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tag= $t-&gt;{twig_default_print} ? $t-&gt;{twig_keep_encoding} ? $p-&gt;original_string</td></tr>
<tr><td class="h">3585</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: $p-&gt;recognized_string</td></tr>
<tr><td class="h">3586</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: &#39;&#39;;</td></tr>
<tr><td class="h">3587</td><td colspan="7"></td></tr><tr><td class="h">3588</td><td><div class="c3">295</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3588">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3588">100</a></div></td><td></td><td></td><td></td><td><div>3471</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $p-&gt;depth == 0)</td></tr>
<tr><td class="h">3589</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3589">92</a></div></td><td></td><td><div>807</div><div>274</div><div>652</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ no strict &#39;refs&#39;;</td></tr>
<tr><td class="h">3590</td><td><div class="c3">64</div><div class="c3">33</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3590">100</a></div></td><td></td><td></td><td></td><td><div>1481</div><div>186</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print {$fh} $tag if( $tag);</td></tr>
<tr><td class="h">3591</td><td><div class="c3">64</div><div class="c3">64</div></td><td></td><td></td><td></td><td></td><td><div>242</div><div>255</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pop @{$t-&gt;{_twig_context_stack}}; # will be pushed back in _twig_start</td></tr>
<tr><td class="h">3592</td><td><div class="c3">64</div></td><td></td><td></td><td></td><td></td><td><div>371</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_twig_start( $p, $gi, @_);</td></tr>
<tr><td class="h">3593</td><td><div class="c3">64</div></td><td></td><td></td><td></td><td></td><td><div>285</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;root-&gt;_set_flushed; # or the root start tag gets output the first time we flush</td></tr>
<tr><td class="h">3594</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3595</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $t-&gt;{twig_starttag_handlers})</td></tr>
<tr><td class="h">3596</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # look for start tag handlers</td></tr>
<tr><td class="h">3597</td><td colspan="7"></td></tr><tr><td class="h">3598</td><td><div class="c3">23</div></td><td></td><td></td><td></td><td></td><td><div>429</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @handlers= _handler( $t, $t-&gt;{twig_starttag_handlers}, $gi);</td></tr>
<tr><td class="h">3599</td><td><div class="c3">23</div></td><td></td><td></td><td></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $last_handler_res;</td></tr>
<tr><td class="h">3600</td><td><div class="c3">23</div></td><td></td><td></td><td></td><td></td><td><div>65</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $handler ( @handlers)</td></tr>
<tr><td class="h">3601</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>80</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $last_handler_res= $handler-&gt;($t, $gi, %att);</td></tr>
<tr><td class="h">3602</td><td><div class="c3">13</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3602">50</a></div></td><td></td><td></td><td></td><td><div>228</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last unless $last_handler_res;</td></tr>
<tr><td class="h">3603</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3604</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3604">92</a></div></td><td></td><td><div>749</div><div>222</div><div>644</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no strict &#39;refs&#39;;</td></tr>
<tr><td class="h">3605</td><td><div class="c3">23</div><div class="c3">12</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3605">100</a></div></td><td><div class="c1"><a href="blib-lib-XML-Twig-pm--condition.html#L3605">75</a></div></td><td></td><td></td><td><div>177</div><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print {$fh} $tag if( $tag &amp;&amp; (!@handlers || $last_handler_res));   </td></tr>
<tr><td class="h">3606</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3607</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">3608</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3608">92</a></div></td><td></td><td><div>688</div><div>185</div><div>453</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ no strict &#39;refs&#39;;</td></tr>
<tr><td class="h">3609</td><td><div class="c3">208</div><div class="c3">97</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3609">100</a></div></td><td></td><td></td><td></td><td><div>3518</div><div>347</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print {$fh} $tag if( $tag); </td></tr>
<tr><td class="h">3610</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}  </td></tr>
<tr><td class="h">3611</td><td><div class="c3">295</div></td><td></td><td></td><td></td><td></td><td><div>970</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;    </td></tr>
<tr><td class="h">3612</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3613</td><td colspan="7"></td></tr><tr><td class="h">3614</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_end_check_roots</td></tr>
<tr><td class="h">3615</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_end_check_roots...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">3616</td><td colspan="7"></td></tr><tr><td class="h">3617</td><td><div class="c3">295</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3617">295</a></div></td><td></td><td><div>1511</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $p, $gi, %att)= @_;</td></tr>
<tr><td class="h">3618</td><td><div class="c3">295</div></td><td></td><td></td><td></td><td></td><td><div>1007</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t= $p-&gt;{twig};</td></tr>
<tr><td class="h">3619</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# $tag can be empty (&lt;elt/&gt;), hence the undef and the tests for defined</td></tr>
<tr><td class="h">3620</td><td><div class="c3">295</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3620">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3620">100</a></div></td><td></td><td></td><td></td><td><div>1697</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tag= $t-&gt;{twig_default_print} ? $t-&gt;{twig_keep_encoding} ? $p-&gt;original_string</td></tr>
<tr><td class="h">3621</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: $p-&gt;recognized_string</td></tr>
<tr><td class="h">3622</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: undef;</td></tr>
<tr><td class="h">3623</td><td><div class="c3">295</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3623">67</a></div></td><td></td><td></td><td><div>4408</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $fh= $t-&gt;{twig_output_fh} || select() || \*STDOUT;</td></tr>
<tr><td class="h">3624</td><td colspan="7"></td></tr><tr><td class="h">3625</td><td><div class="c3">295</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3625">100</a></div></td><td></td><td></td><td></td><td><div>1351</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_endtag_handlers})</td></tr>
<tr><td class="h">3626</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # look for end tag handlers</td></tr>
<tr><td class="h">3627</td><td><div class="c3">34</div></td><td></td><td></td><td></td><td></td><td><div>150</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @handlers= _handler( $t, $t-&gt;{twig_endtag_handlers}, $gi);</td></tr>
<tr><td class="h">3628</td><td><div class="c3">34</div></td><td></td><td></td><td></td><td></td><td><div>68</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $last_handler_res=1;</td></tr>
<tr><td class="h">3629</td><td><div class="c3">34</div></td><td></td><td></td><td></td><td></td><td><div>98</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $handler ( @handlers)</td></tr>
<tr><td class="h">3630</td><td><div class="c3">10</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3630">67</a></div></td><td></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $last_handler_res= $handler-&gt;($t, $gi) || last; }</td></tr>
<tr><td class="h">3631</td><td><div class="c3">34</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3631">50</a></div></td><td></td><td></td><td></td><td><div>340</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( ! $last_handler_res) </td></tr>
<tr><td class="h">3632</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ pop @{$t-&gt;{_twig_context_stack}};</td></tr>
<tr><td class="h">3633</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">3634</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3635</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3636</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">3637</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div><div class="c3">295</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3637">92</a></div></td><td></td><td><div>787</div><div>202</div><div>532</div><div>454</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;no strict &#39;refs&#39;;</td></tr>
<tr><td class="h">3638</td><td><div class="c3">295</div><div class="c3">142</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3638">100</a></div></td><td></td><td></td><td></td><td><div>889</div><div>505</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print {$fh} $tag if( defined $tag);</td></tr>
<tr><td class="h">3639</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3640</td><td><div class="c3">295</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3640">100</a></div></td><td></td><td></td><td></td><td><div>1327</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $p-&gt;depth == 0)</td></tr>
<tr><td class="h">3641</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">3642</td><td><div class="c3">64</div></td><td></td><td></td><td></td><td></td><td><div>1110</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_twig_end( $p, $gi);  </td></tr>
<tr><td class="h">3643</td><td><div class="c3">64</div></td><td></td><td></td><td></td><td></td><td><div>293</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;root-&gt;{end_tag_flushed}=1;</td></tr>
<tr><td class="h">3644</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3645</td><td colspan="7"></td></tr><tr><td class="h">3646</td><td><div class="c3">295</div><div class="c3">295</div></td><td></td><td></td><td></td><td></td><td><div>3305</div><div>1089</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;pop @{$t-&gt;{_twig_context_stack}};</td></tr>
<tr><td class="h">3647</td><td><div class="c3">295</div></td><td></td><td></td><td></td><td></td><td><div>898</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;    </td></tr>
<tr><td class="h">3648</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3649</td><td colspan="7"></td></tr><tr><td class="h">3650</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_pi_check_roots</td></tr>
<tr><td class="h">3651</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_pi_check_roots...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">3652</td><td><div class="c3">19</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3652">19</a></div></td><td></td><td><div>101</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $p, $target, $data)= @_;</td></tr>
<tr><td class="h">3653</td><td><div class="c3">19</div></td><td></td><td></td><td></td><td></td><td><div>83</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t= $p-&gt;{twig};</td></tr>
<tr><td class="h">3654</td><td><div class="c3">19</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3654">50</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3654">100</a></div></td><td></td><td></td><td></td><td><div>162</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $pi= $t-&gt;{twig_default_print} ? $t-&gt;{twig_keep_encoding} ? $p-&gt;original_string</td></tr>
<tr><td class="h">3655</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: $p-&gt;recognized_string</td></tr>
<tr><td class="h">3656</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: undef;</td></tr>
<tr><td class="h">3657</td><td><div class="c3">19</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3657">67</a></div></td><td></td><td></td><td><div>472</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $fh= $t-&gt;{twig_output_fh} || select() || \*STDOUT;</td></tr>
<tr><td class="h">3658</td><td colspan="7"></td></tr><tr><td class="h">3659</td><td><div class="c3">19</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3659">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3659">67</a></div></td><td></td><td></td><td><div>283</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $handler=    $t-&gt;{twig_handlers}-&gt;{pi_handlers}-&gt;{$target}</td></tr>
<tr><td class="h">3660</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| $t-&gt;{twig_handlers}-&gt;{pi_handlers}-&gt;{&#39;&#39;}</td></tr>
<tr><td class="h">3661</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">3662</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # if handler is called on pi, then it needs to be processed as a regular node</td></tr>
<tr><td class="h">3663</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @flags= qw( twig_process_pi twig_keep_pi);</td></tr>
<tr><td class="h">3664</td><td><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @save= @{$t}{@flags}; # save pi related flags</td></tr>
<tr><td class="h">3665</td><td><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@{$t}{@flags}= (1, 0);   # override them, pi needs to be processed</td></tr>
<tr><td class="h">3666</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_twig_pi( @_);           # call handler on the pi</td></tr>
<tr><td class="h">3667</td><td><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@{$t}{@flags}= @save;;   # restore flag</td></tr>
<tr><td class="h">3668</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3669</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">3670</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3670">92</a></div></td><td></td><td><div>807</div><div>201</div><div>489</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ no strict &#39;refs&#39;;</td></tr>
<tr><td class="h">3671</td><td><div class="c3">18</div><div class="c3">18</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3671">50</a></div></td><td></td><td></td><td></td><td><div>64</div><div>62</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print  {$fh} $pi if( defined( $pi));</td></tr>
<tr><td class="h">3672</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3673</td><td><div class="c3">19</div></td><td></td><td></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;    </td></tr>
<tr><td class="h">3674</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3675</td><td colspan="7"></td></tr><tr><td class="h">3676</td><td colspan="7"></td></tr><tr><td class="h">3677</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_ignore_start</td></tr>
<tr><td class="h">3678</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_ignore_start...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">3679</td><td colspan="7"></td></tr><tr><td class="h">3680</td><td><div class="c3">48</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3680">48</a></div></td><td></td><td><div>220</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $p, $gi)= @_;</td></tr>
<tr><td class="h">3681</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>173</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t= $p-&gt;{twig};</td></tr>
<tr><td class="h">3682</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>136</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_ignore_level}++;</td></tr>
<tr><td class="h">3683</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>128</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $action= $t-&gt;{twig_ignore_action};</td></tr>
<tr><td class="h">3684</td><td><div class="c3">48</div><div class="c0">0</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3684">50</a></div></td><td></td><td></td><td></td><td><div>192</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $action eq &#39;print&#39; ) { _twig_print_original( @_); }</td></tr>
<tr><td class="h">3685</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#    elsif( $action eq &#39;string&#39; )</td></tr>
<tr><td class="h">3686</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#      { $t-&gt;{twig_buffered_string} .= $p-&gt;original_string(); }</td></tr>
<tr><td class="h">3687</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>96</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;    </td></tr>
<tr><td class="h">3688</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3689</td><td colspan="7"></td></tr><tr><td class="h">3690</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_ignore_end</td></tr>
<tr><td class="h">3691</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;{ # warn &quot; in _twig_ignore_end...\n&quot;; # DEBUG handler</td></tr>
<tr><td class="h">3692</td><td colspan="7"></td></tr><tr><td class="h">3693</td><td><div class="c3">110</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3693">110</a></div></td><td></td><td><div>488</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $p, $gi)= @_;</td></tr>
<tr><td class="h">3694</td><td><div class="c3">110</div></td><td></td><td></td><td></td><td></td><td><div>443</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t= $p-&gt;{twig};</td></tr>
<tr><td class="h">3695</td><td colspan="7"></td></tr><tr><td class="h">3696</td><td><div class="c3">110</div></td><td></td><td></td><td></td><td></td><td><div>303</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $action= $t-&gt;{twig_ignore_action};</td></tr>
<tr><td class="h">3697</td><td colspan="7"></td></tr><tr><td class="h">3698</td><td><div class="c3">110</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3698">50</a></div></td><td></td><td></td><td></td><td><div>392</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $action eq &#39;print&#39;)</td></tr>
<tr><td class="h">3699</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ _twig_print_original( $p, $gi); }</td></tr>
<tr><td class="h">3700</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#    elsif( $action eq &#39;string&#39;)</td></tr>
<tr><td class="h">3701</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#      { $t-&gt;{twig_buffered_string} .= $p-&gt;original_string(); }</td></tr>
<tr><td class="h">3702</td><td colspan="7"></td></tr><tr><td class="h">3703</td><td><div class="c3">110</div></td><td></td><td></td><td></td><td></td><td><div>302</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_ignore_level}--;</td></tr>
<tr><td class="h">3704</td><td colspan="7"></td></tr><tr><td class="h">3705</td><td><div class="c3">110</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3705">100</a></div></td><td></td><td></td><td></td><td><div>389</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( ! $t-&gt;{twig_ignore_level})</td></tr>
<tr><td class="h">3706</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">3707</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>165</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_current}   = $t-&gt;{twig_ignore_elt};</td></tr>
<tr><td class="h">3708</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>282</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_current}-&gt;set_twig_current;</td></tr>
<tr><td class="h">3709</td><td colspan="7"></td></tr><tr><td class="h">3710</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>206</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_ignore_elt}-&gt;cut;  # there could possibly be a memory leak here (delete would avoid it,</td></tr>
<tr><td class="h">3711</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# but could also delete elements that should not be deleted)</td></tr>
<tr><td class="h">3712</td><td colspan="7"></td></tr><tr><td class="h">3713</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# restore the saved stack to the current level</td></tr>
<tr><td class="h">3714</td><td><div class="c3">46</div><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>81</div><div>290</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;splice( @{$t-&gt;{_twig_context_stack}}, $p-&gt;depth+ 1 );</td></tr>
<tr><td class="h">3715</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#warn &quot;stack: &quot;, _dump_stack( $t-&gt;{_twig_context_stack}), &quot;\n&quot;;</td></tr>
<tr><td class="h">3716</td><td colspan="7"></td></tr><tr><td class="h">3717</td><td><div class="c3">46</div><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>811</div><div>292</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$p-&gt;setHandlers( @{$t-&gt;{twig_saved_handlers}});</td></tr>
<tr><td class="h">3718</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# test for handlers</td></tr>
<tr><td class="h">3719</td><td><div class="c3">46</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3719">100</a></div></td><td></td><td></td><td></td><td><div>18899</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_endtag_handlers})</td></tr>
<tr><td class="h">3720</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # look for end tag handlers</td></tr>
<tr><td class="h">3721</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>62</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @handlers= _handler( $t, $t-&gt;{twig_endtag_handlers}, $gi);</td></tr>
<tr><td class="h">3722</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $last_handler_res=1;</td></tr>
<tr><td class="h">3723</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $handler ( @handlers)</td></tr>
<tr><td class="h">3724</td><td><div class="c3">12</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3724">33</a></div></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $last_handler_res= $handler-&gt;($t, $gi) || last; }</td></tr>
<tr><td class="h">3725</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3726</td><td><div class="c3">46</div><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>220</div><div>180</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pop @{$t-&gt;{_twig_context_stack}};</td></tr>
<tr><td class="h">3727</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">3728</td><td><div class="c3">110</div></td><td></td><td></td><td></td><td></td><td><div>304</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;    </td></tr>
<tr><td class="h">3729</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3730</td><td colspan="7"></td></tr><tr><td class="h">3731</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#sub _dump_stack { my( $stack)= @_; return join( &quot;:&quot;, map { $_-&gt;{_tag} } @$stack); }</td></tr>
<tr><td class="h">3732</td><td colspan="7"></td></tr><tr><td class="h">3733</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub ignore</td></tr>
<tr><td class="h">3734</td><td><div class="c3">49</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3734">49</a></div></td><td></td><td><div>207</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $elt)= @_;</td></tr>
<tr><td class="h">3735</td><td><div class="c3">49</div></td><td></td><td></td><td></td><td></td><td><div>173</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $current= $t-&gt;{twig_current};</td></tr>
<tr><td class="h">3736</td><td colspan="7"></td></tr><tr><td class="h">3737</td><td><div class="c3">49</div><div class="c3">19</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3737">100</a></div></td><td><div class="c1"><a href="blib-lib-XML-Twig-pm--condition.html#L3737">75</a></div></td><td></td><td></td><td><div>655</div><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( ! ($elt &amp;&amp; ref( $elt) &amp;&amp; isa( $elt, &#39;XML::Twig::Elt&#39;))) { $elt= $current; }</td></tr>
<tr><td class="h">3738</td><td colspan="7"></td></tr><tr><td class="h">3739</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#warn &quot;ignore:  current = &quot;, $current-&gt;tag, &quot;, elt = &quot;, $elt-&gt;tag, &quot;)\n&quot;;</td></tr>
<tr><td class="h">3740</td><td colspan="7"></td></tr><tr><td class="h">3741</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# we need the ($elt == $current-&gt;{last_child}) test because the current element is set to the</td></tr>
<tr><td class="h">3742</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# parent _before_ handlers are called (and I can&#39;t figure out how to fix this)</td></tr>
<tr><td class="h">3743</td><td><div class="c3">49</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3743">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L3743">100</a></div></td><td></td><td></td><td><div>453</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( ($elt == $current) || ($current-&gt;{last_child} &amp;&amp; ($elt == $current-&gt;{last_child})) || $current-&gt;in( $elt)) </td></tr>
<tr><td class="h">3744</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ _croak( &quot;element to be ignored must be ancestor of current element&quot;); }</td></tr>
<tr><td class="h">3745</td><td colspan="7"></td></tr><tr><td class="h">3746</td><td><div class="c3">47</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3746">100</a></div></td><td></td><td></td><td></td><td><div>257</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_ignore_level}= $current == $elt ? 1 : $t-&gt;_level_in_stack( $current) - $t-&gt;_level_in_stack($elt) + 1;</td></tr>
<tr><td class="h">3747</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#warn &quot;twig_ignore_level:  $t-&gt;{twig_ignore_level} (current: &quot;, $current-&gt;tag, &quot;, elt: &quot;, $elt-&gt;tag, &quot;)\n&quot;;</td></tr>
<tr><td class="h">3748</td><td><div class="c3">47</div></td><td></td><td></td><td></td><td></td><td><div>169</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_ignore_elt}  = $elt;     # save it, so we can delete it later</td></tr>
<tr><td class="h">3749</td><td colspan="7"></td></tr><tr><td class="h">3750</td><td><div class="c3">47</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3750">50</a></div></td><td></td><td></td><td><div>143</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $action= shift || 1; </td></tr>
<tr><td class="h">3751</td><td><div class="c3">47</div></td><td></td><td></td><td></td><td></td><td><div>274</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_ignore_action}= $action;</td></tr>
<tr><td class="h">3752</td><td colspan="7"></td></tr><tr><td class="h">3753</td><td><div class="c3">47</div></td><td></td><td></td><td></td><td></td><td><div>144</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $p= $t-&gt;{twig_parser};</td></tr>
<tr><td class="h">3754</td><td><div class="c3">47</div></td><td></td><td></td><td></td><td></td><td><div>731</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @saved_handlers= $p-&gt;setHandlers( %twig_handlers_ignore); # set handlers</td></tr>
<tr><td class="h">3755</td><td><div class="c3">47</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3755">50</a></div></td><td></td><td></td><td></td><td><div>18970</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $action eq &#39;print&#39;)</td></tr>
<tr><td class="h">3756</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $p-&gt;setHandlers( Default =&gt; \&amp;_twig_print_original); }</td></tr>
<tr><td class="h">3757</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#    elsif( $action eq &#39;string&#39;)</td></tr>
<tr><td class="h">3758</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#      { # not used at the moment</td></tr>
<tr><td class="h">3759</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#        $t-&gt;{twig_buffered_string}=&#39;&#39;;</td></tr>
<tr><td class="h">3760</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#        $p-&gt;setHandlers( Default =&gt; \&amp;twig_buffer_original);</td></tr>
<tr><td class="h">3761</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#      }</td></tr>
<tr><td class="h">3762</td><td colspan="7"></td></tr><tr><td class="h">3763</td><td><div class="c3">47</div></td><td></td><td></td><td></td><td></td><td><div>472</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_saved_handlers}= \@saved_handlers;        # save current handlers</td></tr>
<tr><td class="h">3764</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3765</td><td colspan="7"></td></tr><tr><td class="h">3766</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _level_in_stack</td></tr>
<tr><td class="h">3767</td><td><div class="c3">30</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3767">30</a></div></td><td></td><td><div>98</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $elt)= @_;</td></tr>
<tr><td class="h">3768</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>66</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $level=1;</td></tr>
<tr><td class="h">3769</td><td><div class="c3">30</div><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>53</div><div>155</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $elt_in_stack ( @{$t-&gt;{_twig_context_stack}} )</td></tr>
<tr><td class="h">3770</td><td><div class="c3">83</div><div class="c3">30</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3770">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3770">67</a></div></td><td></td><td></td><td><div>701</div><div>175</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $elt_in_stack-&gt;{_elt} &amp;&amp; ($elt == $elt_in_stack-&gt;{_elt})) { return $level }</td></tr>
<tr><td class="h">3771</td><td><div class="c3">53</div></td><td></td><td></td><td></td><td></td><td><div>126</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$level++;</td></tr>
<tr><td class="h">3772</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3773</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3774</td><td colspan="7"></td></tr><tr><td class="h">3775</td><td colspan="7"></td></tr><tr><td class="h">3776</td><td colspan="7"></td></tr><tr><td class="h">3777</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># select $t-&gt;{twig_output_fh} and store the current selected fh </td></tr>
<tr><td class="h">3778</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _set_fh_to_twig_output_fh</td></tr>
<tr><td class="h">3779</td><td><div class="c3">2805</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3779">2805</a></div></td><td></td><td><div>7283</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">3780</td><td><div class="c3">2805</div></td><td></td><td></td><td></td><td></td><td><div>8402</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $output_fh= $t-&gt;{twig_output_fh};</td></tr>
<tr><td class="h">3781</td><td><div class="c3">2805</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3781">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L3781">100</a></div></td><td></td><td></td><td><div>13789</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $output_fh &amp;&amp; !$t-&gt;{twig_output_fh_selected})</td></tr>
<tr><td class="h">3782</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # there is an output fh</td></tr>
<tr><td class="h">3783</td><td><div class="c3">31</div></td><td></td><td></td><td></td><td></td><td><div>255</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_selected_fh}= select(); # store the currently selected fh</td></tr>
<tr><td class="h">3784</td><td><div class="c3">31</div></td><td></td><td></td><td></td><td></td><td><div>109</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_output_fh_selected}=1;</td></tr>
<tr><td class="h">3785</td><td><div class="c3">31</div></td><td></td><td></td><td></td><td></td><td><div>221</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select $output_fh;                # select the output fh for the twig</td></tr>
<tr><td class="h">3786</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3787</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3788</td><td colspan="7"></td></tr><tr><td class="h">3789</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># select the fh that was stored in $t-&gt;{twig_selected_fh} </td></tr>
<tr><td class="h">3790</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># (before $t-&gt;{twig_output_fh} was selected)</td></tr>
<tr><td class="h">3791</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _set_fh_to_selected_fh</td></tr>
<tr><td class="h">3792</td><td><div class="c3">2767</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3792">2767</a></div></td><td></td><td><div>6819</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">3793</td><td><div class="c3">2767</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3793">100</a></div></td><td></td><td></td><td></td><td><div>12188</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return unless( $t-&gt;{twig_output_fh});</td></tr>
<tr><td class="h">3794</td><td><div class="c3">31</div></td><td></td><td></td><td></td><td></td><td><div>101</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $selected_fh= $t-&gt;{twig_selected_fh};</td></tr>
<tr><td class="h">3795</td><td><div class="c3">31</div></td><td></td><td></td><td></td><td></td><td><div>89</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_output_fh_selected}=0;</td></tr>
<tr><td class="h">3796</td><td><div class="c3">31</div></td><td></td><td></td><td></td><td></td><td><div>225</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;select $selected_fh;</td></tr>
<tr><td class="h">3797</td><td><div class="c3">31</div></td><td></td><td></td><td></td><td></td><td><div>74</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">3798</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3799</td><td colspan="7"></td></tr><tr><td class="h">3800</td><td colspan="7"></td></tr><tr><td class="h">3801</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub encoding</td></tr>
<tr><td class="h">3802</td><td><div class="c3">5</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3802">50</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3802">5</a></div></td><td></td><td><div>63</div></td><td class="s">&nbsp;&nbsp;{ return $_[0]-&gt;{twig_xmldecl}-&gt;{encoding} if( $_[0]-&gt;{twig_xmldecl}); }</td></tr>
<tr><td class="h">3803</td><td colspan="7"></td></tr><tr><td class="h">3804</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_encoding</td></tr>
<tr><td class="h">3805</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3805">4</a></div></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $encoding)= @_;</td></tr>
<tr><td class="h">3806</td><td><div class="c3">4</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3806">50</a></div></td><td></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_xmldecl} ||={};</td></tr>
<tr><td class="h">3807</td><td><div class="c3">4</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3807">50</a></div></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;set_xml_version( &quot;1.0&quot;) unless( $t-&gt;xml_version);</td></tr>
<tr><td class="h">3808</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_xmldecl}-&gt;{encoding}= $encoding;</td></tr>
<tr><td class="h">3809</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t;</td></tr>
<tr><td class="h">3810</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3811</td><td colspan="7"></td></tr><tr><td class="h">3812</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub output_encoding</td></tr>
<tr><td class="h">3813</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3813">2</a></div></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;{ return $_[0]-&gt;{output_encoding}; }</td></tr>
<tr><td class="h">3814</td><td colspan="7"></td></tr><tr><td class="h">3815</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_output_encoding</td></tr>
<tr><td class="h">3816</td><td><div class="c3">18</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3816">18</a></div></td><td></td><td><div>120</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $encoding)= @_;</td></tr>
<tr><td class="h">3817</td><td><div class="c3">18</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L3817">100</a></div></td><td></td><td></td><td><div>75</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $output_filter= $t-&gt;output_filter || &#39;&#39;;</td></tr>
<tr><td class="h">3818</td><td colspan="7"></td></tr><tr><td class="h">3819</td><td><div class="c3">18</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3819">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3819">71</a></div></td><td></td><td></td><td><div>364</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( ($encoding &amp;&amp; $encoding !~ m{^utf-?8$}i) || $t-&gt;{twig_keep_encoding} || $output_filter)</td></tr>
<tr><td class="h">3820</td><td><div class="c3">16</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L3820">100</a></div></td><td></td><td></td><td><div>92</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $t-&gt;set_output_filter( _encoding_filter( $encoding || &#39;&#39;)); }</td></tr>
<tr><td class="h">3821</td><td colspan="7"></td></tr><tr><td class="h">3822</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>81</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{output_encoding}= $encoding;</td></tr>
<tr><td class="h">3823</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>76</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t;</td></tr>
<tr><td class="h">3824</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3825</td><td colspan="7"></td></tr><tr><td class="h">3826</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub xml_version</td></tr>
<tr><td class="h">3827</td><td><div class="c3">7</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3827">50</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3827">7</a></div></td><td></td><td><div>86</div></td><td class="s">&nbsp;&nbsp;{ return $_[0]-&gt;{twig_xmldecl}-&gt;{version} if( $_[0]-&gt;{twig_xmldecl}); }</td></tr>
<tr><td class="h">3828</td><td colspan="7"></td></tr><tr><td class="h">3829</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_xml_version</td></tr>
<tr><td class="h">3830</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3830">1</a></div></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $version)= @_;</td></tr>
<tr><td class="h">3831</td><td><div class="c3">1</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3831">50</a></div></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_xmldecl} ||={};</td></tr>
<tr><td class="h">3832</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_xmldecl}-&gt;{version}= $version;</td></tr>
<tr><td class="h">3833</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t;</td></tr>
<tr><td class="h">3834</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3835</td><td colspan="7"></td></tr><tr><td class="h">3836</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub standalone</td></tr>
<tr><td class="h">3837</td><td><div class="c3">2</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3837">50</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3837">2</a></div></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;{ return $_[0]-&gt;{twig_xmldecl}-&gt;{standalone} if( $_[0]-&gt;{twig_xmldecl}); }</td></tr>
<tr><td class="h">3838</td><td colspan="7"></td></tr><tr><td class="h">3839</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_standalone</td></tr>
<tr><td class="h">3840</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3840">1</a></div></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $standalone)= @_;</td></tr>
<tr><td class="h">3841</td><td><div class="c3">1</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3841">50</a></div></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_xmldecl} ||={};</td></tr>
<tr><td class="h">3842</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3842">50</a></div></td><td></td><td></td><td></td><td><div>80</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;set_xml_version( &quot;1.0&quot;) unless( $t-&gt;xml_version);</td></tr>
<tr><td class="h">3843</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_xmldecl}-&gt;{standalone}= $standalone;</td></tr>
<tr><td class="h">3844</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $t;</td></tr>
<tr><td class="h">3845</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3846</td><td colspan="7"></td></tr><tr><td class="h">3847</td><td colspan="7"></td></tr><tr><td class="h">3848</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># SAX methods</td></tr>
<tr><td class="h">3849</td><td colspan="7"></td></tr><tr><td class="h">3850</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub toSAX1</td></tr>
<tr><td class="h">3851</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3851">100</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3851">2</a></div></td><td></td><td><div>36</div></td><td class="s">&nbsp;&nbsp;{ _croak( &quot;cannot use toSAX1 while parsing (use flush_toSAX1)&quot;) if (defined $_[0]-&gt;{twig_parser});</td></tr>
<tr><td class="h">3852</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;shift(@_)-&gt;_toSAX(@_, \&amp;XML::Twig::Elt::_start_tag_data_SAX1,</td></tr>
<tr><td class="h">3853</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\&amp;XML::Twig::Elt::_end_tag_data_SAX1</td></tr>
<tr><td class="h">3854</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;); </td></tr>
<tr><td class="h">3855</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3856</td><td colspan="7"></td></tr><tr><td class="h">3857</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub toSAX2</td></tr>
<tr><td class="h">3858</td><td><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3858">100</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3858">5</a></div></td><td></td><td><div>156</div></td><td class="s">&nbsp;&nbsp;{ _croak( &quot;cannot use toSAX2 while parsing (use flush_toSAX2)&quot;) if (defined $_[0]-&gt;{twig_parser});</td></tr>
<tr><td class="h">3859</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;shift(@_)-&gt;_toSAX(@_, \&amp;XML::Twig::Elt::_start_tag_data_SAX2,</td></tr>
<tr><td class="h">3860</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\&amp;XML::Twig::Elt::_end_tag_data_SAX2</td></tr>
<tr><td class="h">3861</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;); </td></tr>
<tr><td class="h">3862</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3863</td><td colspan="7"></td></tr><tr><td class="h">3864</td><td colspan="7"></td></tr><tr><td class="h">3865</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _toSAX</td></tr>
<tr><td class="h">3866</td><td><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3866">5</a></div></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $handler, $start_tag_data, $end_tag_data) = @_;</td></tr>
<tr><td class="h">3867</td><td colspan="7"></td></tr><tr><td class="h">3868</td><td><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3868">100</a></div></td><td></td><td></td><td></td><td><div>70</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $start_document =  $handler-&gt;can( &#39;start_document&#39;))</td></tr>
<tr><td class="h">3869</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $start_document-&gt;( $handler); }</td></tr>
<tr><td class="h">3870</td><td colspan="7"></td></tr><tr><td class="h">3871</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;_prolog_toSAX( $handler);</td></tr>
<tr><td class="h">3872</td><td colspan="7"></td></tr><tr><td class="h">3873</td><td><div class="c3">5</div><div class="c3">5</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3873">50</a></div></td><td></td><td></td><td></td><td><div>22</div><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;root) { $t-&gt;root-&gt;_toSAX( $handler, $start_tag_data, $end_tag_data) ; }</td></tr>
<tr><td class="h">3874</td><td><div class="c3">5</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3874">50</a></div></td><td></td><td></td><td></td><td><div>73</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $end_document =  $handler-&gt;can( &#39;end_document&#39;))</td></tr>
<tr><td class="h">3875</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $end_document-&gt;( $handler); }</td></tr>
<tr><td class="h">3876</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3877</td><td colspan="7"></td></tr><tr><td class="h">3878</td><td colspan="7"></td></tr><tr><td class="h">3879</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub flush_toSAX1</td></tr>
<tr><td class="h">3880</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3880">3</a></div></td><td></td><td><div>59</div></td><td class="s">&nbsp;&nbsp;{ shift(@_)-&gt;_flush_toSAX(@_, \&amp;XML::Twig::Elt::_start_tag_data_SAX1,</td></tr>
<tr><td class="h">3881</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\&amp;XML::Twig::Elt::_end_tag_data_SAX1</td></tr>
<tr><td class="h">3882</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;); </td></tr>
<tr><td class="h">3883</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3884</td><td colspan="7"></td></tr><tr><td class="h">3885</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub flush_toSAX2</td></tr>
<tr><td class="h">3886</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3886">3</a></div></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;{ shift(@_)-&gt;_flush_toSAX(@_, \&amp;XML::Twig::Elt::_start_tag_data_SAX2,</td></tr>
<tr><td class="h">3887</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\&amp;XML::Twig::Elt::_end_tag_data_SAX2</td></tr>
<tr><td class="h">3888</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;); </td></tr>
<tr><td class="h">3889</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3890</td><td colspan="7"></td></tr><tr><td class="h">3891</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _flush_toSAX</td></tr>
<tr><td class="h">3892</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3892">6</a></div></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $handler, $start_tag_data, $end_tag_data)= @_;</td></tr>
<tr><td class="h">3893</td><td colspan="7"></td></tr><tr><td class="h">3894</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# the &quot;real&quot; last element processed, as _twig_end has closed it</td></tr>
<tr><td class="h">3895</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $last_elt;</td></tr>
<tr><td class="h">3896</td><td><div class="c3">6</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3896">100</a></div></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_current})</td></tr>
<tr><td class="h">3897</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $last_elt= $t-&gt;{twig_current}-&gt;_last_child; }</td></tr>
<tr><td class="h">3898</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">3899</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $last_elt= $t-&gt;{twig_root}; }</td></tr>
<tr><td class="h">3900</td><td colspan="7"></td></tr><tr><td class="h">3901</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $elt= $t-&gt;{twig_root};</td></tr>
<tr><td class="h">3902</td><td><div class="c3">6</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3902">100</a></div></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( $elt-&gt;_flushed)</td></tr>
<tr><td class="h">3903</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # init unless already done (ie root has been flushed)</td></tr>
<tr><td class="h">3904</td><td><div class="c3">2</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3904">50</a></div></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $start_document =  $handler-&gt;can( &#39;start_document&#39;))</td></tr>
<tr><td class="h">3905</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $start_document-&gt;( $handler); }</td></tr>
<tr><td class="h">3906</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# flush the DTD</td></tr>
<tr><td class="h">3907</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;_prolog_toSAX( $handler) </td></tr>
<tr><td class="h">3908</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3909</td><td colspan="7"></td></tr><tr><td class="h">3910</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $elt)</td></tr>
<tr><td class="h">3911</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>151</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $next_elt; </td></tr>
<tr><td class="h">3912</td><td><div class="c3">18</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3912">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3912">67</a></div></td><td></td><td></td><td><div>107</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $last_elt &amp;&amp; $last_elt-&gt;in( $elt))</td></tr>
<tr><td class="h">3913</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">3914</td><td><div class="c3">6</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3914">100</a></div></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( $elt-&gt;_flushed) </td></tr>
<tr><td class="h">3915</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # just output the front tag</td></tr>
<tr><td class="h">3916</td><td><div class="c3">4</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3916">50</a></div></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $start_element = $handler-&gt;can( &#39;start_element&#39;))</td></tr>
<tr><td class="h">3917</td><td><div class="c3">4</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3917">50</a></div></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( my $tag_data= $start_tag_data-&gt;( $elt))</td></tr>
<tr><td class="h">3918</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $start_element-&gt;( $handler, $tag_data); }</td></tr>
<tr><td class="h">3919</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3920</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;_set_flushed;</td></tr>
<tr><td class="h">3921</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3922</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$next_elt= $elt-&gt;{first_child};</td></tr>
<tr><td class="h">3923</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3924</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">3925</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # an element before the last one or the last one,</td></tr>
<tr><td class="h">3926</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$next_elt= $elt-&gt;{next_sibling};  </td></tr>
<tr><td class="h">3927</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;_toSAX( $handler, $start_tag_data, $end_tag_data);</td></tr>
<tr><td class="h">3928</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;delete; </td></tr>
<tr><td class="h">3929</td><td><div class="c3">12</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3929">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3929">67</a></div></td><td></td><td></td><td><div>103</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last if( $last_elt &amp;&amp; ($elt == $last_elt));</td></tr>
<tr><td class="h">3930</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3931</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt= $next_elt;</td></tr>
<tr><td class="h">3932</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3933</td><td><div class="c3">6</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3933">100</a></div></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !$t-&gt;{twig_parsing}) </td></tr>
<tr><td class="h">3934</td><td><div class="c3">2</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3934">50</a></div></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( my $end_document =  $handler-&gt;can( &#39;end_document&#39;))</td></tr>
<tr><td class="h">3935</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $end_document-&gt;( $handler); }</td></tr>
<tr><td class="h">3936</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3937</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3938</td><td colspan="7"></td></tr><tr><td class="h">3939</td><td colspan="7"></td></tr><tr><td class="h">3940</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _prolog_toSAX</td></tr>
<tr><td class="h">3941</td><td><div class="c3">7</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3941">7</a></div></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $handler)= @_;</td></tr>
<tr><td class="h">3942</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;_xmldecl_toSAX( $handler);</td></tr>
<tr><td class="h">3943</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;_DTD_toSAX( $handler);</td></tr>
<tr><td class="h">3944</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3945</td><td colspan="7"></td></tr><tr><td class="h">3946</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _xmldecl_toSAX</td></tr>
<tr><td class="h">3947</td><td><div class="c3">7</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3947">7</a></div></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $handler)= @_;</td></tr>
<tr><td class="h">3948</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $decl= $t-&gt;{twig_xmldecl};</td></tr>
<tr><td class="h">3949</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>75</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $data= { Version    =&gt; $decl-&gt;{version},</td></tr>
<tr><td class="h">3950</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Encoding   =&gt; $decl-&gt;{encoding},</td></tr>
<tr><td class="h">3951</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Standalone =&gt; $decl-&gt;{standalone},</td></tr>
<tr><td class="h">3952</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">3953</td><td><div class="c3">7</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3953">100</a></div></td><td></td><td></td><td></td><td><div>73</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $xml_decl= $handler-&gt;can( &#39;xml_decl&#39;))</td></tr>
<tr><td class="h">3954</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $xml_decl-&gt;( $handler, $data); }</td></tr>
<tr><td class="h">3955</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3956</td><td colspan="7"></td></tr><tr><td class="h">3957</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _DTD_toSAX</td></tr>
<tr><td class="h">3958</td><td><div class="c3">7</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3958">7</a></div></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;{ my( $t, $handler)= @_;</td></tr>
<tr><td class="h">3959</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $doctype= $t-&gt;{twig_doctype};</td></tr>
<tr><td class="h">3960</td><td><div class="c3">7</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L3960">100</a></div></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return unless( $doctype);</td></tr>
<tr><td class="h">3961</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $data= { Name     =&gt; $doctype-&gt;{name},</td></tr>
<tr><td class="h">3962</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PublicId =&gt; $doctype-&gt;{pub},</td></tr>
<tr><td class="h">3963</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SystemId =&gt; $doctype-&gt;{sysid},</td></tr>
<tr><td class="h">3964</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">3965</td><td colspan="7"></td></tr><tr><td class="h">3966</td><td><div class="c3">2</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3966">50</a></div></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $start_dtd= $handler-&gt;can( &#39;start_dtd&#39;))</td></tr>
<tr><td class="h">3967</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $start_dtd-&gt;( $handler, $data); }</td></tr>
<tr><td class="h">3968</td><td colspan="7"></td></tr><tr><td class="h">3969</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# I should call code to export the internal subset here </td></tr>
<tr><td class="h">3970</td><td colspan="7"></td></tr><tr><td class="h">3971</td><td><div class="c3">2</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3971">50</a></div></td><td></td><td></td><td></td><td><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $end_dtd= $handler-&gt;can( &#39;end_dtd&#39;))</td></tr>
<tr><td class="h">3972</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $end_dtd-&gt;( $handler); }</td></tr>
<tr><td class="h">3973</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3974</td><td colspan="7"></td></tr><tr><td class="h">3975</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># input/output filters</td></tr>
<tr><td class="h">3976</td><td colspan="7"></td></tr><tr><td class="h">3977</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub latin1 </td></tr>
<tr><td class="h">3978</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3978">2</a></div></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;{ local $SIG{__DIE__};</td></tr>
<tr><td class="h">3979</td><td><div class="c3">2</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3979">50</a></div><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3979">0</a></div><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3979">0</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3979">0</a></div></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( _use(  &#39;Encode&#39;))</td></tr>
<tr><td class="h">3980</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return encode_convert( &#39;ISO-8859-15&#39;); }</td></tr>
<tr><td class="h">3981</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( _use( &#39;Text::Iconv&#39;))</td></tr>
<tr><td class="h">3982</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return iconv_convert( &#39;ISO-8859-15&#39;); }</td></tr>
<tr><td class="h">3983</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( _use( &#39;Unicode::Map8&#39;) &amp;&amp; _use( &#39;Unicode::String&#39;))</td></tr>
<tr><td class="h">3984</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return unicode_convert( &#39;ISO-8859-15&#39;); }</td></tr>
<tr><td class="h">3985</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">3986</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return \&amp;regexp2latin1; }</td></tr>
<tr><td class="h">3987</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3988</td><td colspan="7"></td></tr><tr><td class="h">3989</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _encoding_filter</td></tr>
<tr><td class="h">3990</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">3991</td><td><div class="c3">16</div><div class="c3">16</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L3991">16</a></div></td><td></td><td><div>31</div><div>202</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ local $SIG{__DIE__};</td></tr>
<tr><td class="h">3992</td><td><div class="c3">16</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3992">67</a></div></td><td></td><td></td><td><div>145</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $encoding= $_[1] || $_[0];</td></tr>
<tr><td class="h">3993</td><td><div class="c3">16</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3993">50</a></div><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3993">0</a></div><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L3993">0</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L3993">0</a></div></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( _use( &#39;Encode&#39;))</td></tr>
<tr><td class="h">3994</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $sub= encode_convert( $encoding);</td></tr>
<tr><td class="h">3995</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>119</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $sub;</td></tr>
<tr><td class="h">3996</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">3997</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( _use( &#39;Text::Iconv&#39;))</td></tr>
<tr><td class="h">3998</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return iconv_convert( $encoding); }</td></tr>
<tr><td class="h">3999</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( _use( &#39;Unicode::Map8&#39;) &amp;&amp; _use( &#39;Unicode::String&#39;))</td></tr>
<tr><td class="h">4000</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return unicode_convert( $encoding); }</td></tr>
<tr><td class="h">4001</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4002</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_croak( &quot;Encode, Text::Iconv or Unicode::Map8 and Unicode::String need to be installed in order to use encoding options&quot;);</td></tr>
<tr><td class="h">4003</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4004</td><td colspan="7"></td></tr><tr><td class="h">4005</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># shamelessly lifted from XML::TyePYX (works only with XML::Parse 2.27)</td></tr>
<tr><td class="h">4006</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub regexp2latin1</td></tr>
<tr><td class="h">4007</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4007">1</a></div></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;{ my $text=shift;</td></tr>
<tr><td class="h">4008</td><td><div class="c3">1</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>6</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$text=~s{([\xc0-\xc3])(.)}{ my $hi = ord($1);</td></tr>
<tr><td class="h">4009</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $lo = ord($2);</td></tr>
<tr><td class="h">4010</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chr((($hi &amp; 0x03) &lt;&lt;6) | ($lo &amp; 0x3F))</td></tr>
<tr><td class="h">4011</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}ge;</td></tr>
<tr><td class="h">4012</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $text;</td></tr>
<tr><td class="h">4013</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4014</td><td colspan="7"></td></tr><tr><td class="h">4015</td><td colspan="7"></td></tr><tr><td class="h">4016</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub html_encode</td></tr>
<tr><td class="h">4017</td><td><div class="c3">5</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4017">50</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4017">5</a></div></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;{ _use( &#39;HTML::Entities&#39;) or croak &quot;cannot use html_encode: missing HTML::Entities&quot;;</td></tr>
<tr><td class="h">4018</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return HTML::Entities::encode_entities($_[0] );</td></tr>
<tr><td class="h">4019</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4020</td><td colspan="7"></td></tr><tr><td class="h">4021</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub safe_encode</td></tr>
<tr><td class="h">4022</td><td><div class="c3">19</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4022">19</a></div></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;{   my $str= shift;</td></tr>
<tr><td class="h">4023</td><td><div class="c3">19</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4023">50</a></div></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $] &lt; 5.008)</td></tr>
<tr><td class="h">4024</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # the no utf8 makes the regexp work in 5.6</td></tr>
<tr><td class="h">4025</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str =~ s{([\xC0-\xDF].|[\xE0-\xEF]..|[\xF0-\xFF]...)}</td></tr>
<tr><td class="h">4026</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{_XmlUtf8Decode($1)}egs; </td></tr>
<tr><td class="h">4027</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4028</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">4029</td><td><div class="c3">19</div></td><td></td><td></td><td></td><td></td><td><div>70</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $str= encode( ascii =&gt; $str, $FB_HTMLCREF); }</td></tr>
<tr><td class="h">4030</td><td><div class="c3">19</div></td><td></td><td></td><td></td><td></td><td><div>1256</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $str;</td></tr>
<tr><td class="h">4031</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4032</td><td colspan="7"></td></tr><tr><td class="h">4033</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub safe_encode_hex</td></tr>
<tr><td class="h">4034</td><td><div class="c3">19</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4034">19</a></div></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;{   my $str= shift;</td></tr>
<tr><td class="h">4035</td><td><div class="c3">19</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4035">50</a></div></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $] &lt; 5.008)</td></tr>
<tr><td class="h">4036</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # the no utf8 makes the regexp work in 5.6</td></tr>
<tr><td class="h">4037</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str =~ s{([\xC0-\xDF].|[\xE0-\xEF]..|[\xF0-\xFF]...)}</td></tr>
<tr><td class="h">4038</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{_XmlUtf8Decode($1, 1)}egs; </td></tr>
<tr><td class="h">4039</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4040</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">4041</td><td><div class="c3">19</div></td><td></td><td></td><td></td><td></td><td><div>71</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $str= encode( ascii =&gt; $str, $FB_XMLCREF); }</td></tr>
<tr><td class="h">4042</td><td><div class="c3">19</div></td><td></td><td></td><td></td><td></td><td><div>1223</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $str;</td></tr>
<tr><td class="h">4043</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4044</td><td colspan="7"></td></tr><tr><td class="h">4045</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># this one shamelessly lifted from XML::DOM</td></tr>
<tr><td class="h">4046</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># does NOT work on 5.8.0</td></tr>
<tr><td class="h">4047</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _XmlUtf8Decode</td></tr>
<tr><td class="h">4048</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4048">4</a></div></td><td></td><td><div>56</div></td><td class="s">&nbsp;&nbsp;{ my ($str, $hex) = @_;</td></tr>
<tr><td class="h">4049</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $len = length ($str);</td></tr>
<tr><td class="h">4050</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $n;</td></tr>
<tr><td class="h">4051</td><td colspan="7"></td></tr><tr><td class="h">4052</td><td><div class="c3">4</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L4052">50</a></div><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L4052">0</a></div><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L4052">0</a></div><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L4052">0</a></div></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($len == 2)</td></tr>
<tr><td class="h">4053</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my @n = unpack &quot;C2&quot;, $str;</td></tr>
<tr><td class="h">4054</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$n = (($n[0] &amp; 0x3f) &lt;&lt; 6) + ($n[1] &amp; 0x3f);</td></tr>
<tr><td class="h">4055</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4056</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif ($len == 3)</td></tr>
<tr><td class="h">4057</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my @n = unpack &quot;C3&quot;, $str;</td></tr>
<tr><td class="h">4058</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$n = (($n[0] &amp; 0x1f) &lt;&lt; 12) + (($n[1] &amp; 0x3f) &lt;&lt; 6) + ($n[2] &amp; 0x3f);</td></tr>
<tr><td class="h">4059</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4060</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif ($len == 4)</td></tr>
<tr><td class="h">4061</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my @n = unpack &quot;C4&quot;, $str;</td></tr>
<tr><td class="h">4062</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$n = (($n[0] &amp; 0x0f) &lt;&lt; 18) + (($n[1] &amp; 0x3f) &lt;&lt; 12) </td></tr>
<tr><td class="h">4063</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ (($n[2] &amp; 0x3f) &lt;&lt; 6) + ($n[3] &amp; 0x3f);</td></tr>
<tr><td class="h">4064</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4065</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif ($len == 1)    # just to be complete...</td></tr>
<tr><td class="h">4066</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $n = ord ($str); }</td></tr>
<tr><td class="h">4067</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">4068</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;bad value [$str] for _XmlUtf8Decode&quot;; }</td></tr>
<tr><td class="h">4069</td><td colspan="7"></td></tr><tr><td class="h">4070</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4070">100</a></div></td><td></td><td></td><td></td><td><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $char= $hex ? sprintf (&quot;&amp;#x%x;&quot;, $n) : &quot;&amp;#$n;&quot;;</td></tr>
<tr><td class="h">4071</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $char;</td></tr>
<tr><td class="h">4072</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4073</td><td colspan="7"></td></tr><tr><td class="h">4074</td><td colspan="7"></td></tr><tr><td class="h">4075</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub unicode_convert</td></tr>
<tr><td class="h">4076</td><td><div class="c3">1</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L4076">50</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4076">1</a></div></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;{ my $enc= $_[1] ? $_[1] : $_[0]; # so the method can be called on the twig or directly</td></tr>
<tr><td class="h">4077</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4077">50</a></div></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_use( &#39;Unicode::Map8&#39;) or croak &quot;Unicode::Map8 not available, needed for encoding filter: $!&quot;;</td></tr>
<tr><td class="h">4078</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4078">50</a></div></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_use( &#39;Unicode::String&#39;) or croak &quot;Unicode::String not available, needed for encoding filter: $!&quot;;</td></tr>
<tr><td class="h">4079</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;import Unicode::String qw(utf8);</td></tr>
<tr><td class="h">4080</td><td><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4080">50</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4080">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4080">1</a></div></td><td></td><td><div>3</div><div>5</div><div>8</div><div>1</div><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $sub= eval qq{ { $NO_WARNINGS;</td></tr>
<tr><td class="h">4081</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my \$cnv;</td></tr>
<tr><td class="h">4082</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BEGIN {  \$cnv= Unicode::Map8-&gt;new(\$enc) </td></tr>
<tr><td class="h">4083</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or croak &quot;Can&#39;t create converter to \$enc&quot;;</td></tr>
<tr><td class="h">4084</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4085</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sub { return  \$cnv-&gt;to8 (utf8(\$_[0])-&gt;ucs2); } </td></tr>
<tr><td class="h">4086</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} </td></tr>
<tr><td class="h">4087</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">4088</td><td><div class="c3">1</div><div class="c0">0</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4088">50</a></div></td><td></td><td></td><td></td><td><div>6</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( $sub) { croak $@; }</td></tr>
<tr><td class="h">4089</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $sub;</td></tr>
<tr><td class="h">4090</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4091</td><td colspan="7"></td></tr><tr><td class="h">4092</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub iconv_convert</td></tr>
<tr><td class="h">4093</td><td><div class="c3">4</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L4093">50</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4093">4</a></div></td><td></td><td><div>58</div></td><td class="s">&nbsp;&nbsp;{ my $enc= $_[1] ? $_[1] : $_[0]; # so the method can be called on the twig or directly</td></tr>
<tr><td class="h">4094</td><td><div class="c3">4</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4094">50</a></div></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;_use( &#39;Text::Iconv&#39;) or croak &quot;Text::Iconv not available, needed for encoding filter: $!&quot;;</td></tr>
<tr><td class="h">4095</td><td><div class="c3">4</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4095">50</a></div><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4095">50</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4095">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4095">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4095">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4095">1</a></div></td><td></td><td><div>9</div><div>9</div><div>2</div><div>12</div><div>8</div><div>3</div><div>6</div><div>7</div><div>2</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $sub= eval qq{ { $NO_WARNINGS;</td></tr>
<tr><td class="h">4096</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my \$cnv;</td></tr>
<tr><td class="h">4097</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BEGIN { \$cnv = Text::Iconv-&gt;new( &#39;utf8&#39;, \$enc) </td></tr>
<tr><td class="h">4098</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or croak &quot;Can&#39;t create iconv converter to \$enc&quot;;</td></tr>
<tr><td class="h">4099</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4100</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sub { return  \$cnv-&gt;convert( \$_[0]); } </td></tr>
<tr><td class="h">4101</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}       </td></tr>
<tr><td class="h">4102</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">4103</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4103">100</a></div></td><td></td><td></td><td></td><td><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( $sub)</td></tr>
<tr><td class="h">4104</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4104">50</a></div></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $@=~ m{^Unsupported conversion: Invalid argument})</td></tr>
<tr><td class="h">4105</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;Unsupported encoding: $enc&quot;; }</td></tr>
<tr><td class="h">4106</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">4107</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak $@; }</td></tr>
<tr><td class="h">4108</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4109</td><td colspan="7"></td></tr><tr><td class="h">4110</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $sub;</td></tr>
<tr><td class="h">4111</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4112</td><td colspan="7"></td></tr><tr><td class="h">4113</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub encode_convert</td></tr>
<tr><td class="h">4114</td><td><div class="c3">18</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4114">50</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4114">18</a></div></td><td></td><td><div>64</div></td><td class="s">&nbsp;&nbsp;{ my $enc= $_[1] ? $_[1] : $_[0]; # so the method can be called on the twig or directly</td></tr>
<tr><td class="h">4115</td><td><div class="c3">18</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4115">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4115">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4115">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4115">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4115">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4115">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4115">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4115">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4115">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4115">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4115">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4115">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4115">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4115">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4115">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4115">1</a></div></td><td></td><td><div>36</div><div>8</div><div>2</div><div>6</div><div>9</div><div>2</div><div>6</div><div>8</div><div>2</div><div>6</div><div>10</div><div>2</div><div>8</div><div>7</div><div>2</div><div>6</div><div>7</div><div>10</div><div>7</div><div>8</div><div>2</div><div>5</div><div>7</div><div>2</div><div>5</div><div>9</div><div>2</div><div>6</div><div>8</div><div>2</div><div>7</div><div>6</div><div>10</div><div>2</div><div>8</div><div>6</div><div>3</div><div>8</div><div>2</div><div>6</div><div>7</div><div>3</div><div>5</div><div>8</div><div>2</div><div>6</div><div>8</div><div>1</div><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $sub=  eval qq{sub { $NO_WARNINGS; return encode( &quot;$enc&quot;, \$_[0]); } };</td></tr>
<tr><td class="h">4116</td><td><div class="c3">18</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4116">50</a></div></td><td></td><td></td><td></td><td><div>82</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;croak &quot;can&#39;t create Encode-based filter: $@&quot; unless( $sub);</td></tr>
<tr><td class="h">4117</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>72</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $sub;</td></tr>
<tr><td class="h">4118</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4119</td><td colspan="7"></td></tr><tr><td class="h">4120</td><td colspan="7"></td></tr><tr><td class="h">4121</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># XML::XPath compatibility</td></tr>
<tr><td class="h">4122</td><td><div class="c3">122</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4122">122</a></div></td><td></td><td><div>309599</div></td><td class="s">sub getRootNode        { return $_[0]; }</td></tr>
<tr><td class="h">4123</td><td><div class="c3">17</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4123">17</a></div></td><td></td><td><div>372</div></td><td class="s">sub getParentNode      { return undef; }</td></tr>
<tr><td class="h">4124</td><td><div class="c3">167</div><div class="c3">167</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4124">100</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4124">167</a></div></td><td></td><td><div>23764</div><div>1190</div></td><td class="s">sub getChildNodes      { my @children= ($_[0]-&gt;root); return wantarray ? @children : \@children; }</td></tr>
<tr><td class="h">4125</td><td colspan="7"></td></tr><tr><td class="h">4126</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _weakrefs</td></tr>
<tr><td class="h">4127</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4127">1</a></div></td><td></td><td><div>263</div></td><td class="s">&nbsp;&nbsp;{ return $weakrefs; }</td></tr>
<tr><td class="h">4128</td><td colspan="7"></td></tr><tr><td class="h">4129</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _dump</td></tr>
<tr><td class="h">4130</td><td><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4130">5</a></div></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;{ my $t= shift;</td></tr>
<tr><td class="h">4131</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dump=&#39;&#39;;</td></tr>
<tr><td class="h">4132</td><td colspan="7"></td></tr><tr><td class="h">4133</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$dump=&quot;document\n&quot;; # should dump twig level data here</td></tr>
<tr><td class="h">4134</td><td><div class="c3">5</div><div class="c3">5</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L4134">50</a></div></td><td></td><td></td><td></td><td><div>19</div><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;root) { $dump .= $t-&gt;root-&gt;_dump( @_); }</td></tr>
<tr><td class="h">4135</td><td colspan="7"></td></tr><tr><td class="h">4136</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dump;</td></tr>
<tr><td class="h">4137</td><td colspan="7"></td></tr><tr><td class="h">4138</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4139</td><td colspan="7"></td></tr><tr><td class="h">4140</td><td colspan="7"></td></tr><tr><td class="h">4141</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">1;</td></tr>
<tr><td class="h">4142</td><td colspan="7"></td></tr><tr><td class="h">4143</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">######################################################################</td></tr>
<tr><td class="h">4144</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">package XML::Twig::Entity_list;</td></tr>
<tr><td class="h">4145</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">######################################################################</td></tr>
<tr><td class="h">4146</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4146">92</a></div></td><td></td><td><div>901</div><div>215</div><div>894</div></td><td class="s">use UNIVERSAL qw(isa);</td></tr>
<tr><td class="h">4147</td><td colspan="7"></td></tr><tr><td class="h">4148</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub new</td></tr>
<tr><td class="h">4149</td><td><div class="c3">2759</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4149">2759</a></div></td><td></td><td><div>8410</div></td><td class="s">&nbsp;&nbsp;{ my $class = shift;</td></tr>
<tr><td class="h">4150</td><td><div class="c3">2759</div></td><td></td><td></td><td></td><td></td><td><div>15005</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self={ entities =&gt; {}, updated =&gt; 0};</td></tr>
<tr><td class="h">4151</td><td colspan="7"></td></tr><tr><td class="h">4152</td><td><div class="c3">2759</div></td><td></td><td></td><td></td><td></td><td><div>11837</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;bless $self, $class;</td></tr>
<tr><td class="h">4153</td><td><div class="c3">2759</div></td><td></td><td></td><td></td><td></td><td><div>13586</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self;</td></tr>
<tr><td class="h">4154</td><td colspan="7"></td></tr><tr><td class="h">4155</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4156</td><td colspan="7"></td></tr><tr><td class="h">4157</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub add_new_ent</td></tr>
<tr><td class="h">4158</td><td><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4158">5</a></div></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;{ my $ent_list= shift;</td></tr>
<tr><td class="h">4159</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ent= XML::Twig::Entity-&gt;new( @_);</td></tr>
<tr><td class="h">4160</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$ent_list-&gt;add( $ent);</td></tr>
<tr><td class="h">4161</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ent_list;</td></tr>
<tr><td class="h">4162</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4163</td><td colspan="7"></td></tr><tr><td class="h">4164</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _add_list</td></tr>
<tr><td class="h">4165</td><td><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4165">5</a></div></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;{ my( $ent_list, $to_add)= @_;</td></tr>
<tr><td class="h">4166</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ents_to_add= $to_add-&gt;{entities};</td></tr>
<tr><td class="h">4167</td><td><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4167">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L4167">67</a></div></td><td></td><td></td><td><div>63</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ent_list unless( $ents_to_add &amp;&amp; %$ents_to_add);</td></tr>
<tr><td class="h">4168</td><td><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>21</div><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;@{$ent_list-&gt;{entities}}{keys %$ents_to_add}= values %$ents_to_add;</td></tr>
<tr><td class="h">4169</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$ent_list-&gt;{updated}=1;</td></tr>
<tr><td class="h">4170</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ent_list;</td></tr>
<tr><td class="h">4171</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4172</td><td colspan="7"></td></tr><tr><td class="h">4173</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub add</td></tr>
<tr><td class="h">4174</td><td><div class="c3">74</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4174">74</a></div></td><td></td><td><div>230</div></td><td class="s">&nbsp;&nbsp;{ my( $ent_list, $ent)= @_;</td></tr>
<tr><td class="h">4175</td><td><div class="c3">74</div></td><td></td><td></td><td></td><td></td><td><div>413</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$ent_list-&gt;{entities}-&gt;{$ent-&gt;{name}}= $ent;</td></tr>
<tr><td class="h">4176</td><td><div class="c3">74</div></td><td></td><td></td><td></td><td></td><td><div>230</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$ent_list-&gt;{updated}=1;</td></tr>
<tr><td class="h">4177</td><td><div class="c3">74</div></td><td></td><td></td><td></td><td></td><td><div>196</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ent_list;</td></tr>
<tr><td class="h">4178</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4179</td><td colspan="7"></td></tr><tr><td class="h">4180</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub ent</td></tr>
<tr><td class="h">4181</td><td><div class="c3">16</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4181">16</a></div></td><td></td><td><div>1108</div></td><td class="s">&nbsp;&nbsp;{ my( $ent_list, $ent_name)= @_;</td></tr>
<tr><td class="h">4182</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>111</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ent_list-&gt;{entities}-&gt;{$ent_name};</td></tr>
<tr><td class="h">4183</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4184</td><td colspan="7"></td></tr><tr><td class="h">4185</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># can be called with an entity or with an entity name</td></tr>
<tr><td class="h">4186</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub delete</td></tr>
<tr><td class="h">4187</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4187">4</a></div></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;{ my $ent_list= shift;</td></tr>
<tr><td class="h">4188</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4188">100</a></div></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( isa( ref $_[0], &#39;XML::Twig::Entity&#39;))</td></tr>
<tr><td class="h">4189</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # the second arg is an entity</td></tr>
<tr><td class="h">4190</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ent= shift;</td></tr>
<tr><td class="h">4191</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $ent_list-&gt;{entities}-&gt;{$ent-&gt;{name}};</td></tr>
<tr><td class="h">4192</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4193</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">4194</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # the second arg was not entity, must be a string then</td></tr>
<tr><td class="h">4195</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $name= shift;</td></tr>
<tr><td class="h">4196</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $ent_list-&gt;{entities}-&gt;{$name};</td></tr>
<tr><td class="h">4197</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4198</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$ent_list-&gt;{updated}=1;</td></tr>
<tr><td class="h">4199</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ent_list;</td></tr>
<tr><td class="h">4200</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4201</td><td colspan="7"></td></tr><tr><td class="h">4202</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub print</td></tr>
<tr><td class="h">4203</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4203">2</a></div></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;{ my ($ent_list, $fh)= @_;</td></tr>
<tr><td class="h">4204</td><td><div class="c3">2</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4204">50</a></div></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $old_select= defined $fh ? select $fh : undef;</td></tr>
<tr><td class="h">4205</td><td colspan="7"></td></tr><tr><td class="h">4206</td><td><div class="c3">2</div><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>5</div><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $ent_name ( sort keys %{$ent_list-&gt;{entities}})</td></tr>
<tr><td class="h">4207</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $ent= $ent_list-&gt;{entities}-&gt;{$ent_name};</td></tr>
<tr><td class="h">4208</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# we have to test what the entity is or un-defined entities can creep in</td></tr>
<tr><td class="h">4209</td><td><div class="c3">4</div><div class="c3">4</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L4209">50</a></div></td><td></td><td></td><td></td><td><div>29</div><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( isa( $ent, &#39;XML::Twig::Entity&#39;)) { $ent-&gt;print(); }</td></tr>
<tr><td class="h">4210</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4211</td><td><div class="c3">2</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4211">50</a></div></td><td></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;select $old_select if( defined $old_select);</td></tr>
<tr><td class="h">4212</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ent_list;</td></tr>
<tr><td class="h">4213</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4214</td><td colspan="7"></td></tr><tr><td class="h">4215</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub text</td></tr>
<tr><td class="h">4216</td><td><div class="c3">16</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4216">16</a></div></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;{ my ($ent_list)= @_;</td></tr>
<tr><td class="h">4217</td><td><div class="c3">16</div><div class="c3">19</div><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>45</div><div>103</div><div>188</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return join &quot;\n&quot;, map { $ent_list-&gt;{entities}-&gt;{$_}-&gt;text} sort keys %{$ent_list-&gt;{entities}};</td></tr>
<tr><td class="h">4218</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4219</td><td colspan="7"></td></tr><tr><td class="h">4220</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># return the list of entity names </td></tr>
<tr><td class="h">4221</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub entity_names($)</td></tr>
<tr><td class="h">4222</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4222">6</a></div></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;{ my $ent_list= shift;</td></tr>
<tr><td class="h">4223</td><td><div class="c3">6</div><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>11</div><div>126</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return sort keys %{$ent_list-&gt;{entities}} ;</td></tr>
<tr><td class="h">4224</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4225</td><td colspan="7"></td></tr><tr><td class="h">4226</td><td colspan="7"></td></tr><tr><td class="h">4227</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub list</td></tr>
<tr><td class="h">4228</td><td><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4228">5</a></div></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;{ my ($ent_list)= @_;</td></tr>
<tr><td class="h">4229</td><td><div class="c3">5</div><div class="c3">10</div><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>14</div><div>57</div><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return map { $ent_list-&gt;{entities}-&gt;{$_} } sort keys %{$ent_list-&gt;{entities}};</td></tr>
<tr><td class="h">4230</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4231</td><td colspan="7"></td></tr><tr><td class="h">4232</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">1;</td></tr>
<tr><td class="h">4233</td><td colspan="7"></td></tr><tr><td class="h">4234</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">######################################################################</td></tr>
<tr><td class="h">4235</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">package XML::Twig::Entity;</td></tr>
<tr><td class="h">4236</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">######################################################################</td></tr>
<tr><td class="h">4237</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4237">92</a></div></td><td></td><td><div>819</div><div>198</div><div>645</div></td><td class="s">use UNIVERSAL qw(isa);</td></tr>
<tr><td class="h">4238</td><td colspan="7"></td></tr><tr><td class="h">4239</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub new</td></tr>
<tr><td class="h">4240</td><td><div class="c3">80</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4240">80</a></div></td><td></td><td><div>501</div></td><td class="s">&nbsp;&nbsp;{ my( $class, $name, $val, $sysid, $pubid, $ndata, $param)= @_;</td></tr>
<tr><td class="h">4241</td><td><div class="c3">80</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L4241">33</a></div></td><td></td><td></td><td><div>687</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$class= ref( $class) || $class;</td></tr>
<tr><td class="h">4242</td><td colspan="7"></td></tr><tr><td class="h">4243</td><td><div class="c3">80</div></td><td></td><td></td><td></td><td></td><td><div>208</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $self={};</td></tr>
<tr><td class="h">4244</td><td colspan="7"></td></tr><tr><td class="h">4245</td><td><div class="c3">80</div></td><td></td><td></td><td></td><td></td><td><div>347</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{name}  = $name;</td></tr>
<tr><td class="h">4246</td><td><div class="c3">80</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4246">100</a></div></td><td></td><td></td><td></td><td><div>342</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{val}   = $val   if( defined $val  );</td></tr>
<tr><td class="h">4247</td><td><div class="c3">80</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4247">100</a></div></td><td></td><td></td><td></td><td><div>298</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{sysid} = $sysid if( defined $sysid);</td></tr>
<tr><td class="h">4248</td><td><div class="c3">80</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4248">100</a></div></td><td></td><td></td><td></td><td><div>217</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{pubid} = $pubid if( defined $pubid);</td></tr>
<tr><td class="h">4249</td><td><div class="c3">80</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4249">100</a></div></td><td></td><td></td><td></td><td><div>236</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{ndata} = $ndata if( defined $ndata);</td></tr>
<tr><td class="h">4250</td><td><div class="c3">80</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4250">100</a></div></td><td></td><td></td><td></td><td><div>207</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{param} = $param if( defined $param);</td></tr>
<tr><td class="h">4251</td><td colspan="7"></td></tr><tr><td class="h">4252</td><td><div class="c3">80</div></td><td></td><td></td><td></td><td></td><td><div>388</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;bless $self, $class;</td></tr>
<tr><td class="h">4253</td><td><div class="c3">80</div></td><td></td><td></td><td></td><td></td><td><div>285</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $self;</td></tr>
<tr><td class="h">4254</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4255</td><td colspan="7"></td></tr><tr><td class="h">4256</td><td colspan="7"></td></tr><tr><td class="h">4257</td><td><div class="c3">8</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4257">8</a></div></td><td></td><td><div>644</div></td><td class="s">sub name  { return $_[0]-&gt;{name}; }</td></tr>
<tr><td class="h">4258</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4258">2</a></div></td><td></td><td><div>15</div></td><td class="s">sub val   { return $_[0]-&gt;{val}; }</td></tr>
<tr><td class="h">4259</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4259">100</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4259">3</a></div></td><td></td><td><div>35</div></td><td class="s">sub sysid { return defined( $_[0]-&gt;{sysid}) ? $_[0]-&gt;{sysid} : &#39;&#39;; }</td></tr>
<tr><td class="h">4260</td><td><div class="c3">2</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4260">50</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4260">2</a></div></td><td></td><td><div>20</div></td><td class="s">sub pubid { return defined( $_[0]-&gt;{pubid}) ? $_[0]-&gt;{pubid} : &#39;&#39;; }</td></tr>
<tr><td class="h">4261</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4261">100</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4261">2</a></div></td><td></td><td><div>21</div></td><td class="s">sub ndata { return defined( $_[0]-&gt;{ndata}) ? $_[0]-&gt;{ndata} : &#39;&#39;; }</td></tr>
<tr><td class="h">4262</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4262">100</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4262">2</a></div></td><td></td><td><div>32</div></td><td class="s">sub param { return defined( $_[0]-&gt;{param}) ? $_[0]-&gt;{param} : &#39;&#39;; }</td></tr>
<tr><td class="h">4263</td><td colspan="7"></td></tr><tr><td class="h">4264</td><td colspan="7"></td></tr><tr><td class="h">4265</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub print</td></tr>
<tr><td class="h">4266</td><td><div class="c3">14</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4266">14</a></div></td><td></td><td><div>87</div></td><td class="s">&nbsp;&nbsp;{ my ($ent, $fh)= @_;</td></tr>
<tr><td class="h">4267</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $text= $ent-&gt;text;</td></tr>
<tr><td class="h">4268</td><td><div class="c3">14</div><div class="c0">0</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4268">50</a></div></td><td></td><td></td><td></td><td><div>102</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !defined( $text)) { $text=&#39;&#39;; }</td></tr>
<tr><td class="h">4269</td><td><div class="c3">14</div><div class="c0">0</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4269">50</a></div></td><td></td><td></td><td></td><td><div>44</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $fh) { print $fh $text . &quot;\n&quot;; }</td></tr>
<tr><td class="h">4270</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>135</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else     { print $text . &quot;\n&quot;; }</td></tr>
<tr><td class="h">4271</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4272</td><td colspan="7"></td></tr><tr><td class="h">4273</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub sprint</td></tr>
<tr><td class="h">4274</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4274">3</a></div></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;{ my ($ent)= @_;</td></tr>
<tr><td class="h">4275</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $text= $ent-&gt;text;</td></tr>
<tr><td class="h">4276</td><td><div class="c3">3</div><div class="c0">0</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4276">50</a></div></td><td></td><td></td><td></td><td><div>13</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !defined( $text)) { $text=&#39;&#39;; }</td></tr>
<tr><td class="h">4277</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $text;</td></tr>
<tr><td class="h">4278</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4279</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub text</td></tr>
<tr><td class="h">4280</td><td><div class="c3">111</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4280">111</a></div></td><td></td><td><div>312</div></td><td class="s">&nbsp;&nbsp;{ my ($ent)= @_;</td></tr>
<tr><td class="h">4281</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#warn &quot;text called: &#39;&quot;, $ent-&gt;_dump, &quot;&#39;\n&quot;;</td></tr>
<tr><td class="h">4282</td><td><div class="c3">111</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4282">100</a></div></td><td></td><td></td><td></td><td><div>628</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return &#39;&#39; if( !$ent-&gt;{name});</td></tr>
<tr><td class="h">4283</td><td><div class="c3">109</div></td><td></td><td></td><td></td><td></td><td><div>174</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @tokens;</td></tr>
<tr><td class="h">4284</td><td><div class="c3">109</div></td><td></td><td></td><td></td><td></td><td><div>305</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;push @tokens, &#39;&lt;!ENTITY&#39;;</td></tr>
<tr><td class="h">4285</td><td colspan="7"></td></tr><tr><td class="h">4286</td><td><div class="c3">109</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4286">100</a></div></td><td></td><td></td><td></td><td><div>393</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;push @tokens, &#39;%&#39; if( $ent-&gt;{param});</td></tr>
<tr><td class="h">4287</td><td><div class="c3">109</div></td><td></td><td></td><td></td><td></td><td><div>359</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;push @tokens, $ent-&gt;{name};</td></tr>
<tr><td class="h">4288</td><td colspan="7"></td></tr><tr><td class="h">4289</td><td><div class="c3">109</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4289">100</a></div><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L4289">50</a></div></td><td><div class="c1"><a href="blib-lib-XML-Twig-pm--condition.html#L4289">75</a></div></td><td></td><td></td><td><div>1305</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $ent-&gt;{val} &amp;&amp; !defined( $ent-&gt;{sysid}) &amp;&amp; !defined($ent-&gt;{pubid}) )</td></tr>
<tr><td class="h">4290</td><td><div class="c3">57</div></td><td></td><td></td><td></td><td></td><td><div>255</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ push @tokens, _quoted_val( $ent-&gt;{val});</td></tr>
<tr><td class="h">4291</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4292</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( defined $ent-&gt;{sysid})</td></tr>
<tr><td class="h">4293</td><td><div class="c3">52</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4293">100</a></div></td><td></td><td></td><td></td><td><div>201</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ push @tokens, &#39;PUBLIC&#39;, _quoted_val( $ent-&gt;{pubid}) if( $ent-&gt;{pubid});</td></tr>
<tr><td class="h">4294</td><td><div class="c3">52</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4294">100</a></div></td><td></td><td></td><td></td><td><div>230</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @tokens, &#39;SYSTEM&#39; unless( $ent-&gt;{pubid});</td></tr>
<tr><td class="h">4295</td><td><div class="c3">52</div></td><td></td><td></td><td></td><td></td><td><div>217</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @tokens, _quoted_val( $ent-&gt;{sysid}); </td></tr>
<tr><td class="h">4296</td><td><div class="c3">52</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4296">100</a></div></td><td></td><td></td><td></td><td><div>316</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @tokens, &#39;NDATA&#39;, $ent-&gt;{ndata} if( $ent-&gt;{ndata});</td></tr>
<tr><td class="h">4297</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4298</td><td><div class="c3">109</div></td><td></td><td></td><td></td><td></td><td><div>1034</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return join( &#39; &#39;, @tokens) . &#39;&gt;&#39;;</td></tr>
<tr><td class="h">4299</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4300</td><td colspan="7"></td></tr><tr><td class="h">4301</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _quoted_val</td></tr>
<tr><td class="h">4302</td><td><div class="c3">113</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4302">50</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4302">113</a></div></td><td></td><td><div>1056</div></td><td class="s">&nbsp;&nbsp;{ my $q= $_[0]=~ m{&quot;} ? q{&#39;} : q{&quot;};</td></tr>
<tr><td class="h">4303</td><td><div class="c3">113</div></td><td></td><td></td><td></td><td></td><td><div>699</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return qq{$q$_[0]$q};</td></tr>
<tr><td class="h">4304</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4305</td><td colspan="7"></td></tr><tr><td class="h">4306</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _dump</td></tr>
<tr><td class="h">4307</td><td><div class="c3">1</div><div class="c3">1</div><div class="c3">2</div><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4307">1</a></div></td><td></td><td><div>4</div><div>13</div><div>20</div><div>10</div></td><td class="s">&nbsp;&nbsp;{ my( $ent)= @_; return join( &quot; - &quot;, map { &quot;$_ =&gt; &#39;$ent-&gt;{$_}&#39;&quot; } grep { defined $ent-&gt;{$_} } sort keys %$ent); }</td></tr>
<tr><td class="h">4308</td><td colspan="7"></td></tr><tr><td class="h">4309</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">1;</td></tr>
<tr><td class="h">4310</td><td colspan="7"></td></tr><tr><td class="h">4311</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">######################################################################</td></tr>
<tr><td class="h">4312</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">package XML::Twig::Elt;</td></tr>
<tr><td class="h">4313</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">######################################################################</td></tr>
<tr><td class="h">4314</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4314">92</a></div></td><td></td><td><div>812</div><div>213</div><div>802</div></td><td class="s">use Carp;</td></tr>
<tr><td class="h">4315</td><td colspan="7"></td></tr><tr><td class="h">4316</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4316">92</a></div></td><td></td><td><div>718</div><div>200</div><div>490</div></td><td class="s">use UNIVERSAL qw(isa);</td></tr>
<tr><td class="h">4317</td><td colspan="7"></td></tr><tr><td class="h">4318</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4318">92</a></div></td><td></td><td><div>689</div><div>194</div><div>1064</div></td><td class="s">use constant  PCDATA  =&gt; &#39;#PCDATA&#39;; </td></tr>
<tr><td class="h">4319</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4319">92</a></div></td><td></td><td><div>665</div><div>177</div><div>491</div></td><td class="s">use constant  CDATA   =&gt; &#39;#CDATA&#39;; </td></tr>
<tr><td class="h">4320</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4320">92</a></div></td><td></td><td><div>659</div><div>215</div><div>523</div></td><td class="s">use constant  PI      =&gt; &#39;#PI&#39;; </td></tr>
<tr><td class="h">4321</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4321">92</a></div></td><td></td><td><div>681</div><div>275</div><div>611</div></td><td class="s">use constant  COMMENT =&gt; &#39;#COMMENT&#39;; </td></tr>
<tr><td class="h">4322</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4322">92</a></div></td><td></td><td><div>658</div><div>178</div><div>465</div></td><td class="s">use constant  ENT     =&gt; &#39;#ENT&#39;; </td></tr>
<tr><td class="h">4323</td><td colspan="7"></td></tr><tr><td class="h">4324</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4324">92</a></div></td><td></td><td><div>651</div><div>186</div><div>478</div></td><td class="s">use constant  ASIS    =&gt; &#39;#ASIS&#39;;    # pcdata elements not to be XML-escaped</td></tr>
<tr><td class="h">4325</td><td colspan="7"></td></tr><tr><td class="h">4326</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4326">92</a></div></td><td></td><td><div>702</div><div>178</div><div>456</div></td><td class="s">use constant  ELT     =&gt; &#39;#ELT&#39;; </td></tr>
<tr><td class="h">4327</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4327">92</a></div></td><td></td><td><div>644</div><div>180</div><div>474</div></td><td class="s">use constant  TEXT    =&gt; &#39;#TEXT&#39;; </td></tr>
<tr><td class="h">4328</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4328">92</a></div></td><td></td><td><div>650</div><div>168</div><div>529</div></td><td class="s">use constant  EMPTY   =&gt; &#39;#EMPTY&#39;; </td></tr>
<tr><td class="h">4329</td><td colspan="7"></td></tr><tr><td class="h">4330</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4330">92</a></div></td><td></td><td><div>628</div><div>166</div><div>462</div></td><td class="s">use constant CDATA_START    =&gt; &quot;&lt;![CDATA[&quot;;</td></tr>
<tr><td class="h">4331</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4331">92</a></div></td><td></td><td><div>631</div><div>261</div><div>463</div></td><td class="s">use constant CDATA_END      =&gt; &quot;]]&gt;&quot;;</td></tr>
<tr><td class="h">4332</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4332">92</a></div></td><td></td><td><div>757</div><div>202</div><div>558</div></td><td class="s">use constant PI_START       =&gt; &quot;&lt;?&quot;;</td></tr>
<tr><td class="h">4333</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4333">92</a></div></td><td></td><td><div>651</div><div>173</div><div>609</div></td><td class="s">use constant PI_END         =&gt; &quot;?&gt;&quot;;</td></tr>
<tr><td class="h">4334</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4334">92</a></div></td><td></td><td><div>668</div><div>163</div><div>573</div></td><td class="s">use constant COMMENT_START  =&gt; &quot;&lt;!--&quot;;</td></tr>
<tr><td class="h">4335</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4335">92</a></div></td><td></td><td><div>621</div><div>166</div><div>472</div></td><td class="s">use constant COMMENT_END    =&gt; &quot;--&gt;&quot;;</td></tr>
<tr><td class="h">4336</td><td colspan="7"></td></tr><tr><td class="h">4337</td><td><div class="c3">92</div><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4337">92</a></div></td><td></td><td><div>653</div><div>190</div><div>471</div></td><td class="s">use constant XMLNS_URI      =&gt; &#39;http://www.w3.org/2000/xmlns/&#39;;</td></tr>
<tr><td class="h">4338</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my $XMLNS_URI               = XMLNS_URI;</td></tr>
<tr><td class="h">4339</td><td colspan="7"></td></tr><tr><td class="h">4340</td><td colspan="7"></td></tr><tr><td class="h">4341</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">BEGIN</td></tr>
<tr><td class="h">4342</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;{ # set some aliases for methods</td></tr>
<tr><td class="h">4343</td><td><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4343">92</a></div></td><td></td><td><div>633</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*tag           = *gi; </td></tr>
<tr><td class="h">4344</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>410</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*name          = *gi; </td></tr>
<tr><td class="h">4345</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>437</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*set_tag       = *set_gi; </td></tr>
<tr><td class="h">4346</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>418</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*set_name      = *set_gi; </td></tr>
<tr><td class="h">4347</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>382</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*find_nodes    = *get_xpath; # as in XML::DOM</td></tr>
<tr><td class="h">4348</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>405</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*findnodes     = *get_xpath; # as in XML::LibXML</td></tr>
<tr><td class="h">4349</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>383</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*field         = *first_child_text;</td></tr>
<tr><td class="h">4350</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>409</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*trimmed_field = *first_child_trimmed_text;</td></tr>
<tr><td class="h">4351</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>397</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*is_field      = *contains_only_text;</td></tr>
<tr><td class="h">4352</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>403</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*is            = *passes;</td></tr>
<tr><td class="h">4353</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>421</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*matches       = *passes;</td></tr>
<tr><td class="h">4354</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>625</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*has_child     = *first_child;</td></tr>
<tr><td class="h">4355</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>510</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*has_children  = *first_child;</td></tr>
<tr><td class="h">4356</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>425</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*all_children_pass = *all_children_are;</td></tr>
<tr><td class="h">4357</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>502</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*all_children_match= *all_children_are;</td></tr>
<tr><td class="h">4358</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>427</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*getElementsByTagName= *descendants;</td></tr>
<tr><td class="h">4359</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>384</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*find_by_tag_name= *descendants_or_self;</td></tr>
<tr><td class="h">4360</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>421</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*unwrap          = *erase;</td></tr>
<tr><td class="h">4361</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>383</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*inner_xml       = *xml_string;</td></tr>
<tr><td class="h">4362</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>428</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*outer_xml       = *sprint;</td></tr>
<tr><td class="h">4363</td><td colspan="7"></td></tr><tr><td class="h">4364</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>386</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*first_child_is  = *first_child_matches;</td></tr>
<tr><td class="h">4365</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>387</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*last_child_is   = *last_child_matches;</td></tr>
<tr><td class="h">4366</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>504</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*next_sibling_is = *next_sibling_matches;</td></tr>
<tr><td class="h">4367</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>386</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*prev_sibling_is = *prev_sibling_matches;</td></tr>
<tr><td class="h">4368</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>473</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*next_elt_is     = *next_elt_matches;</td></tr>
<tr><td class="h">4369</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>470</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*prev_elt_is     = *prev_elt_matches;</td></tr>
<tr><td class="h">4370</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>383</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*parent_is       = *parent_matches;</td></tr>
<tr><td class="h">4371</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>374</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*child_is        = *child_matches;</td></tr>
<tr><td class="h">4372</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>391</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*inherited_att   = *inherit_att;</td></tr>
<tr><td class="h">4373</td><td colspan="7"></td></tr><tr><td class="h">4374</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>387</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*sort_children_by_value= *sort_children_on_value;</td></tr>
<tr><td class="h">4375</td><td colspan="7"></td></tr><tr><td class="h">4376</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>457</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*has_atts= *att_nb;</td></tr>
<tr><td class="h">4377</td><td colspan="7"></td></tr><tr><td class="h">4378</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# imports from XML::Twig</td></tr>
<tr><td class="h">4379</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>425</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*_is_fh= *XML::Twig::_is_fh;</td></tr>
<tr><td class="h">4380</td><td colspan="7"></td></tr><tr><td class="h">4381</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# XML::XPath compatibility</td></tr>
<tr><td class="h">4382</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>399</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*string_value       = *text;</td></tr>
<tr><td class="h">4383</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>472</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*toString           = *sprint;</td></tr>
<tr><td class="h">4384</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>391</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*getName            = *gi;</td></tr>
<tr><td class="h">4385</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>476</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*getRootNode        = *twig;  </td></tr>
<tr><td class="h">4386</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>395</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*getNextSibling     = *_next_sibling;</td></tr>
<tr><td class="h">4387</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>422</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*getPreviousSibling = *_prev_sibling;</td></tr>
<tr><td class="h">4388</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>395</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*isElementNode      = *is_elt;</td></tr>
<tr><td class="h">4389</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>380</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*isTextNode         = *is_text;</td></tr>
<tr><td class="h">4390</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>412</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*isPI               = *is_pi;</td></tr>
<tr><td class="h">4391</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>395</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*isPINode           = *is_pi;</td></tr>
<tr><td class="h">4392</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>380</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*isProcessingInstructionNode= *is_pi;</td></tr>
<tr><td class="h">4393</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>463</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*isComment          = *is_comment;</td></tr>
<tr><td class="h">4394</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>399</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*isCommentNode      = *is_comment;</td></tr>
<tr><td class="h">4395</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>385</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*getTarget          = *target;</td></tr>
<tr><td class="h">4396</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>381</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*getFirstChild      = *_first_child;</td></tr>
<tr><td class="h">4397</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>398</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;*getLastChild      = *_last_child;</td></tr>
<tr><td class="h">4398</td><td colspan="7"></td></tr><tr><td class="h">4399</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# try using weak references</td></tr>
<tr><td class="h">4400</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# test whether we can use weak references</td></tr>
<tr><td class="h">4401</td><td><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>256</div><div>785</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ local $SIG{__DIE__};</td></tr>
<tr><td class="h">4402</td><td><div class="c3">92</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L4402">50</a></div><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L4402">0</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L4402">33</a></div></td><td></td><td></td><td><div>3625</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( eval &#39;require Scalar::Util&#39; &amp;&amp; defined( &amp;Scalar::Util::weaken) )</td></tr>
<tr><td class="h">4403</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>677</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ import Scalar::Util qw(weaken); }</td></tr>
<tr><td class="h">4404</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( eval &#39;require WeakRef&#39;)</td></tr>
<tr><td class="h">4405</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ import WeakRef; }</td></tr>
<tr><td class="h">4406</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4407</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">4408</td><td colspan="7"></td></tr><tr><td class="h">4409</td><td colspan="7"></td></tr><tr><td class="h">4410</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># can be called as XML::Twig::Elt-&gt;new( [[$gi, $atts, [@content]])</td></tr>
<tr><td class="h">4411</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># - gi is an optional gi given to the element</td></tr>
<tr><td class="h">4412</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># - $atts is a hashref to attributes for the element</td></tr>
<tr><td class="h">4413</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># - @content is an optional list of text and elements that will</td></tr>
<tr><td class="h">4414</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#   be inserted under the element </td></tr>
<tr><td class="h">4415</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub new </td></tr>
<tr><td class="h">4416</td><td><div class="c3">22162</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4416">22162</a></div></td><td></td><td><div>62323</div></td><td class="s">&nbsp;&nbsp;{ my $class= shift;</td></tr>
<tr><td class="h">4417</td><td><div class="c3">22162</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L4417">67</a></div></td><td></td><td></td><td><div>148007</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$class= ref $class || $class;</td></tr>
<tr><td class="h">4418</td><td><div class="c3">22162</div></td><td></td><td></td><td></td><td></td><td><div>52724</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $elt  = {};</td></tr>
<tr><td class="h">4419</td><td><div class="c3">22162</div></td><td></td><td></td><td></td><td></td><td><div>81149</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;bless ($elt, $class);</td></tr>
<tr><td class="h">4420</td><td colspan="7"></td></tr><tr><td class="h">4421</td><td><div class="c3">22162</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4421">100</a></div></td><td></td><td></td><td></td><td><div>61968</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt unless @_;</td></tr>
<tr><td class="h">4422</td><td colspan="7"></td></tr><tr><td class="h">4423</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# if a gi is passed then use it</td></tr>
<tr><td class="h">4424</td><td><div class="c3">22158</div></td><td></td><td></td><td></td><td></td><td><div>54516</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $gi= shift;</td></tr>
<tr><td class="h">4425</td><td><div class="c3">22158</div></td><td></td><td></td><td></td><td></td><td><div>69095</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;set_gi( $gi);</td></tr>
<tr><td class="h">4426</td><td colspan="7"></td></tr><tr><td class="h">4427</td><td colspan="7"></td></tr><tr><td class="h">4428</td><td><div class="c3">22158</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4428">100</a></div></td><td></td><td></td><td></td><td><div>75522</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $atts= ref $_[0] eq &#39;HASH&#39; ? shift : undef;</td></tr>
<tr><td class="h">4429</td><td colspan="7"></td></tr><tr><td class="h">4430</td><td><div class="c3">22158</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4430">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L4430">100</a></div></td><td></td><td></td><td><div>77561</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $atts &amp;&amp; defined $atts-&gt;{&#39;#CDATA&#39;})</td></tr>
<tr><td class="h">4431</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ delete $atts-&gt;{&#39;#CDATA&#39;};</td></tr>
<tr><td class="h">4432</td><td colspan="7"></td></tr><tr><td class="h">4433</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $cdata= new( $class, &#39;#CDATA&#39;, @_);</td></tr>
<tr><td class="h">4434</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return new( $class, $gi, $atts, $cdata);</td></tr>
<tr><td class="h">4435</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4436</td><td colspan="7"></td></tr><tr><td class="h">4437</td><td><div class="c3">22154</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4437">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4437">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4437">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4437">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4437">100</a></div></td><td></td><td></td><td></td><td><div>130845</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $gi eq PCDATA)</td></tr>
<tr><td class="h">4438</td><td><div class="c3">6673</div><div class="c3">270</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4438">100</a></div></td><td></td><td></td><td></td><td><div>21849</div><div>1091</div><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( grep { ref $_ } @_) { croak &quot;element #PCDATA can only be created from text&quot;; }</td></tr>
<tr><td class="h">4439</td><td><div class="c3">6672</div></td><td></td><td></td><td></td><td></td><td><div>31392</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;_set_pcdata( join( &#39;&#39;, @_)); </td></tr>
<tr><td class="h">4440</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4441</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $gi eq ENT)</td></tr>
<tr><td class="h">4442</td><td><div class="c3">45</div></td><td></td><td></td><td></td><td></td><td><div>187</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;{ent}=  shift; }</td></tr>
<tr><td class="h">4443</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $gi eq CDATA)</td></tr>
<tr><td class="h">4444</td><td><div class="c3">104</div><div class="c3">9</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4444">100</a></div></td><td></td><td></td><td></td><td><div>370</div><div>40</div><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( grep { ref $_ } @_) { croak &quot;element #CDATA can only be created from text&quot;; }</td></tr>
<tr><td class="h">4445</td><td><div class="c3">103</div></td><td></td><td></td><td></td><td></td><td><div>573</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;_set_cdata( join( &#39;&#39;, @_)); </td></tr>
<tr><td class="h">4446</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4447</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $gi eq COMMENT)</td></tr>
<tr><td class="h">4448</td><td><div class="c3">1758</div><div class="c3">3</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4448">100</a></div></td><td></td><td></td><td></td><td><div>6121</div><div>14</div><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( grep { ref $_ } @_) { croak &quot;element #COMMENT can only be created from text&quot;; }</td></tr>
<tr><td class="h">4449</td><td><div class="c3">1757</div></td><td></td><td></td><td></td><td></td><td><div>8618</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;_set_comment( join( &#39;&#39;, @_)); </td></tr>
<tr><td class="h">4450</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4451</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $gi eq PI)</td></tr>
<tr><td class="h">4452</td><td><div class="c3">1469</div><div class="c3">3</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4452">100</a></div></td><td></td><td></td><td></td><td><div>5541</div><div>11</div><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( grep { ref $_ } @_) { croak &quot;element #PI can only be created from text&quot;; }</td></tr>
<tr><td class="h">4453</td><td><div class="c3">1468</div></td><td></td><td></td><td></td><td></td><td><div>8262</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;_set_pi( shift, join( &#39;&#39;, @_));</td></tr>
<tr><td class="h">4454</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4455</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">4456</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # the rest of the arguments are the content of the element</td></tr>
<tr><td class="h">4457</td><td><div class="c3">12105</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4457">100</a></div></td><td></td><td></td><td></td><td><div>29255</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( @_)</td></tr>
<tr><td class="h">4458</td><td><div class="c3">96</div></td><td></td><td></td><td></td><td></td><td><div>392</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;set_content( @_); }</td></tr>
<tr><td class="h">4459</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">4460</td><td><div class="c3">12009</div></td><td></td><td></td><td></td><td></td><td><div>44309</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;{empty}=  1;    }</td></tr>
<tr><td class="h">4461</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4462</td><td colspan="7"></td></tr><tr><td class="h">4463</td><td><div class="c3">22150</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4463">100</a></div></td><td></td><td></td><td></td><td><div>53236</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $atts)</td></tr>
<tr><td class="h">4464</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # the attribute hash can be used to pass the asis status </td></tr>
<tr><td class="h">4465</td><td><div class="c3">71</div><div class="c3">2</div><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4465">100</a></div></td><td></td><td></td><td></td><td><div>251</div><div>14</div><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined $atts-&gt;{&#39;#ASIS&#39;})  { $elt-&gt;set_asis(  $atts-&gt;{&#39;#ASIS&#39;} ); delete $atts-&gt;{&#39;#ASIS&#39;};  }</td></tr>
<tr><td class="h">4466</td><td><div class="c3">71</div><div class="c3">2</div><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4466">100</a></div></td><td></td><td></td><td></td><td><div>230</div><div>9</div><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined $atts-&gt;{&#39;#EMPTY&#39;}) { $elt-&gt;{empty}=  $atts-&gt;{&#39;#EMPTY&#39;}; delete $atts-&gt;{&#39;#EMPTY&#39;}; }</td></tr>
<tr><td class="h">4467</td><td><div class="c3">71</div><div class="c3">29</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4467">100</a></div></td><td></td><td></td><td></td><td><div>259</div><div>112</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( keys %$atts) { $elt-&gt;set_atts( $atts); }</td></tr>
<tr><td class="h">4468</td><td><div class="c3">71</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4468">100</a></div></td><td></td><td></td><td></td><td><div>397</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;_set_id( $atts-&gt;{$ID}) if( $atts-&gt;{$ID});</td></tr>
<tr><td class="h">4469</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4470</td><td colspan="7"></td></tr><tr><td class="h">4471</td><td><div class="c3">22150</div></td><td></td><td></td><td></td><td></td><td><div>63588</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">4472</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4473</td><td colspan="7"></td></tr><tr><td class="h">4474</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># this function creates an XM:::Twig::Elt from a string</td></tr>
<tr><td class="h">4475</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># it is quite clumsy at the moment, as it just creates a</td></tr>
<tr><td class="h">4476</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># new twig then returns its root</td></tr>
<tr><td class="h">4477</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># there might also be memory leaks there</td></tr>
<tr><td class="h">4478</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># additional arguments are passed to new XML::Twig</td></tr>
<tr><td class="h">4479</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub parse</td></tr>
<tr><td class="h">4480</td><td><div class="c3">22</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4480">22</a></div></td><td></td><td><div>3783</div></td><td class="s">&nbsp;&nbsp;{ my $class= shift;</td></tr>
<tr><td class="h">4481</td><td><div class="c3">22</div><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4481">100</a></div></td><td></td><td></td><td></td><td><div>96</div><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( ref( $class)) { $class= ref( $class); }</td></tr>
<tr><td class="h">4482</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>60</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $string= shift;</td></tr>
<tr><td class="h">4483</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>89</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %args= @_;</td></tr>
<tr><td class="h">4484</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>132</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t= XML::Twig-&gt;new(%args);</td></tr>
<tr><td class="h">4485</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>89</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;parse( $string);</td></tr>
<tr><td class="h">4486</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>86</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $elt= $t-&gt;root;</td></tr>
<tr><td class="h">4487</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# clean-up the node </td></tr>
<tr><td class="h">4488</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>79</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $elt-&gt;{twig};         # get rid of the twig data</td></tr>
<tr><td class="h">4489</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $elt-&gt;{twig_current}; # better get rid of this too</td></tr>
<tr><td class="h">4490</td><td><div class="c3">22</div><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4490">100</a></div></td><td></td><td></td><td></td><td><div>93</div><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $t-&gt;{twig_id_list}) { $elt-&gt;{twig_id_list}= $t-&gt;{twig_id_list}; }</td></tr>
<tr><td class="h">4491</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">4492</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4493</td><td colspan="7"></td></tr><tr><td class="h">4494</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_inner_xml</td></tr>
<tr><td class="h">4495</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4495">2</a></div></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $xml, @args)= @_;</td></tr>
<tr><td class="h">4496</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $new_elt= $elt-&gt;parse( &quot;&lt;dummy&gt;$xml&lt;/dummy&gt;&quot;, @args);</td></tr>
<tr><td class="h">4497</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;cut_children;</td></tr>
<tr><td class="h">4498</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$new_elt-&gt;paste_first_child( $elt);</td></tr>
<tr><td class="h">4499</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$new_elt-&gt;erase;</td></tr>
<tr><td class="h">4500</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>2</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">4501</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4502</td><td colspan="7"></td></tr><tr><td class="h">4503</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_inner_html</td></tr>
<tr><td class="h">4504</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4504">4</a></div></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $html)= @_;</td></tr>
<tr><td class="h">4505</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t= XML::Twig-&gt;new-&gt;parse_html( &quot;&lt;html&gt;$html&lt;/html&gt;&quot;);</td></tr>
<tr><td class="h">4506</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $new_elt= $t-&gt;root;</td></tr>
<tr><td class="h">4507</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4507">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4507">100</a></div></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;tag eq &#39;head&#39;)</td></tr>
<tr><td class="h">4508</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $new_elt-&gt;first_child( &#39;head&#39;)-&gt;unwrap;</td></tr>
<tr><td class="h">4509</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>1</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$new_elt-&gt;first_child( &#39;body&#39;)-&gt;cut;</td></tr>
<tr><td class="h">4510</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4511</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $elt-&gt;tag ne &#39;html&#39;)</td></tr>
<tr><td class="h">4512</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $new_elt-&gt;first_child( &#39;head&#39;)-&gt;cut;</td></tr>
<tr><td class="h">4513</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>1</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$new_elt-&gt;first_child( &#39;body&#39;)-&gt;unwrap;</td></tr>
<tr><td class="h">4514</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4515</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$new_elt-&gt;cut;</td></tr>
<tr><td class="h">4516</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;cut_children;</td></tr>
<tr><td class="h">4517</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$new_elt-&gt;paste_first_child( $elt);</td></tr>
<tr><td class="h">4518</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$new_elt-&gt;erase;</td></tr>
<tr><td class="h">4519</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">4520</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4521</td><td colspan="7"></td></tr><tr><td class="h">4522</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_gi </td></tr>
<tr><td class="h">4523</td><td><div class="c3">22184</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4523">22184</a></div></td><td></td><td><div>86393</div></td><td class="s">&nbsp;&nbsp;{ my ($elt, $gi)= @_;</td></tr>
<tr><td class="h">4524</td><td><div class="c3">22184</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4524">100</a></div></td><td></td><td></td><td></td><td><div>94930</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( defined $XML::Twig::gi2index{$gi})</td></tr>
<tr><td class="h">4525</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # new gi, create entries in %gi2index and @index2gi</td></tr>
<tr><td class="h">4526</td><td><div class="c3">666</div></td><td></td><td></td><td></td><td></td><td><div>2911</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push  @XML::Twig::index2gi, $gi;</td></tr>
<tr><td class="h">4527</td><td><div class="c3">666</div></td><td></td><td></td><td></td><td></td><td><div>3848</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$XML::Twig::gi2index{$gi}= $#XML::Twig::index2gi;</td></tr>
<tr><td class="h">4528</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4529</td><td><div class="c3">22184</div></td><td></td><td></td><td></td><td></td><td><div>96498</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{gi}= $XML::Twig::gi2index{$gi};</td></tr>
<tr><td class="h">4530</td><td><div class="c3">22184</div></td><td></td><td></td><td></td><td></td><td><div>55664</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt; </td></tr>
<tr><td class="h">4531</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4532</td><td colspan="7"></td></tr><tr><td class="h">4533</td><td><div class="c3">7053</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4533">7053</a></div></td><td></td><td><div>93186</div></td><td class="s">sub gi  { return $XML::Twig::index2gi[$_[0]-&gt;{gi}]; }</td></tr>
<tr><td class="h">4534</td><td colspan="7"></td></tr><tr><td class="h">4535</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub local_name </td></tr>
<tr><td class="h">4536</td><td><div class="c3">107</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4536">107</a></div></td><td></td><td><div>2222</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">4537</td><td><div class="c3">107</div></td><td></td><td></td><td></td><td></td><td><div>486</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return _local_name( $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}]);</td></tr>
<tr><td class="h">4538</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4539</td><td colspan="7"></td></tr><tr><td class="h">4540</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub ns_prefix</td></tr>
<tr><td class="h">4541</td><td><div class="c3">79</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4541">79</a></div></td><td></td><td><div>170</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">4542</td><td><div class="c3">79</div></td><td></td><td></td><td></td><td></td><td><div>351</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return _ns_prefix( $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}]);</td></tr>
<tr><td class="h">4543</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4544</td><td colspan="7"></td></tr><tr><td class="h">4545</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># namespace prefix for any qname (can be used for elements or attributes)</td></tr>
<tr><td class="h">4546</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _ns_prefix</td></tr>
<tr><td class="h">4547</td><td><div class="c3">125</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4547">125</a></div></td><td></td><td><div>285</div></td><td class="s">&nbsp;&nbsp;{ my $qname= shift;</td></tr>
<tr><td class="h">4548</td><td><div class="c3">125</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4548">100</a></div></td><td></td><td></td><td></td><td><div>611</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $qname=~ m{^([^:]*):})</td></tr>
<tr><td class="h">4549</td><td><div class="c3">52</div></td><td></td><td></td><td></td><td></td><td><div>529</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return $1; }</td></tr>
<tr><td class="h">4550</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">4551</td><td><div class="c3">73</div></td><td></td><td></td><td></td><td></td><td><div>362</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return( &#39;&#39;); } # should it be &#39;&#39; ?</td></tr>
<tr><td class="h">4552</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4553</td><td colspan="7"></td></tr><tr><td class="h">4554</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># local name for any qname (can be used for elements or attributes)</td></tr>
<tr><td class="h">4555</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _local_name</td></tr>
<tr><td class="h">4556</td><td><div class="c3">120</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4556">120</a></div></td><td></td><td><div>342</div></td><td class="s">&nbsp;&nbsp;{ my $qname= shift;</td></tr>
<tr><td class="h">4557</td><td><div class="c3">120</div></td><td></td><td></td><td></td><td></td><td><div>499</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;(my $local= $qname)=~ s{^[^:]*:}{};</td></tr>
<tr><td class="h">4558</td><td><div class="c3">120</div></td><td></td><td></td><td></td><td></td><td><div>1336</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $local;</td></tr>
<tr><td class="h">4559</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4560</td><td colspan="7"></td></tr><tr><td class="h">4561</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">BEGIN </td></tr>
<tr><td class="h">4562</td><td><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4562">92</a></div></td><td></td><td><div>15487</div></td><td class="s">&nbsp;&nbsp;{ my %DEFAULT_NS= ( xml   =&gt; &quot;http://www.w3.org/XML/1998/namespace&quot;,</td></tr>
<tr><td class="h">4563</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xmlns =&gt; &quot;http://www.w3.org/2000/xmlns/&quot;,</td></tr>
<tr><td class="h">4564</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">4565</td><td colspan="7"></td></tr><tr><td class="h">4566</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#sub get_namespace</td></tr>
<tr><td class="h">4567</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;sub namespace</td></tr>
<tr><td class="h">4568</td><td><div class="c3">70</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4568">70</a></div></td><td></td><td><div>263</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">4569</td><td><div class="c3">70</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4569">100</a></div></td><td></td><td></td><td></td><td><div>278</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $prefix= defined $_[0] ? shift() : $elt-&gt;ns_prefix;</td></tr>
<tr><td class="h">4570</td><td><div class="c3">70</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4570">100</a></div></td><td></td><td></td><td></td><td><div>290</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ns_att= $prefix ? &quot;xmlns:$prefix&quot; : &quot;xmlns&quot;;</td></tr>
<tr><td class="h">4571</td><td><div class="c3">70</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L4571">100</a></div></td><td></td><td></td><td><div>492</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $expanded= $DEFAULT_NS{$prefix} || $elt-&gt;_inherit_att_through_cut( $ns_att) || &#39;&#39;;</td></tr>
<tr><td class="h">4572</td><td><div class="c3">70</div></td><td></td><td></td><td></td><td></td><td><div>364</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $expanded;</td></tr>
<tr><td class="h">4573</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4574</td><td colspan="7"></td></tr><tr><td class="h">4575</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;sub declare_missing_ns</td></tr>
<tr><td class="h">4576</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4576">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $root= shift;</td></tr>
<tr><td class="h">4577</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my %missing_prefix;</td></tr>
<tr><td class="h">4578</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $map= $root-&gt;_current_ns_prefix_map;</td></tr>
<tr><td class="h">4579</td><td colspan="7"></td></tr><tr><td class="h">4580</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $prefix (keys %$map)</td></tr>
<tr><td class="h">4581</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L4581">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $prefix_att= $prefix eq &#39;#default&#39; ? &#39;xmlns&#39; : &quot;xmlns:$prefix&quot;;</td></tr>
<tr><td class="h">4582</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L4582">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( ! $root-&gt;{&#39;att&#39;}-&gt;{$prefix_att}) </td></tr>
<tr><td class="h">4583</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $root-&gt;set_att( $prefix_att =&gt; $map-&gt;{$prefix}); }</td></tr>
<tr><td class="h">4584</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4585</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $root;</td></tr>
<tr><td class="h">4586</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4587</td><td colspan="7"></td></tr><tr><td class="h">4588</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4589</td><td colspan="7"></td></tr><tr><td class="h">4590</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _current_ns_prefix_map</td></tr>
<tr><td class="h">4591</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4591">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;{ my( $elt)= shift;</td></tr>
<tr><td class="h">4592</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $map;</td></tr>
<tr><td class="h">4593</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $elt)</td></tr>
<tr><td class="h">4594</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ foreach my $att ($elt-&gt;att_names)</td></tr>
<tr><td class="h">4595</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L4595">0</a></div><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L4595">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $prefix= $att eq &#39;xmlns&#39;        ? &#39;#default&#39;</td></tr>
<tr><td class="h">4596</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: $att=~ m{^xmlns:(.*)$} ? $1</td></tr>
<tr><td class="h">4597</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: next</td></tr>
<tr><td class="h">4598</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;</td></tr>
<tr><td class="h">4599</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L4599">0</a></div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( ! exists $map-&gt;{$prefix}) { $map-&gt;{$prefix}= $elt-&gt;{&#39;att&#39;}-&gt;{$att}; }</td></tr>
<tr><td class="h">4600</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4601</td><td><div class="c0">0</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L4601">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt= $elt-&gt;{parent} || $elt-&gt;former_parent;</td></tr>
<tr><td class="h">4602</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4603</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $map;</td></tr>
<tr><td class="h">4604</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4605</td><td colspan="7"></td></tr><tr><td class="h">4606</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_ns_decl</td></tr>
<tr><td class="h">4607</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4607">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $uri, $prefix)= @_;</td></tr>
<tr><td class="h">4608</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L4608">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ns_att=  $prefix ? &quot;xmlns:$prefix&quot; : &#39;xmlns&#39;;</td></tr>
<tr><td class="h">4609</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;set_att( $ns_att =&gt; $uri);</td></tr>
<tr><td class="h">4610</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">4611</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4612</td><td colspan="7"></td></tr><tr><td class="h">4613</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_ns_as_default</td></tr>
<tr><td class="h">4614</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4614">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;{ my( $root, $uri)= @_;</td></tr>
<tr><td class="h">4615</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @ns_decl_to_remove;</td></tr>
<tr><td class="h">4616</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $elt ($root-&gt;descendants_or_self)</td></tr>
<tr><td class="h">4617</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L4617">0</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L4617">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $elt-&gt;_ns_prefix &amp;&amp; $elt-&gt;namespace eq $uri) </td></tr>
<tr><td class="h">4618</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;set_tag( $elt-&gt;local_name); }</td></tr>
<tr><td class="h">4619</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# store any namespace declaration for that uri</td></tr>
<tr><td class="h">4620</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L4620">0</a></div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $ns_decl (grep { $_=~ m{xmlns(:|$)} &amp;&amp; $elt-&gt;{&#39;att&#39;}-&gt;{$_} eq $uri } $elt-&gt;att_names)</td></tr>
<tr><td class="h">4621</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ push @ns_decl_to_remove, [$elt, $ns_decl]; }</td></tr>
<tr><td class="h">4622</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4623</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$root-&gt;set_ns_decl( $uri);</td></tr>
<tr><td class="h">4624</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# now remove the ns declarations (if done earlier then descendants of an element with the ns declaration</td></tr>
<tr><td class="h">4625</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# are not considered being in the namespace</td></tr>
<tr><td class="h">4626</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $ns_decl_to_remove ( @ns_decl_to_remove)</td></tr>
<tr><td class="h">4627</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my( $elt, $ns_decl)= @$ns_decl_to_remove;</td></tr>
<tr><td class="h">4628</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;del_att( $ns_decl);</td></tr>
<tr><td class="h">4629</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4630</td><td colspan="7"></td></tr><tr><td class="h">4631</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $root;</td></tr>
<tr><td class="h">4632</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4633</td><td colspan="7"></td></tr><tr><td class="h">4634</td><td colspan="7"></td></tr><tr><td class="h">4635</td><td colspan="7"></td></tr><tr><td class="h">4636</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># return #ELT for an element and #PCDATA... for others</td></tr>
<tr><td class="h">4637</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub get_type</td></tr>
<tr><td class="h">4638</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4638">6</a></div></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;{ my $gi_nb= $_[0]-&gt;{gi}; # the number, not the string</td></tr>
<tr><td class="h">4639</td><td><div class="c3">6</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4639">100</a></div></td><td></td><td></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return ELT if( $gi_nb &gt;= $XML::Twig::SPECIAL_GI);</td></tr>
<tr><td class="h">4640</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $_[0]-&gt;gi;</td></tr>
<tr><td class="h">4641</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4642</td><td colspan="7"></td></tr><tr><td class="h">4643</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># return the gi if it&#39;s a &quot;real&quot; element, 0 otherwise</td></tr>
<tr><td class="h">4644</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub is_elt</td></tr>
<tr><td class="h">4645</td><td><div class="c3">1727</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4645">100</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4645">1727</a></div></td><td></td><td><div>52801</div></td><td class="s">&nbsp;&nbsp;{ if(  $_[0]-&gt;{gi} &gt;=  $XML::Twig::SPECIAL_GI)</td></tr>
<tr><td class="h">4646</td><td><div class="c3">1456</div></td><td></td><td></td><td></td><td></td><td><div>5514</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return $_[0]-&gt;gi; }</td></tr>
<tr><td class="h">4647</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">4648</td><td><div class="c3">271</div></td><td></td><td></td><td></td><td></td><td><div>2083</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return 0; }</td></tr>
<tr><td class="h">4649</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4650</td><td colspan="7"></td></tr><tr><td class="h">4651</td><td colspan="7"></td></tr><tr><td class="h">4652</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub is_pcdata</td></tr>
<tr><td class="h">4653</td><td><div class="c3">1791</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4653">1791</a></div></td><td></td><td><div>4119</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">4654</td><td><div class="c3">1791</div></td><td></td><td></td><td></td><td></td><td><div>8504</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return (exists $elt-&gt;{&#39;pcdata&#39;});</td></tr>
<tr><td class="h">4655</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4656</td><td colspan="7"></td></tr><tr><td class="h">4657</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub is_cdata</td></tr>
<tr><td class="h">4658</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4658">1</a></div></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">4659</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return (exists $elt-&gt;{&#39;cdata&#39;});</td></tr>
<tr><td class="h">4660</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4661</td><td colspan="7"></td></tr><tr><td class="h">4662</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub is_pi</td></tr>
<tr><td class="h">4663</td><td><div class="c3">9</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4663">9</a></div></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">4664</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return (exists $elt-&gt;{&#39;target&#39;});</td></tr>
<tr><td class="h">4665</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4666</td><td colspan="7"></td></tr><tr><td class="h">4667</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub is_comment</td></tr>
<tr><td class="h">4668</td><td><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4668">5</a></div></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">4669</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return (exists $elt-&gt;{&#39;comment&#39;});</td></tr>
<tr><td class="h">4670</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4671</td><td colspan="7"></td></tr><tr><td class="h">4672</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub is_ent</td></tr>
<tr><td class="h">4673</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4673">1</a></div></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">4674</td><td><div class="c3">1</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L4674">33</a></div></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return (exists $elt-&gt;{ent} || $elt-&gt;{ent_name});</td></tr>
<tr><td class="h">4675</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} </td></tr>
<tr><td class="h">4676</td><td colspan="7"></td></tr><tr><td class="h">4677</td><td colspan="7"></td></tr><tr><td class="h">4678</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub is_text</td></tr>
<tr><td class="h">4679</td><td><div class="c3">2005</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4679">2005</a></div></td><td></td><td><div>5243</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">4680</td><td><div class="c3">2005</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L4680">100</a></div></td><td></td><td></td><td><div>19597</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return (exists( $elt-&gt;{&#39;pcdata&#39;}) || (exists $elt-&gt;{&#39;cdata&#39;}));</td></tr>
<tr><td class="h">4681</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4682</td><td colspan="7"></td></tr><tr><td class="h">4683</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub is_empty</td></tr>
<tr><td class="h">4684</td><td><div class="c3">5</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L4684">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4684">5</a></div></td><td></td><td><div>61</div></td><td class="s">&nbsp;&nbsp;{ return $_[0]-&gt;{empty} || 0; }</td></tr>
<tr><td class="h">4685</td><td colspan="7"></td></tr><tr><td class="h">4686</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_empty</td></tr>
<tr><td class="h">4687</td><td><div class="c3">1</div><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4687">50</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4687">1</a></div></td><td></td><td><div>8</div><div>4</div></td><td class="s">&nbsp;&nbsp;{ $_[0]-&gt;{empty}= defined( $_[1]) ? $_[1] : 1; return $_[0]; }</td></tr>
<tr><td class="h">4688</td><td colspan="7"></td></tr><tr><td class="h">4689</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_not_empty</td></tr>
<tr><td class="h">4690</td><td><div class="c3">1</div><div class="c3">1</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L4690">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L4690">50</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4690">1</a></div></td><td></td><td><div>13</div><div>3</div></td><td class="s">&nbsp;&nbsp;{ delete $_[0]-&gt;{empty} if( ($_[0]-&gt;{&#39;empty&#39;} || 0)); return $_[0]; }</td></tr>
<tr><td class="h">4691</td><td colspan="7"></td></tr><tr><td class="h">4692</td><td colspan="7"></td></tr><tr><td class="h">4693</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_asis</td></tr>
<tr><td class="h">4694</td><td><div class="c3">16</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4694">16</a></div></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;{ my $elt=shift;</td></tr>
<tr><td class="h">4695</td><td colspan="7"></td></tr><tr><td class="h">4696</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>69</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $descendant ($elt, $elt-&gt;_descendants )</td></tr>
<tr><td class="h">4697</td><td><div class="c3">23</div></td><td></td><td></td><td></td><td></td><td><div>86</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $descendant-&gt;{asis}= 1;</td></tr>
<tr><td class="h">4698</td><td><div class="c3">23</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4698">100</a></div></td><td></td><td></td><td></td><td><div>176</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( (exists $descendant-&gt;{&#39;cdata&#39;}))</td></tr>
<tr><td class="h">4699</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $descendant-&gt;set_gi( PCDATA);</td></tr>
<tr><td class="h">4700</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$descendant-&gt;_set_pcdata( $descendant-&gt;{cdata});</td></tr>
<tr><td class="h">4701</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4702</td><td colspan="7"></td></tr><tr><td class="h">4703</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4704</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>63</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">4705</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4706</td><td colspan="7"></td></tr><tr><td class="h">4707</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_not_asis</td></tr>
<tr><td class="h">4708</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4708">1</a></div></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;{ my $elt=shift;</td></tr>
<tr><td class="h">4709</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $descendant ($elt, $elt-&gt;descendants)</td></tr>
<tr><td class="h">4710</td><td><div class="c3">2</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L4710">50</a></div></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ delete $descendant-&gt;{asis} if $descendant-&gt;{asis};}</td></tr>
<tr><td class="h">4711</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">4712</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4713</td><td colspan="7"></td></tr><tr><td class="h">4714</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub is_asis</td></tr>
<tr><td class="h">4715</td><td><div class="c3">64</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4715">64</a></div></td><td></td><td><div>357</div></td><td class="s">&nbsp;&nbsp;{ return $_[0]-&gt;{asis}; }</td></tr>
<tr><td class="h">4716</td><td colspan="7"></td></tr><tr><td class="h">4717</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub closed </td></tr>
<tr><td class="h">4718</td><td><div class="c3">15</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4718">15</a></div></td><td></td><td><div>178</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">4719</td><td><div class="c3">15</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L4719">33</a></div></td><td></td><td></td><td><div>77</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t= $elt-&gt;twig || return;</td></tr>
<tr><td class="h">4720</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $curr_elt= $t-&gt;{twig_current};</td></tr>
<tr><td class="h">4721</td><td><div class="c3">15</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4721">100</a></div></td><td></td><td></td><td></td><td><div>62</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1 unless( $curr_elt);</td></tr>
<tr><td class="h">4722</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>147</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $curr_elt-&gt;in( $elt);</td></tr>
<tr><td class="h">4723</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4724</td><td colspan="7"></td></tr><tr><td class="h">4725</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_pcdata </td></tr>
<tr><td class="h">4726</td><td><div class="c3">330</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4726">330</a></div></td><td></td><td><div>1548</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $pcdata)= @_;</td></tr>
<tr><td class="h">4727</td><td colspan="7"></td></tr><tr><td class="h">4728</td><td><div class="c3">330</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4728">100</a></div></td><td></td><td></td><td></td><td><div>1097</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;_extra_data_in_pcdata)</td></tr>
<tr><td class="h">4729</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ _try_moving_extra_data( $elt, $pcdata);</td></tr>
<tr><td class="h">4730</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4731</td><td><div class="c3">330</div></td><td></td><td></td><td></td><td></td><td><div>903</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $elt-&gt;{empty};</td></tr>
<tr><td class="h">4732</td><td><div class="c3">330</div></td><td></td><td></td><td></td><td></td><td><div>1136</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{pcdata}= $pcdata;</td></tr>
<tr><td class="h">4733</td><td><div class="c3">330</div></td><td></td><td></td><td></td><td></td><td><div>929</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt; </td></tr>
<tr><td class="h">4734</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4735</td><td colspan="7"></td></tr><tr><td class="h">4736</td><td><div class="c3">2308</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4736">2308</a></div></td><td></td><td><div>17185</div></td><td class="s">sub _extra_data_in_pcdata      { return $_[0]-&gt;{extra_data_in_pcdata}; }</td></tr>
<tr><td class="h">4737</td><td><div class="c3">12</div><div class="c3">12</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4737">12</a></div></td><td></td><td><div>50</div><div>33</div></td><td class="s">sub _set_extra_data_in_pcdata  { $_[0]-&gt;{extra_data_in_pcdata}= $_[1]; return $_[0]; }</td></tr>
<tr><td class="h">4738</td><td><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4738">3</a></div></td><td></td><td><div>14</div><div>12</div></td><td class="s">sub _del_extra_data_in_pcdata  { delete $_[0]-&gt;{extra_data_in_pcdata}; return $_[0]; }</td></tr>
<tr><td class="h">4739</td><td><div class="c3">14</div><div class="c3">14</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4739">14</a></div></td><td></td><td><div>26</div><div>150</div></td><td class="s">sub _unshift_extra_data_in_pcdata { unshift @{shift()-&gt;{extra_data_in_pcdata}}, { text =&gt; shift(), offset =&gt; shift() }; }</td></tr>
<tr><td class="h">4740</td><td><div class="c3">111</div><div class="c3">111</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4740">111</a></div></td><td></td><td><div>190</div><div>1048</div></td><td class="s">sub _push_extra_data_in_pcdata    { push @{shift()-&gt;{extra_data_in_pcdata}},    { text =&gt; shift(), offset =&gt; shift() }; }</td></tr>
<tr><td class="h">4741</td><td colspan="7"></td></tr><tr><td class="h">4742</td><td><div class="c3">5759</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L4742">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4742">5759</a></div></td><td></td><td><div>83638</div></td><td class="s">sub _extra_data_before_end_tag     { return $_[0]-&gt;{extra_data_before_end_tag} || &#39;&#39;; }</td></tr>
<tr><td class="h">4743</td><td><div class="c3">324</div><div class="c3">324</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4743">324</a></div></td><td></td><td><div>2928</div><div>728</div></td><td class="s">sub _set_extra_data_before_end_tag { $_[0]-&gt;{extra_data_before_end_tag}= $_[1]; return $_[0]}</td></tr>
<tr><td class="h">4744</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4744">0</a></div></td><td></td><td><div>0</div><div>0</div></td><td class="s">sub _del_extra_data_before_end_tag { delete $_[0]-&gt;{extra_data_before_end_tag}; return $_[0]}</td></tr>
<tr><td class="h">4745</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _prefix_extra_data_before_end_tag </td></tr>
<tr><td class="h">4746</td><td><div class="c3">9</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4746">9</a></div></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $data)= @_;</td></tr>
<tr><td class="h">4747</td><td><div class="c3">9</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4747">100</a></div></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if($elt-&gt;{extra_data_before_end_tag})</td></tr>
<tr><td class="h">4748</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;{extra_data_before_end_tag}= $data . $elt-&gt;{extra_data_before_end_tag}; }</td></tr>
<tr><td class="h">4749</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else  </td></tr>
<tr><td class="h">4750</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;{extra_data_before_end_tag}= $data; }</td></tr>
<tr><td class="h">4751</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">4752</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4753</td><td colspan="7"></td></tr><tr><td class="h">4754</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># internal, in cases where we know there is no extra_data (inlined anyway!)</td></tr>
<tr><td class="h">4755</td><td><div class="c3">13051</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4755">13051</a></div></td><td></td><td><div>64572</div></td><td class="s">sub _set_pcdata { $_[0]-&gt;{pcdata}= $_[1]; }</td></tr>
<tr><td class="h">4756</td><td colspan="7"></td></tr><tr><td class="h">4757</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># try to figure out if we can keep the extra_data around</td></tr>
<tr><td class="h">4758</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _try_moving_extra_data</td></tr>
<tr><td class="h">4759</td><td><div class="c3">12</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4759">12</a></div></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $modified)=@_;</td></tr>
<tr><td class="h">4760</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $initial= $elt-&gt;{pcdata};</td></tr>
<tr><td class="h">4761</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>36</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $cpis= $elt-&gt;_extra_data_in_pcdata;</td></tr>
<tr><td class="h">4762</td><td colspan="7"></td></tr><tr><td class="h">4763</td><td><div class="c3">12</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4763">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4763">100</a></div></td><td></td><td></td><td></td><td><div>104</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( (my $offset= index( $modified, $initial)) != -1) </td></tr>
<tr><td class="h">4764</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # text has been added</td></tr>
<tr><td class="h">4765</td><td><div class="c3">2</div><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>9</div><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach (@$cpis) { $_-&gt;{offset}+= $offset; }</td></tr>
<tr><td class="h">4766</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4767</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( ($offset= index( $initial, $modified)) != -1)</td></tr>
<tr><td class="h">4768</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # text has been cut</td></tr>
<tr><td class="h">4769</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $len= length( $modified);</td></tr>
<tr><td class="h">4770</td><td><div class="c3">4</div><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>12</div><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $cpi (@$cpis) { $cpi-&gt;{offset} -= $offset; }</td></tr>
<tr><td class="h">4771</td><td><div class="c3">4</div><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4771">100</a></div></td><td></td><td></td><td></td><td><div>15</div><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;_set_extra_data_in_pcdata( [ grep { $_-&gt;{offset} &gt;= 0 &amp;&amp; $_-&gt;{offset} &lt; $len } @$cpis ]);</td></tr>
<tr><td class="h">4772</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} </td></tr>
<tr><td class="h">4773</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">4774</td><td><div class="c3">6</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4774">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L4774">100</a></div></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{    _match_extra_data_words( $elt, $initial, $modified)</td></tr>
<tr><td class="h">4775</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| _match_extra_data_chars( $elt, $initial, $modified)</td></tr>
<tr><td class="h">4776</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| $elt-&gt;_del_extra_data_in_pcdata;</td></tr>
<tr><td class="h">4777</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4778</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4779</td><td colspan="7"></td></tr><tr><td class="h">4780</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _match_extra_data_words</td></tr>
<tr><td class="h">4781</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4781">6</a></div></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $initial, $modified)= @_;</td></tr>
<tr><td class="h">4782</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>127</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @initial= split /\b/, $initial; </td></tr>
<tr><td class="h">4783</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @modified= split /\b/, $modified;</td></tr>
<tr><td class="h">4784</td><td colspan="7"></td></tr><tr><td class="h">4785</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return _match_extra_data( $elt, length( $initial), \@initial, \@modified);</td></tr>
<tr><td class="h">4786</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4787</td><td colspan="7"></td></tr><tr><td class="h">4788</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _match_extra_data_chars</td></tr>
<tr><td class="h">4789</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4789">4</a></div></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $initial, $modified)= @_;</td></tr>
<tr><td class="h">4790</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @initial= split //, $initial; </td></tr>
<tr><td class="h">4791</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @modified= split //, $modified;</td></tr>
<tr><td class="h">4792</td><td colspan="7"></td></tr><tr><td class="h">4793</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return _match_extra_data( $elt, length( $initial), \@initial, \@modified);</td></tr>
<tr><td class="h">4794</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4795</td><td colspan="7"></td></tr><tr><td class="h">4796</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _match_extra_data</td></tr>
<tr><td class="h">4797</td><td><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4797">10</a></div></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $length, $initial, $modified)= @_;</td></tr>
<tr><td class="h">4798</td><td colspan="7"></td></tr><tr><td class="h">4799</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $cpis= $elt-&gt;_extra_data_in_pcdata;</td></tr>
<tr><td class="h">4800</td><td colspan="7"></td></tr><tr><td class="h">4801</td><td><div class="c3">10</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4801">100</a></div></td><td></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( @$initial &lt;= @$modified)</td></tr>
<tr><td class="h">4802</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">4803</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my( $ok, $positions, $offsets)= _pos_offset( $initial, $modified);</td></tr>
<tr><td class="h">4804</td><td><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4804">100</a></div></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $ok) </td></tr>
<tr><td class="h">4805</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $offset=0;</td></tr>
<tr><td class="h">4806</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $pos= shift @$positions;</td></tr>
<tr><td class="h">4807</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $cpi (@$cpis)</td></tr>
<tr><td class="h">4808</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ while( $cpi-&gt;{offset} &gt;= $pos)</td></tr>
<tr><td class="h">4809</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $offset= shift @$offsets; </td></tr>
<tr><td class="h">4810</td><td><div class="c3">2</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L4810">33</a></div></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pos= shift @$positions || $length +1;</td></tr>
<tr><td class="h">4811</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4812</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$cpi-&gt;{offset} += $offset;</td></tr>
<tr><td class="h">4813</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4814</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">4815</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4816</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4817</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">4818</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my( $ok, $positions, $offsets)= _pos_offset( $modified, $initial);</td></tr>
<tr><td class="h">4819</td><td><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4819">100</a></div></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $ok)</td></tr>
<tr><td class="h">4820</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ #print STDERR &quot;pos:    &quot;, join( &#39;:&#39;, @$positions), &quot;\n&quot;,</td></tr>
<tr><td class="h">4821</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#             &quot;offset: &quot;, join( &#39;:&#39;, @$offsets), &quot;\n&quot;;</td></tr>
<tr><td class="h">4822</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $offset=0;</td></tr>
<tr><td class="h">4823</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $pos= shift @$positions;</td></tr>
<tr><td class="h">4824</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>2</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $prev_pos= 0;</td></tr>
<tr><td class="h">4825</td><td colspan="7"></td></tr><tr><td class="h">4826</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $cpi (@$cpis)</td></tr>
<tr><td class="h">4827</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ while( $cpi-&gt;{offset} &gt;= $pos)</td></tr>
<tr><td class="h">4828</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $offset= shift @$offsets;</td></tr>
<tr><td class="h">4829</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>2</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$prev_pos= $pos;</td></tr>
<tr><td class="h">4830</td><td><div class="c3">1</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L4830">33</a></div></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pos= shift @$positions || $length +1;</td></tr>
<tr><td class="h">4831</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4832</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$cpi-&gt;{offset} -= $offset;</td></tr>
<tr><td class="h">4833</td><td><div class="c3">1</div><div class="c3">1</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L4833">50</a></div></td><td></td><td></td><td></td><td><div>6</div><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $cpi-&gt;{offset} &lt; $prev_pos) { delete $cpi-&gt;{text}; }</td></tr>
<tr><td class="h">4834</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4835</td><td><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;_set_extra_data_in_pcdata( [ grep { exists $_-&gt;{text} } @$cpis ]);</td></tr>
<tr><td class="h">4836</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">4837</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4838</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4839</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>70</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0;</td></tr>
<tr><td class="h">4840</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4841</td><td colspan="7"></td></tr><tr><td class="h">4842</td><td colspan="7"></td></tr><tr><td class="h">4843</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _pos_offset</td></tr>
<tr><td class="h">4844</td><td><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4844">10</a></div></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;{ my( $short, $long)= @_;</td></tr>
<tr><td class="h">4845</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( @pos, @offset);</td></tr>
<tr><td class="h">4846</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $s_length, $l_length)=(0,0);</td></tr>
<tr><td class="h">4847</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while (@$short)</td></tr>
<tr><td class="h">4848</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>61</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $s_word= shift @$short;</td></tr>
<tr><td class="h">4849</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $l_word= shift @$long;</td></tr>
<tr><td class="h">4850</td><td><div class="c3">22</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4850">100</a></div></td><td></td><td></td><td></td><td><div>70</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $s_word ne $l_word)</td></tr>
<tr><td class="h">4851</td><td><div class="c3">10</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L4851">100</a></div></td><td></td><td></td><td><div>93</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ while( @$long &amp;&amp; $s_word ne $l_word)</td></tr>
<tr><td class="h">4852</td><td><div class="c3">31</div></td><td></td><td></td><td></td><td></td><td><div>104</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $l_length += length( $l_word);</td></tr>
<tr><td class="h">4853</td><td><div class="c3">31</div></td><td></td><td></td><td></td><td></td><td><div>230</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$l_word= shift @$long;</td></tr>
<tr><td class="h">4854</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4855</td><td><div class="c3">10</div><div class="c3">7</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4855">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L4855">100</a></div></td><td></td><td></td><td><div>92</div><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( !@$long &amp;&amp; $s_word ne $l_word) { return 0; }</td></tr>
<tr><td class="h">4856</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @pos, $s_length;</td></tr>
<tr><td class="h">4857</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @offset, $l_length - $s_length;</td></tr>
<tr><td class="h">4858</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4859</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $length= length( $s_word);</td></tr>
<tr><td class="h">4860</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$s_length += $length;</td></tr>
<tr><td class="h">4861</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$l_length += $length;</td></tr>
<tr><td class="h">4862</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4863</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return( 1, \@pos, \@offset);</td></tr>
<tr><td class="h">4864</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4865</td><td colspan="7"></td></tr><tr><td class="h">4866</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub append_pcdata</td></tr>
<tr><td class="h">4867</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4867">3</a></div></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;{ delete $_[0]-&gt;{empty};</td></tr>
<tr><td class="h">4868</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$_[0]-&gt;{&#39;pcdata&#39;}.= $_[1];</td></tr>
<tr><td class="h">4869</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $_[0]; </td></tr>
<tr><td class="h">4870</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4871</td><td colspan="7"></td></tr><tr><td class="h">4872</td><td><div class="c3">11</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4872">11</a></div></td><td></td><td><div>93</div></td><td class="s">sub pcdata        { return $_[0]-&gt;{pcdata}; }</td></tr>
<tr><td class="h">4873</td><td colspan="7"></td></tr><tr><td class="h">4874</td><td colspan="7"></td></tr><tr><td class="h">4875</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub append_extra_data </td></tr>
<tr><td class="h">4876</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4876">1</a></div></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;{  $_[0]-&gt;{extra_data}.= $_[1];</td></tr>
<tr><td class="h">4877</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $_[0]; </td></tr>
<tr><td class="h">4878</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4879</td><td colspan="7"></td></tr><tr><td class="h">4880</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_extra_data </td></tr>
<tr><td class="h">4881</td><td><div class="c3">695</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4881">695</a></div></td><td></td><td><div>2803</div></td><td class="s">&nbsp;&nbsp;{ $_[0]-&gt;{extra_data}= $_[1];</td></tr>
<tr><td class="h">4882</td><td><div class="c3">695</div></td><td></td><td></td><td></td><td></td><td><div>1589</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $_[0]; </td></tr>
<tr><td class="h">4883</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4884</td><td><div class="c3">157</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L4884">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4884">157</a></div></td><td></td><td><div>1658</div></td><td class="s">sub extra_data { return $_[0]-&gt;{extra_data} || &#39;&#39;; }</td></tr>
<tr><td class="h">4885</td><td colspan="7"></td></tr><tr><td class="h">4886</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_target </td></tr>
<tr><td class="h">4887</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4887">3</a></div></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $target)= @_;</td></tr>
<tr><td class="h">4888</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{target}= $target;</td></tr>
<tr><td class="h">4889</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt; </td></tr>
<tr><td class="h">4890</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4891</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4891">1</a></div></td><td></td><td><div>15</div></td><td class="s">sub target { return $_[0]-&gt;{target}; }</td></tr>
<tr><td class="h">4892</td><td colspan="7"></td></tr><tr><td class="h">4893</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_data </td></tr>
<tr><td class="h">4894</td><td><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4894">5</a></div></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;{ $_[0]-&gt;{&#39;data&#39;}= $_[1]; </td></tr>
<tr><td class="h">4895</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $_[0];</td></tr>
<tr><td class="h">4896</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4897</td><td><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4897">5</a></div></td><td></td><td><div>74</div></td><td class="s">sub data { return $_[0]-&gt;{data}; }</td></tr>
<tr><td class="h">4898</td><td colspan="7"></td></tr><tr><td class="h">4899</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_pi</td></tr>
<tr><td class="h">4900</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4900">1</a></div></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">4901</td><td><div class="c3">1</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L4901">50</a></div></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( $elt-&gt;{gi} == $XML::Twig::gi2index{&#39;#PI&#39;})</td></tr>
<tr><td class="h">4902</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;cut_children;</td></tr>
<tr><td class="h">4903</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;set_gi( &#39;#PI&#39;);</td></tr>
<tr><td class="h">4904</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4905</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt-&gt;_set_pi( @_);</td></tr>
<tr><td class="h">4906</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4907</td><td colspan="7"></td></tr><tr><td class="h">4908</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _set_pi</td></tr>
<tr><td class="h">4909</td><td><div class="c3">2934</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4909">2934</a></div></td><td></td><td><div>12169</div></td><td class="s">&nbsp;&nbsp;{ $_[0]-&gt;{target}=  $_[1];</td></tr>
<tr><td class="h">4910</td><td><div class="c3">2934</div></td><td></td><td></td><td></td><td></td><td><div>11346</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$_[0]-&gt;{data}=  $_[2];</td></tr>
<tr><td class="h">4911</td><td><div class="c3">2934</div></td><td></td><td></td><td></td><td></td><td><div>6805</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $_[0]; </td></tr>
<tr><td class="h">4912</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4913</td><td colspan="7"></td></tr><tr><td class="h">4914</td><td><div class="c3">1464</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4914">1464</a></div></td><td></td><td><div>6908</div></td><td class="s">sub pi_string { my $string= PI_START . $_[0]-&gt;{target};</td></tr>
<tr><td class="h">4915</td><td><div class="c3">1464</div></td><td></td><td></td><td></td><td></td><td><div>4720</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $data= $_[0]-&gt;{data};</td></tr>
<tr><td class="h">4916</td><td><div class="c3">1464</div><div class="c3">1464</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L4916">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L4916">33</a></div></td><td></td><td></td><td><div>11637</div><div>4214</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined( $data) &amp;&amp; $data ne &#39;&#39;) { $string .= &quot; $data&quot;; }</td></tr>
<tr><td class="h">4917</td><td><div class="c3">1464</div></td><td></td><td></td><td></td><td></td><td><div>3314</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string .= PI_END ;</td></tr>
<tr><td class="h">4918</td><td><div class="c3">1464</div></td><td></td><td></td><td></td><td></td><td><div>5185</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $string;</td></tr>
<tr><td class="h">4919</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4920</td><td colspan="7"></td></tr><tr><td class="h">4921</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_comment</td></tr>
<tr><td class="h">4922</td><td><div class="c3">7</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4922">7</a></div></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">4923</td><td><div class="c3">7</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4923">100</a></div></td><td></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( $elt-&gt;{gi} == $XML::Twig::gi2index{&#39;#COMMENT&#39;})</td></tr>
<tr><td class="h">4924</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;cut_children;</td></tr>
<tr><td class="h">4925</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;set_gi( &#39;#COMMENT&#39;);</td></tr>
<tr><td class="h">4926</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4927</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt-&gt;_set_comment( @_);</td></tr>
<tr><td class="h">4928</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4929</td><td colspan="7"></td></tr><tr><td class="h">4930</td><td><div class="c3">3518</div><div class="c3">3518</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4930">3518</a></div></td><td></td><td><div>15213</div><div>7923</div></td><td class="s">sub _set_comment   { $_[0]-&gt;{comment}= $_[1]; return $_[0]; }</td></tr>
<tr><td class="h">4931</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4931">3</a></div></td><td></td><td><div>48</div></td><td class="s">sub comment        { return $_[0]-&gt;{comment}; }</td></tr>
<tr><td class="h">4932</td><td><div class="c3">1764</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4932">1764</a></div></td><td></td><td><div>12269</div></td><td class="s">sub comment_string { return COMMENT_START . $_[0]-&gt;{comment} . COMMENT_END; }</td></tr>
<tr><td class="h">4933</td><td colspan="7"></td></tr><tr><td class="h">4934</td><td><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4934">1</a></div></td><td></td><td><div>7</div><div>3</div></td><td class="s">sub set_ent  { $_[0]-&gt;{ent}= $_[1]; return $_[0]; }</td></tr>
<tr><td class="h">4935</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4935">2</a></div></td><td></td><td><div>15</div></td><td class="s">sub ent      { return $_[0]-&gt;{ent}; }</td></tr>
<tr><td class="h">4936</td><td><div class="c3">12</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4936">12</a></div></td><td></td><td><div>179</div></td><td class="s">sub ent_name { return substr( $_[0]-&gt;{ent}, 1, -1);}</td></tr>
<tr><td class="h">4937</td><td colspan="7"></td></tr><tr><td class="h">4938</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_cdata </td></tr>
<tr><td class="h">4939</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4939">2</a></div></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">4940</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4940">100</a></div></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( $elt-&gt;{gi} == $XML::Twig::gi2index{&#39;#CDATA&#39;})</td></tr>
<tr><td class="h">4941</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;cut_children;</td></tr>
<tr><td class="h">4942</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;insert_new_elt( first_child =&gt; &#39;#CDATA&#39;, @_);</td></tr>
<tr><td class="h">4943</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">4944</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4945</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt-&gt;_set_cdata( @_);</td></tr>
<tr><td class="h">4946</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4947</td><td colspan="7"></td></tr><tr><td class="h">4948</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _set_cdata </td></tr>
<tr><td class="h">4949</td><td><div class="c3">214</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4949">214</a></div></td><td></td><td><div>707</div></td><td class="s">&nbsp;&nbsp;{ delete $_[0]-&gt;{empty};</td></tr>
<tr><td class="h">4950</td><td><div class="c3">214</div></td><td></td><td></td><td></td><td></td><td><div>844</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$_[0]-&gt;{cdata}= $_[1]; </td></tr>
<tr><td class="h">4951</td><td><div class="c3">214</div></td><td></td><td></td><td></td><td></td><td><div>563</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $_[0];</td></tr>
<tr><td class="h">4952</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4953</td><td colspan="7"></td></tr><tr><td class="h">4954</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub append_cdata</td></tr>
<tr><td class="h">4955</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4955">1</a></div></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;{ $_[0]-&gt;{cdata}.= $_[1]; </td></tr>
<tr><td class="h">4956</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $_[0];</td></tr>
<tr><td class="h">4957</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4958</td><td><div class="c3">47</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4958">47</a></div></td><td></td><td><div>503</div></td><td class="s">sub cdata { return $_[0]-&gt;{cdata}; }</td></tr>
<tr><td class="h">4959</td><td colspan="7"></td></tr><tr><td class="h">4960</td><td colspan="7"></td></tr><tr><td class="h">4961</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub contains_only_text</td></tr>
<tr><td class="h">4962</td><td><div class="c3">42</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4962">42</a></div></td><td></td><td><div>96</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">4963</td><td><div class="c3">42</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4963">100</a></div></td><td></td><td></td><td></td><td><div>110</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0 unless $elt-&gt;is_elt;</td></tr>
<tr><td class="h">4964</td><td><div class="c3">24</div></td><td></td><td></td><td></td><td></td><td><div>77</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $child ($elt-&gt;_children)</td></tr>
<tr><td class="h">4965</td><td><div class="c3">25</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4965">100</a></div></td><td></td><td></td><td></td><td><div>62</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return 0 if $child-&gt;is_elt; }</td></tr>
<tr><td class="h">4966</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>119</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">4967</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} </td></tr>
<tr><td class="h">4968</td><td colspan="7"></td></tr><tr><td class="h">4969</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub contains_only</td></tr>
<tr><td class="h">4970</td><td><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4970">5</a></div></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $exp)= @_;</td></tr>
<tr><td class="h">4971</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @children= $elt-&gt;_children;</td></tr>
<tr><td class="h">4972</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $child (@children)</td></tr>
<tr><td class="h">4973</td><td><div class="c3">7</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4973">100</a></div></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return 0 unless $child-&gt;is( $exp); }</td></tr>
<tr><td class="h">4974</td><td><div class="c3">3</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L4974">100</a></div></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @children || 1;</td></tr>
<tr><td class="h">4975</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} </td></tr>
<tr><td class="h">4976</td><td colspan="7"></td></tr><tr><td class="h">4977</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub contains_a_single</td></tr>
<tr><td class="h">4978</td><td><div class="c3">156</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4978">156</a></div></td><td></td><td><div>635</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $exp)= @_;</td></tr>
<tr><td class="h">4979</td><td><div class="c3">156</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4979">100</a></div></td><td></td><td></td><td></td><td><div>2337</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $child= $elt-&gt;{first_child} or return 0;</td></tr>
<tr><td class="h">4980</td><td><div class="c3">50</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4980">100</a></div></td><td></td><td></td><td></td><td><div>194</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0 unless $child-&gt;passes( $exp);</td></tr>
<tr><td class="h">4981</td><td><div class="c3">47</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L4981">100</a></div></td><td></td><td></td><td></td><td><div>284</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0 if( $child-&gt;{next_sibling});</td></tr>
<tr><td class="h">4982</td><td><div class="c3">45</div></td><td></td><td></td><td></td><td></td><td><div>341</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $child;</td></tr>
<tr><td class="h">4983</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} </td></tr>
<tr><td class="h">4984</td><td colspan="7"></td></tr><tr><td class="h">4985</td><td colspan="7"></td></tr><tr><td class="h">4986</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub root </td></tr>
<tr><td class="h">4987</td><td><div class="c3">1231</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4987">1231</a></div></td><td></td><td><div>2670</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">4988</td><td><div class="c3">1231</div><div class="c3">515</div></td><td></td><td></td><td></td><td></td><td><div>6011</div><div>2790</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $elt-&gt;{parent}) { $elt= $elt-&gt;{parent}; }</td></tr>
<tr><td class="h">4989</td><td><div class="c3">1231</div></td><td></td><td></td><td></td><td></td><td><div>3699</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">4990</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4991</td><td colspan="7"></td></tr><tr><td class="h">4992</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _root_through_cut</td></tr>
<tr><td class="h">4993</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4993">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">4994</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L4994">0</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L4994">0</a></div></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $elt-&gt;{parent} || $elt-&gt;former_parent) { $elt= $elt-&gt;{parent} || $elt-&gt;former_parent; }</td></tr>
<tr><td class="h">4995</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">4996</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">4997</td><td colspan="7"></td></tr><tr><td class="h">4998</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub twig </td></tr>
<tr><td class="h">4999</td><td><div class="c3">1209</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L4999">1209</a></div></td><td></td><td><div>4107</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5000</td><td><div class="c3">1209</div></td><td></td><td></td><td></td><td></td><td><div>3666</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $root= $elt-&gt;root;</td></tr>
<tr><td class="h">5001</td><td><div class="c3">1209</div></td><td></td><td></td><td></td><td></td><td><div>8525</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $root-&gt;{twig};</td></tr>
<tr><td class="h">5002</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5003</td><td colspan="7"></td></tr><tr><td class="h">5004</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _twig_through_cut</td></tr>
<tr><td class="h">5005</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5005">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5006</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $root= $elt-&gt;_root_through_cut;</td></tr>
<tr><td class="h">5007</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $root-&gt;{twig};</td></tr>
<tr><td class="h">5008</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5009</td><td colspan="7"></td></tr><tr><td class="h">5010</td><td colspan="7"></td></tr><tr><td class="h">5011</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># returns undef or the element, depending on whether $elt passes $cond</td></tr>
<tr><td class="h">5012</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># $cond can be</td></tr>
<tr><td class="h">5013</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># - empty: the element passes the condition</td></tr>
<tr><td class="h">5014</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># - ELT (&#39;#ELT&#39;): the element passes the condition if it is a &quot;real&quot; element</td></tr>
<tr><td class="h">5015</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># - TEXT (&#39;#TEXT&#39;): the element passes if it is a CDATA or PCDATA element</td></tr>
<tr><td class="h">5016</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># - a string with an XPath condition (only a subset of XPath is actually</td></tr>
<tr><td class="h">5017</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#   supported).</td></tr>
<tr><td class="h">5018</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># - a regexp: the element passes if its gi matches the regexp</td></tr>
<tr><td class="h">5019</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># - a code ref: the element passes if the code, applied on the element,</td></tr>
<tr><td class="h">5020</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#   returns true</td></tr>
<tr><td class="h">5021</td><td colspan="7"></td></tr><tr><td class="h">5022</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">my %cond_cache; # expression =&gt; coderef</td></tr>
<tr><td class="h">5023</td><td colspan="7"></td></tr><tr><td class="h">5024</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5024">1</a></div></td><td></td><td><div>237</div></td><td class="s">sub reset_cond_cache { %cond_cache=(); }</td></tr>
<tr><td class="h">5025</td><td colspan="7"></td></tr><tr><td class="h">5026</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">{ </td></tr>
<tr><td class="h">5027</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;sub _install_cond</td></tr>
<tr><td class="h">5028</td><td><div class="c3">314</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5028">314</a></div></td><td></td><td><div>822</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $cond= shift;</td></tr>
<tr><td class="h">5029</td><td><div class="c3">314</div></td><td></td><td></td><td></td><td></td><td><div>446</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $test;</td></tr>
<tr><td class="h">5030</td><td><div class="c3">314</div></td><td></td><td></td><td></td><td></td><td><div>695</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $init=&#39;&#39;;</td></tr>
<tr><td class="h">5031</td><td colspan="7"></td></tr><tr><td class="h">5032</td><td><div class="c3">314</div></td><td></td><td></td><td></td><td></td><td><div>595</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $original_cond= $cond;</td></tr>
<tr><td class="h">5033</td><td colspan="7"></td></tr><tr><td class="h">5034</td><td><div class="c3">314</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5034">100</a></div></td><td></td><td></td><td></td><td><div>1375</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $not= ($cond=~ s{^\s*!}{}) ? &#39;!&#39; : &#39;&#39;;</td></tr>
<tr><td class="h">5035</td><td colspan="7"></td></tr><tr><td class="h">5036</td><td><div class="c3">314</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5036">100</a></div></td><td></td><td></td><td></td><td><div>1107</div><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( ref $cond eq &#39;CODE&#39;) { return $cond; }</td></tr>
<tr><td class="h">5037</td><td colspan="7"></td></tr><tr><td class="h">5038</td><td><div class="c3">313</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5038">100</a></div></td><td></td><td></td><td></td><td><div>1398</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( ref $cond eq &#39;Regexp&#39;)</td></tr>
<tr><td class="h">5039</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $test = qq{(\$_[0]-&gt;gi=~ /$cond/)}; }</td></tr>
<tr><td class="h">5040</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">5041</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # the condition is a string</td></tr>
<tr><td class="h">5042</td><td><div class="c3">310</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5042">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5042">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5042">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5042">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5042">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5042">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5042">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5042">100</a></div></td><td></td><td></td><td></td><td><div>10764</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $cond eq ELT)     </td></tr>
<tr><td class="h">5043</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $test = qq{\$_[0]-&gt;is_elt}; }</td></tr>
<tr><td class="h">5044</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $cond eq TEXT) </td></tr>
<tr><td class="h">5045</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $test = qq{\$_[0]-&gt;is_text}; }</td></tr>
<tr><td class="h">5046</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $cond=~ m{^\s*($REG_NAME_W)\s*$}o)                  </td></tr>
<tr><td class="h">5047</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # gi</td></tr>
<tr><td class="h">5048</td><td><div class="c3">128</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5048">100</a></div></td><td></td><td></td><td></td><td><div>643</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $1 ne &#39;*&#39;)</td></tr>
<tr><td class="h">5049</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # 2 options, depending on whether the gi exists in gi2index</td></tr>
<tr><td class="h">5050</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# start optimization</td></tr>
<tr><td class="h">5051</td><td><div class="c3">127</div></td><td></td><td></td><td></td><td></td><td><div>487</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $gi= $XML::Twig::gi2index{$1};</td></tr>
<tr><td class="h">5052</td><td><div class="c3">127</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5052">100</a></div></td><td></td><td></td><td></td><td><div>361</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $gi)</td></tr>
<tr><td class="h">5053</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # the gi exists, use its index as a faster shortcut</td></tr>
<tr><td class="h">5054</td><td><div class="c3">102</div></td><td></td><td></td><td></td><td></td><td><div>525</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$test = qq{ \$_[0]-&gt;{gi} == $XML::Twig::gi2index{$1}};</td></tr>
<tr><td class="h">5055</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5056</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">5057</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# end optimization</td></tr>
<tr><td class="h">5058</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # it does not exist (but might be created later), compare the strings</td></tr>
<tr><td class="h">5059</td><td><div class="c3">25</div></td><td></td><td></td><td></td><td></td><td><div>153</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$test = qq{ \$_[0]-&gt;gi eq &quot;$1&quot;}; </td></tr>
<tr><td class="h">5060</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5061</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5062</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">5063</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $test = qq{ (1) } }</td></tr>
<tr><td class="h">5064</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5065</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $cond=~ m{^\s*($REG_REGEXP)\s*$}o)</td></tr>
<tr><td class="h">5066</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # /regexp/</td></tr>
<tr><td class="h">5067</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$test = qq{ \$_[0]-&gt;gi=~ $1 }; </td></tr>
<tr><td class="h">5068</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5069</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $cond=~ m{^\s*($REG_NAME_W)?\s*  # $1</td></tr>
<tr><td class="h">5070</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\[\s*(-?)\s*(\d+)\s*\] #   [$2]</td></tr>
<tr><td class="h">5071</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\s*$}xo</td></tr>
<tr><td class="h">5072</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">5073</td><td><div class="c3">47</div></td><td></td><td></td><td></td><td></td><td><div>280</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my( $gi, $neg, $index)= ($1, $2, $3);</td></tr>
<tr><td class="h">5074</td><td><div class="c3">47</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5074">100</a></div></td><td></td><td></td><td></td><td><div>148</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $siblings= $neg ? q{$_[0]-&gt;_next_siblings} : q{$_[0]-&gt;_prev_siblings};</td></tr>
<tr><td class="h">5075</td><td><div class="c3">47</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5075">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L5075">100</a></div></td><td></td><td></td><td><div>382</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $gi &amp;&amp; ($gi ne &#39;*&#39;)) </td></tr>
<tr><td class="h">5076</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>215</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $test= qq{((\$_[0]-&gt;gi eq &quot;$gi&quot;) &amp;&amp; (scalar( grep { \$_-&gt;gi eq &quot;$gi&quot; } $siblings) + 1 == $index))}; }</td></tr>
<tr><td class="h">5077</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">5078</td><td><div class="c3">17</div></td><td></td><td></td><td></td><td></td><td><div>96</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $test= qq{(scalar( $siblings) + 1 == $index)}; }</td></tr>
<tr><td class="h">5079</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5080</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $cond=~ m{^\s*\.([\w-]+)\s*$}o)</td></tr>
<tr><td class="h">5081</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # .class</td></tr>
<tr><td class="h">5082</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $class= $1;</td></tr>
<tr><td class="h">5083</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$test = qq{(\$_[0]-&gt;in_class( &quot;$class&quot;)) }; </td></tr>
<tr><td class="h">5084</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5085</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $cond=~ m{^\s*($REG_NAME_W?)\s*($REG_PREDICATE)\s*$})</td></tr>
<tr><td class="h">5086</td><td><div class="c3">93</div></td><td></td><td></td><td></td><td></td><td><div>528</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my( $tag, $predicate)= ( $1, $2);</td></tr>
<tr><td class="h">5087</td><td><div class="c3">93</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5087">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L5087">100</a></div></td><td></td><td></td><td><div>849</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$test= ( $tag &amp;&amp; $tag ne &#39;*&#39;) ? qq{ (\$_[0]-&gt;gi eq &quot;$tag&quot;) &amp;&amp; } : &#39;&#39;;</td></tr>
<tr><td class="h">5088</td><td><div class="c3">93</div></td><td></td><td></td><td></td><td></td><td><div>302</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$test .=   _parse_predicate_in_step( $predicate);</td></tr>
<tr><td class="h">5089</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5090</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $cond=~ m{^\s*($REG_NAKED_PREDICATE)\s*$})</td></tr>
<tr><td class="h">5091</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>111</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $test .=   _parse_predicate_in_step( $1); }</td></tr>
<tr><td class="h">5092</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">5093</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;wrong navigation condition &#39;$original_cond&#39; ($@)&quot;; }</td></tr>
<tr><td class="h">5094</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5095</td><td colspan="7"></td></tr><tr><td class="h">5096</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#warn &quot;init: &#39;$init&#39; - test: &#39;$test&#39;\n&quot;;</td></tr>
<tr><td class="h">5097</td><td colspan="7"></td></tr><tr><td class="h">5098</td><td><div class="c3">308</div></td><td></td><td></td><td></td><td></td><td><div>2243</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $sub= qq{sub { $NO_WARNINGS; $init; return $not($test) ? \$_[0] : undef; } };</td></tr>
<tr><td class="h">5099</td><td><div class="c3">308</div><div class="c3">54</div><div class="c3">54</div><div class="c3">54</div><div class="c3">23</div><div class="c3">23</div><div class="c3">23</div><div class="c3">27</div><div class="c3">27</div><div class="c3">27</div><div class="c3">32</div><div class="c3">32</div><div class="c3">32</div><div class="c3">21</div><div class="c3">21</div><div class="c3">21</div><div class="c3">25</div><div class="c3">25</div><div class="c3">25</div><div class="c3">19</div><div class="c3">19</div><div class="c3">19</div><div class="c3">17</div><div class="c3">17</div><div class="c3">17</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">54</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">23</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">27</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">32</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">21</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">25</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">19</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">17</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">4</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">4</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">4</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">4</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">4</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">4</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">4</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">4</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">4</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">4</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">4</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">2</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5099">1</a></div></td><td></td><td><div>685</div><div>520</div><div>102</div><div>492</div><div>172</div><div>47</div><div>129</div><div>200</div><div>50</div><div>153</div><div>260</div><div>61</div><div>206</div><div>175</div><div>45</div><div>143</div><div>201</div><div>53</div><div>166</div><div>139</div><div>36</div><div>114</div><div>128</div><div>46</div><div>126</div><div>30</div><div>7</div><div>27</div><div>29</div><div>8</div><div>23</div><div>30</div><div>8</div><div>24</div><div>29</div><div>8</div><div>23</div><div>30</div><div>8</div><div>23</div><div>26</div><div>8</div><div>22</div><div>31</div><div>8</div><div>23</div><div>27</div><div>13</div><div>40</div><div>29</div><div>11</div><div>25</div><div>26</div><div>9</div><div>24</div><div>29</div><div>8</div><div>21</div><div>7</div><div>2</div><div>5</div><div>15</div><div>4</div><div>12</div><div>8</div><div>2</div><div>7</div><div>9</div><div>3</div><div>6</div><div>7</div><div>2</div><div>6</div><div>6</div><div>2</div><div>13</div><div>7</div><div>1</div><div>6</div><div>9</div><div>2</div><div>12</div><div>11</div><div>2</div><div>8</div><div>8</div><div>2</div><div>7</div><div>10</div><div>2</div><div>8</div><div>9</div><div>2</div><div>6</div><div>6</div><div>2</div><div>6</div><div>14</div><div>12</div><div>13</div><div>18</div><div>4</div><div>14</div><div>15</div><div>4</div><div>13</div><div>15</div><div>3</div><div>12</div><div>12</div><div>5</div><div>11</div><div>17</div><div>4</div><div>16</div><div>14</div><div>4</div><div>12</div><div>14</div><div>4</div><div>11</div><div>14</div><div>3</div><div>11</div><div>14</div><div>4</div><div>10</div><div>7</div><div>2</div><div>8</div><div>8</div><div>2</div><div>5</div><div>7</div><div>2</div><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $s= eval $sub; </td></tr>
<tr><td class="h">5100</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#warn &quot;cond: $cond\n$sub\n&quot;;</td></tr>
<tr><td class="h">5101</td><td><div class="c3">308</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5101">100</a></div></td><td></td><td></td><td></td><td><div>1711</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $@) </td></tr>
<tr><td class="h">5102</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;wrong navigation condition &#39;$original_cond&#39; ($@);&quot; }</td></tr>
<tr><td class="h">5103</td><td><div class="c3">304</div></td><td></td><td></td><td></td><td></td><td><div>2207</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $s;</td></tr>
<tr><td class="h">5104</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5105</td><td colspan="7"></td></tr><tr><td class="h">5106</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# input: the original predicate</td></tr>
<tr><td class="h">5107</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub _parse_predicate_in_step</td></tr>
<tr><td class="h">5108</td><td><div class="c3">107</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5108">107</a></div></td><td></td><td><div>314</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $cond= shift; </td></tr>
<tr><td class="h">5109</td><td><div class="c3">107</div></td><td></td><td></td><td></td><td></td><td><div>993</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my %PERL_ALPHA_TEST= ( &#39;=&#39; =&gt; &#39; eq &#39;, &#39;!=&#39; =&gt; &#39; ne &#39;, &#39;&gt;&#39; =&gt; &#39; gt &#39;, &#39;&gt;=&#39; =&gt; &#39; ge &#39;, &#39;&lt;&#39; =&gt; &#39; lt &#39;, &#39;&lt;=&#39; =&gt; &#39; le &#39;);</td></tr>
<tr><td class="h">5110</td><td colspan="7"></td></tr><tr><td class="h">5111</td><td><div class="c3">107</div></td><td></td><td></td><td></td><td></td><td><div>422</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$cond=~ s{^\s*\[\s*}{};</td></tr>
<tr><td class="h">5112</td><td><div class="c3">107</div></td><td></td><td></td><td></td><td></td><td><div>375</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$cond=~ s{\s*\]\s*$}{};</td></tr>
<tr><td class="h">5113</td><td><div class="c3">107</div><div class="c3">279</div></td><td></td><td></td><td></td><td></td><td><div>5132</div><div>2683</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$cond=~ s{(   ($REG_STRING)                        # strings</td></tr>
<tr><td class="h">5114</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|\@($REG_NAME)(?=\s*(?:[&gt;&lt;=!]|!~|=~)) # @att (followed by a comparison operator)</td></tr>
<tr><td class="h">5115</td><td><div class="c3">279</div><div class="c3">60</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5115">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5115">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5115">100</a></div><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5115">50</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5115">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5115">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5115">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5115">100</a></div><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5115">50</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5115">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5115">33</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5115">67</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5115">67</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5115">67</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5115">67</a></div></td><td></td><td></td><td><div>2774</div><div>376</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|\@($REG_NAME)                        # @att (not followed by a comparison operator)</td></tr>
<tr><td class="h">5116</td><td><div class="c3">76</div></td><td></td><td></td><td></td><td></td><td><div>766</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|=~|!~                                # matching operators</td></tr>
<tr><td class="h">5117</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>78</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|([&gt;&lt;]=?|=|!=)(?=\s*[\d+-])           # test before a number</td></tr>
<tr><td class="h">5118</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|([&gt;&lt;]=?|=|!=)                        # test, other cases</td></tr>
<tr><td class="h">5119</td><td><div class="c3">60</div></td><td></td><td></td><td></td><td></td><td><div>527</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|($REG_FUNCTION)                      # no arg functions</td></tr>
<tr><td class="h">5120</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# this bit is a mess, but it is the only solution with this half-baked parser</td></tr>
<tr><td class="h">5121</td><td><div class="c3">9</div><div class="c3">17</div></td><td></td><td></td><td></td><td></td><td><div>88</div><div>193</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|((?:string|text)\(\s*$REG_NAME\s*\)\s*$REG_MATCH\s*$REG_REGEXP) # string( child) =~ /regexp/</td></tr>
<tr><td class="h">5122</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|((?:string|text)\(\s*$REG_NAME\s*\)\s*!?=\s*$REG_VALUE)         # string( child) = &quot;value&quot; (or !=)</td></tr>
<tr><td class="h">5123</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|((?:string|text)\(\s*$REG_NAME\s*\)\s*[&lt;&gt;]=?\s*$REG_VALUE)      # string( child) &gt; &quot;value&quot;</td></tr>
<tr><td class="h">5124</td><td><div class="c3">16</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5124">100</a></div></td><td></td><td></td><td></td><td><div>175</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|(and|or)</td></tr>
<tr><td class="h">5125</td><td><div class="c3">23</div></td><td></td><td></td><td></td><td></td><td><div>326</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)}</td></tr>
<tr><td class="h">5126</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my( $token, $string, $att, $bare_att, $num_test, $alpha_test, $func, $string_regexp, $string_eq, $string_test, $and_or)</td></tr>
<tr><td class="h">5127</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= ( $1,     $2,      $3,   $4,        $5,        $6,          $7,    $8,             $9,         $10,          $11);</td></tr>
<tr><td class="h">5128</td><td colspan="7"></td></tr><tr><td class="h">5129</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined $string)   { $token }</td></tr>
<tr><td class="h">5130</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $att)           { &quot;( \$_[0]-&gt;{att} &amp;&amp; exists( \$_[0]-&gt;{att}-&gt;{&#39;$att&#39;}) &amp;&amp; \$_[0]-&gt;{att}-&gt;{&#39;$att&#39;})&quot;; }</td></tr>
<tr><td class="h">5131</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $bare_att)      { &quot;(\$_[0]-&gt;{att} &amp;&amp; defined( \$_[0]-&gt;{att}-&gt;{&#39;$bare_att&#39;}))&quot;; }</td></tr>
<tr><td class="h">5132</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $num_test &amp;&amp; ($num_test eq &#39;=&#39;) ) { &quot;==&quot; } # others tests are unchanged</td></tr>
<tr><td class="h">5133</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $alpha_test)    { $PERL_ALPHA_TEST{$alpha_test} }</td></tr>
<tr><td class="h">5134</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $func &amp;&amp; $func=~ m{^(?:string|text)})</td></tr>
<tr><td class="h">5135</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ &quot;\$_[0]-&gt;text&quot;; }</td></tr>
<tr><td class="h">5136</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $string_regexp &amp;&amp; $string_regexp =~ m{(?:string|text)\(\s*($REG_NAME)\s*\)\s*($REG_MATCH)\s*($REG_REGEXP)})</td></tr>
<tr><td class="h">5137</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ &quot;(XML::Twig::_first_n { (\$_-&gt;gi eq &#39;$1&#39;) &amp;&amp; (\$_-&gt;text $2 $3) } 1, \$_[0]-&gt;_children)&quot;; }</td></tr>
<tr><td class="h">5138</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $string_eq     &amp;&amp; $string_eq     =~ m{(?:string|text)\(\s*($REG_NAME)\s*\)\s*(!?=)\s*($REG_VALUE)})</td></tr>
<tr><td class="h">5139</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&quot;(XML::Twig::_first_n { (\$_-&gt;gi eq &#39;$1&#39;) &amp;&amp; (\$_-&gt;text $PERL_ALPHA_TEST{$2} $3) } 1, \$_[0]-&gt;_children)&quot;; }</td></tr>
<tr><td class="h">5140</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $string_test   &amp;&amp; $string_test   =~ m{(?:string|text)\(\s*($REG_NAME)\s*\)\s*([&lt;&gt;]=?)\s*($REG_VALUE)})</td></tr>
<tr><td class="h">5141</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ &quot;(XML::Twig::_first_n { (\$_-&gt;gi eq &#39;$1&#39;) &amp;&amp; (\$_-&gt;text $2 $3) } 1, \$_[0]-&gt;_children)&quot;; }</td></tr>
<tr><td class="h">5142</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $and_or)        { $and_or eq &#39;and&#39; ? &#39;&amp;&amp;&#39; : &#39;||&#39; ; }</td></tr>
<tr><td class="h">5143</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else                   { $token; }</td></tr>
<tr><td class="h">5144</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}gexs;</td></tr>
<tr><td class="h">5145</td><td><div class="c3">107</div></td><td></td><td></td><td></td><td></td><td><div>965</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return &quot;($cond)&quot;;</td></tr>
<tr><td class="h">5146</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5147</td><td colspan="7"></td></tr><tr><td class="h">5148</td><td colspan="7"></td></tr><tr><td class="h">5149</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub _op</td></tr>
<tr><td class="h">5150</td><td><div class="c3">82</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5150">82</a></div></td><td></td><td><div>277</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $op= shift;</td></tr>
<tr><td class="h">5151</td><td><div class="c3">82</div><div class="c3">78</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5151">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5151">100</a></div></td><td></td><td></td><td></td><td><div>265</div><div>169</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(    $op eq &#39;=&#39;)  { $op= &#39;eq&#39;; }</td></tr>
<tr><td class="h">5152</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $op eq &#39;!=&#39;) { $op= &#39;ne&#39;; }</td></tr>
<tr><td class="h">5153</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td></td><td><div>567</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $op;</td></tr>
<tr><td class="h">5154</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5155</td><td colspan="7"></td></tr><tr><td class="h">5156</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub passes</td></tr>
<tr><td class="h">5157</td><td><div class="c3">3786</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5157">3786</a></div></td><td></td><td><div>11683</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my( $elt, $cond)= @_;</td></tr>
<tr><td class="h">5158</td><td><div class="c3">3786</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5158">100</a></div></td><td></td><td></td><td></td><td><div>22941</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $elt unless $cond;</td></tr>
<tr><td class="h">5159</td><td><div class="c3">605</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5159">67</a></div></td><td></td><td></td><td><div>2697</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $sub= ($cond_cache{$cond} ||= _install_cond( $cond));</td></tr>
<tr><td class="h">5160</td><td><div class="c3">605</div></td><td></td><td></td><td></td><td></td><td><div>2230</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $sub-&gt;( $elt);</td></tr>
<tr><td class="h">5161</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5162</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">5163</td><td colspan="7"></td></tr><tr><td class="h">5164</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_parent </td></tr>
<tr><td class="h">5165</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5165">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;{ $_[0]-&gt;{parent}= $_[1];</td></tr>
<tr><td class="h">5166</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L5166">0</a></div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $XML::Twig::weakrefs) { weaken( $_[0]-&gt;{parent}); }</td></tr>
<tr><td class="h">5167</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5168</td><td colspan="7"></td></tr><tr><td class="h">5169</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub parent</td></tr>
<tr><td class="h">5170</td><td><div class="c3">41</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5170">41</a></div></td><td></td><td><div>291</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5171</td><td><div class="c3">41</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5171">67</a></div></td><td></td><td></td><td><div>260</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $cond= shift || return $elt-&gt;{parent};</td></tr>
<tr><td class="h">5172</td><td><div class="c3">26</div><div class="c3">39</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5172">67</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5172">67</a></div></td><td></td><td></td><td><div>47</div><div>425</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;do { $elt= $elt-&gt;{parent} || return; } until (!$elt || $elt-&gt;passes( $cond));</td></tr>
<tr><td class="h">5173</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>110</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">5174</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5175</td><td colspan="7"></td></tr><tr><td class="h">5176</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_first_child </td></tr>
<tr><td class="h">5177</td><td><div class="c3">42</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5177">42</a></div></td><td></td><td><div>133</div></td><td class="s">&nbsp;&nbsp;{ delete $_[0]-&gt;{empty};</td></tr>
<tr><td class="h">5178</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td></td><td><div>192</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$_[0]-&gt;{&#39;first_child&#39;}= $_[1]; </td></tr>
<tr><td class="h">5179</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5180</td><td colspan="7"></td></tr><tr><td class="h">5181</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub first_child</td></tr>
<tr><td class="h">5182</td><td><div class="c3">532</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5182">532</a></div></td><td></td><td><div>1737</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5183</td><td><div class="c3">532</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5183">67</a></div></td><td></td><td></td><td><div>2788</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $cond= shift || return $elt-&gt;{first_child};</td></tr>
<tr><td class="h">5184</td><td><div class="c3">338</div></td><td></td><td></td><td></td><td></td><td><div>1098</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $child= $elt-&gt;{first_child};</td></tr>
<tr><td class="h">5185</td><td><div class="c3">338</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5185">67</a></div></td><td></td><td></td><td><div>2177</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $test_cond= ($cond_cache{$cond} ||= _install_cond( $cond));</td></tr>
<tr><td class="h">5186</td><td><div class="c3">329</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L5186">100</a></div></td><td></td><td></td><td><div>2207</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $child &amp;&amp; !$test_cond-&gt;( $child)) </td></tr>
<tr><td class="h">5187</td><td><div class="c3">501</div></td><td></td><td></td><td></td><td></td><td><div>4211</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $child= $child-&gt;{next_sibling}; }</td></tr>
<tr><td class="h">5188</td><td><div class="c3">329</div></td><td></td><td></td><td></td><td></td><td><div>1610</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $child;</td></tr>
<tr><td class="h">5189</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5190</td><td colspan="7"></td></tr><tr><td class="h">5191</td><td><div class="c3">4061</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5191">4061</a></div></td><td></td><td><div>30586</div></td><td class="s">sub _first_child   { return $_[0]-&gt;{first_child};  }</td></tr>
<tr><td class="h">5192</td><td><div class="c3">40</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5192">40</a></div></td><td></td><td><div>819</div></td><td class="s">sub _last_child    { return $_[0]-&gt;{last_child};   }</td></tr>
<tr><td class="h">5193</td><td><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5193">44</a></div></td><td></td><td><div>1567</div></td><td class="s">sub _next_sibling  { return $_[0]-&gt;{next_sibling}; }</td></tr>
<tr><td class="h">5194</td><td><div class="c3">76</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5194">76</a></div></td><td></td><td><div>2844</div></td><td class="s">sub _prev_sibling  { return $_[0]-&gt;{prev_sibling}; }</td></tr>
<tr><td class="h">5195</td><td><div class="c3">115</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5195">115</a></div></td><td></td><td><div>1016</div></td><td class="s">sub _parent        { return $_[0]-&gt;{parent};       }</td></tr>
<tr><td class="h">5196</td><td><div class="c3">76</div><div class="c3">76</div><div class="c3">76</div><div class="c3">296</div><div class="c3">76</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5196">76</a></div></td><td></td><td><div>200</div><div>114</div><div>329</div><div>1301</div><div>543</div></td><td class="s">sub _next_siblings { my $elt= shift; my @siblings; while( $elt= $elt-&gt;{next_sibling}) { push @siblings, $elt; } return @siblings; }</td></tr>
<tr><td class="h">5197</td><td><div class="c3">89</div><div class="c3">89</div><div class="c3">89</div><div class="c3">167</div><div class="c3">89</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5197">89</a></div></td><td></td><td><div>282</div><div>125</div><div>403</div><div>750</div><div>741</div></td><td class="s">sub _prev_siblings { my $elt= shift; my @siblings; while( $elt= $elt-&gt;{prev_sibling}) { push @siblings, $elt; } return @siblings; }</td></tr>
<tr><td class="h">5198</td><td colspan="7"></td></tr><tr><td class="h">5199</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># sets a field</td></tr>
<tr><td class="h">5200</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># arguments $record, $cond, @content</td></tr>
<tr><td class="h">5201</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_field</td></tr>
<tr><td class="h">5202</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5202">3</a></div></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;{ my $record = shift;</td></tr>
<tr><td class="h">5203</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $cond = shift;</td></tr>
<tr><td class="h">5204</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $child= $record-&gt;first_child( $cond);</td></tr>
<tr><td class="h">5205</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5205">100</a></div></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $child)</td></tr>
<tr><td class="h">5206</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $child-&gt;set_content( @_); }</td></tr>
<tr><td class="h">5207</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">5208</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5208">100</a></div></td><td></td><td></td><td></td><td><div>111</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $cond=~ m{^\s*($REG_NAME)})</td></tr>
<tr><td class="h">5209</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $gi= $1;</td></tr>
<tr><td class="h">5210</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$child= $record-&gt;insert_new_elt( last_child =&gt; $gi, @_); </td></tr>
<tr><td class="h">5211</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5212</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">5213</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;can&#39;t create a field name from $cond&quot;; }</td></tr>
<tr><td class="h">5214</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} </td></tr>
<tr><td class="h">5215</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $child;</td></tr>
<tr><td class="h">5216</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5217</td><td colspan="7"></td></tr><tr><td class="h">5218</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_last_child </td></tr>
<tr><td class="h">5219</td><td><div class="c3">29</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5219">29</a></div></td><td></td><td><div>90</div></td><td class="s">&nbsp;&nbsp;{ delete $_[0]-&gt;{empty};</td></tr>
<tr><td class="h">5220</td><td><div class="c3">29</div></td><td></td><td></td><td></td><td></td><td><div>110</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$_[0]-&gt;{&#39;last_child&#39;}= $_[1];</td></tr>
<tr><td class="h">5221</td><td><div class="c3">29</div><div class="c3">29</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L5221">50</a></div></td><td></td><td></td><td></td><td><div>102</div><div>164</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $XML::Twig::weakrefs) { weaken( $_[0]-&gt;{&#39;last_child&#39;}); }</td></tr>
<tr><td class="h">5222</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5223</td><td colspan="7"></td></tr><tr><td class="h">5224</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub last_child</td></tr>
<tr><td class="h">5225</td><td><div class="c3">53</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5225">53</a></div></td><td></td><td><div>151</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5226</td><td><div class="c3">53</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5226">67</a></div></td><td></td><td></td><td><div>413</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $cond= shift || return $elt-&gt;{last_child};</td></tr>
<tr><td class="h">5227</td><td><div class="c3">26</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5227">67</a></div></td><td></td><td></td><td><div>129</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $test_cond= ($cond_cache{$cond} ||= _install_cond( $cond));</td></tr>
<tr><td class="h">5228</td><td><div class="c3">26</div></td><td></td><td></td><td></td><td></td><td><div>88</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $child= $elt-&gt;{last_child};</td></tr>
<tr><td class="h">5229</td><td><div class="c3">26</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L5229">100</a></div></td><td></td><td></td><td><div>181</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $child &amp;&amp; !$test_cond-&gt;( $child) )</td></tr>
<tr><td class="h">5230</td><td><div class="c3">24</div></td><td></td><td></td><td></td><td></td><td><div>195</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $child= $child-&gt;{prev_sibling}; }</td></tr>
<tr><td class="h">5231</td><td><div class="c3">26</div></td><td></td><td></td><td></td><td></td><td><div>141</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $child</td></tr>
<tr><td class="h">5232</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5233</td><td colspan="7"></td></tr><tr><td class="h">5234</td><td colspan="7"></td></tr><tr><td class="h">5235</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_prev_sibling </td></tr>
<tr><td class="h">5236</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5236">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;{ $_[0]-&gt;{&#39;prev_sibling&#39;}= $_[1]; </td></tr>
<tr><td class="h">5237</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L5237">0</a></div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $XML::Twig::weakrefs) { weaken( $_[0]-&gt;{&#39;prev_sibling&#39;}); } </td></tr>
<tr><td class="h">5238</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5239</td><td colspan="7"></td></tr><tr><td class="h">5240</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub prev_sibling</td></tr>
<tr><td class="h">5241</td><td><div class="c3">99</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5241">99</a></div></td><td></td><td><div>526</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5242</td><td><div class="c3">99</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5242">67</a></div></td><td></td><td></td><td><div>562</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $cond= shift || return $elt-&gt;{prev_sibling};</td></tr>
<tr><td class="h">5243</td><td><div class="c3">57</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5243">67</a></div></td><td></td><td></td><td><div>1383</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $test_cond= ($cond_cache{$cond} ||= _install_cond( $cond));</td></tr>
<tr><td class="h">5244</td><td><div class="c3">57</div></td><td></td><td></td><td></td><td></td><td><div>186</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $sibling= $elt-&gt;{prev_sibling};</td></tr>
<tr><td class="h">5245</td><td><div class="c3">57</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L5245">100</a></div></td><td></td><td></td><td><div>325</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $sibling &amp;&amp; !$test_cond-&gt;( $sibling) )</td></tr>
<tr><td class="h">5246</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>116</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $sibling= $sibling-&gt;{prev_sibling}; }</td></tr>
<tr><td class="h">5247</td><td><div class="c3">57</div></td><td></td><td></td><td></td><td></td><td><div>279</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $sibling;</td></tr>
<tr><td class="h">5248</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5249</td><td colspan="7"></td></tr><tr><td class="h">5250</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5250">0</a></div></td><td></td><td><div>0</div></td><td class="s">sub set_next_sibling { $_[0]-&gt;{&#39;next_sibling&#39;}= $_[1]; }</td></tr>
<tr><td class="h">5251</td><td colspan="7"></td></tr><tr><td class="h">5252</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub next_sibling</td></tr>
<tr><td class="h">5253</td><td><div class="c3">490</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5253">490</a></div></td><td></td><td><div>1069</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5254</td><td><div class="c3">490</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5254">67</a></div></td><td></td><td></td><td><div>2954</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $cond= shift || return $elt-&gt;{next_sibling};</td></tr>
<tr><td class="h">5255</td><td><div class="c3">162</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5255">33</a></div></td><td></td><td></td><td><div>564</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $test_cond= ($cond_cache{$cond} ||= _install_cond( $cond));</td></tr>
<tr><td class="h">5256</td><td><div class="c3">162</div></td><td></td><td></td><td></td><td></td><td><div>508</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $sibling= $elt-&gt;{next_sibling};</td></tr>
<tr><td class="h">5257</td><td><div class="c3">162</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L5257">100</a></div></td><td></td><td></td><td><div>963</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $sibling &amp;&amp; !$test_cond-&gt;( $sibling) )</td></tr>
<tr><td class="h">5258</td><td><div class="c3">68</div></td><td></td><td></td><td></td><td></td><td><div>488</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $sibling= $sibling-&gt;{next_sibling}; }</td></tr>
<tr><td class="h">5259</td><td><div class="c3">162</div></td><td></td><td></td><td></td><td></td><td><div>840</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $sibling;</td></tr>
<tr><td class="h">5260</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5261</td><td colspan="7"></td></tr><tr><td class="h">5262</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># methods dealing with the class attribute, convenient if you work with xhtml</td></tr>
<tr><td class="h">5263</td><td><div class="c3">45</div><div class="c3">45</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5263">45</a></div></td><td></td><td><div>147</div><div>677</div></td><td class="s">sub class     { my( $elt)= @_; return $elt-&gt;{&#39;att&#39;}-&gt;{&#39;class&#39;}; }</td></tr>
<tr><td class="h">5264</td><td><div class="c3">13</div><div class="c3">13</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5264">13</a></div></td><td></td><td><div>52</div><div>50</div></td><td class="s">sub set_class { my( $elt, $class)= @_; $elt-&gt;set_att( class =&gt; $class); }</td></tr>
<tr><td class="h">5265</td><td colspan="7"></td></tr><tr><td class="h">5266</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># adds a class to an element</td></tr>
<tr><td class="h">5267</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub add_to_class</td></tr>
<tr><td class="h">5268</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5268">6</a></div></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $new_class)= @_;</td></tr>
<tr><td class="h">5269</td><td><div class="c3">6</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5269">100</a></div></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt unless $new_class;</td></tr>
<tr><td class="h">5270</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $class= $elt-&gt;class;</td></tr>
<tr><td class="h">5271</td><td><div class="c3">5</div><div class="c3">8</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L5271">50</a></div></td><td></td><td></td><td></td><td><div>30</div><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %class= $class ? map { $_ =&gt; 1 } split /\s+/, $class : ();</td></tr>
<tr><td class="h">5272</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$class{$new_class}= 1;</td></tr>
<tr><td class="h">5273</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;set_class( join( &#39; &#39;, sort keys %class));</td></tr>
<tr><td class="h">5274</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5275</td><td colspan="7"></td></tr><tr><td class="h">5276</td><td><div class="c3">2</div><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5276">2</a></div></td><td></td><td><div>8</div><div>11</div></td><td class="s">sub att_to_class      { my( $elt, $att)= @_; $elt-&gt;set_class( $elt-&gt;{&#39;att&#39;}-&gt;{$att}); }</td></tr>
<tr><td class="h">5277</td><td><div class="c3">2</div><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5277">2</a></div></td><td></td><td><div>9</div><div>11</div></td><td class="s">sub add_att_to_class  { my( $elt, $att)= @_; $elt-&gt;add_to_class( $elt-&gt;{&#39;att&#39;}-&gt;{$att}); }</td></tr>
<tr><td class="h">5278</td><td><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5278">1</a></div></td><td></td><td><div>5</div><div>6</div></td><td class="s">sub move_att_to_class { my( $elt, $att)= @_; $elt-&gt;add_to_class( $elt-&gt;{&#39;att&#39;}-&gt;{$att});</td></tr>
<tr><td class="h">5279</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;del_att( $att); </td></tr>
<tr><td class="h">5280</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5281</td><td><div class="c3">2</div><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5281">2</a></div></td><td></td><td><div>7</div><div>10</div></td><td class="s">sub tag_to_class      { my( $elt)= @_; $elt-&gt;set_class( $elt-&gt;tag);    }</td></tr>
<tr><td class="h">5282</td><td><div class="c3">2</div><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5282">2</a></div></td><td></td><td><div>6</div><div>9</div></td><td class="s">sub add_tag_to_class  { my( $elt)= @_; $elt-&gt;add_to_class( $elt-&gt;tag); }</td></tr>
<tr><td class="h">5283</td><td><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5283">1</a></div></td><td></td><td><div>5</div><div>4</div><div>5</div></td><td class="s">sub set_tag_class     { my( $elt, $new_tag)= @_; $elt-&gt;add_tag_to_class; $elt-&gt;set_tag( $new_tag); }</td></tr>
<tr><td class="h">5284</td><td colspan="7"></td></tr><tr><td class="h">5285</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub tag_to_span       </td></tr>
<tr><td class="h">5286</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5286">2</a></div></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;{ my( $elt)= @_; </td></tr>
<tr><td class="h">5287</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5287">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5287">67</a></div></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;set_class( $elt-&gt;tag) unless( $elt-&gt;tag eq &#39;span&#39; &amp;&amp; $elt-&gt;class); # set class to span unless it would mean replacing it with span</td></tr>
<tr><td class="h">5288</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;set_tag( &#39;span&#39;); </td></tr>
<tr><td class="h">5289</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5290</td><td colspan="7"></td></tr><tr><td class="h">5291</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub tag_to_div    </td></tr>
<tr><td class="h">5292</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5292">2</a></div></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;{ my( $elt)= @_; </td></tr>
<tr><td class="h">5293</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5293">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5293">67</a></div></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;set_class( $elt-&gt;tag) unless( $elt-&gt;tag eq &#39;div&#39; &amp;&amp; $elt-&gt;class); # set class to div unless it would mean replacing it with div</td></tr>
<tr><td class="h">5294</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;set_tag( &#39;div&#39;);</td></tr>
<tr><td class="h">5295</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5296</td><td colspan="7"></td></tr><tr><td class="h">5297</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub in_class          </td></tr>
<tr><td class="h">5298</td><td><div class="c3">14</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5298">14</a></div></td><td></td><td><div>58</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $class)= @_;</td></tr>
<tr><td class="h">5299</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $elt_class= $elt-&gt;class;</td></tr>
<tr><td class="h">5300</td><td><div class="c3">14</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5300">50</a></div></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return unless( defined $elt_class);</td></tr>
<tr><td class="h">5301</td><td><div class="c3">14</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5301">100</a></div></td><td></td><td></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt-&gt;class=~ m{(?:^|\s)\Q$class\E(?:\s|$)} ? $elt : 0;</td></tr>
<tr><td class="h">5302</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5303</td><td colspan="7"></td></tr><tr><td class="h">5304</td><td colspan="7"></td></tr><tr><td class="h">5305</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># get or set all attributes</td></tr>
<tr><td class="h">5306</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># argument can be a hash or a hashref</td></tr>
<tr><td class="h">5307</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_atts </td></tr>
<tr><td class="h">5308</td><td><div class="c3">10439</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5308">10439</a></div></td><td></td><td><div>23115</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5309</td><td><div class="c3">10439</div></td><td></td><td></td><td></td><td></td><td><div>15058</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %atts;</td></tr>
<tr><td class="h">5310</td><td><div class="c3">10439</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5310">100</a></div></td><td></td><td></td><td></td><td><div>25117</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;tie %atts, &#39;Tie::IxHash&#39; if( keep_atts_order());</td></tr>
<tr><td class="h">5311</td><td><div class="c3">10439</div><div class="c3">72</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5311">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L5311">100</a></div></td><td></td><td></td><td><div>108125</div><div>400</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;%atts= ( isa( $_[0] || &#39;&#39;, &#39;HASH&#39;)) ? %{$_[0]} : @_;</td></tr>
<tr><td class="h">5312</td><td><div class="c3">10439</div></td><td></td><td></td><td></td><td></td><td><div>46471</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{att}= \%atts;</td></tr>
<tr><td class="h">5313</td><td><div class="c3">10439</div><div class="c3">507</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5313">100</a></div></td><td></td><td></td><td></td><td><div>35184</div><div>2144</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( exists $atts{$ID}) { $elt-&gt;_set_id( $atts{$ID}); }</td></tr>
<tr><td class="h">5314</td><td><div class="c3">10439</div></td><td></td><td></td><td></td><td></td><td><div>26288</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">5315</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5316</td><td colspan="7"></td></tr><tr><td class="h">5317</td><td><div class="c3">1684</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5317">1684</a></div></td><td></td><td><div>13735</div></td><td class="s">sub atts      { return $_[0]-&gt;{att};           }</td></tr>
<tr><td class="h">5318</td><td><div class="c3">562</div><div class="c3">562</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5318">562</a></div></td><td></td><td><div>1229</div><div>5748</div></td><td class="s">sub att_names { return sort keys %{$_[0]-&gt;{att}};   }</td></tr>
<tr><td class="h">5319</td><td><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5319">3</a></div></td><td></td><td><div>17</div><div>13</div></td><td class="s">sub del_atts  { $_[0]-&gt;{att}={}; return $_[0]; }</td></tr>
<tr><td class="h">5320</td><td colspan="7"></td></tr><tr><td class="h">5321</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># get or set a single attribute (set works for several atts)</td></tr>
<tr><td class="h">5322</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_att </td></tr>
<tr><td class="h">5323</td><td><div class="c3">93</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5323">93</a></div></td><td></td><td><div>285</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5324</td><td colspan="7"></td></tr><tr><td class="h">5325</td><td><div class="c3">93</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5325">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5325">25</a></div></td><td></td><td></td><td><div>817</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $_[0] &amp;&amp; ref( $_[0]) &amp;&amp; !$_[1]) </td></tr>
<tr><td class="h">5326</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;improper call to set_att, usage is \$elt-&gt;set_att( att1 =&gt; &#39;val1&#39;, att2 =&gt; &#39;val2&#39;,...)&quot;; }</td></tr>
<tr><td class="h">5327</td><td colspan="7"></td></tr><tr><td class="h">5328</td><td><div class="c3">93</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5328">100</a></div></td><td></td><td></td><td></td><td><div>355</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( $elt-&gt;{att})</td></tr>
<tr><td class="h">5329</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;{att}={};</td></tr>
<tr><td class="h">5330</td><td><div class="c3">4</div><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5330">100</a></div></td><td></td><td></td><td></td><td><div>14</div><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tie %{$elt-&gt;{att}}, &#39;Tie::IxHash&#39; if( keep_atts_order());</td></tr>
<tr><td class="h">5331</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5332</td><td colspan="7"></td></tr><tr><td class="h">5333</td><td><div class="c3">93</div></td><td></td><td></td><td></td><td></td><td><div>284</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while(@_) </td></tr>
<tr><td class="h">5334</td><td><div class="c3">93</div></td><td></td><td></td><td></td><td></td><td><div>482</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my( $att, $val)= (shift, shift);</td></tr>
<tr><td class="h">5335</td><td><div class="c3">93</div></td><td></td><td></td><td></td><td></td><td><div>580</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{att}-&gt;{$att}= $val;</td></tr>
<tr><td class="h">5336</td><td><div class="c3">93</div><div class="c3">55</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5336">100</a></div></td><td></td><td></td><td></td><td><div>411</div><div>187</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $att eq $ID) { $elt-&gt;_set_id( $val); } </td></tr>
<tr><td class="h">5337</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5338</td><td><div class="c3">93</div></td><td></td><td></td><td></td><td></td><td><div>272</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">5339</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5340</td><td colspan="7"></td></tr><tr><td class="h">5341</td><td><div class="c3">404</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5341">404</a></div></td><td></td><td><div>4964</div></td><td class="s">sub att { return $_[0]-&gt;{att}-&gt;{$_[1]}; }</td></tr>
<tr><td class="h">5342</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub del_att </td></tr>
<tr><td class="h">5343</td><td><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5343">44</a></div></td><td></td><td><div>108</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5344</td><td><div class="c3">44</div><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>139</div><div>257</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( @_) { delete $elt-&gt;{&#39;att&#39;}-&gt;{shift()}; }</td></tr>
<tr><td class="h">5345</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>177</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">5346</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5347</td><td colspan="7"></td></tr><tr><td class="h">5348</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5348">0</a></div></td><td></td><td><div>0</div></td><td class="s">sub att_exists { return exists  $_[0]-&gt;{att}-&gt;{$_[1]}; }</td></tr>
<tr><td class="h">5349</td><td colspan="7"></td></tr><tr><td class="h">5350</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># delete an attribute from all descendants of an element</td></tr>
<tr><td class="h">5351</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub strip_att</td></tr>
<tr><td class="h">5352</td><td><div class="c3">13</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5352">13</a></div></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $att)= @_;</td></tr>
<tr><td class="h">5353</td><td><div class="c3">13</div><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>22</div><div>73</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$_-&gt;del_att( $att) foreach ($elt-&gt;descendants_or_self( qq{*[\@$att]}));</td></tr>
<tr><td class="h">5354</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>67</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">5355</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5356</td><td colspan="7"></td></tr><tr><td class="h">5357</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub change_att_name</td></tr>
<tr><td class="h">5358</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5358">2</a></div></td><td></td><td><div>333</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $old_name, $new_name)= @_;</td></tr>
<tr><td class="h">5359</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $value= $elt-&gt;{&#39;att&#39;}-&gt;{$old_name};</td></tr>
<tr><td class="h">5360</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5360">100</a></div></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt unless( defined $value);</td></tr>
<tr><td class="h">5361</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;del_att( $old_name)</td></tr>
<tr><td class="h">5362</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;set_att( $new_name =&gt; $value);</td></tr>
<tr><td class="h">5363</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">5364</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5365</td><td colspan="7"></td></tr><tr><td class="h">5366</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub lc_attnames</td></tr>
<tr><td class="h">5367</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5367">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5368</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $att ($elt-&gt;att_names)</td></tr>
<tr><td class="h">5369</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L5369">0</a></div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $att ne lc $att) { $elt-&gt;change_att_name( $att, lc $att); } }</td></tr>
<tr><td class="h">5370</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">5371</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5372</td><td colspan="7"></td></tr><tr><td class="h">5373</td><td><div class="c3">47</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5373">47</a></div></td><td></td><td><div>227</div></td><td class="s">sub set_twig_current { $_[0]-&gt;{twig_current}=1; }</td></tr>
<tr><td class="h">5374</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5374">1</a></div></td><td></td><td><div>5</div></td><td class="s">sub del_twig_current { delete $_[0]-&gt;{twig_current}; }</td></tr>
<tr><td class="h">5375</td><td colspan="7"></td></tr><tr><td class="h">5376</td><td colspan="7"></td></tr><tr><td class="h">5377</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># get or set the id attribute</td></tr>
<tr><td class="h">5378</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_id </td></tr>
<tr><td class="h">5379</td><td><div class="c3">51</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5379">51</a></div></td><td></td><td><div>221</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $id)= @_;</td></tr>
<tr><td class="h">5380</td><td><div class="c3">51</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5380">100</a></div></td><td></td><td></td><td></td><td><div>302</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;del_id() if( exists $elt-&gt;{att}-&gt;{$ID});</td></tr>
<tr><td class="h">5381</td><td><div class="c3">51</div></td><td></td><td></td><td></td><td></td><td><div>239</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;set_att($ID, $id); </td></tr>
<tr><td class="h">5382</td><td><div class="c3">51</div></td><td></td><td></td><td></td><td></td><td><div>156</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;_set_id( $id);</td></tr>
<tr><td class="h">5383</td><td><div class="c3">51</div></td><td></td><td></td><td></td><td></td><td><div>153</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">5384</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5385</td><td colspan="7"></td></tr><tr><td class="h">5386</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># only set id, does not update the attribute value</td></tr>
<tr><td class="h">5387</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _set_id</td></tr>
<tr><td class="h">5388</td><td><div class="c3">614</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5388">614</a></div></td><td></td><td><div>2278</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $id)= @_;</td></tr>
<tr><td class="h">5389</td><td><div class="c3">614</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5389">67</a></div></td><td></td><td></td><td><div>2102</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t= $elt-&gt;twig || $elt;</td></tr>
<tr><td class="h">5390</td><td><div class="c3">614</div></td><td></td><td></td><td></td><td></td><td><div>3169</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_id_list}-&gt;{$id}= $elt;</td></tr>
<tr><td class="h">5391</td><td><div class="c3">614</div><div class="c3">611</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5391">100</a></div></td><td></td><td></td><td></td><td><div>1835</div><div>3891</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $XML::Twig::weakrefs) { weaken(  $t-&gt;{twig_id_list}-&gt;{$id}); }</td></tr>
<tr><td class="h">5392</td><td><div class="c3">614</div></td><td></td><td></td><td></td><td></td><td><div>1710</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">5393</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5394</td><td colspan="7"></td></tr><tr><td class="h">5395</td><td><div class="c3">747</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5395">747</a></div></td><td></td><td><div>6917</div></td><td class="s">sub id { return $_[0]-&gt;{att}-&gt;{$ID}; }</td></tr>
<tr><td class="h">5396</td><td colspan="7"></td></tr><tr><td class="h">5397</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># methods used to add ids to elements that don&#39;t have one</td></tr>
<tr><td class="h">5398</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">BEGIN </td></tr>
<tr><td class="h">5399</td><td><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5399">92</a></div></td><td></td><td><div>749</div></td><td class="s">{ my $id_nb   = &quot;0001&quot;;</td></tr>
<tr><td class="h">5400</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>514</div></td><td class="s">&nbsp;&nbsp;my $id_seed = &quot;twig_id_&quot;;</td></tr>
<tr><td class="h">5401</td><td colspan="7"></td></tr><tr><td class="h">5402</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub set_id_seed</td></tr>
<tr><td class="h">5403</td><td><div class="c3">2</div><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5403">2</a></div></td><td></td><td><div>5</div><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ $id_seed= $_[1]; $id_nb=1; }</td></tr>
<tr><td class="h">5404</td><td colspan="7"></td></tr><tr><td class="h">5405</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub add_id</td></tr>
<tr><td class="h">5406</td><td><div class="c3">40</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5406">40</a></div></td><td></td><td><div>105</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $elt= shift; </td></tr>
<tr><td class="h">5407</td><td><div class="c3">40</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5407">100</a></div></td><td></td><td></td><td></td><td><div>176</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined $elt-&gt;{&#39;att&#39;}-&gt;{$ID})</td></tr>
<tr><td class="h">5408</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return $elt-&gt;{&#39;att&#39;}-&gt;{$ID}; }</td></tr>
<tr><td class="h">5409</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">5410</td><td><div class="c3">39</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5410">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5410">25</a></div></td><td></td><td></td><td><div>332</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;set_id( $_[0] &amp;&amp; ref( $_[0]) &amp;&amp; isa( $_[0], &#39;CODE&#39;) ? $_[0]-&gt;( $elt) : $id_seed . $id_nb++); }</td></tr>
<tr><td class="h">5411</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5412</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">5413</td><td colspan="7"></td></tr><tr><td class="h">5414</td><td colspan="7"></td></tr><tr><td class="h">5415</td><td colspan="7"></td></tr><tr><td class="h">5416</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># delete the id attribute and remove the element from the id list</td></tr>
<tr><td class="h">5417</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub del_id </td></tr>
<tr><td class="h">5418</td><td><div class="c3">15</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5418">15</a></div></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5419</td><td><div class="c3">15</div><div class="c0">0</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5419">50</a></div></td><td></td><td></td><td></td><td><div>64</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( exists $elt-&gt;{&#39;att&#39;}) { return $elt }; </td></tr>
<tr><td class="h">5420</td><td><div class="c3">15</div><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5420">100</a></div></td><td></td><td></td><td></td><td><div>75</div><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( exists $elt-&gt;{&#39;att&#39;}-&gt;{$ID}) { return $elt }; </td></tr>
<tr><td class="h">5421</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $id= $elt-&gt;{&#39;att&#39;}-&gt;{$ID};</td></tr>
<tr><td class="h">5422</td><td colspan="7"></td></tr><tr><td class="h">5423</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $elt-&gt;{&#39;att&#39;}-&gt;{$ID}; </td></tr>
<tr><td class="h">5424</td><td colspan="7"></td></tr><tr><td class="h">5425</td><td><div class="c3">10</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5425">67</a></div></td><td></td><td></td><td><div>79</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t= shift || $elt-&gt;twig;</td></tr>
<tr><td class="h">5426</td><td><div class="c3">10</div><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5426">100</a></div></td><td></td><td></td><td></td><td><div>42</div><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( $t) { return $elt; }</td></tr>
<tr><td class="h">5427</td><td><div class="c3">8</div><div class="c3">8</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L5427">50</a></div></td><td></td><td></td><td></td><td><div>44</div><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( exists $t-&gt;{twig_id_list}-&gt;{$id}) { delete $t-&gt;{twig_id_list}-&gt;{$id}; }</td></tr>
<tr><td class="h">5428</td><td colspan="7"></td></tr><tr><td class="h">5429</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">5430</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5431</td><td colspan="7"></td></tr><tr><td class="h">5432</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># return the list of children</td></tr>
<tr><td class="h">5433</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub children</td></tr>
<tr><td class="h">5434</td><td><div class="c3">146</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5434">146</a></div></td><td></td><td><div>388</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5435</td><td><div class="c3">146</div></td><td></td><td></td><td></td><td></td><td><div>231</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @children;</td></tr>
<tr><td class="h">5436</td><td><div class="c3">146</div></td><td></td><td></td><td></td><td></td><td><div>949</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $child= $elt-&gt;first_child( @_);</td></tr>
<tr><td class="h">5437</td><td><div class="c3">146</div></td><td></td><td></td><td></td><td></td><td><div>525</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $child) </td></tr>
<tr><td class="h">5438</td><td><div class="c3">421</div></td><td></td><td></td><td></td><td></td><td><div>877</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ push @children, $child;</td></tr>
<tr><td class="h">5439</td><td><div class="c3">421</div></td><td></td><td></td><td></td><td></td><td><div>1347</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$child= $child-&gt;next_sibling( @_);</td></tr>
<tr><td class="h">5440</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} </td></tr>
<tr><td class="h">5441</td><td><div class="c3">146</div></td><td></td><td></td><td></td><td></td><td><div>669</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @children;</td></tr>
<tr><td class="h">5442</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5443</td><td colspan="7"></td></tr><tr><td class="h">5444</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _children</td></tr>
<tr><td class="h">5445</td><td><div class="c3">3993</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5445">3993</a></div></td><td></td><td><div>9965</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5446</td><td><div class="c3">3993</div></td><td></td><td></td><td></td><td></td><td><div>8539</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @children=();</td></tr>
<tr><td class="h">5447</td><td><div class="c3">3993</div></td><td></td><td></td><td></td><td></td><td><div>11875</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $child= $elt-&gt;_first_child();</td></tr>
<tr><td class="h">5448</td><td><div class="c3">3993</div></td><td></td><td></td><td></td><td></td><td><div>14025</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $child) </td></tr>
<tr><td class="h">5449</td><td><div class="c3">3973</div></td><td></td><td></td><td></td><td></td><td><div>8404</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ push @children, $child;</td></tr>
<tr><td class="h">5450</td><td><div class="c3">3973</div></td><td></td><td></td><td></td><td></td><td><div>17750</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$child= $child-&gt;{next_sibling};</td></tr>
<tr><td class="h">5451</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} </td></tr>
<tr><td class="h">5452</td><td><div class="c3">3993</div></td><td></td><td></td><td></td><td></td><td><div>15602</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @children;</td></tr>
<tr><td class="h">5453</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5454</td><td colspan="7"></td></tr><tr><td class="h">5455</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub children_copy</td></tr>
<tr><td class="h">5456</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5456">1</a></div></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5457</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>2</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @children;</td></tr>
<tr><td class="h">5458</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $child= $elt-&gt;first_child( @_);</td></tr>
<tr><td class="h">5459</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $child) </td></tr>
<tr><td class="h">5460</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ push @children, $child-&gt;copy;</td></tr>
<tr><td class="h">5461</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$child= $child-&gt;next_sibling( @_);</td></tr>
<tr><td class="h">5462</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} </td></tr>
<tr><td class="h">5463</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @children;</td></tr>
<tr><td class="h">5464</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5465</td><td colspan="7"></td></tr><tr><td class="h">5466</td><td colspan="7"></td></tr><tr><td class="h">5467</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub children_count</td></tr>
<tr><td class="h">5468</td><td><div class="c3">768</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5468">768</a></div></td><td></td><td><div>1715</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5469</td><td><div class="c3">768</div></td><td></td><td></td><td></td><td></td><td><div>1704</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $cond= shift;</td></tr>
<tr><td class="h">5470</td><td><div class="c3">768</div></td><td></td><td></td><td></td><td></td><td><div>1385</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $count=0;</td></tr>
<tr><td class="h">5471</td><td><div class="c3">768</div></td><td></td><td></td><td></td><td></td><td><div>2248</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $child= $elt-&gt;{first_child};</td></tr>
<tr><td class="h">5472</td><td><div class="c3">768</div></td><td></td><td></td><td></td><td></td><td><div>2164</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $child)</td></tr>
<tr><td class="h">5473</td><td><div class="c3">1128</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5473">100</a></div></td><td></td><td></td><td></td><td><div>3344</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $count++ if( $child-&gt;passes( $cond)); </td></tr>
<tr><td class="h">5474</td><td><div class="c3">1128</div></td><td></td><td></td><td></td><td></td><td><div>5189</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$child= $child-&gt;{next_sibling};</td></tr>
<tr><td class="h">5475</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5476</td><td><div class="c3">768</div></td><td></td><td></td><td></td><td></td><td><div>2770</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $count;</td></tr>
<tr><td class="h">5477</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5478</td><td colspan="7"></td></tr><tr><td class="h">5479</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub children_text</td></tr>
<tr><td class="h">5480</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5480">3</a></div></td><td></td><td><div>346</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5481</td><td><div class="c3">4</div><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>15</div><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return wantarray() ? map { $_-&gt;text} $elt-&gt;children( @_)</td></tr>
<tr><td class="h">5482</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5482">100</a></div></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: join( &#39;&#39;, map { $_-&gt;text} $elt-&gt;children( @_) )</td></tr>
<tr><td class="h">5483</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;</td></tr>
<tr><td class="h">5484</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5485</td><td colspan="7"></td></tr><tr><td class="h">5486</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub children_trimmed_text</td></tr>
<tr><td class="h">5487</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5487">2</a></div></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5488</td><td><div class="c3">2</div><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>7</div><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return wantarray() ? map { $_-&gt;trimmed_text} $elt-&gt;children( @_)</td></tr>
<tr><td class="h">5489</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5489">100</a></div></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: join( &#39;&#39;, map { $_-&gt;trimmed_text} $elt-&gt;children( @_) )</td></tr>
<tr><td class="h">5490</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;</td></tr>
<tr><td class="h">5491</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5492</td><td colspan="7"></td></tr><tr><td class="h">5493</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub all_children_are</td></tr>
<tr><td class="h">5494</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5494">3</a></div></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;{ my( $parent, $cond)= @_;</td></tr>
<tr><td class="h">5495</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $child ($parent-&gt;_children)</td></tr>
<tr><td class="h">5496</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5496">100</a></div></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return 0 unless( $child-&gt;passes( $cond)); }</td></tr>
<tr><td class="h">5497</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">5498</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5499</td><td colspan="7"></td></tr><tr><td class="h">5500</td><td colspan="7"></td></tr><tr><td class="h">5501</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub ancestors</td></tr>
<tr><td class="h">5502</td><td><div class="c3">1017</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5502">1017</a></div></td><td></td><td><div>2932</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $cond)= @_;</td></tr>
<tr><td class="h">5503</td><td><div class="c3">1017</div></td><td></td><td></td><td></td><td></td><td><div>1647</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @ancestors;</td></tr>
<tr><td class="h">5504</td><td><div class="c3">1017</div></td><td></td><td></td><td></td><td></td><td><div>3939</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $elt-&gt;{parent})</td></tr>
<tr><td class="h">5505</td><td><div class="c3">1992</div></td><td></td><td></td><td></td><td></td><td><div>5145</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt= $elt-&gt;{parent};</td></tr>
<tr><td class="h">5506</td><td><div class="c3">1992</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5506">100</a></div></td><td></td><td></td><td></td><td><div>5457</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @ancestors, $elt if( $elt-&gt;passes( $cond));</td></tr>
<tr><td class="h">5507</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5508</td><td><div class="c3">1017</div></td><td></td><td></td><td></td><td></td><td><div>4615</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @ancestors;</td></tr>
<tr><td class="h">5509</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5510</td><td colspan="7"></td></tr><tr><td class="h">5511</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub ancestors_or_self</td></tr>
<tr><td class="h">5512</td><td><div class="c3">12</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5512">12</a></div></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $cond)= @_;</td></tr>
<tr><td class="h">5513</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @ancestors;</td></tr>
<tr><td class="h">5514</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $elt)</td></tr>
<tr><td class="h">5515</td><td><div class="c3">38</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5515">100</a></div></td><td></td><td></td><td></td><td><div>107</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ push @ancestors, $elt if( $elt-&gt;passes( $cond));</td></tr>
<tr><td class="h">5516</td><td><div class="c3">38</div></td><td></td><td></td><td></td><td></td><td><div>181</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt= $elt-&gt;{parent};</td></tr>
<tr><td class="h">5517</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5518</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>56</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @ancestors;</td></tr>
<tr><td class="h">5519</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5520</td><td colspan="7"></td></tr><tr><td class="h">5521</td><td colspan="7"></td></tr><tr><td class="h">5522</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _ancestors</td></tr>
<tr><td class="h">5523</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5523">2</a></div></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $include_self)= @_;</td></tr>
<tr><td class="h">5524</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5524">100</a></div></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @ancestors= $include_self ? ($elt) : ();</td></tr>
<tr><td class="h">5525</td><td><div class="c3">2</div><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>12</div><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $elt= $elt-&gt;{parent}) { push @ancestors, $elt; }</td></tr>
<tr><td class="h">5526</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @ancestors;</td></tr>
<tr><td class="h">5527</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5528</td><td colspan="7"></td></tr><tr><td class="h">5529</td><td colspan="7"></td></tr><tr><td class="h">5530</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub inherit_att</td></tr>
<tr><td class="h">5531</td><td><div class="c3">4843</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5531">4843</a></div></td><td></td><td><div>12659</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5532</td><td><div class="c3">4843</div></td><td></td><td></td><td></td><td></td><td><div>11304</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $att= shift;</td></tr>
<tr><td class="h">5533</td><td><div class="c3">4843</div><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>14621</div><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %tags= map { ($_, 1) } @_;</td></tr>
<tr><td class="h">5534</td><td colspan="7"></td></tr><tr><td class="h">5535</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;do </td></tr>
<tr><td class="h">5536</td><td><div class="c3">4843</div><div class="c3">6087</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5536">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L5536">100</a></div></td><td></td><td></td><td><div>7867</div><div>53331</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if(   (defined $elt-&gt;{&#39;att&#39;}-&gt;{$att})</td></tr>
<tr><td class="h">5537</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; ( !%tags || $tags{$XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}]})</td></tr>
<tr><td class="h">5538</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">5539</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>81</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return $elt-&gt;{&#39;att&#39;}-&gt;{$att}; }</td></tr>
<tr><td class="h">5540</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} while( $elt= $elt-&gt;{parent});</td></tr>
<tr><td class="h">5541</td><td><div class="c3">4835</div></td><td></td><td></td><td></td><td></td><td><div>42981</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return undef;</td></tr>
<tr><td class="h">5542</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5543</td><td colspan="7"></td></tr><tr><td class="h">5544</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _inherit_att_through_cut</td></tr>
<tr><td class="h">5545</td><td><div class="c3">64</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5545">64</a></div></td><td></td><td><div>144</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5546</td><td><div class="c3">64</div></td><td></td><td></td><td></td><td></td><td><div>149</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $att= shift;</td></tr>
<tr><td class="h">5547</td><td><div class="c3">64</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>259</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %tags= map { ($_, 1) } @_;</td></tr>
<tr><td class="h">5548</td><td colspan="7"></td></tr><tr><td class="h">5549</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;do </td></tr>
<tr><td class="h">5550</td><td><div class="c3">64</div><div class="c3">121</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5550">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5550">67</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5550">50</a></div></td><td></td><td></td><td><div>101</div><div>1219</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if(   (defined $elt-&gt;{&#39;att&#39;}-&gt;{$att})</td></tr>
<tr><td class="h">5551</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; ( !%tags || $tags{$XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}]})</td></tr>
<tr><td class="h">5552</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">5553</td><td><div class="c3">40</div></td><td></td><td></td><td></td><td></td><td><div>343</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return $elt-&gt;{&#39;att&#39;}-&gt;{$att}; }</td></tr>
<tr><td class="h">5554</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} while( $elt= $elt-&gt;{parent} || $elt-&gt;former_parent);</td></tr>
<tr><td class="h">5555</td><td><div class="c3">24</div></td><td></td><td></td><td></td><td></td><td><div>223</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return undef;</td></tr>
<tr><td class="h">5556</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5557</td><td colspan="7"></td></tr><tr><td class="h">5558</td><td colspan="7"></td></tr><tr><td class="h">5559</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub current_ns_prefixes</td></tr>
<tr><td class="h">5560</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5560">3</a></div></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5561</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %prefix;</td></tr>
<tr><td class="h">5562</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5562">100</a></div></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$prefix{&#39;&#39;}=1 if( $elt-&gt;namespace( &#39;&#39;));</td></tr>
<tr><td class="h">5563</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $elt)</td></tr>
<tr><td class="h">5564</td><td><div class="c3">6</div><div class="c3">3</div><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>38</div><div>128</div><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my @ns= grep { !m{^xml} } map { m{^([^:]+):} } ($XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}], $elt-&gt;att_names);</td></tr>
<tr><td class="h">5565</td><td><div class="c3">6</div><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>13</div><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$prefix{$_}=1 foreach (@ns);</td></tr>
<tr><td class="h">5566</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt= $elt-&gt;{parent};</td></tr>
<tr><td class="h">5567</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5568</td><td colspan="7"></td></tr><tr><td class="h">5569</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return sort keys %prefix;</td></tr>
<tr><td class="h">5570</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5571</td><td colspan="7"></td></tr><tr><td class="h">5572</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># kinda counter-intuitive actually:</td></tr>
<tr><td class="h">5573</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># the next element is found by looking for the next open tag after from the</td></tr>
<tr><td class="h">5574</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># current one, which is the first child, if it exists, or the next sibling</td></tr>
<tr><td class="h">5575</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># or the first next sibling of an ancestor</td></tr>
<tr><td class="h">5576</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># optional arguments are: </td></tr>
<tr><td class="h">5577</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#   - $subtree_root: a reference to an element, when the next element is not </td></tr>
<tr><td class="h">5578</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#                    within $subtree_root anymore then next_elt returns undef</td></tr>
<tr><td class="h">5579</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#   - $cond: a condition, next_elt returns the next element matching the condition</td></tr>
<tr><td class="h">5580</td><td colspan="7"></td></tr><tr><td class="h">5581</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub next_elt</td></tr>
<tr><td class="h">5582</td><td><div class="c3">412</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5582">412</a></div></td><td></td><td><div>1377</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5583</td><td><div class="c3">412</div></td><td></td><td></td><td></td><td></td><td><div>774</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $subtree_root= 0;</td></tr>
<tr><td class="h">5584</td><td><div class="c3">412</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5584">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L5584">100</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5584">67</a></div></td><td></td><td></td><td><div>5493</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$subtree_root= shift if( defined $_[0] and ref( $_[0]) &amp;&amp; isa( $_[0], &#39;XML::Twig::Elt&#39;));</td></tr>
<tr><td class="h">5585</td><td><div class="c3">412</div></td><td></td><td></td><td></td><td></td><td><div>1079</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $cond= shift;</td></tr>
<tr><td class="h">5586</td><td><div class="c3">412</div></td><td></td><td></td><td></td><td></td><td><div>615</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $next_elt;</td></tr>
<tr><td class="h">5587</td><td colspan="7"></td></tr><tr><td class="h">5588</td><td><div class="c3">412</div></td><td></td><td></td><td></td><td></td><td><div>559</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ind;                                                              # optimization</td></tr>
<tr><td class="h">5589</td><td><div class="c3">412</div></td><td></td><td></td><td></td><td></td><td><div>587</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $test_cond;</td></tr>
<tr><td class="h">5590</td><td><div class="c3">412</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5590">100</a></div></td><td></td><td></td><td></td><td><div>1023</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $cond)                                                            # optimization</td></tr>
<tr><td class="h">5591</td><td><div class="c3">395</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5591">100</a></div></td><td></td><td></td><td></td><td><div>1631</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ unless( defined( $ind= $XML::Twig::gi2index{$cond}) )             # optimization</td></tr>
<tr><td class="h">5592</td><td><div class="c3">290</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5592">67</a></div></td><td></td><td></td><td><div>1217</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $test_cond= ($cond_cache{$cond} ||= _install_cond( $cond)); } # optimization</td></tr>
<tr><td class="h">5593</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}                                                                   # optimization</td></tr>
<tr><td class="h">5594</td><td colspan="7"></td></tr><tr><td class="h">5595</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;do</td></tr>
<tr><td class="h">5596</td><td><div class="c3">412</div><div class="c3">599</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5596">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5596">100</a></div></td><td><div class="c1"><a href="blib-lib-XML-Twig-pm--condition.html#L5596">89</a></div></td><td></td><td></td><td><div>805</div><div>3428</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $next_elt= $elt-&gt;{first_child})</td></tr>
<tr><td class="h">5597</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # simplest case: the elt has a child</td></tr>
<tr><td class="h">5598</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5599</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $next_elt= $elt-&gt;{next_sibling}) </td></tr>
<tr><td class="h">5600</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # no child but a next sibling (just check we stay within the subtree)</td></tr>
<tr><td class="h">5601</td><td colspan="7"></td></tr><tr><td class="h">5602</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# case where elt is subtree_root, is empty and has a sibling</td></tr>
<tr><td class="h">5603</td><td><div class="c3">81</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5603">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L5603">100</a></div></td><td></td><td></td><td><div>545</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return undef if( $subtree_root &amp;&amp; ($elt == $subtree_root));</td></tr>
<tr><td class="h">5604</td><td colspan="7"></td></tr><tr><td class="h">5605</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5606</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">5607</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # case where the element has no child and no next sibling:</td></tr>
<tr><td class="h">5608</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# get the first next sibling of an ancestor, checking subtree_root </td></tr>
<tr><td class="h">5609</td><td colspan="7"></td></tr><tr><td class="h">5610</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# case where elt is subtree_root, is empty and has no sibling</td></tr>
<tr><td class="h">5611</td><td><div class="c3">166</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5611">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L5611">100</a></div></td><td></td><td></td><td><div>1105</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return undef if( $subtree_root &amp;&amp; ($elt == $subtree_root));</td></tr>
<tr><td class="h">5612</td><td colspan="7"></td></tr><tr><td class="h">5613</td><td><div class="c3">164</div></td><td></td><td></td><td></td><td></td><td><div>505</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$next_elt= $elt-&gt;{parent};</td></tr>
<tr><td class="h">5614</td><td colspan="7"></td></tr><tr><td class="h">5615</td><td><div class="c3">164</div></td><td></td><td></td><td></td><td></td><td><div>711</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;until( $next_elt-&gt;{next_sibling})</td></tr>
<tr><td class="h">5616</td><td><div class="c3">157</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5616">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L5616">100</a></div></td><td></td><td></td><td><div>1376</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return undef if( $subtree_root &amp;&amp; ($subtree_root == $next_elt));</td></tr>
<tr><td class="h">5617</td><td><div class="c3">69</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5617">67</a></div></td><td></td><td></td><td><div>443</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$next_elt= $next_elt-&gt;{parent} || return undef;</td></tr>
<tr><td class="h">5618</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5619</td><td><div class="c3">65</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5619">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L5619">100</a></div></td><td></td><td></td><td><div>590</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return undef if( $subtree_root &amp;&amp; ($subtree_root == $next_elt)); </td></tr>
<tr><td class="h">5620</td><td><div class="c3">61</div></td><td></td><td></td><td></td><td></td><td><div>201</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$next_elt= $next_elt-&gt;{next_sibling};   </td></tr>
<tr><td class="h">5621</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}  </td></tr>
<tr><td class="h">5622</td><td><div class="c3">491</div></td><td></td><td></td><td></td><td></td><td><div>9295</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt= $next_elt;                   # just in case we need to loop</td></tr>
<tr><td class="h">5623</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;} until(    ! defined $elt </td></tr>
<tr><td class="h">5624</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| ! defined $cond </td></tr>
<tr><td class="h">5625</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| (defined $ind       &amp;&amp; ($elt-&gt;{gi} eq $ind))   # optimization</td></tr>
<tr><td class="h">5626</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| (defined $test_cond &amp;&amp; ($test_cond-&gt;( $elt)))</td></tr>
<tr><td class="h">5627</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">5628</td><td colspan="7"></td></tr><tr><td class="h">5629</td><td><div class="c3">304</div></td><td></td><td></td><td></td><td></td><td><div>1522</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">5630</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5631</td><td colspan="7"></td></tr><tr><td class="h">5632</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># return the next_elt within the element</td></tr>
<tr><td class="h">5633</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># just call next_elt with the element as first and second argument</td></tr>
<tr><td class="h">5634</td><td><div class="c3">20</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5634">20</a></div></td><td></td><td><div>83</div></td><td class="s">sub first_descendant { return $_[0]-&gt;next_elt( @_); }</td></tr>
<tr><td class="h">5635</td><td colspan="7"></td></tr><tr><td class="h">5636</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># get the last descendant, # then return the element found or call prev_elt with the condition</td></tr>
<tr><td class="h">5637</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub last_descendant</td></tr>
<tr><td class="h">5638</td><td><div class="c3">38</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5638">38</a></div></td><td></td><td><div>142</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $cond)= @_;</td></tr>
<tr><td class="h">5639</td><td><div class="c3">38</div></td><td></td><td></td><td></td><td></td><td><div>109</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $last_descendant= $elt-&gt;_last_descendant;</td></tr>
<tr><td class="h">5640</td><td><div class="c3">38</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5640">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L5640">100</a></div></td><td></td><td></td><td><div>244</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !$cond || $last_descendant-&gt;matches( $cond))</td></tr>
<tr><td class="h">5641</td><td><div class="c3">23</div></td><td></td><td></td><td></td><td></td><td><div>81</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return $last_descendant; }</td></tr>
<tr><td class="h">5642</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">5643</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>58</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return $last_descendant-&gt;prev_elt( $elt, $cond); }</td></tr>
<tr><td class="h">5644</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5645</td><td colspan="7"></td></tr><tr><td class="h">5646</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># no argument allowed here, just go down the last_child recursively</td></tr>
<tr><td class="h">5647</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _last_descendant</td></tr>
<tr><td class="h">5648</td><td><div class="c3">41</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5648">41</a></div></td><td></td><td><div>100</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5649</td><td><div class="c3">41</div><div class="c3">71</div></td><td></td><td></td><td></td><td></td><td><div>196</div><div>360</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( my $child= $elt-&gt;{last_child}) { $elt= $child; }</td></tr>
<tr><td class="h">5650</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td></td><td><div>115</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">5651</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5652</td><td colspan="7"></td></tr><tr><td class="h">5653</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># counter-intuitive too:</td></tr>
<tr><td class="h">5654</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># the previous element is found by looking</td></tr>
<tr><td class="h">5655</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># for the first open tag backwards from the current one</td></tr>
<tr><td class="h">5656</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># it&#39;s the last descendant of the previous sibling </td></tr>
<tr><td class="h">5657</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># if it exists, otherwise it&#39;s simply the parent</td></tr>
<tr><td class="h">5658</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub prev_elt</td></tr>
<tr><td class="h">5659</td><td><div class="c3">37</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5659">37</a></div></td><td></td><td><div>101</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5660</td><td><div class="c3">37</div></td><td></td><td></td><td></td><td></td><td><div>67</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $subtree_root= 0;</td></tr>
<tr><td class="h">5661</td><td><div class="c3">37</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5661">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L5661">100</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5661">67</a></div></td><td></td><td></td><td><div>492</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined $_[0] and (ref( $_[0]) &amp;&amp; isa( $_[0], &#39;XML::Twig::Elt&#39;)))</td></tr>
<tr><td class="h">5662</td><td><div class="c3">17</div></td><td></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $subtree_root= shift ;</td></tr>
<tr><td class="h">5663</td><td><div class="c3">17</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5663">100</a></div></td><td></td><td></td><td></td><td><div>64</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return undef if( $elt == $subtree_root);</td></tr>
<tr><td class="h">5664</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5665</td><td><div class="c3">35</div></td><td></td><td></td><td></td><td></td><td><div>99</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $cond= shift;</td></tr>
<tr><td class="h">5666</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# get prev elt</td></tr>
<tr><td class="h">5667</td><td><div class="c3">35</div></td><td></td><td></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $prev_elt;</td></tr>
<tr><td class="h">5668</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;do</td></tr>
<tr><td class="h">5669</td><td><div class="c3">35</div><div class="c3">105</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5669">100</a></div></td><td></td><td></td><td></td><td><div>58</div><div>397</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return undef if( $elt == $subtree_root);</td></tr>
<tr><td class="h">5670</td><td><div class="c3">102</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5670">100</a></div></td><td></td><td></td><td></td><td><div>398</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $prev_elt= $elt-&gt;{prev_sibling})</td></tr>
<tr><td class="h">5671</td><td><div class="c3">37</div></td><td></td><td></td><td></td><td></td><td><div>155</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ while( $prev_elt-&gt;{last_child})</td></tr>
<tr><td class="h">5672</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>132</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $prev_elt= $prev_elt-&gt;{last_child}; }</td></tr>
<tr><td class="h">5673</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5674</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">5675</td><td><div class="c3">65</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5675">67</a></div></td><td></td><td></td><td><div>288</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $prev_elt= $elt-&gt;{parent} || return undef; }</td></tr>
<tr><td class="h">5676</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>411</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt= $prev_elt;     # in case we need to loop </td></tr>
<tr><td class="h">5677</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} until( $elt-&gt;passes( $cond));</td></tr>
<tr><td class="h">5678</td><td colspan="7"></td></tr><tr><td class="h">5679</td><td><div class="c3">25</div></td><td></td><td></td><td></td><td></td><td><div>135</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">5680</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5681</td><td colspan="7"></td></tr><tr><td class="h">5682</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _following_elt</td></tr>
<tr><td class="h">5683</td><td><div class="c3">7</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5683">7</a></div></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;{ my( $elt)= @_;</td></tr>
<tr><td class="h">5684</td><td><div class="c3">7</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L5684">100</a></div></td><td></td><td></td><td><div>69</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $elt &amp;&amp; !$elt-&gt;{next_sibling})</td></tr>
<tr><td class="h">5685</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>109</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt= $elt-&gt;{parent}; }</td></tr>
<tr><td class="h">5686</td><td><div class="c3">7</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5686">100</a></div></td><td></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt ? $elt-&gt;{next_sibling} : undef;</td></tr>
<tr><td class="h">5687</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5688</td><td colspan="7"></td></tr><tr><td class="h">5689</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub following_elt</td></tr>
<tr><td class="h">5690</td><td><div class="c3">7</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5690">7</a></div></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $cond)= @_;</td></tr>
<tr><td class="h">5691</td><td><div class="c3">7</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5691">67</a></div></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt= $elt-&gt;_following_elt || return undef;</td></tr>
<tr><td class="h">5692</td><td><div class="c3">6</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5692">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5692">67</a></div></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt if( !$cond || $elt-&gt;matches( $cond));</td></tr>
<tr><td class="h">5693</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt-&gt;next_elt( $cond);</td></tr>
<tr><td class="h">5694</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5695</td><td colspan="7"></td></tr><tr><td class="h">5696</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub following_elts</td></tr>
<tr><td class="h">5697</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5697">6</a></div></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $cond)= @_;</td></tr>
<tr><td class="h">5698</td><td><div class="c3">6</div><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5698">100</a></div></td><td></td><td></td><td></td><td><div>26</div><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !$cond) { undef $cond; }</td></tr>
<tr><td class="h">5699</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $following= $elt-&gt;following_elt( $cond);</td></tr>
<tr><td class="h">5700</td><td><div class="c3">6</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5700">100</a></div></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $following)</td></tr>
<tr><td class="h">5701</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my @followings= $following;</td></tr>
<tr><td class="h">5702</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while( $following= $following-&gt;next_elt( $cond))</td></tr>
<tr><td class="h">5703</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ push @followings, $following; }</td></tr>
<tr><td class="h">5704</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return( @followings);</td></tr>
<tr><td class="h">5705</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5706</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">5707</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return (); }</td></tr>
<tr><td class="h">5708</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5709</td><td colspan="7"></td></tr><tr><td class="h">5710</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _preceding_elt</td></tr>
<tr><td class="h">5711</td><td><div class="c3">7</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5711">7</a></div></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;{ my( $elt)= @_;</td></tr>
<tr><td class="h">5712</td><td><div class="c3">7</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L5712">100</a></div></td><td></td><td></td><td><div>66</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $elt &amp;&amp; !$elt-&gt;{prev_sibling})</td></tr>
<tr><td class="h">5713</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>82</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt= $elt-&gt;{parent}; }</td></tr>
<tr><td class="h">5714</td><td><div class="c3">7</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5714">100</a></div></td><td></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt ? $elt-&gt;{prev_sibling}-&gt;_last_descendant : undef;</td></tr>
<tr><td class="h">5715</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5716</td><td colspan="7"></td></tr><tr><td class="h">5717</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub preceding_elt</td></tr>
<tr><td class="h">5718</td><td><div class="c3">7</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5718">7</a></div></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $cond)= @_;</td></tr>
<tr><td class="h">5719</td><td><div class="c3">7</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5719">67</a></div></td><td></td><td></td><td><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt= $elt-&gt;_preceding_elt || return undef;</td></tr>
<tr><td class="h">5720</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5720">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5720">67</a></div></td><td></td><td></td><td><div>71</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt if( !$cond || $elt-&gt;matches( $cond));</td></tr>
<tr><td class="h">5721</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt-&gt;prev_elt( $cond);</td></tr>
<tr><td class="h">5722</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5723</td><td colspan="7"></td></tr><tr><td class="h">5724</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub preceding_elts</td></tr>
<tr><td class="h">5725</td><td><div class="c3">7</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5725">7</a></div></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $cond)= @_;</td></tr>
<tr><td class="h">5726</td><td><div class="c3">7</div><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5726">100</a></div></td><td></td><td></td><td></td><td><div>26</div><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !$cond) { undef $cond; }</td></tr>
<tr><td class="h">5727</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $preceding= $elt-&gt;preceding_elt( $cond);</td></tr>
<tr><td class="h">5728</td><td><div class="c3">7</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5728">100</a></div></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $preceding)</td></tr>
<tr><td class="h">5729</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my @precedings= $preceding;</td></tr>
<tr><td class="h">5730</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while( $preceding= $preceding-&gt;prev_elt( $cond))</td></tr>
<tr><td class="h">5731</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ push @precedings, $preceding; }</td></tr>
<tr><td class="h">5732</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return( @precedings);</td></tr>
<tr><td class="h">5733</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5734</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">5735</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return (); }</td></tr>
<tr><td class="h">5736</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5737</td><td colspan="7"></td></tr><tr><td class="h">5738</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># used in get_xpath</td></tr>
<tr><td class="h">5739</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _self</td></tr>
<tr><td class="h">5740</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5740">6</a></div></td><td></td><td><div>23</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $cond)= @_;</td></tr>
<tr><td class="h">5741</td><td><div class="c3">6</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5741">100</a></div></td><td></td><td></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $cond ? $elt-&gt;matches( $cond) : $elt;</td></tr>
<tr><td class="h">5742</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5743</td><td colspan="7"></td></tr><tr><td class="h">5744</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub next_n_elt</td></tr>
<tr><td class="h">5745</td><td><div class="c3">7</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5745">7</a></div></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5746</td><td><div class="c3">7</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5746">67</a></div></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $offset= shift || return undef;</td></tr>
<tr><td class="h">5747</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach (1..$offset)</td></tr>
<tr><td class="h">5748</td><td><div class="c3">7</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5748">67</a></div></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt= $elt-&gt;next_elt( @_) || return undef; }</td></tr>
<tr><td class="h">5749</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">5750</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5751</td><td colspan="7"></td></tr><tr><td class="h">5752</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># checks whether $elt is included in $ancestor, returns 1 in that case</td></tr>
<tr><td class="h">5753</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub in</td></tr>
<tr><td class="h">5754</td><td><div class="c3">2475</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5754">2475</a></div></td><td></td><td><div>7714</div></td><td class="s">&nbsp;&nbsp;{ my ($elt, $ancestor)= @_;</td></tr>
<tr><td class="h">5755</td><td><div class="c3">2475</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5755">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5755">67</a></div></td><td></td><td></td><td><div>29351</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( ref( $ancestor) &amp;&amp; isa( $ancestor, &#39;XML::Twig::Elt&#39;))</td></tr>
<tr><td class="h">5756</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # element</td></tr>
<tr><td class="h">5757</td><td><div class="c3">2473</div><div class="c3">2688</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5757">100</a></div></td><td></td><td></td><td></td><td><div>12494</div><div>14950</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while( $elt= $elt-&gt;{parent}) { return $elt if( $elt ==  $ancestor); } </td></tr>
<tr><td class="h">5758</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5759</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">5760</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # condition</td></tr>
<tr><td class="h">5761</td><td><div class="c3">2</div><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5761">100</a></div></td><td></td><td></td><td></td><td><div>12</div><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while( $elt= $elt-&gt;{parent}) { return $elt if( $elt-&gt;matches( $ancestor)); } </td></tr>
<tr><td class="h">5762</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5763</td><td><div class="c3">2110</div></td><td></td><td></td><td></td><td></td><td><div>9760</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0;           </td></tr>
<tr><td class="h">5764</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5765</td><td colspan="7"></td></tr><tr><td class="h">5766</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub first_child_text  </td></tr>
<tr><td class="h">5767</td><td><div class="c3">13</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5767">13</a></div></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5768</td><td><div class="c3">13</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5768">100</a></div></td><td></td><td></td><td></td><td><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dest=$elt-&gt;first_child(@_) or return &#39;&#39;;</td></tr>
<tr><td class="h">5769</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dest-&gt;text;</td></tr>
<tr><td class="h">5770</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5771</td><td colspan="7"></td></tr><tr><td class="h">5772</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub fields  </td></tr>
<tr><td class="h">5773</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5773">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5774</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return map { $elt-&gt;field( $_) } @_;</td></tr>
<tr><td class="h">5775</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5776</td><td colspan="7"></td></tr><tr><td class="h">5777</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub first_child_trimmed_text  </td></tr>
<tr><td class="h">5778</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5778">4</a></div></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5779</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5779">100</a></div></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dest=$elt-&gt;first_child(@_) or return &#39;&#39;;</td></tr>
<tr><td class="h">5780</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dest-&gt;trimmed_text;</td></tr>
<tr><td class="h">5781</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5782</td><td colspan="7"></td></tr><tr><td class="h">5783</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub first_child_matches</td></tr>
<tr><td class="h">5784</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5784">3</a></div></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5785</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5785">100</a></div></td><td></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dest= $elt-&gt;{first_child} or return undef;</td></tr>
<tr><td class="h">5786</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dest-&gt;passes( @_);</td></tr>
<tr><td class="h">5787</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5788</td><td colspan="7"></td></tr><tr><td class="h">5789</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub last_child_text  </td></tr>
<tr><td class="h">5790</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5790">3</a></div></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5791</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5791">100</a></div></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dest=$elt-&gt;last_child(@_) or return &#39;&#39;;</td></tr>
<tr><td class="h">5792</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dest-&gt;text;</td></tr>
<tr><td class="h">5793</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5794</td><td colspan="7"></td></tr><tr><td class="h">5795</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub last_child_trimmed_text  </td></tr>
<tr><td class="h">5796</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5796">2</a></div></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5797</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5797">100</a></div></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dest=$elt-&gt;last_child(@_) or return &#39;&#39;;</td></tr>
<tr><td class="h">5798</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dest-&gt;trimmed_text;</td></tr>
<tr><td class="h">5799</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5800</td><td colspan="7"></td></tr><tr><td class="h">5801</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub last_child_matches</td></tr>
<tr><td class="h">5802</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5802">6</a></div></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5803</td><td><div class="c3">6</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5803">100</a></div></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dest= $elt-&gt;{last_child} or return undef;</td></tr>
<tr><td class="h">5804</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dest-&gt;passes( @_);</td></tr>
<tr><td class="h">5805</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5806</td><td colspan="7"></td></tr><tr><td class="h">5807</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub child_text</td></tr>
<tr><td class="h">5808</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5808">2</a></div></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5809</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5809">100</a></div></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dest=$elt-&gt;child(@_) or return &#39;&#39;;</td></tr>
<tr><td class="h">5810</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dest-&gt;text;</td></tr>
<tr><td class="h">5811</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5812</td><td colspan="7"></td></tr><tr><td class="h">5813</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub child_trimmed_text</td></tr>
<tr><td class="h">5814</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5814">2</a></div></td><td></td><td><div>251</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5815</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5815">100</a></div></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dest=$elt-&gt;child(@_) or return &#39;&#39;;</td></tr>
<tr><td class="h">5816</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dest-&gt;trimmed_text;</td></tr>
<tr><td class="h">5817</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5818</td><td colspan="7"></td></tr><tr><td class="h">5819</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub child_matches</td></tr>
<tr><td class="h">5820</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5820">2</a></div></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5821</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $nb= shift;</td></tr>
<tr><td class="h">5822</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5822">100</a></div></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dest= $elt-&gt;child( $nb) or return undef;</td></tr>
<tr><td class="h">5823</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dest-&gt;passes( @_);</td></tr>
<tr><td class="h">5824</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5825</td><td colspan="7"></td></tr><tr><td class="h">5826</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub prev_sibling_text  </td></tr>
<tr><td class="h">5827</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5827">2</a></div></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5828</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5828">100</a></div></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dest=$elt-&gt;_prev_sibling(@_) or return &#39;&#39;;</td></tr>
<tr><td class="h">5829</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dest-&gt;text;</td></tr>
<tr><td class="h">5830</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5831</td><td colspan="7"></td></tr><tr><td class="h">5832</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub prev_sibling_trimmed_text  </td></tr>
<tr><td class="h">5833</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5833">2</a></div></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5834</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5834">100</a></div></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dest=$elt-&gt;_prev_sibling(@_) or return &#39;&#39;;</td></tr>
<tr><td class="h">5835</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dest-&gt;trimmed_text;</td></tr>
<tr><td class="h">5836</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5837</td><td colspan="7"></td></tr><tr><td class="h">5838</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub prev_sibling_matches</td></tr>
<tr><td class="h">5839</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5839">3</a></div></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5840</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5840">100</a></div></td><td></td><td></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dest= $elt-&gt;{prev_sibling} or return undef;</td></tr>
<tr><td class="h">5841</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dest-&gt;passes( @_);</td></tr>
<tr><td class="h">5842</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5843</td><td colspan="7"></td></tr><tr><td class="h">5844</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub next_sibling_text  </td></tr>
<tr><td class="h">5845</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5845">3</a></div></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5846</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5846">100</a></div></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dest=$elt-&gt;next_sibling(@_) or return &#39;&#39;;</td></tr>
<tr><td class="h">5847</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dest-&gt;text;</td></tr>
<tr><td class="h">5848</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5849</td><td colspan="7"></td></tr><tr><td class="h">5850</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub next_sibling_trimmed_text  </td></tr>
<tr><td class="h">5851</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5851">2</a></div></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5852</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5852">100</a></div></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dest=$elt-&gt;next_sibling(@_) or return &#39;&#39;;</td></tr>
<tr><td class="h">5853</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dest-&gt;trimmed_text;</td></tr>
<tr><td class="h">5854</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5855</td><td colspan="7"></td></tr><tr><td class="h">5856</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub next_sibling_matches</td></tr>
<tr><td class="h">5857</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5857">2</a></div></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5858</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5858">100</a></div></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dest= $elt-&gt;{next_sibling} or return undef;</td></tr>
<tr><td class="h">5859</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dest-&gt;passes( @_);</td></tr>
<tr><td class="h">5860</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5861</td><td colspan="7"></td></tr><tr><td class="h">5862</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub prev_elt_text  </td></tr>
<tr><td class="h">5863</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5863">2</a></div></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5864</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5864">100</a></div></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dest=$elt-&gt;prev_elt(@_) or return &#39;&#39;;</td></tr>
<tr><td class="h">5865</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dest-&gt;text;</td></tr>
<tr><td class="h">5866</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5867</td><td colspan="7"></td></tr><tr><td class="h">5868</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub prev_elt_trimmed_text  </td></tr>
<tr><td class="h">5869</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5869">2</a></div></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5870</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5870">100</a></div></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dest=$elt-&gt;prev_elt(@_) or return &#39;&#39;;</td></tr>
<tr><td class="h">5871</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dest-&gt;trimmed_text;</td></tr>
<tr><td class="h">5872</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5873</td><td colspan="7"></td></tr><tr><td class="h">5874</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub prev_elt_matches</td></tr>
<tr><td class="h">5875</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5875">3</a></div></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5876</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5876">100</a></div></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dest= $elt-&gt;prev_elt or return undef;</td></tr>
<tr><td class="h">5877</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dest-&gt;passes( @_);</td></tr>
<tr><td class="h">5878</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5879</td><td colspan="7"></td></tr><tr><td class="h">5880</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub next_elt_text  </td></tr>
<tr><td class="h">5881</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5881">2</a></div></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5882</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5882">100</a></div></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dest=$elt-&gt;next_elt(@_) or return &#39;&#39;;</td></tr>
<tr><td class="h">5883</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dest-&gt;text;</td></tr>
<tr><td class="h">5884</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5885</td><td colspan="7"></td></tr><tr><td class="h">5886</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub next_elt_trimmed_text  </td></tr>
<tr><td class="h">5887</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5887">2</a></div></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5888</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5888">100</a></div></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dest=$elt-&gt;next_elt(@_) or return &#39;&#39;;</td></tr>
<tr><td class="h">5889</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dest-&gt;trimmed_text;</td></tr>
<tr><td class="h">5890</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5891</td><td colspan="7"></td></tr><tr><td class="h">5892</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub next_elt_matches</td></tr>
<tr><td class="h">5893</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5893">3</a></div></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5894</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5894">100</a></div></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dest= $elt-&gt;next_elt or return undef;</td></tr>
<tr><td class="h">5895</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dest-&gt;passes( @_);</td></tr>
<tr><td class="h">5896</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5897</td><td colspan="7"></td></tr><tr><td class="h">5898</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub parent_text  </td></tr>
<tr><td class="h">5899</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5899">4</a></div></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5900</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5900">100</a></div></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dest=$elt-&gt;parent(@_) or return &#39;&#39;;</td></tr>
<tr><td class="h">5901</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dest-&gt;text;</td></tr>
<tr><td class="h">5902</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5903</td><td colspan="7"></td></tr><tr><td class="h">5904</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub parent_trimmed_text  </td></tr>
<tr><td class="h">5905</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5905">2</a></div></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5906</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5906">100</a></div></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dest=$elt-&gt;parent(@_) or return &#39;&#39;;</td></tr>
<tr><td class="h">5907</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dest-&gt;trimmed_text;</td></tr>
<tr><td class="h">5908</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5909</td><td colspan="7"></td></tr><tr><td class="h">5910</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub parent_matches</td></tr>
<tr><td class="h">5911</td><td><div class="c3">8</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5911">8</a></div></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5912</td><td><div class="c3">8</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5912">100</a></div></td><td></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dest= $elt-&gt;{parent} or return undef;</td></tr>
<tr><td class="h">5913</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dest-&gt;passes( @_);</td></tr>
<tr><td class="h">5914</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5915</td><td colspan="7"></td></tr><tr><td class="h">5916</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub is_first_child</td></tr>
<tr><td class="h">5917</td><td><div class="c3">9</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5917">9</a></div></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5918</td><td><div class="c3">9</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5918">100</a></div></td><td></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $parent= $elt-&gt;{parent} or return 0;</td></tr>
<tr><td class="h">5919</td><td><div class="c3">8</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5919">100</a></div></td><td></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $first_child= $parent-&gt;first_child( @_) or return 0;</td></tr>
<tr><td class="h">5920</td><td><div class="c3">7</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5920">100</a></div></td><td></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return ($first_child == $elt) ? $elt : 0;</td></tr>
<tr><td class="h">5921</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5922</td><td colspan="7"></td></tr><tr><td class="h">5923</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub is_last_child</td></tr>
<tr><td class="h">5924</td><td><div class="c3">9</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5924">9</a></div></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">5925</td><td><div class="c3">9</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5925">100</a></div></td><td></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $parent= $elt-&gt;{parent} or return 0;</td></tr>
<tr><td class="h">5926</td><td><div class="c3">8</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5926">100</a></div></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $last_child= $parent-&gt;last_child( @_) or return 0;</td></tr>
<tr><td class="h">5927</td><td><div class="c3">7</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5927">100</a></div></td><td></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return ($last_child == $elt) ? $elt : 0;</td></tr>
<tr><td class="h">5928</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5929</td><td colspan="7"></td></tr><tr><td class="h">5930</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># returns the depth level of the element</td></tr>
<tr><td class="h">5931</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># if 2 parameter are used then counts the 2cd element name in the</td></tr>
<tr><td class="h">5932</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># ancestors list</td></tr>
<tr><td class="h">5933</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub level</td></tr>
<tr><td class="h">5934</td><td><div class="c3">349</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5934">349</a></div></td><td></td><td><div>1047</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $cond)= @_;</td></tr>
<tr><td class="h">5935</td><td><div class="c3">349</div></td><td></td><td></td><td></td><td></td><td><div>669</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $level=0;</td></tr>
<tr><td class="h">5936</td><td><div class="c3">349</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5936">50</a></div></td><td></td><td></td><td><div>1222</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $name=shift || &#39;&#39;;</td></tr>
<tr><td class="h">5937</td><td><div class="c3">349</div><div class="c3">412</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5937">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L5937">100</a></div></td><td></td><td></td><td><div>1616</div><div>2891</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $elt= $elt-&gt;{parent}) { $level++ if( !$cond || $elt-&gt;matches( $cond)); }</td></tr>
<tr><td class="h">5938</td><td><div class="c3">349</div></td><td></td><td></td><td></td><td></td><td><div>1183</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $level;           </td></tr>
<tr><td class="h">5939</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5940</td><td colspan="7"></td></tr><tr><td class="h">5941</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># checks whether $elt has an ancestor that satisfies $cond, returns the ancestor</td></tr>
<tr><td class="h">5942</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub in_context</td></tr>
<tr><td class="h">5943</td><td><div class="c3">18</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5943">18</a></div></td><td></td><td><div>86</div></td><td class="s">&nbsp;&nbsp;{ my ($elt, $cond, $level)= @_;</td></tr>
<tr><td class="h">5944</td><td><div class="c3">18</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5944">100</a></div></td><td></td><td></td><td></td><td><div>78</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$level= -1 unless( $level) ;  # $level-- will never hit 0</td></tr>
<tr><td class="h">5945</td><td colspan="7"></td></tr><tr><td class="h">5946</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $level)</td></tr>
<tr><td class="h">5947</td><td><div class="c3">32</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5947">100</a></div></td><td></td><td></td><td></td><td><div>170</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt= $elt-&gt;{parent} or return 0;</td></tr>
<tr><td class="h">5948</td><td><div class="c3">24</div><div class="c3">8</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5948">100</a></div></td><td></td><td></td><td></td><td><div>82</div><div>179</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;matches( $cond)) { return $elt; }</td></tr>
<tr><td class="h">5949</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>258</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$level--;</td></tr>
<tr><td class="h">5950</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5951</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0;</td></tr>
<tr><td class="h">5952</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5953</td><td colspan="7"></td></tr><tr><td class="h">5954</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _descendants</td></tr>
<tr><td class="h">5955</td><td><div class="c3">43</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5955">43</a></div></td><td></td><td><div>3438</div></td><td class="s">&nbsp;&nbsp;{ my( $subtree_root, $include_self)= @_;</td></tr>
<tr><td class="h">5956</td><td><div class="c3">43</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5956">100</a></div></td><td></td><td></td><td></td><td><div>162</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @descendants= $include_self ? ($subtree_root) : ();</td></tr>
<tr><td class="h">5957</td><td colspan="7"></td></tr><tr><td class="h">5958</td><td><div class="c3">43</div></td><td></td><td></td><td></td><td></td><td><div>79</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $elt= $subtree_root; </td></tr>
<tr><td class="h">5959</td><td><div class="c3">43</div></td><td></td><td></td><td></td><td></td><td><div>60</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $next_elt;   </td></tr>
<tr><td class="h">5960</td><td colspan="7"></td></tr><tr><td class="h">5961</td><td><div class="c3">43</div></td><td></td><td></td><td></td><td></td><td><div>66</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;MAIN: while( 1)  </td></tr>
<tr><td class="h">5962</td><td><div class="c3">121</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5962">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5962">100</a></div></td><td></td><td></td><td></td><td><div>590</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $next_elt= $elt-&gt;{first_child})</td></tr>
<tr><td class="h">5963</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # simplest case: the elt has a child</td></tr>
<tr><td class="h">5964</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5965</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $next_elt= $elt-&gt;{next_sibling}) </td></tr>
<tr><td class="h">5966</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # no child but a next sibling (just check we stay within the subtree)</td></tr>
<tr><td class="h">5967</td><td colspan="7"></td></tr><tr><td class="h">5968</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# case where elt is subtree_root, is empty and has a sibling</td></tr>
<tr><td class="h">5969</td><td><div class="c3">7</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5969">100</a></div></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last MAIN if( $elt == $subtree_root);</td></tr>
<tr><td class="h">5970</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5971</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">5972</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # case where the element has no child and no next sibling:</td></tr>
<tr><td class="h">5973</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# get the first next sibling of an ancestor, checking subtree_root </td></tr>
<tr><td class="h">5974</td><td colspan="7"></td></tr><tr><td class="h">5975</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# case where elt is subtree_root, is empty and has no sibling</td></tr>
<tr><td class="h">5976</td><td><div class="c3">55</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5976">100</a></div></td><td></td><td></td><td></td><td><div>176</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last MAIN if( $elt == $subtree_root);</td></tr>
<tr><td class="h">5977</td><td colspan="7"></td></tr><tr><td class="h">5978</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# backtrack until we find a parent with a next sibling</td></tr>
<tr><td class="h">5979</td><td><div class="c3">40</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5979">33</a></div></td><td></td><td></td><td><div>148</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$next_elt= $elt-&gt;{parent} || last;</td></tr>
<tr><td class="h">5980</td><td><div class="c3">40</div></td><td></td><td></td><td></td><td></td><td><div>147</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;until( $next_elt-&gt;{next_sibling})</td></tr>
<tr><td class="h">5981</td><td><div class="c3">37</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5981">100</a></div></td><td></td><td></td><td></td><td><div>109</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ last MAIN if( $subtree_root == $next_elt);</td></tr>
<tr><td class="h">5982</td><td><div class="c3">19</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5982">33</a></div></td><td></td><td></td><td><div>104</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$next_elt= $next_elt-&gt;{parent} || last MAIN;</td></tr>
<tr><td class="h">5983</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5984</td><td><div class="c3">22</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L5984">100</a></div></td><td></td><td></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last MAIN if( $subtree_root == $next_elt); </td></tr>
<tr><td class="h">5985</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$next_elt= $next_elt-&gt;{next_sibling};   </td></tr>
<tr><td class="h">5986</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}  </td></tr>
<tr><td class="h">5987</td><td><div class="c3">78</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L5987">33</a></div></td><td></td><td></td><td><div>319</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt= $next_elt || last MAIN;</td></tr>
<tr><td class="h">5988</td><td><div class="c3">78</div></td><td></td><td></td><td></td><td></td><td><div>182</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @descendants, $elt;</td></tr>
<tr><td class="h">5989</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5990</td><td><div class="c3">43</div></td><td></td><td></td><td></td><td></td><td><div>226</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @descendants;</td></tr>
<tr><td class="h">5991</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">5992</td><td colspan="7"></td></tr><tr><td class="h">5993</td><td colspan="7"></td></tr><tr><td class="h">5994</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub descendants</td></tr>
<tr><td class="h">5995</td><td><div class="c3">203</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L5995">203</a></div></td><td></td><td><div>800</div></td><td class="s">&nbsp;&nbsp;{ my( $subtree_root, $cond)= @_;</td></tr>
<tr><td class="h">5996</td><td><div class="c3">203</div></td><td></td><td></td><td></td><td></td><td><div>533</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @descendants=(); </td></tr>
<tr><td class="h">5997</td><td><div class="c3">203</div></td><td></td><td></td><td></td><td></td><td><div>363</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $elt= $subtree_root;</td></tr>
<tr><td class="h">5998</td><td colspan="7"></td></tr><tr><td class="h">5999</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# this branch is pure optimization for speed: if $cond is a gi replace it</td></tr>
<tr><td class="h">6000</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# by the index of the gi and loop here </td></tr>
<tr><td class="h">6001</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# start optimization</td></tr>
<tr><td class="h">6002</td><td><div class="c3">203</div></td><td></td><td></td><td></td><td></td><td><div>285</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $ind;</td></tr>
<tr><td class="h">6003</td><td><div class="c3">203</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6003">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6003">100</a></div></td><td></td><td></td><td><div>1664</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !$cond || ( defined ( $ind= $XML::Twig::gi2index{$cond})) )</td></tr>
<tr><td class="h">6004</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">6005</td><td><div class="c3">114</div></td><td></td><td></td><td></td><td></td><td><div>165</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $next_elt;</td></tr>
<tr><td class="h">6006</td><td colspan="7"></td></tr><tr><td class="h">6007</td><td><div class="c3">114</div></td><td></td><td></td><td></td><td></td><td><div>175</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while( 1)  </td></tr>
<tr><td class="h">6008</td><td><div class="c3">1450</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6008">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6008">100</a></div></td><td></td><td></td><td></td><td><div>7113</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $next_elt= $elt-&gt;{first_child})</td></tr>
<tr><td class="h">6009</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # simplest case: the elt has a child</td></tr>
<tr><td class="h">6010</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6011</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $next_elt= $elt-&gt;{next_sibling}) </td></tr>
<tr><td class="h">6012</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # no child but a next sibling (just check we stay within the subtree)</td></tr>
<tr><td class="h">6013</td><td colspan="7"></td></tr><tr><td class="h">6014</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# case where elt is subtree_root, is empty and has a sibling</td></tr>
<tr><td class="h">6015</td><td><div class="c3">118</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6015">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L6015">33</a></div></td><td></td><td></td><td><div>947</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last if( $subtree_root &amp;&amp; ($elt == $subtree_root));</td></tr>
<tr><td class="h">6016</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6017</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6018</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # case where the element has no child and no next sibling:</td></tr>
<tr><td class="h">6019</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# get the first next sibling of an ancestor, checking subtree_root </td></tr>
<tr><td class="h">6020</td><td colspan="7"></td></tr><tr><td class="h">6021</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# case where elt is subtree_root, is empty and has no sibling</td></tr>
<tr><td class="h">6022</td><td><div class="c3">528</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6022">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L6022">67</a></div></td><td></td><td></td><td><div>3424</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last if( $subtree_root &amp;&amp; ($elt == $subtree_root));</td></tr>
<tr><td class="h">6023</td><td colspan="7"></td></tr><tr><td class="h">6024</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# backtrack until we find a parent with a next sibling</td></tr>
<tr><td class="h">6025</td><td><div class="c3">525</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L6025">33</a></div></td><td></td><td></td><td><div>2136</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$next_elt= $elt-&gt;{parent} || last undef;</td></tr>
<tr><td class="h">6026</td><td><div class="c3">525</div></td><td></td><td></td><td></td><td></td><td><div>1920</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;until( $next_elt-&gt;{next_sibling})</td></tr>
<tr><td class="h">6027</td><td><div class="c3">390</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6027">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L6027">67</a></div></td><td></td><td></td><td><div>2519</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ last if( $subtree_root &amp;&amp; ($subtree_root == $next_elt));</td></tr>
<tr><td class="h">6028</td><td><div class="c3">279</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L6028">33</a></div></td><td></td><td></td><td><div>1678</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$next_elt= $next_elt-&gt;{parent} || last;</td></tr>
<tr><td class="h">6029</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6030</td><td><div class="c3">525</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6030">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L6030">67</a></div></td><td></td><td></td><td><div>3271</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last if( $subtree_root &amp;&amp; ($subtree_root == $next_elt)); </td></tr>
<tr><td class="h">6031</td><td><div class="c3">414</div></td><td></td><td></td><td></td><td></td><td><div>1286</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$next_elt= $next_elt-&gt;{next_sibling};   </td></tr>
<tr><td class="h">6032</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}  </td></tr>
<tr><td class="h">6033</td><td><div class="c3">1336</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L6033">33</a></div></td><td></td><td></td><td><div>3699</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt= $next_elt || last;</td></tr>
<tr><td class="h">6034</td><td><div class="c3">1336</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6034">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6034">100</a></div></td><td></td><td></td><td><div>7926</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @descendants, $elt if( !$cond || ($elt-&gt;{gi} eq $ind));</td></tr>
<tr><td class="h">6035</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6036</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6037</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6038</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# end optimization</td></tr>
<tr><td class="h">6039</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # branch for a complex condition: use the regular (slow but simple) way</td></tr>
<tr><td class="h">6040</td><td><div class="c3">89</div></td><td></td><td></td><td></td><td></td><td><div>380</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while( $elt= $elt-&gt;next_elt( $subtree_root, $cond))</td></tr>
<tr><td class="h">6041</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td></td><td><div>873</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ push @descendants, $elt; }</td></tr>
<tr><td class="h">6042</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6043</td><td><div class="c3">203</div></td><td></td><td></td><td></td><td></td><td><div>1180</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @descendants;</td></tr>
<tr><td class="h">6044</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6045</td><td colspan="7"></td></tr><tr><td class="h">6046</td><td colspan="7"></td></tr><tr><td class="h">6047</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub descendants_or_self</td></tr>
<tr><td class="h">6048</td><td><div class="c3">43</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6048">43</a></div></td><td></td><td><div>178</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $cond)= @_;</td></tr>
<tr><td class="h">6049</td><td><div class="c3">43</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6049">100</a></div></td><td></td><td></td><td></td><td><div>191</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @descendants= $elt-&gt;passes( $cond) ? ($elt) : (); </td></tr>
<tr><td class="h">6050</td><td><div class="c3">43</div></td><td></td><td></td><td></td><td></td><td><div>312</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;push @descendants, $elt-&gt;descendants( $cond);</td></tr>
<tr><td class="h">6051</td><td><div class="c3">43</div></td><td></td><td></td><td></td><td></td><td><div>250</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @descendants;</td></tr>
<tr><td class="h">6052</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6053</td><td colspan="7"></td></tr><tr><td class="h">6054</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub sibling</td></tr>
<tr><td class="h">6055</td><td><div class="c3">9</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6055">9</a></div></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">6056</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $nb= shift;</td></tr>
<tr><td class="h">6057</td><td><div class="c3">9</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6057">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6057">100</a></div></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $nb &gt; 0)</td></tr>
<tr><td class="h">6058</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ foreach( 1..$nb)</td></tr>
<tr><td class="h">6059</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6059">100</a></div></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt= $elt-&gt;next_sibling( @_) or return undef; }</td></tr>
<tr><td class="h">6060</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6061</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $nb &lt; 0)</td></tr>
<tr><td class="h">6062</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ foreach( 1..(-$nb))</td></tr>
<tr><td class="h">6063</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6063">100</a></div></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt= $elt-&gt;prev_sibling( @_) or return undef; }</td></tr>
<tr><td class="h">6064</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6065</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else # $nb == 0</td></tr>
<tr><td class="h">6066</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return $elt-&gt;passes( $_[0]); }</td></tr>
<tr><td class="h">6067</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">6068</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6069</td><td colspan="7"></td></tr><tr><td class="h">6070</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub sibling_text</td></tr>
<tr><td class="h">6071</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6071">3</a></div></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;{ my $elt= sibling( @_);</td></tr>
<tr><td class="h">6072</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6072">100</a></div></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt ? $elt-&gt;text : undef;</td></tr>
<tr><td class="h">6073</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6074</td><td colspan="7"></td></tr><tr><td class="h">6075</td><td colspan="7"></td></tr><tr><td class="h">6076</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub child</td></tr>
<tr><td class="h">6077</td><td><div class="c3">43</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6077">43</a></div></td><td></td><td><div>110</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">6078</td><td><div class="c3">43</div></td><td></td><td></td><td></td><td></td><td><div>179</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $nb= shift;</td></tr>
<tr><td class="h">6079</td><td><div class="c3">43</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6079">100</a></div></td><td></td><td></td><td></td><td><div>133</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $nb &gt;= 0)</td></tr>
<tr><td class="h">6080</td><td><div class="c3">27</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6080">100</a></div></td><td></td><td></td><td></td><td><div>103</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt= $elt-&gt;first_child( @_) or return undef;</td></tr>
<tr><td class="h">6081</td><td><div class="c3">20</div></td><td></td><td></td><td></td><td></td><td><div>82</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach( 1..$nb)</td></tr>
<tr><td class="h">6082</td><td><div class="c3">20</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6082">100</a></div></td><td></td><td></td><td></td><td><div>73</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt= $elt-&gt;next_sibling( @_) or return undef; }</td></tr>
<tr><td class="h">6083</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6084</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6085</td><td><div class="c3">16</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6085">100</a></div></td><td></td><td></td><td></td><td><div>56</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt= $elt-&gt;last_child( @_) or return undef;</td></tr>
<tr><td class="h">6086</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach( 2..(-$nb))</td></tr>
<tr><td class="h">6087</td><td><div class="c3">16</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6087">100</a></div></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt= $elt-&gt;prev_sibling( @_) or return undef; }</td></tr>
<tr><td class="h">6088</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6089</td><td><div class="c3">31</div></td><td></td><td></td><td></td><td></td><td><div>144</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">6090</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6091</td><td colspan="7"></td></tr><tr><td class="h">6092</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub prev_siblings</td></tr>
<tr><td class="h">6093</td><td><div class="c3">24</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6093">24</a></div></td><td></td><td><div>122</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">6094</td><td><div class="c3">24</div></td><td></td><td></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @siblings=();</td></tr>
<tr><td class="h">6095</td><td><div class="c3">24</div></td><td></td><td></td><td></td><td></td><td><div>95</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $elt= $elt-&gt;prev_sibling( @_))</td></tr>
<tr><td class="h">6096</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>66</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ unshift @siblings, $elt; }</td></tr>
<tr><td class="h">6097</td><td><div class="c3">24</div></td><td></td><td></td><td></td><td></td><td><div>92</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @siblings;</td></tr>
<tr><td class="h">6098</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6099</td><td colspan="7"></td></tr><tr><td class="h">6100</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub pos</td></tr>
<tr><td class="h">6101</td><td><div class="c3">17</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6101">17</a></div></td><td></td><td><div>107</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">6102</td><td><div class="c3">17</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6102">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6102">100</a></div></td><td></td><td></td><td><div>103</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0 if ($_[0] &amp;&amp; !$elt-&gt;matches( @_));</td></tr>
<tr><td class="h">6103</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $pos=1;</td></tr>
<tr><td class="h">6104</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$pos++ while( $elt= $elt-&gt;prev_sibling( @_));</td></tr>
<tr><td class="h">6105</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $pos;</td></tr>
<tr><td class="h">6106</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6107</td><td colspan="7"></td></tr><tr><td class="h">6108</td><td colspan="7"></td></tr><tr><td class="h">6109</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub next_siblings</td></tr>
<tr><td class="h">6110</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6110">6</a></div></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">6111</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @siblings=();</td></tr>
<tr><td class="h">6112</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $elt= $elt-&gt;next_sibling( @_))</td></tr>
<tr><td class="h">6113</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ push @siblings, $elt; }</td></tr>
<tr><td class="h">6114</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @siblings;</td></tr>
<tr><td class="h">6115</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6116</td><td colspan="7"></td></tr><tr><td class="h">6117</td><td colspan="7"></td></tr><tr><td class="h">6118</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># used by get_xpath: parses the xpath expression and generates a sub that performs the</td></tr>
<tr><td class="h">6119</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># search</td></tr>
<tr><td class="h">6120</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">{ my %axis2method;</td></tr>
<tr><td class="h">6121</td><td><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6121">92</a></div></td><td></td><td><div>2728</div></td><td class="s">&nbsp;&nbsp;BEGIN { %axis2method= ( child               =&gt; &#39;children&#39;,</td></tr>
<tr><td class="h">6122</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;descendant          =&gt; &#39;descendants&#39;,</td></tr>
<tr><td class="h">6123</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;descendant-or-self&#39; =&gt; &#39;descendants_or_self&#39;,</td></tr>
<tr><td class="h">6124</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent              =&gt; &#39;parent_is&#39;,</td></tr>
<tr><td class="h">6125</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ancestor            =&gt; &#39;ancestors&#39;,</td></tr>
<tr><td class="h">6126</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;ancestor-or-self&#39;   =&gt; &#39;ancestors_or_self&#39;,</td></tr>
<tr><td class="h">6127</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;following-sibling&#39;  =&gt; &#39;next_siblings&#39;,</td></tr>
<tr><td class="h">6128</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;preceding-sibling&#39;  =&gt; &#39;prev_siblings&#39;,</td></tr>
<tr><td class="h">6129</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;following           =&gt; &#39;following_elts&#39;,</td></tr>
<tr><td class="h">6130</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;preceding           =&gt; &#39;preceding_elts&#39;,</td></tr>
<tr><td class="h">6131</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self                =&gt; &#39;_self&#39;,</td></tr>
<tr><td class="h">6132</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">6133</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6134</td><td colspan="7"></td></tr><tr><td class="h">6135</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub _install_xpath</td></tr>
<tr><td class="h">6136</td><td><div class="c3">167</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6136">167</a></div></td><td></td><td><div>756</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my( $xpath_exp, $type)= @_;</td></tr>
<tr><td class="h">6137</td><td><div class="c3">167</div></td><td></td><td></td><td></td><td></td><td><div>384</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $original_exp= $xpath_exp;</td></tr>
<tr><td class="h">6138</td><td><div class="c3">167</div></td><td></td><td></td><td></td><td></td><td><div>428</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $sub= &#39;my $elt= shift; my @results;&#39;;</td></tr>
<tr><td class="h">6139</td><td colspan="7"></td></tr><tr><td class="h">6140</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# grab the root if expression starts with a /</td></tr>
<tr><td class="h">6141</td><td><div class="c3">167</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6141">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6141">100</a></div></td><td></td><td></td><td></td><td><div>860</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $xpath_exp=~ s{^/}{})</td></tr>
<tr><td class="h">6142</td><td><div class="c3">153</div></td><td></td><td></td><td></td><td></td><td><div>388</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $sub .= &#39;@results= ($elt-&gt;twig) || croak &quot;cannot use an XPath query starting with a / on a node not attached to a whole twig&quot;;&#39;; }</td></tr>
<tr><td class="h">6143</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $xpath_exp=~ s{^\./}{})</td></tr>
<tr><td class="h">6144</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $sub .= &#39;@results= ($elt);&#39;; }</td></tr>
<tr><td class="h">6145</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6146</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $sub .= &#39;@results= ($elt);&#39;; }</td></tr>
<tr><td class="h">6147</td><td colspan="7"></td></tr><tr><td class="h">6148</td><td colspan="7"></td></tr><tr><td class="h">6149</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#warn &quot;xpath_exp= &#39;$xpath_exp&#39;\n&quot;;</td></tr>
<tr><td class="h">6150</td><td><div class="c3">167</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6150">100</a></div></td><td></td><td></td><td><div>5305</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while( $xpath_exp &amp;&amp;</td></tr>
<tr><td class="h">6151</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xpath_exp=~s{^\s*(/?)                            </td></tr>
<tr><td class="h">6152</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# the xxx=~/regexp/ is a pain as it includes /  </td></tr>
<tr><td class="h">6153</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\s*(?:(?:($REG_AXIS)::)?(\*|$REG_NAME|\.\.|\.)\s*)?($REG_PREDICATE_ALT*)</td></tr>
<tr><td class="h">6154</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">6155</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(/|$)}{}xo)</td></tr>
<tr><td class="h">6156</td><td colspan="7"></td></tr><tr><td class="h">6157</td><td><div class="c3">290</div></td><td></td><td></td><td></td><td></td><td><div>2489</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my( $wildcard, $sub_exp, $axis, $gi, $predicates)= ($1, $2, $3, $4, $5);</td></tr>
<tr><td class="h">6158</td><td colspan="7"></td></tr><tr><td class="h">6159</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# grab a parent</td></tr>
<tr><td class="h">6160</td><td><div class="c3">290</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6160">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6160">100</a></div></td><td></td><td></td><td></td><td><div>1360</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $sub_exp eq &#39;..&#39;)</td></tr>
<tr><td class="h">6161</td><td><div class="c3">4</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6161">50</a></div></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ _croak_and_doublecheck_xpath( $original_exp, &quot;error in xpath expression $original_exp&quot;) if( $wildcard);</td></tr>
<tr><td class="h">6162</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>58</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sub .= &#39;@results= map { $_-&gt;{parent}} @results;&#39;;</td></tr>
<tr><td class="h">6163</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6164</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# test the element itself</td></tr>
<tr><td class="h">6165</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $sub_exp=~ m{^\.(.*)$}s)</td></tr>
<tr><td class="h">6166</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $sub .= &quot;\@results= grep { \$_-&gt;matches( q{$1}) } \@results;&quot; }</td></tr>
<tr><td class="h">6167</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# grab children</td></tr>
<tr><td class="h">6168</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else       </td></tr>
<tr><td class="h">6169</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">6170</td><td><div class="c3">285</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6170">100</a></div></td><td></td><td></td><td></td><td><div>866</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( !$axis)             </td></tr>
<tr><td class="h">6171</td><td><div class="c3">252</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6171">100</a></div></td><td></td><td></td><td></td><td><div>793</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $axis= $wildcard ? &#39;descendant&#39; : &#39;child&#39;; }</td></tr>
<tr><td class="h">6172</td><td><div class="c3">285</div><div class="c3">81</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6172">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6172">100</a></div></td><td></td><td></td><td><div>2197</div><div>195</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( !$gi or $gi eq &#39;*&#39;) { $gi=&#39;&#39;; }</td></tr>
<tr><td class="h">6173</td><td><div class="c3">285</div></td><td></td><td></td><td></td><td></td><td><div>430</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $function;</td></tr>
<tr><td class="h">6174</td><td colspan="7"></td></tr><tr><td class="h">6175</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# &quot;special&quot; predicates, that return just one element</td></tr>
<tr><td class="h">6176</td><td><div class="c3">285</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6176">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6176">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6176">100</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6176">100</a></div></td><td></td><td></td><td><div>2899</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $predicates &amp;&amp; ($predicates =~ m{^\s*\[\s*((-\s*)?\d+)\s*\]\s*$}))</td></tr>
<tr><td class="h">6177</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # [&lt;nb&gt;]</td></tr>
<tr><td class="h">6178</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>120</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $offset= $1;</td></tr>
<tr><td class="h">6179</td><td><div class="c3">30</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6179">100</a></div></td><td></td><td></td><td></td><td><div>120</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$offset-- if( $offset &gt; 0);</td></tr>
<tr><td class="h">6180</td><td><div class="c3">30</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6180">50</a></div><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6180">50</a></div></td><td></td><td></td><td></td><td><div>240</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$function=  $axis eq &#39;descendant&#39; ? &quot;next_n_elt( $offset, &#39;$gi&#39;)&quot; </td></tr>
<tr><td class="h">6181</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:  $axis eq &#39;child&#39;      ? &quot;child( $offset, &#39;$gi&#39;)&quot;</td></tr>
<tr><td class="h">6182</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:                          _croak_and_doublecheck_xpath( $original_exp, &quot;error [$1] not supported along axis &#39;$axis&#39;&quot;)</td></tr>
<tr><td class="h">6183</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;</td></tr>
<tr><td class="h">6184</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>410</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sub .= &quot;\@results= grep { \$_ } map { \$_-&gt;$function } \@results;&quot;</td></tr>
<tr><td class="h">6185</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6186</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $predicates &amp;&amp; ($predicates =~ m{^\s*\[\s*last\s*\(\s*\)\s*\]\s*$}) )</td></tr>
<tr><td class="h">6187</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # last()</td></tr>
<tr><td class="h">6188</td><td><div class="c3">3</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6188">50</a></div></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_croak_and_doublecheck_xpath( $original_exp, &quot;error in xpath expression $original_exp, usage of // and last() not supported&quot;) if( $wildcard);</td></tr>
<tr><td class="h">6189</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sub .= &quot;\@results= map { \$_-&gt;last_child( &#39;$gi&#39;) } \@results;&quot;;</td></tr>
<tr><td class="h">6190</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6191</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6192</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # follow the axis</td></tr>
<tr><td class="h">6193</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#warn &quot;axis: &#39;$axis&#39; - method: &#39;$axis2method{$axis}&#39; - gi: &#39;$gi&#39;\n&quot;;</td></tr>
<tr><td class="h">6194</td><td colspan="7"></td></tr><tr><td class="h">6195</td><td><div class="c3">252</div></td><td></td><td></td><td></td><td></td><td><div>1363</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $follow_axis= &quot; \$_-&gt;$axis2method{$axis}( &#39;$gi&#39;)&quot;;</td></tr>
<tr><td class="h">6196</td><td><div class="c3">252</div></td><td></td><td></td><td></td><td></td><td><div>503</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $step= $follow_axis;</td></tr>
<tr><td class="h">6197</td><td colspan="7"></td></tr><tr><td class="h">6198</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# now filter using the predicate</td></tr>
<tr><td class="h">6199</td><td><div class="c3">252</div></td><td></td><td></td><td></td><td></td><td><div>2306</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while( $predicates=~ s{^\s*($REG_PREDICATE_ALT)\s*}{}o)</td></tr>
<tr><td class="h">6200</td><td><div class="c3">131</div></td><td></td><td></td><td></td><td></td><td><div>443</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $pred= $1;</td></tr>
<tr><td class="h">6201</td><td><div class="c3">131</div></td><td></td><td></td><td></td><td></td><td><div>447</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pred=~ s{^\s*\[\s*}{};</td></tr>
<tr><td class="h">6202</td><td><div class="c3">131</div></td><td></td><td></td><td></td><td></td><td><div>464</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pred=~ s{\s*\]\s*$}{};</td></tr>
<tr><td class="h">6203</td><td><div class="c3">131</div></td><td></td><td></td><td></td><td></td><td><div>260</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $test=&quot;&quot;;</td></tr>
<tr><td class="h">6204</td><td><div class="c3">131</div></td><td></td><td></td><td></td><td></td><td><div>186</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $pos;</td></tr>
<tr><td class="h">6205</td><td><div class="c3">131</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6205">100</a></div></td><td></td><td></td><td></td><td><div>554</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $pred=~ m{^(-?\s*\d+)$})</td></tr>
<tr><td class="h">6206</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $pos= $1;</td></tr>
<tr><td class="h">6207</td><td><div class="c3">18</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6207">100</a></div></td><td></td><td></td><td></td><td><div>210</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $step=~ m{^\s*grep(.*) (\$_-&gt;\w+\(\s*&#39;[^&#39;]*&#39;\s*\))})</td></tr>
<tr><td class="h">6208</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>247</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $step= &quot;XML::Twig::_first_n $1 $pos, $2&quot;; }</td></tr>
<tr><td class="h">6209</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6210</td><td><div class="c3">2</div><div class="c3">2</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6210">50</a></div></td><td></td><td></td><td></td><td><div>10</div><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $pos &gt; 0) { $pos--; }</td></tr>
<tr><td class="h">6211</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>28</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$step= &quot;($step)[$pos]&quot;; </td></tr>
<tr><td class="h">6212</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6213</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#warn &quot;number predicate &#39;$pos&#39; - generated step &#39;$step&#39;\n&quot;;</td></tr>
<tr><td class="h">6214</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6215</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6216</td><td><div class="c3">113</div></td><td></td><td></td><td></td><td></td><td><div>209</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $syntax_error=0;</td></tr>
<tr><td class="h">6217</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do</td></tr>
<tr><td class="h">6218</td><td><div class="c3">113</div><div class="c3">153</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6218">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6218">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6218">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6218">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6218">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6218">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6218">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6218">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6218">100</a></div></td><td></td><td></td><td><div>177</div><div>4359</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $pred =~ s{^string\(\s*\)\s*=\s*($REG_STRING)\s*}{}o)  # string()=&quot;string&quot; pred</td></tr>
<tr><td class="h">6219</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>75</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $test .= &quot;\$_-&gt;text eq $1&quot;; }</td></tr>
<tr><td class="h">6220</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $pred =~ s{^string\(\s*\)\s*($REG_MATCH)\s*($REG_REGEXP)\s*}{}o)  # string()=~/regex/ pred</td></tr>
<tr><td class="h">6221</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my( $match, $regexp)= ($1, $2);</td></tr>
<tr><td class="h">6222</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>97</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$test .= &quot;\$_-&gt;text $match $regexp&quot;; </td></tr>
<tr><td class="h">6223</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6224</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $pred=~ s{^@($REG_NAME)\s*($REG_OP)\s*($REG_STRING|$REG_NUMBER)}{}o)  # @att=&quot;val&quot; pred</td></tr>
<tr><td class="h">6225</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td></td><td><div>395</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my( $att, $oper, $val)= ($1, _op( $2), $3);</td></tr>
<tr><td class="h">6226</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td></td><td><div>1244</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$test .= qq{((defined \$_-&gt;{&#39;att&#39;}-&gt;{&quot;$att&quot;})  &amp;&amp; (\$_-&gt;{&#39;att&#39;}-&gt;{&quot;$att&quot;} $oper $val))};</td></tr>
<tr><td class="h">6227</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6228</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $pred =~ s{^@($REG_NAME)\s*($REG_MATCH)\s*($REG_REGEXP)\s*}{}o)  # @att=~/regex/ pred XXX</td></tr>
<tr><td class="h">6229</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>68</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my( $att, $match, $regexp)= ($1, $2, $3);</td></tr>
<tr><td class="h">6230</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>173</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$test .= qq{((defined \$_-&gt;{&#39;att&#39;}-&gt;{&quot;$att&quot;})  &amp;&amp; (\$_-&gt;{&#39;att&#39;}-&gt;{&quot;$att&quot;} $match $regexp))};; </td></tr>
<tr><td class="h">6231</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6232</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $pred=~ s{^@($REG_NAME)\s*}{}o)                      # @att pred</td></tr>
<tr><td class="h">6233</td><td><div class="c3">17</div></td><td></td><td></td><td></td><td></td><td><div>202</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $test .= qq{(defined \$_-&gt;{&#39;att&#39;}-&gt;{&quot;$1&quot;})}; }</td></tr>
<tr><td class="h">6234</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $pred=~ s{^\s*(?:not|!)\s*@($REG_NAME)\s*}{}o)       # not @att pred</td></tr>
<tr><td class="h">6235</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>73</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $test .= qq{((\$_-&gt;is_elt) &amp;&amp; (not defined \$_-&gt;{&#39;att&#39;}-&gt;{&quot;$1&quot;}))}; }</td></tr>
<tr><td class="h">6236</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $pred=~ s{^\s*([()])}{})                            # ( or ) (just add to the test)</td></tr>
<tr><td class="h">6237</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $test .= qq{$1};           }</td></tr>
<tr><td class="h">6238</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $pred=~ s{^\s*(and|or)\s*}{})</td></tr>
<tr><td class="h">6239</td><td><div class="c3">19</div></td><td></td><td></td><td></td><td></td><td><div>232</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $test .= lc &quot; $1 &quot;; }</td></tr>
<tr><td class="h">6240</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6241</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $syntax_error=1; }</td></tr>
<tr><td class="h">6242</td><td colspan="7"></td></tr><tr><td class="h">6243</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} while( !$syntax_error &amp;&amp; $pred);</td></tr>
<tr><td class="h">6244</td><td><div class="c3">113</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6244">100</a></div></td><td></td><td></td><td></td><td><div>277</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_croak_and_doublecheck_xpath( $original_exp, &quot;error in xpath expression $original_exp at $pred&quot;) if( $pred);</td></tr>
<tr><td class="h">6245</td><td><div class="c3">112</div></td><td></td><td></td><td></td><td></td><td><div>957</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$step= &quot; grep { $test } $step &quot;;</td></tr>
<tr><td class="h">6246</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6247</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6248</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#warn &quot;step: &#39;$step&#39;&quot;;</td></tr>
<tr><td class="h">6249</td><td><div class="c3">251</div></td><td></td><td></td><td></td><td></td><td><div>3186</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sub .= &quot;\@results= grep { \$_ } map { $step } \@results;&quot;; </td></tr>
<tr><td class="h">6250</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6251</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6252</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6253</td><td colspan="7"></td></tr><tr><td class="h">6254</td><td><div class="c3">166</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6254">100</a></div></td><td></td><td></td><td></td><td><div>404</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $xpath_exp)</td></tr>
<tr><td class="h">6255</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ _croak_and_doublecheck_xpath( $original_exp, &quot;error in xpath expression $original_exp around $xpath_exp&quot;); }</td></tr>
<tr><td class="h">6256</td><td colspan="7"></td></tr><tr><td class="h">6257</td><td><div class="c3">165</div></td><td></td><td></td><td></td><td></td><td><div>355</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sub .= q{return XML::Twig::_unique_elts( @results); };</td></tr>
<tr><td class="h">6258</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#warn &quot;generated: &#39;$sub&#39;\n&quot;;</td></tr>
<tr><td class="h">6259</td><td><div class="c3">165</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">5</div><div class="c3">5</div><div class="c3">5</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6259">4</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6259">3</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6259">3</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6259">3</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6259">3</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6259">3</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6259">3</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6259">3</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6259">3</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6259">5</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6259">3</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6259">2</a></div></td><td></td><td><div>370</div><div>21</div><div>7</div><div>22</div><div>33</div><div>6</div><div>20</div><div>24</div><div>8</div><div>18</div><div>20</div><div>6</div><div>17</div><div>26</div><div>7</div><div>18</div><div>23</div><div>6</div><div>18</div><div>22</div><div>6</div><div>24</div><div>25</div><div>7</div><div>17</div><div>23</div><div>6</div><div>17</div><div>42</div><div>11</div><div>32</div><div>24</div><div>7</div><div>19</div><div>14</div><div>5</div><div>106</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $s= eval &quot;sub { $NO_WARNINGS; $sub }&quot;;</td></tr>
<tr><td class="h">6260</td><td><div class="c3">165</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6260">50</a></div></td><td></td><td></td><td></td><td><div>740</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $@) </td></tr>
<tr><td class="h">6261</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ _croak_and_doublecheck_xpath( $original_exp, &quot;error in xpath expression $original_exp ($@);&quot;) }</td></tr>
<tr><td class="h">6262</td><td><div class="c3">165</div></td><td></td><td></td><td></td><td></td><td><div>1228</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return( $s); </td></tr>
<tr><td class="h">6263</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6264</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">6265</td><td colspan="7"></td></tr><tr><td class="h">6266</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _croak_and_doublecheck_xpath</td></tr>
<tr><td class="h">6267</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6267">2</a></div></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;{ my $xpath_expression= shift;</td></tr>
<tr><td class="h">6268</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $mess= join( &quot;\n&quot;, @_);</td></tr>
<tr><td class="h">6269</td><td><div class="c3">2</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6269">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L6269">50</a></div></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $XML::Twig::XPath::VERSION || 0) </td></tr>
<tr><td class="h">6270</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $check_twig= XML::Twig::XPath-&gt;new;</td></tr>
<tr><td class="h">6271</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6271">0</a></div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( eval { $check_twig-&gt;{twig_xp}-&gt;_parse( $xpath_expression) })</td></tr>
<tr><td class="h">6272</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $mess .= &quot;\nthe expression is a valid XPath statement, and you are using XML::Twig::XPath, but&quot;</td></tr>
<tr><td class="h">6273</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &quot;\nyou are using either &#39;find_nodes&#39; or &#39;get_xpath&#39; where the method you likely wanted&quot;</td></tr>
<tr><td class="h">6274</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &quot;\nto use is &#39;findnodes&#39;, which is the only one that uses the full XPath engine\n&quot;;</td></tr>
<tr><td class="h">6275</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6276</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} </td></tr>
<tr><td class="h">6277</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;croak $mess;</td></tr>
<tr><td class="h">6278</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6279</td><td colspan="7"></td></tr><tr><td class="h">6280</td><td colspan="7"></td></tr><tr><td class="h">6281</td><td colspan="7"></td></tr><tr><td class="h">6282</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">{ # extremely elaborate caching mechanism</td></tr>
<tr><td class="h">6283</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my %xpath; # xpath_expression =&gt; subroutine_code;  </td></tr>
<tr><td class="h">6284</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub get_xpath</td></tr>
<tr><td class="h">6285</td><td><div class="c3">173</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6285">173</a></div></td><td></td><td><div>855</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my( $elt, $xpath_exp, $offset)= @_;</td></tr>
<tr><td class="h">6286</td><td><div class="c3">173</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6286">100</a></div></td><td></td><td></td><td><div>1694</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $sub= ($xpath{$xpath_exp} ||= _install_xpath( $xpath_exp));</td></tr>
<tr><td class="h">6287</td><td><div class="c3">171</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6287">100</a></div></td><td></td><td></td><td></td><td><div>952</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $sub-&gt;( $elt) unless( defined $offset); </td></tr>
<tr><td class="h">6288</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @res= $sub-&gt;( $elt);</td></tr>
<tr><td class="h">6289</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>77</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $res[$offset];</td></tr>
<tr><td class="h">6290</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6291</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">6292</td><td colspan="7"></td></tr><tr><td class="h">6293</td><td colspan="7"></td></tr><tr><td class="h">6294</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub findvalue</td></tr>
<tr><td class="h">6295</td><td><div class="c3">13</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6295">13</a></div></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">6296</td><td><div class="c3">13</div><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>50</div><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return join &#39;&#39;, map { $_-&gt;text } $elt-&gt;get_xpath( @_);</td></tr>
<tr><td class="h">6297</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6298</td><td colspan="7"></td></tr><tr><td class="h">6299</td><td colspan="7"></td></tr><tr><td class="h">6300</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># XML::XPath compatibility</td></tr>
<tr><td class="h">6301</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6301">1</a></div></td><td></td><td><div>7</div></td><td class="s">sub getElementById     { return $_[0]-&gt;twig-&gt;elt_id( $_[1]); }</td></tr>
<tr><td class="h">6302</td><td><div class="c3">1582</div><div class="c3">1582</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6302">100</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6302">1582</a></div></td><td></td><td><div>119356</div><div>11072</div></td><td class="s">sub getChildNodes      { my @children= $_[0]-&gt;_children; return wantarray ? @children : \@children; }</td></tr>
<tr><td class="h">6303</td><td colspan="7"></td></tr><tr><td class="h">6304</td><td><div class="c3">2200</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6304">2200</a></div></td><td></td><td><div>12377</div></td><td class="s">sub _flushed     { return $_[0]-&gt;{flushed}; }</td></tr>
<tr><td class="h">6305</td><td><div class="c3">107</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6305">107</a></div></td><td></td><td><div>583</div></td><td class="s">sub _set_flushed { $_[0]-&gt;{flushed}=1;      }</td></tr>
<tr><td class="h">6306</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6306">1</a></div></td><td></td><td><div>6</div></td><td class="s">sub _del_flushed { delete $_[0]-&gt;{flushed}; }</td></tr>
<tr><td class="h">6307</td><td colspan="7"></td></tr><tr><td class="h">6308</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub cut</td></tr>
<tr><td class="h">6309</td><td><div class="c3">1318</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6309">1318</a></div></td><td></td><td><div>3164</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">6310</td><td><div class="c3">1318</div></td><td></td><td></td><td></td><td></td><td><div>2902</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $parent, $prev_sibling, $next_sibling, $last_elt);</td></tr>
<tr><td class="h">6311</td><td colspan="7"></td></tr><tr><td class="h">6312</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# you can&#39;t cut the root, sorry</td></tr>
<tr><td class="h">6313</td><td><div class="c3">1318</div><div class="c3">961</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6313">100</a></div></td><td></td><td></td><td></td><td><div>6260</div><div>2215</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( $parent= $elt-&gt;{parent}) { return; }</td></tr>
<tr><td class="h">6314</td><td colspan="7"></td></tr><tr><td class="h">6315</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# save the old links, that&#39;ll make it easier for some loops</td></tr>
<tr><td class="h">6316</td><td><div class="c3">357</div></td><td></td><td></td><td></td><td></td><td><div>1099</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $link ( qw(parent prev_sibling next_sibling) )</td></tr>
<tr><td class="h">6317</td><td><div class="c3">1071</div></td><td></td><td></td><td></td><td></td><td><div>5239</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;{former}-&gt;{$link}= $elt-&gt;{$link};</td></tr>
<tr><td class="h">6318</td><td><div class="c3">1071</div><div class="c3">1065</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6318">100</a></div></td><td></td><td></td><td></td><td><div>2901</div><div>6274</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $XML::Twig::weakrefs) { weaken( $elt-&gt;{former}-&gt;{$link}); }</td></tr>
<tr><td class="h">6319</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6320</td><td colspan="7"></td></tr><tr><td class="h">6321</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# it we cut the current element then its parent becomes the current elt</td></tr>
<tr><td class="h">6322</td><td><div class="c3">357</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6322">100</a></div></td><td></td><td></td><td></td><td><div>1487</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;{twig_current})</td></tr>
<tr><td class="h">6323</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>144</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $twig_current= $elt-&gt;{parent};</td></tr>
<tr><td class="h">6324</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>162</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $t= $elt-&gt;twig;</td></tr>
<tr><td class="h">6325</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>158</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_current}= $twig_current;</td></tr>
<tr><td class="h">6326</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>147</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$twig_current-&gt;{&#39;twig_current&#39;}=1;</td></tr>
<tr><td class="h">6327</td><td><div class="c3">46</div></td><td></td><td></td><td></td><td></td><td><div>143</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $elt-&gt;{&#39;twig_current&#39;};</td></tr>
<tr><td class="h">6328</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6329</td><td colspan="7"></td></tr><tr><td class="h">6330</td><td><div class="c3">357</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6330">100</a></div></td><td></td><td></td><td></td><td><div>1510</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $parent-&gt;{first_child} == $elt)</td></tr>
<tr><td class="h">6331</td><td><div class="c3">178</div></td><td></td><td></td><td></td><td></td><td><div>762</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $parent-&gt;{first_child}=  $elt-&gt;{next_sibling};</td></tr>
<tr><td class="h">6332</td><td><div class="c3">178</div><div class="c3">96</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6332">100</a></div></td><td></td><td></td><td></td><td><div>721</div><div>360</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( $elt-&gt;{next_sibling}) { $parent-&gt;{empty}= 1; }</td></tr>
<tr><td class="h">6333</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6334</td><td><div class="c3">357</div><div class="c3">153</div><div class="c3">153</div><div class="c3">153</div><div class="c3">152</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6334">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6334">100</a></div></td><td></td><td></td><td></td><td><div>1479</div><div>452</div><div>624</div><div>465</div><div>769</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $parent-&gt;{last_child} == $elt) {  delete $parent-&gt;{empty}; $parent-&gt;{last_child}=$elt-&gt;{prev_sibling}; if( $XML::Twig::weakrefs) { weaken( $parent-&gt;{last_child});} ; }</td></tr>
<tr><td class="h">6335</td><td colspan="7"></td></tr><tr><td class="h">6336</td><td><div class="c3">357</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6336">100</a></div></td><td></td><td></td><td></td><td><div>1441</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $prev_sibling= $elt-&gt;{prev_sibling})</td></tr>
<tr><td class="h">6337</td><td><div class="c3">179</div></td><td></td><td></td><td></td><td></td><td><div>735</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $prev_sibling-&gt;{next_sibling}=  $elt-&gt;{next_sibling}; }</td></tr>
<tr><td class="h">6338</td><td><div class="c3">357</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6338">100</a></div></td><td></td><td></td><td></td><td><div>1383</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $next_sibling= $elt-&gt;{next_sibling})</td></tr>
<tr><td class="h">6339</td><td><div class="c3">204</div><div class="c3">204</div><div class="c3">203</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6339">100</a></div></td><td></td><td></td><td></td><td><div>807</div><div>598</div><div>877</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $next_sibling-&gt;{prev_sibling}=$elt-&gt;{prev_sibling}; if( $XML::Twig::weakrefs) { weaken( $next_sibling-&gt;{prev_sibling});} ; }</td></tr>
<tr><td class="h">6340</td><td colspan="7"></td></tr><tr><td class="h">6341</td><td colspan="7"></td></tr><tr><td class="h">6342</td><td><div class="c3">357</div><div class="c3">357</div><div class="c3">355</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6342">100</a></div></td><td></td><td></td><td></td><td><div>1093</div><div>1020</div><div>1335</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{parent}=undef; if( $XML::Twig::weakrefs) { weaken( $elt-&gt;{parent});} ;</td></tr>
<tr><td class="h">6343</td><td><div class="c3">357</div><div class="c3">357</div><div class="c3">355</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6343">100</a></div></td><td></td><td></td><td></td><td><div>1067</div><div>893</div><div>1696</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{prev_sibling}=undef; if( $XML::Twig::weakrefs) { weaken( $elt-&gt;{prev_sibling});} ;</td></tr>
<tr><td class="h">6344</td><td><div class="c3">357</div></td><td></td><td></td><td></td><td></td><td><div>1024</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{next_sibling}=  undef;</td></tr>
<tr><td class="h">6345</td><td colspan="7"></td></tr><tr><td class="h">6346</td><td><div class="c3">357</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6346">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6346">100</a></div></td><td></td><td></td><td><div>2753</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $prev_sibling &amp;&amp; $next_sibling &amp;&amp; $prev_sibling-&gt;is_text &amp;&amp; ( $XML::Twig::index2gi[$prev_sibling-&gt;{&#39;gi&#39;}] eq $XML::Twig::index2gi[$next_sibling-&gt;{&#39;gi&#39;}]))</td></tr>
<tr><td class="h">6347</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $prev_sibling-&gt;merge_text( $next_sibling); }</td></tr>
<tr><td class="h">6348</td><td colspan="7"></td></tr><tr><td class="h">6349</td><td><div class="c3">357</div></td><td></td><td></td><td></td><td></td><td><div>1045</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">6350</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6351</td><td colspan="7"></td></tr><tr><td class="h">6352</td><td colspan="7"></td></tr><tr><td class="h">6353</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6353">4</a></div></td><td></td><td><div>33</div></td><td class="s">sub former_next_sibling { return $_[0]-&gt;{former}-&gt;{next_sibling}; }</td></tr>
<tr><td class="h">6354</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6354">3</a></div></td><td></td><td><div>25</div></td><td class="s">sub former_prev_sibling { return $_[0]-&gt;{former}-&gt;{prev_sibling}; }</td></tr>
<tr><td class="h">6355</td><td><div class="c3">27</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6355">27</a></div></td><td></td><td><div>255</div></td><td class="s">sub former_parent       { return $_[0]-&gt;{former}-&gt;{parent};       }</td></tr>
<tr><td class="h">6356</td><td colspan="7"></td></tr><tr><td class="h">6357</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub cut_children</td></tr>
<tr><td class="h">6358</td><td><div class="c3">16</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6358">16</a></div></td><td></td><td><div>60</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $exp)= @_;</td></tr>
<tr><td class="h">6359</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>81</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @children= $elt-&gt;children( $exp);</td></tr>
<tr><td class="h">6360</td><td><div class="c3">16</div><div class="c3">32</div></td><td></td><td></td><td></td><td></td><td><div>56</div><div>109</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach (@children) { $_-&gt;cut; }</td></tr>
<tr><td class="h">6361</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @children;</td></tr>
<tr><td class="h">6362</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6363</td><td colspan="7"></td></tr><tr><td class="h">6364</td><td colspan="7"></td></tr><tr><td class="h">6365</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub erase</td></tr>
<tr><td class="h">6366</td><td><div class="c3">82</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6366">82</a></div></td><td></td><td><div>267</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">6367</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#you cannot erase the current element</td></tr>
<tr><td class="h">6368</td><td><div class="c3">82</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6368">100</a></div></td><td></td><td></td><td></td><td><div>357</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;{twig_current})</td></tr>
<tr><td class="h">6369</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;trying to erase an element before it has been completely parsed&quot;; }</td></tr>
<tr><td class="h">6370</td><td><div class="c3">81</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6370">100</a></div></td><td></td><td></td><td></td><td><div>303</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;unless( $elt-&gt;{parent})</td></tr>
<tr><td class="h">6371</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # trying to erase the root (of a twig or of a cut/new element)</td></tr>
<tr><td class="h">6372</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @children= $elt-&gt;_children;</td></tr>
<tr><td class="h">6373</td><td><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6373">100</a></div></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( @children == 1)</td></tr>
<tr><td class="h">6374</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;can only erase an element with no parent if it has a single child&quot;; }</td></tr>
<tr><td class="h">6375</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;_move_extra_data_after_erase;</td></tr>
<tr><td class="h">6376</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>75</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $child= shift @children;</td></tr>
<tr><td class="h">6377</td><td><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6377">50</a></div></td><td></td><td></td><td></td><td><div>18</div><div>15</div><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$child-&gt;{parent}=undef; if( $XML::Twig::weakrefs) { weaken( $child-&gt;{parent});} ;</td></tr>
<tr><td class="h">6378</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $twig= $elt-&gt;twig;</td></tr>
<tr><td class="h">6379</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$twig-&gt;set_root( $child);</td></tr>
<tr><td class="h">6380</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6381</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else     </td></tr>
<tr><td class="h">6382</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # normal case</td></tr>
<tr><td class="h">6383</td><td><div class="c3">76</div></td><td></td><td></td><td></td><td></td><td><div>256</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;_move_extra_data_after_erase;</td></tr>
<tr><td class="h">6384</td><td><div class="c3">76</div></td><td></td><td></td><td></td><td></td><td><div>270</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @children= $elt-&gt;_children;</td></tr>
<tr><td class="h">6385</td><td><div class="c3">76</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6385">100</a></div></td><td></td><td></td><td></td><td><div>244</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( @children)</td></tr>
<tr><td class="h">6386</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # elt has children, move them up</td></tr>
<tr><td class="h">6387</td><td colspan="7"></td></tr><tr><td class="h">6388</td><td><div class="c3">61</div></td><td></td><td></td><td></td><td></td><td><div>194</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $first_child= $elt-&gt;{first_child};</td></tr>
<tr><td class="h">6389</td><td><div class="c3">61</div></td><td></td><td></td><td></td><td></td><td><div>170</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $prev_sibling=$elt-&gt;{prev_sibling};</td></tr>
<tr><td class="h">6390</td><td><div class="c3">61</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6390">100</a></div></td><td></td><td></td><td></td><td><div>155</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $prev_sibling)</td></tr>
<tr><td class="h">6391</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # connect first child to previous sibling</td></tr>
<tr><td class="h">6392</td><td><div class="c3">19</div><div class="c3">19</div><div class="c3">19</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6392">50</a></div></td><td></td><td></td><td></td><td><div>60</div><div>54</div><div>95</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$first_child-&gt;{prev_sibling}=$prev_sibling; if( $XML::Twig::weakrefs) { weaken( $first_child-&gt;{prev_sibling});} ;      </td></tr>
<tr><td class="h">6393</td><td><div class="c3">19</div></td><td></td><td></td><td></td><td></td><td><div>61</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$prev_sibling-&gt;{next_sibling}=  $first_child; </td></tr>
<tr><td class="h">6394</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6395</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6396</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # elt was the first child</td></tr>
<tr><td class="h">6397</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td></td><td><div>190</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{parent}-&gt;set_first_child( $first_child);</td></tr>
<tr><td class="h">6398</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6399</td><td colspan="7"></td></tr><tr><td class="h">6400</td><td><div class="c3">61</div></td><td></td><td></td><td></td><td></td><td><div>217</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $last_child= $elt-&gt;{last_child};</td></tr>
<tr><td class="h">6401</td><td><div class="c3">61</div></td><td></td><td></td><td></td><td></td><td><div>178</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $next_sibling= $elt-&gt;{next_sibling};</td></tr>
<tr><td class="h">6402</td><td><div class="c3">61</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6402">100</a></div></td><td></td><td></td><td></td><td><div>144</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $next_sibling)</td></tr>
<tr><td class="h">6403</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # connect last child to next sibling</td></tr>
<tr><td class="h">6404</td><td><div class="c3">32</div></td><td></td><td></td><td></td><td></td><td><div>101</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$last_child-&gt;{next_sibling}=  $next_sibling;      </td></tr>
<tr><td class="h">6405</td><td><div class="c3">32</div><div class="c3">32</div><div class="c3">32</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6405">50</a></div></td><td></td><td></td><td></td><td><div>94</div><div>94</div><div>144</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$next_sibling-&gt;{prev_sibling}=$last_child; if( $XML::Twig::weakrefs) { weaken( $next_sibling-&gt;{prev_sibling});} ; </td></tr>
<tr><td class="h">6406</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6407</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6408</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # elt was the last child</td></tr>
<tr><td class="h">6409</td><td><div class="c3">29</div></td><td></td><td></td><td></td><td></td><td><div>131</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{parent}-&gt;set_last_child( $last_child);</td></tr>
<tr><td class="h">6410</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6411</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# update parent for all siblings</td></tr>
<tr><td class="h">6412</td><td><div class="c3">61</div></td><td></td><td></td><td></td><td></td><td><div>176</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $child (@children)</td></tr>
<tr><td class="h">6413</td><td><div class="c3">88</div><div class="c3">88</div><div class="c3">88</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6413">50</a></div></td><td></td><td></td><td></td><td><div>331</div><div>229</div><div>522</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $child-&gt;{parent}=$elt-&gt;{parent}; if( $XML::Twig::weakrefs) { weaken( $child-&gt;{parent});} ; }</td></tr>
<tr><td class="h">6414</td><td colspan="7"></td></tr><tr><td class="h">6415</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# merge consecutive text elements if need be</td></tr>
<tr><td class="h">6416</td><td><div class="c3">61</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6416">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6416">100</a></div></td><td></td><td></td><td><div>342</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $prev_sibling &amp;&amp; $prev_sibling-&gt;is_text &amp;&amp; ($XML::Twig::index2gi[$first_child-&gt;{&#39;gi&#39;}] eq $XML::Twig::index2gi[$prev_sibling-&gt;{&#39;gi&#39;}]) )</td></tr>
<tr><td class="h">6417</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $prev_sibling-&gt;merge_text( $first_child); }</td></tr>
<tr><td class="h">6418</td><td><div class="c3">61</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6418">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6418">100</a></div></td><td></td><td></td><td><div>324</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $next_sibling &amp;&amp; $next_sibling-&gt;is_text &amp;&amp; ($XML::Twig::index2gi[$last_child-&gt;{&#39;gi&#39;}] eq $XML::Twig::index2gi[$next_sibling-&gt;{&#39;gi&#39;}]) )</td></tr>
<tr><td class="h">6419</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $last_child-&gt;merge_text( $next_sibling); }</td></tr>
<tr><td class="h">6420</td><td colspan="7"></td></tr><tr><td class="h">6421</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# if parsing and have now a PCDATA text, mark so we can normalize later on if need be</td></tr>
<tr><td class="h">6422</td><td><div class="c3">61</div><div class="c3">9</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6422">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L6422">67</a></div></td><td></td><td></td><td><div>388</div><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;{parent}-&gt;{twig_current} &amp;&amp; $elt-&gt;{last_child}-&gt;is_text) {  $elt-&gt;{parent}-&gt;{twig_to_be_normalized}=1; }</td></tr>
<tr><td class="h">6423</td><td colspan="7"></td></tr><tr><td class="h">6424</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# elt is not referenced any more, so it will be DESTROYed</td></tr>
<tr><td class="h">6425</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# so we&#39;d better break the links to its children</td></tr>
<tr><td class="h">6426</td><td><div class="c3">61</div></td><td></td><td></td><td></td><td></td><td><div>181</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;undef $elt-&gt;{first_child};</td></tr>
<tr><td class="h">6427</td><td><div class="c3">61</div></td><td></td><td></td><td></td><td></td><td><div>166</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;undef $elt-&gt;{last_child};</td></tr>
<tr><td class="h">6428</td><td><div class="c3">61</div></td><td></td><td></td><td></td><td></td><td><div>161</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;undef $elt-&gt;{parent};</td></tr>
<tr><td class="h">6429</td><td><div class="c3">61</div></td><td></td><td></td><td></td><td></td><td><div>592</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;undef $elt-&gt;{prev_sibling};</td></tr>
<tr><td class="h">6430</td><td><div class="c3">61</div></td><td></td><td></td><td></td><td></td><td><div>179</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;undef $elt-&gt;{next_sibling};</td></tr>
<tr><td class="h">6431</td><td colspan="7"></td></tr><tr><td class="h">6432</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6433</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # elt had no child, delete it</td></tr>
<tr><td class="h">6434</td><td><div class="c3">76</div><div class="c3">76</div></td><td></td><td></td><td></td><td></td><td><div>185</div><div>247</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;delete;</td></tr>
<tr><td class="h">6435</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6436</td><td colspan="7"></td></tr><tr><td class="h">6437</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6438</td><td><div class="c3">80</div></td><td></td><td></td><td></td><td></td><td><div>330</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">6439</td><td colspan="7"></td></tr><tr><td class="h">6440</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6441</td><td colspan="7"></td></tr><tr><td class="h">6442</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _move_extra_data_after_erase</td></tr>
<tr><td class="h">6443</td><td><div class="c3">80</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6443">80</a></div></td><td></td><td><div>233</div></td><td class="s">&nbsp;&nbsp;{ my( $elt)= @_;</td></tr>
<tr><td class="h">6444</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# extra_data</td></tr>
<tr><td class="h">6445</td><td><div class="c3">80</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6445">100</a></div></td><td></td><td></td><td></td><td><div>363</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $extra_data= $elt-&gt;{extra_data}) </td></tr>
<tr><td class="h">6446</td><td><div class="c3">20</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6446">100</a></div></td><td></td><td></td><td><div>115</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $target= $elt-&gt;{first_child} || $elt-&gt;{next_sibling};</td></tr>
<tr><td class="h">6447</td><td><div class="c3">20</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6447">100</a></div></td><td></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $target)</td></tr>
<tr><td class="h">6448</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">6449</td><td><div class="c3">14</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6449">100</a></div><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6449">50</a></div></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $target-&gt;is( &#39;#ELT&#39;))</td></tr>
<tr><td class="h">6450</td><td><div class="c3">7</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6450">100</a></div></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $target-&gt;set_extra_data( $extra_data . ($target-&gt;extra_data || &#39;&#39;)); }</td></tr>
<tr><td class="h">6451</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $target-&gt;is( &#39;#TEXT&#39;))</td></tr>
<tr><td class="h">6452</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $target-&gt;_unshift_extra_data_in_pcdata( $extra_data, 0); }  # TO CHECK</td></tr>
<tr><td class="h">6453</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6454</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6455</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $parent= $elt-&gt;{parent}; # always exists or the erase cannot be performed</td></tr>
<tr><td class="h">6456</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$parent-&gt;_prefix_extra_data_before_end_tag( $extra_data); </td></tr>
<tr><td class="h">6457</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6458</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6459</td><td colspan="7"></td></tr><tr><td class="h">6460</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# extra_data_before_end_tag</td></tr>
<tr><td class="h">6461</td><td><div class="c3">80</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6461">100</a></div></td><td></td><td></td><td></td><td><div>259</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $extra_data= $elt-&gt;_extra_data_before_end_tag) </td></tr>
<tr><td class="h">6462</td><td><div class="c3">13</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6462">100</a></div><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6462">50</a></div></td><td></td><td></td><td></td><td><div>65</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( my $target= $elt-&gt;{next_sibling})</td></tr>
<tr><td class="h">6463</td><td><div class="c3">10</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6463">100</a></div><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6463">50</a></div></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $target-&gt;is( &#39;#ELT&#39;))</td></tr>
<tr><td class="h">6464</td><td><div class="c3">3</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6464">100</a></div></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $target-&gt;set_extra_data( $extra_data . ($target-&gt;extra_data || &#39;&#39;)); }</td></tr>
<tr><td class="h">6465</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $target-&gt;is( &#39;#TEXT&#39;))</td></tr>
<tr><td class="h">6466</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">6467</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$target-&gt;_unshift_extra_data_in_pcdata( $extra_data, 0);</td></tr>
<tr><td class="h">6468</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6469</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6470</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( my $parent= $elt-&gt;{parent})</td></tr>
<tr><td class="h">6471</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $parent-&gt;_prefix_extra_data_before_end_tag( $extra_data); }</td></tr>
<tr><td class="h">6472</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6473</td><td colspan="7"></td></tr><tr><td class="h">6474</td><td><div class="c3">80</div></td><td></td><td></td><td></td><td></td><td><div>212</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">6475</td><td colspan="7"></td></tr><tr><td class="h">6476</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6477</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">BEGIN</td></tr>
<tr><td class="h">6478</td><td><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6478">92</a></div></td><td></td><td><div>2377</div></td><td class="s">&nbsp;&nbsp;{ my %method= ( before      =&gt; \&amp;paste_before,</td></tr>
<tr><td class="h">6479</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;after       =&gt; \&amp;paste_after,</td></tr>
<tr><td class="h">6480</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;first_child =&gt; \&amp;paste_first_child,</td></tr>
<tr><td class="h">6481</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last_child  =&gt; \&amp;paste_last_child,</td></tr>
<tr><td class="h">6482</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;within      =&gt; \&amp;paste_within,</td></tr>
<tr><td class="h">6483</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">6484</td><td colspan="7"></td></tr><tr><td class="h">6485</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# paste elt somewhere around ref</td></tr>
<tr><td class="h">6486</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# pos can be first_child (default), last_child, before, after or within</td></tr>
<tr><td class="h">6487</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;sub paste</td></tr>
<tr><td class="h">6488</td><td><div class="c3">503</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6488">503</a></div></td><td></td><td><div>1801</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">6489</td><td><div class="c3">503</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6489">100</a></div></td><td></td><td></td><td></td><td><div>2051</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;{parent}) </td></tr>
<tr><td class="h">6490</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;cannot paste an element that belongs to a tree&quot;; }</td></tr>
<tr><td class="h">6491</td><td><div class="c3">502</div></td><td></td><td></td><td></td><td></td><td><div>690</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $pos;</td></tr>
<tr><td class="h">6492</td><td><div class="c3">502</div></td><td></td><td></td><td></td><td></td><td><div>667</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ref;</td></tr>
<tr><td class="h">6493</td><td><div class="c3">502</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6493">100</a></div></td><td></td><td></td><td></td><td><div>1346</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( ref $_[0]) </td></tr>
<tr><td class="h">6494</td><td><div class="c3">32</div></td><td></td><td></td><td></td><td></td><td><div>69</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $pos= &#39;first_child&#39;; </td></tr>
<tr><td class="h">6495</td><td><div class="c3">32</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6495">100</a></div></td><td></td><td></td><td></td><td><div>120</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;croak &quot;wrong argument order in paste, should be $_[1] first&quot; if($_[1]); </td></tr>
<tr><td class="h">6496</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6497</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6498</td><td><div class="c3">470</div></td><td></td><td></td><td></td><td></td><td><div>1264</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $pos= shift; }</td></tr>
<tr><td class="h">6499</td><td colspan="7"></td></tr><tr><td class="h">6500</td><td><div class="c3">501</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6500">100</a></div></td><td></td><td></td><td></td><td><div>1777</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $method= $method{$pos})</td></tr>
<tr><td class="h">6501</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">6502</td><td><div class="c3">500</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6502">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6502">100</a></div></td><td></td><td></td><td><div>5923</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( ref( $_[0]) &amp;&amp; isa( $_[0], &#39;XML::Twig::Elt&#39;))</td></tr>
<tr><td class="h">6503</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6503">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6503">100</a></div></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( ! defined( $_[0]))</td></tr>
<tr><td class="h">6504</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;missing target in paste&quot;; }</td></tr>
<tr><td class="h">6505</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( ! ref( $_[0]))</td></tr>
<tr><td class="h">6506</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;wrong target type in paste (not a reference), should be XML::Twig::Elt or a subclass&quot;; }</td></tr>
<tr><td class="h">6507</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6508</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $ref= ref $_[0];</td></tr>
<tr><td class="h">6509</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;croak &quot;wrong target type in paste: &#39;$ref&#39;, should be XML::Twig::Elt or a subclass&quot;;</td></tr>
<tr><td class="h">6510</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6511</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6512</td><td><div class="c3">496</div></td><td></td><td></td><td></td><td></td><td><div>1177</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ref= $_[0];</td></tr>
<tr><td class="h">6513</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# check here so error message lists the caller file/line</td></tr>
<tr><td class="h">6514</td><td><div class="c3">496</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6514">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6514">100</a></div></td><td></td><td></td><td><div>4610</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( !$ref-&gt;{parent} &amp;&amp; ($pos=~ m{^(before|after)$}) &amp;&amp; !(exists $elt-&gt;{&#39;target&#39;}) &amp;&amp; !(exists $elt-&gt;{&#39;comment&#39;})) </td></tr>
<tr><td class="h">6515</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;cannot paste $1 root&quot;; }</td></tr>
<tr><td class="h">6516</td><td><div class="c3">490</div></td><td></td><td></td><td></td><td></td><td><div>1912</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;$method( @_); </td></tr>
<tr><td class="h">6517</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6518</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6519</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;tried to paste in wrong position &#39;$pos&#39;, allowed positions &quot; . </td></tr>
<tr><td class="h">6520</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot; are &#39;first_child&#39;, &#39;last_child&#39;, &#39;before&#39;, &#39;after&#39; and &quot;    .</td></tr>
<tr><td class="h">6521</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;&#39;within&#39;&quot;;</td></tr>
<tr><td class="h">6522</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6523</td><td><div class="c3">490</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6523">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L6523">67</a></div></td><td></td><td></td><td><div>2434</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( (my $ids= $elt-&gt;{twig_id_list}) &amp;&amp; (my $t= $ref-&gt;twig) )</td></tr>
<tr><td class="h">6524</td><td><div class="c3">22</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L6524">50</a></div></td><td></td><td></td><td><div>87</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $t-&gt;{twig_id_list}||={};</td></tr>
<tr><td class="h">6525</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>109</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $id (keys %$ids)</td></tr>
<tr><td class="h">6526</td><td><div class="c3">24</div></td><td></td><td></td><td></td><td></td><td><div>119</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $t-&gt;{twig_id_list}-&gt;{$id}= $ids-&gt;{$id}; </td></tr>
<tr><td class="h">6527</td><td><div class="c3">24</div><div class="c3">24</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6527">50</a></div></td><td></td><td></td><td></td><td><div>67</div><div>170</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $XML::Twig::weakrefs) { weaken( $t-&gt;{twig_id_list}-&gt;{$id}); }</td></tr>
<tr><td class="h">6528</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6529</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6530</td><td><div class="c3">490</div></td><td></td><td></td><td></td><td></td><td><div>1642</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">6531</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6532</td><td colspan="7"></td></tr><tr><td class="h">6533</td><td colspan="7"></td></tr><tr><td class="h">6534</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;sub paste_before</td></tr>
<tr><td class="h">6535</td><td><div class="c3">91</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6535">91</a></div></td><td></td><td><div>316</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my( $elt, $ref)= @_;</td></tr>
<tr><td class="h">6536</td><td><div class="c3">91</div></td><td></td><td></td><td></td><td></td><td><div>232</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my( $parent, $prev_sibling, $next_sibling );</td></tr>
<tr><td class="h">6537</td><td colspan="7"></td></tr><tr><td class="h">6538</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# trying to paste before an orphan (root or detached wlt)</td></tr>
<tr><td class="h">6539</td><td><div class="c3">91</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6539">100</a></div></td><td></td><td></td><td></td><td><div>362</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( $ref-&gt;{parent}) </td></tr>
<tr><td class="h">6540</td><td><div class="c3">4</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6540">50</a></div></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( my $t= $ref-&gt;twig)</td></tr>
<tr><td class="h">6541</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6541">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6541">100</a></div></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( (exists $elt-&gt;{&#39;comment&#39;}) || (exists $elt-&gt;{&#39;target&#39;})) # we can still do this</td></tr>
<tr><td class="h">6542</td><td><div class="c3">2</div><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $t-&gt;_add_cpi_outside_of_root( leading_cpi =&gt; $elt); return; }</td></tr>
<tr><td class="h">6543</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6544</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;cannot paste before root&quot;; }</td></tr>
<tr><td class="h">6545</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6546</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6547</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;cannot paste before an orphan element&quot;; }</td></tr>
<tr><td class="h">6548</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6549</td><td><div class="c3">87</div></td><td></td><td></td><td></td><td></td><td><div>246</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$parent= $ref-&gt;{parent};</td></tr>
<tr><td class="h">6550</td><td><div class="c3">87</div></td><td></td><td></td><td></td><td></td><td><div>232</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$prev_sibling= $ref-&gt;{prev_sibling};</td></tr>
<tr><td class="h">6551</td><td><div class="c3">87</div></td><td></td><td></td><td></td><td></td><td><div>149</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$next_sibling= $ref;</td></tr>
<tr><td class="h">6552</td><td colspan="7"></td></tr><tr><td class="h">6553</td><td><div class="c3">87</div><div class="c3">87</div><div class="c3">87</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6553">50</a></div></td><td></td><td></td><td></td><td><div>263</div><div>238</div><div>428</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{parent}=$parent; if( $XML::Twig::weakrefs) { weaken( $elt-&gt;{parent});} ;</td></tr>
<tr><td class="h">6554</td><td><div class="c3">87</div><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6554">100</a></div></td><td></td><td></td><td></td><td><div>344</div><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $parent-&gt;{first_child} == $ref) { $parent-&gt;{first_child}=  $elt; }</td></tr>
<tr><td class="h">6555</td><td colspan="7"></td></tr><tr><td class="h">6556</td><td><div class="c3">87</div><div class="c3">84</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6556">100</a></div></td><td></td><td></td><td></td><td><div>227</div><div>325</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $prev_sibling) { $prev_sibling-&gt;{next_sibling}=  $elt; }</td></tr>
<tr><td class="h">6557</td><td><div class="c3">87</div><div class="c3">87</div><div class="c3">87</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6557">50</a></div></td><td></td><td></td><td></td><td><div>350</div><div>235</div><div>421</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{prev_sibling}=$prev_sibling; if( $XML::Twig::weakrefs) { weaken( $elt-&gt;{prev_sibling});} ;</td></tr>
<tr><td class="h">6558</td><td colspan="7"></td></tr><tr><td class="h">6559</td><td><div class="c3">87</div><div class="c3">87</div><div class="c3">87</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6559">50</a></div></td><td></td><td></td><td></td><td><div>262</div><div>248</div><div>379</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$next_sibling-&gt;{prev_sibling}=$elt; if( $XML::Twig::weakrefs) { weaken( $next_sibling-&gt;{prev_sibling});} ;</td></tr>
<tr><td class="h">6560</td><td><div class="c3">87</div></td><td></td><td></td><td></td><td></td><td><div>326</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{next_sibling}=  $ref;</td></tr>
<tr><td class="h">6561</td><td><div class="c3">87</div></td><td></td><td></td><td></td><td></td><td><div>243</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">6562</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6563</td><td colspan="7"></td></tr><tr><td class="h">6564</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sub paste_after</td></tr>
<tr><td class="h">6565</td><td><div class="c3">176</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6565">176</a></div></td><td></td><td><div>591</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my( $elt, $ref)= @_;</td></tr>
<tr><td class="h">6566</td><td><div class="c3">176</div></td><td></td><td></td><td></td><td></td><td><div>424</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my( $parent, $prev_sibling, $next_sibling );</td></tr>
<tr><td class="h">6567</td><td colspan="7"></td></tr><tr><td class="h">6568</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# trying to paste after an orphan (root or detached wlt)</td></tr>
<tr><td class="h">6569</td><td><div class="c3">176</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6569">100</a></div></td><td></td><td></td><td></td><td><div>659</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( $ref-&gt;{parent}) </td></tr>
<tr><td class="h">6570</td><td><div class="c3">4</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6570">50</a></div></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( my $t= $ref-&gt;twig)</td></tr>
<tr><td class="h">6571</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6571">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6571">100</a></div></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( (exists $elt-&gt;{&#39;comment&#39;}) || (exists $elt-&gt;{&#39;target&#39;})) # we can still do this</td></tr>
<tr><td class="h">6572</td><td><div class="c3">2</div><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $t-&gt;_add_cpi_outside_of_root( trailing_cpi =&gt; $elt); return; }</td></tr>
<tr><td class="h">6573</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6574</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;cannot paste after root&quot;; }</td></tr>
<tr><td class="h">6575</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6576</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6577</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;cannot paste after an orphan element&quot;; }</td></tr>
<tr><td class="h">6578</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6579</td><td><div class="c3">172</div></td><td></td><td></td><td></td><td></td><td><div>449</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$parent= $ref-&gt;{parent};</td></tr>
<tr><td class="h">6580</td><td><div class="c3">172</div></td><td></td><td></td><td></td><td></td><td><div>307</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$prev_sibling= $ref;</td></tr>
<tr><td class="h">6581</td><td><div class="c3">172</div></td><td></td><td></td><td></td><td></td><td><div>462</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$next_sibling= $ref-&gt;{next_sibling};</td></tr>
<tr><td class="h">6582</td><td colspan="7"></td></tr><tr><td class="h">6583</td><td><div class="c3">172</div><div class="c3">172</div><div class="c3">172</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6583">50</a></div></td><td></td><td></td><td></td><td><div>511</div><div>481</div><div>757</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{parent}=$parent; if( $XML::Twig::weakrefs) { weaken( $elt-&gt;{parent});} ;</td></tr>
<tr><td class="h">6584</td><td><div class="c3">172</div><div class="c3">142</div><div class="c3">142</div><div class="c3">142</div><div class="c3">142</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6584">50</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6584">100</a></div></td><td></td><td></td><td></td><td><div>766</div><div>429</div><div>429</div><div>369</div><div>698</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $parent-&gt;{last_child}== $ref) {  delete $parent-&gt;{empty}; $parent-&gt;{last_child}=$elt; if( $XML::Twig::weakrefs) { weaken( $parent-&gt;{last_child});} ; }</td></tr>
<tr><td class="h">6585</td><td colspan="7"></td></tr><tr><td class="h">6586</td><td><div class="c3">172</div></td><td></td><td></td><td></td><td></td><td><div>506</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$prev_sibling-&gt;{next_sibling}=  $elt;</td></tr>
<tr><td class="h">6587</td><td><div class="c3">172</div><div class="c3">172</div><div class="c3">172</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6587">50</a></div></td><td></td><td></td><td></td><td><div>477</div><div>456</div><div>638</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{prev_sibling}=$prev_sibling; if( $XML::Twig::weakrefs) { weaken( $elt-&gt;{prev_sibling});} ;</td></tr>
<tr><td class="h">6588</td><td colspan="7"></td></tr><tr><td class="h">6589</td><td><div class="c3">172</div><div class="c3">30</div><div class="c3">30</div><div class="c3">30</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6589">50</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6589">100</a></div></td><td></td><td></td><td></td><td><div>499</div><div>93</div><div>77</div><div>151</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $next_sibling) { $next_sibling-&gt;{prev_sibling}=$elt; if( $XML::Twig::weakrefs) { weaken( $next_sibling-&gt;{prev_sibling});} ; }</td></tr>
<tr><td class="h">6590</td><td><div class="c3">172</div></td><td></td><td></td><td></td><td></td><td><div>517</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{next_sibling}=  $next_sibling;</td></tr>
<tr><td class="h">6591</td><td><div class="c3">172</div></td><td></td><td></td><td></td><td></td><td><div>473</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">6592</td><td colspan="7"></td></tr><tr><td class="h">6593</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6594</td><td colspan="7"></td></tr><tr><td class="h">6595</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;sub paste_first_child</td></tr>
<tr><td class="h">6596</td><td><div class="c3">52</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6596">52</a></div></td><td></td><td><div>177</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my( $elt, $ref)= @_;</td></tr>
<tr><td class="h">6597</td><td><div class="c3">52</div></td><td></td><td></td><td></td><td></td><td><div>138</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my( $parent, $prev_sibling, $next_sibling );</td></tr>
<tr><td class="h">6598</td><td><div class="c3">52</div></td><td></td><td></td><td></td><td></td><td><div>106</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$parent= $ref;</td></tr>
<tr><td class="h">6599</td><td><div class="c3">52</div></td><td></td><td></td><td></td><td></td><td><div>166</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$next_sibling= $ref-&gt;{first_child};</td></tr>
<tr><td class="h">6600</td><td><div class="c3">52</div></td><td></td><td></td><td></td><td></td><td><div>141</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $ref-&gt;{empty};</td></tr>
<tr><td class="h">6601</td><td colspan="7"></td></tr><tr><td class="h">6602</td><td><div class="c3">52</div><div class="c3">52</div><div class="c3">52</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6602">50</a></div></td><td></td><td></td><td></td><td><div>164</div><div>161</div><div>321</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{parent}=$parent; if( $XML::Twig::weakrefs) { weaken( $elt-&gt;{parent});} ;</td></tr>
<tr><td class="h">6603</td><td><div class="c3">52</div></td><td></td><td></td><td></td><td></td><td><div>160</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$parent-&gt;{first_child}=  $elt;</td></tr>
<tr><td class="h">6604</td><td><div class="c3">52</div><div class="c3">31</div><div class="c3">31</div><div class="c3">31</div><div class="c3">31</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6604">50</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6604">100</a></div></td><td></td><td></td><td></td><td><div>212</div><div>80</div><div>87</div><div>91</div><div>152</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( $parent-&gt;{last_child}) {  delete $parent-&gt;{empty}; $parent-&gt;{last_child}=$elt; if( $XML::Twig::weakrefs) { weaken( $parent-&gt;{last_child});} ; }</td></tr>
<tr><td class="h">6605</td><td colspan="7"></td></tr><tr><td class="h">6606</td><td><div class="c3">52</div><div class="c3">52</div><div class="c3">52</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6606">50</a></div></td><td></td><td></td><td></td><td><div>165</div><div>156</div><div>217</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{prev_sibling}=undef; if( $XML::Twig::weakrefs) { weaken( $elt-&gt;{prev_sibling});} ;</td></tr>
<tr><td class="h">6607</td><td colspan="7"></td></tr><tr><td class="h">6608</td><td><div class="c3">52</div><div class="c3">21</div><div class="c3">21</div><div class="c3">21</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6608">50</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6608">100</a></div></td><td></td><td></td><td></td><td><div>147</div><div>62</div><div>72</div><div>112</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $next_sibling) { $next_sibling-&gt;{prev_sibling}=$elt; if( $XML::Twig::weakrefs) { weaken( $next_sibling-&gt;{prev_sibling});} ; }</td></tr>
<tr><td class="h">6609</td><td><div class="c3">52</div></td><td></td><td></td><td></td><td></td><td><div>164</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{next_sibling}=  $next_sibling;</td></tr>
<tr><td class="h">6610</td><td><div class="c3">52</div></td><td></td><td></td><td></td><td></td><td><div>146</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">6611</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6612</td><td colspan="7"></td></tr><tr><td class="h">6613</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;sub paste_last_child</td></tr>
<tr><td class="h">6614</td><td><div class="c3">3404</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6614">3404</a></div></td><td></td><td><div>11197</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my( $elt, $ref)= @_;</td></tr>
<tr><td class="h">6615</td><td><div class="c3">3404</div></td><td></td><td></td><td></td><td></td><td><div>7730</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my( $parent, $prev_sibling, $next_sibling );</td></tr>
<tr><td class="h">6616</td><td><div class="c3">3404</div></td><td></td><td></td><td></td><td></td><td><div>6011</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$parent= $ref;</td></tr>
<tr><td class="h">6617</td><td><div class="c3">3404</div></td><td></td><td></td><td></td><td></td><td><div>9756</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$prev_sibling= $ref-&gt;{last_child};</td></tr>
<tr><td class="h">6618</td><td><div class="c3">3404</div></td><td></td><td></td><td></td><td></td><td><div>8805</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $ref-&gt;{empty};</td></tr>
<tr><td class="h">6619</td><td colspan="7"></td></tr><tr><td class="h">6620</td><td><div class="c3">3404</div><div class="c3">3404</div><div class="c3">3404</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6620">50</a></div></td><td></td><td></td><td></td><td><div>9905</div><div>9262</div><div>16370</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{parent}=$parent; if( $XML::Twig::weakrefs) { weaken( $elt-&gt;{parent});} ;</td></tr>
<tr><td class="h">6621</td><td><div class="c3">3404</div><div class="c3">3404</div><div class="c3">3404</div><div class="c3">3404</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6621">50</a></div></td><td></td><td></td><td></td><td><div>7792</div><div>10052</div><div>8540</div><div>15543</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $parent-&gt;{empty}; $parent-&gt;{last_child}=$elt; if( $XML::Twig::weakrefs) { weaken( $parent-&gt;{last_child});} ;</td></tr>
<tr><td class="h">6622</td><td><div class="c3">3404</div><div class="c3">1986</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6622">100</a></div></td><td></td><td></td><td></td><td><div>12905</div><div>6443</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( $parent-&gt;{first_child}) { $parent-&gt;{first_child}=  $elt; }</td></tr>
<tr><td class="h">6623</td><td colspan="7"></td></tr><tr><td class="h">6624</td><td><div class="c3">3404</div><div class="c3">3404</div><div class="c3">3404</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6624">50</a></div></td><td></td><td></td><td></td><td><div>10167</div><div>8172</div><div>13214</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{prev_sibling}=$prev_sibling; if( $XML::Twig::weakrefs) { weaken( $elt-&gt;{prev_sibling});} ;</td></tr>
<tr><td class="h">6625</td><td><div class="c3">3404</div><div class="c3">1418</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6625">100</a></div></td><td></td><td></td><td></td><td><div>8343</div><div>4233</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $prev_sibling) { $prev_sibling-&gt;{next_sibling}=  $elt; }</td></tr>
<tr><td class="h">6626</td><td colspan="7"></td></tr><tr><td class="h">6627</td><td><div class="c3">3404</div></td><td></td><td></td><td></td><td></td><td><div>9870</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{next_sibling}=  undef;</td></tr>
<tr><td class="h">6628</td><td><div class="c3">3404</div></td><td></td><td></td><td></td><td></td><td><div>8298</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">6629</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6630</td><td colspan="7"></td></tr><tr><td class="h">6631</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;sub paste_within</td></tr>
<tr><td class="h">6632</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6632">2</a></div></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my( $elt, $ref, $offset)= @_;</td></tr>
<tr><td class="h">6633</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6633">100</a></div></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $text= $ref-&gt;is_text ? $ref : $ref-&gt;next_elt( &#39;#TEXT&#39;, $ref);</td></tr>
<tr><td class="h">6634</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $new= $text-&gt;split_at( $offset);</td></tr>
<tr><td class="h">6635</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;paste_before( $new);</td></tr>
<tr><td class="h">6636</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">6637</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6638</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6639</td><td colspan="7"></td></tr><tr><td class="h">6640</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># load an element into a structure similar to XML::Simple&#39;s</td></tr>
<tr><td class="h">6641</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub simplify</td></tr>
<tr><td class="h">6642</td><td><div class="c3">121</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6642">121</a></div></td><td></td><td><div>320</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">6643</td><td colspan="7"></td></tr><tr><td class="h">6644</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# normalize option names</td></tr>
<tr><td class="h">6645</td><td><div class="c3">121</div></td><td></td><td></td><td></td><td></td><td><div>657</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %options= @_;</td></tr>
<tr><td class="h">6646</td><td><div class="c3">121</div><div class="c3">117</div></td><td></td><td></td><td></td><td></td><td><div>532</div><div>587</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;%options= map { my ($key, $val)= ($_, $options{$_});</td></tr>
<tr><td class="h">6647</td><td><div class="c3">117</div></td><td></td><td></td><td></td><td></td><td><div>871</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$key=~ s{(\w)([A-Z])}{$1_\L$2}g;</td></tr>
<tr><td class="h">6648</td><td><div class="c3">117</div></td><td></td><td></td><td></td><td></td><td><div>946</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$key =&gt; $val</td></tr>
<tr><td class="h">6649</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} keys %options;</td></tr>
<tr><td class="h">6650</td><td colspan="7"></td></tr><tr><td class="h">6651</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# check options</td></tr>
<tr><td class="h">6652</td><td><div class="c3">121</div></td><td></td><td></td><td></td><td></td><td><div>1134</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @allowed_options= qw( keyattr forcearray noattr content_key</td></tr>
<tr><td class="h">6653</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var var_regexp variables var_attr </td></tr>
<tr><td class="h">6654</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;group_tags forcecontent</td></tr>
<tr><td class="h">6655</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;normalise_space normalize_space</td></tr>
<tr><td class="h">6656</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">6657</td><td><div class="c3">121</div><div class="c3">1452</div></td><td></td><td></td><td></td><td></td><td><div>304</div><div>5722</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %allowed_options= map { $_ =&gt; 1 } @allowed_options;</td></tr>
<tr><td class="h">6658</td><td><div class="c3">121</div></td><td></td><td></td><td></td><td></td><td><div>1038</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $option (keys %options)</td></tr>
<tr><td class="h">6659</td><td><div class="c3">117</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6659">50</a></div></td><td></td><td></td><td></td><td><div>662</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ warn &quot;invalid option $option\n&quot; unless( $allowed_options{$option}); }</td></tr>
<tr><td class="h">6660</td><td colspan="7"></td></tr><tr><td class="h">6661</td><td><div class="c3">121</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L6661">67</a></div></td><td></td><td></td><td><div>1341</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$options{normalise_space} ||= $options{normalize_space} || 0;</td></tr>
<tr><td class="h">6662</td><td colspan="7"></td></tr><tr><td class="h">6663</td><td><div class="c3">121</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6663">100</a></div></td><td></td><td></td><td><div>610</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$options{content_key} ||= &#39;content&#39;;</td></tr>
<tr><td class="h">6664</td><td><div class="c3">121</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6664">100</a></div></td><td></td><td></td><td></td><td><div>766</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $options{content_key}=~ m{^-})</td></tr>
<tr><td class="h">6665</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # need to remove the - and to activate extra folding</td></tr>
<tr><td class="h">6666</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$options{content_key}=~ s{^-}{};</td></tr>
<tr><td class="h">6667</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$options{extra_folding}= 1;</td></tr>
<tr><td class="h">6668</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6669</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6670</td><td><div class="c3">116</div></td><td></td><td></td><td></td><td></td><td><div>406</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $options{extra_folding}= 0; }</td></tr>
<tr><td class="h">6671</td><td colspan="7"></td></tr><tr><td class="h">6672</td><td><div class="c3">121</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6672">100</a></div></td><td></td><td></td><td><div>520</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$options{forcearray} ||=0; </td></tr>
<tr><td class="h">6673</td><td><div class="c3">121</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6673">100</a></div></td><td></td><td></td><td></td><td><div>604</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( isa( $options{forcearray}, &#39;ARRAY&#39;))</td></tr>
<tr><td class="h">6674</td><td><div class="c3">5</div><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>12</div><div>28</div><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my %forcearray_tags= map { $_ =&gt; 1 } @{$options{forcearray}};</td></tr>
<tr><td class="h">6675</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$options{forcearray_tags}= \%forcearray_tags;</td></tr>
<tr><td class="h">6676</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$options{forcearray}= 0;</td></tr>
<tr><td class="h">6677</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6678</td><td colspan="7"></td></tr><tr><td class="h">6679</td><td><div class="c3">121</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6679">100</a></div></td><td></td><td></td><td><div>747</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$options{keyattr}     ||= [&#39;name&#39;, &#39;key&#39;, &#39;id&#39;];</td></tr>
<tr><td class="h">6680</td><td><div class="c3">121</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6680">100</a></div><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6680">50</a></div></td><td></td><td></td><td></td><td><div>653</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( ref $options{keyattr} eq &#39;ARRAY&#39;)</td></tr>
<tr><td class="h">6681</td><td><div class="c3">106</div><div class="c3">106</div></td><td></td><td></td><td></td><td></td><td><div>206</div><div>454</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ foreach my $keyattr (@{$options{keyattr}})</td></tr>
<tr><td class="h">6682</td><td><div class="c3">293</div></td><td></td><td></td><td></td><td></td><td><div>1823</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my( $prefix, $att)= ($keyattr=~ m{^([+-])?(.*)});</td></tr>
<tr><td class="h">6683</td><td><div class="c3">293</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L6683">50</a></div></td><td></td><td></td><td><div>1083</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$prefix ||= &#39;&#39;;</td></tr>
<tr><td class="h">6684</td><td><div class="c3">293</div></td><td></td><td></td><td></td><td></td><td><div>1315</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$options{key_for_all}-&gt;{$att}= 1;</td></tr>
<tr><td class="h">6685</td><td><div class="c3">293</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6685">50</a></div></td><td></td><td></td><td></td><td><div>1766</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$options{remove_key_for_all}-&gt;{$att}=1 unless( $prefix eq &#39;+&#39;);</td></tr>
<tr><td class="h">6686</td><td><div class="c3">293</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6686">50</a></div></td><td></td><td></td><td></td><td><div>1252</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$options{prefix_key_for_all}-&gt;{$att}=1 if( $prefix eq &#39;-&#39;);</td></tr>
<tr><td class="h">6687</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6688</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6689</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( ref $options{keyattr} eq &#39;HASH&#39;)</td></tr>
<tr><td class="h">6690</td><td><div class="c3">15</div><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>40</div><div>231</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ while( my( $elt, $keyattr)= each %{$options{keyattr}})</td></tr>
<tr><td class="h">6691</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>123</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my( $prefix, $att)= ($keyattr=~ m{^([+-])?(.*)});</td></tr>
<tr><td class="h">6692</td><td><div class="c3">15</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6692">100</a></div></td><td></td><td></td><td><div>63</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$prefix ||=&#39;&#39;;</td></tr>
<tr><td class="h">6693</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>83</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$options{key_for_elt}-&gt;{$elt}= $att;</td></tr>
<tr><td class="h">6694</td><td><div class="c3">15</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6694">100</a></div></td><td></td><td></td><td></td><td><div>71</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$options{remove_key_for_elt}-&gt;{&quot;$elt#$att&quot;}=1 unless( $prefix);</td></tr>
<tr><td class="h">6695</td><td><div class="c3">15</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6695">100</a></div></td><td></td><td></td><td></td><td><div>107</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$options{prefix_key_for_elt}-&gt;{&quot;$elt#$att&quot;}=1 if( $prefix eq &#39;-&#39;);</td></tr>
<tr><td class="h">6696</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6697</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6698</td><td colspan="7"></td></tr><tr><td class="h">6699</td><td colspan="7"></td></tr><tr><td class="h">6700</td><td><div class="c3">121</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L6700">33</a></div></td><td></td><td></td><td><div>767</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$options{var}||= $options{var_attr}; # for compat with XML::Simple</td></tr>
<tr><td class="h">6701</td><td><div class="c3">121</div><div class="c3">11</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6701">100</a></div></td><td></td><td></td><td></td><td><div>405</div><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $options{var}) { $options{var_values}= {}; }</td></tr>
<tr><td class="h">6702</td><td><div class="c3">110</div></td><td></td><td></td><td></td><td></td><td><div>379</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else               { $options{var}=&#39;&#39;;         }</td></tr>
<tr><td class="h">6703</td><td colspan="7"></td></tr><tr><td class="h">6704</td><td><div class="c3">121</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6704">100</a></div></td><td></td><td></td><td></td><td><div>402</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $options{variables}) </td></tr>
<tr><td class="h">6705</td><td><div class="c3">7</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6705">100</a></div></td><td></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $options{var}||= 1;</td></tr>
<tr><td class="h">6706</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$options{var_values}= $options{variables};</td></tr>
<tr><td class="h">6707</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6708</td><td colspan="7"></td></tr><tr><td class="h">6709</td><td><div class="c3">121</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6709">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L6709">67</a></div></td><td></td><td></td><td><div>498</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $options{var_regexp} and !$options{var})</td></tr>
<tr><td class="h">6710</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ warn &quot;var option not used, var_regexp option ignored\n&quot;; }</td></tr>
<tr><td class="h">6711</td><td><div class="c3">121</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6711">100</a></div></td><td></td><td></td><td><div>522</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$options{var_regexp} ||= &#39;\$\{?(\w+)\}?&#39;;</td></tr>
<tr><td class="h">6712</td><td colspan="7"></td></tr><tr><td class="h">6713</td><td><div class="c3">121</div></td><td></td><td></td><td></td><td></td><td><div>538</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;_simplify( \%options);</td></tr>
<tr><td class="h">6714</td><td colspan="7"></td></tr><tr><td class="h">6715</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;}</td></tr>
<tr><td class="h">6716</td><td colspan="7"></td></tr><tr><td class="h">6717</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _simplify</td></tr>
<tr><td class="h">6718</td><td><div class="c3">762</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6718">762</a></div></td><td></td><td><div>2352</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $options)= @_;</td></tr>
<tr><td class="h">6719</td><td colspan="7"></td></tr><tr><td class="h">6720</td><td><div class="c3">762</div></td><td></td><td></td><td></td><td></td><td><div>1282</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $data;</td></tr>
<tr><td class="h">6721</td><td colspan="7"></td></tr><tr><td class="h">6722</td><td><div class="c3">762</div></td><td></td><td></td><td></td><td></td><td><div>2703</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $gi= $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}];</td></tr>
<tr><td class="h">6723</td><td><div class="c3">762</div></td><td></td><td></td><td></td><td></td><td><div>2295</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @children= $elt-&gt;_children;</td></tr>
<tr><td class="h">6724</td><td><div class="c3">762</div><div class="c3">730</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6724">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L6724">67</a></div></td><td></td><td></td><td><div>5537</div><div>2061</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %atts= $options-&gt;{noattr} || !$elt-&gt;atts ? () : %{$elt-&gt;atts};</td></tr>
<tr><td class="h">6725</td><td><div class="c3">762</div></td><td></td><td></td><td></td><td></td><td><div>2461</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $nb_atts= keys %atts;</td></tr>
<tr><td class="h">6726</td><td><div class="c3">762</div></td><td></td><td></td><td></td><td></td><td><div>2258</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $nb_children= $elt-&gt;children_count + $nb_atts;</td></tr>
<tr><td class="h">6727</td><td colspan="7"></td></tr><tr><td class="h">6728</td><td><div class="c3">762</div></td><td></td><td></td><td></td><td></td><td><div>1179</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %nb_children;</td></tr>
<tr><td class="h">6729</td><td><div class="c3">762</div><div class="c3">1116</div></td><td></td><td></td><td></td><td></td><td><div>2246</div><div>3698</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach (@children)   { $nb_children{$_-&gt;tag}++; }</td></tr>
<tr><td class="h">6730</td><td><div class="c3">762</div><div class="c3">576</div></td><td></td><td></td><td></td><td></td><td><div>3370</div><div>2361</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach (keys %atts)  { $nb_children{$_}++;      }</td></tr>
<tr><td class="h">6731</td><td colspan="7"></td></tr><tr><td class="h">6732</td><td><div class="c3">762</div></td><td></td><td></td><td></td><td></td><td><div>1491</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $arrays; # tag =&gt; array where elements are stored</td></tr>
<tr><td class="h">6733</td><td colspan="7"></td></tr><tr><td class="h">6734</td><td colspan="7"></td></tr><tr><td class="h">6735</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# store children</td></tr>
<tr><td class="h">6736</td><td><div class="c3">762</div></td><td></td><td></td><td></td><td></td><td><div>2124</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $child (@children)</td></tr>
<tr><td class="h">6737</td><td><div class="c3">1116</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6737">100</a></div></td><td></td><td></td><td></td><td><div>3496</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $child-&gt;is_text)</td></tr>
<tr><td class="h">6738</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # generate with a content key</td></tr>
<tr><td class="h">6739</td><td><div class="c3">475</div></td><td></td><td></td><td></td><td></td><td><div>1458</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $text= $elt-&gt;_text_with_vars( $options);</td></tr>
<tr><td class="h">6740</td><td><div class="c3">475</div><div class="c3">20</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6740">100</a></div></td><td></td><td></td><td></td><td><div>2211</div><div>59</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $options-&gt;{normalise_space} &gt;= 2) { $text= _normalize_space( $text); }</td></tr>
<tr><td class="h">6741</td><td><div class="c3">475</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6741">100</a></div></td><td><div class="c1"><a href="blib-lib-XML-Twig-pm--condition.html#L6741">75</a></div></td><td></td><td></td><td><div>5107</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(    $options-&gt;{force_content}</td></tr>
<tr><td class="h">6742</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| $nb_atts </td></tr>
<tr><td class="h">6743</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| (scalar @children &gt; 1)</td></tr>
<tr><td class="h">6744</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">6745</td><td><div class="c3">201</div></td><td></td><td></td><td></td><td></td><td><div>1513</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $data-&gt;{$options-&gt;{content_key}}= $text; }</td></tr>
<tr><td class="h">6746</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6747</td><td><div class="c3">274</div></td><td></td><td></td><td></td><td></td><td><div>1296</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $data= $text; }</td></tr>
<tr><td class="h">6748</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6749</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6750</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # element with sub elements</td></tr>
<tr><td class="h">6751</td><td><div class="c3">641</div></td><td></td><td></td><td></td><td></td><td><div>2307</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $child_gi= $XML::Twig::index2gi[$child-&gt;{&#39;gi&#39;}];</td></tr>
<tr><td class="h">6752</td><td colspan="7"></td></tr><tr><td class="h">6753</td><td><div class="c3">641</div></td><td></td><td></td><td></td><td></td><td><div>2194</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $child_data= $child-&gt;_simplify( $options);</td></tr>
<tr><td class="h">6754</td><td colspan="7"></td></tr><tr><td class="h">6755</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# first see if we need to simplify further the child data</td></tr>
<tr><td class="h">6756</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# simplify because of grouped tags</td></tr>
<tr><td class="h">6757</td><td><div class="c3">641</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6757">100</a></div></td><td></td><td></td><td></td><td><div>3405</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $grouped_tag= $options-&gt;{group_tags}-&gt;{$child_gi})</td></tr>
<tr><td class="h">6758</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # check that the child data is a hash with a single field</td></tr>
<tr><td class="h">6759</td><td><div class="c3">9</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6759">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L6759">50</a></div></td><td></td><td></td><td><div>141</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless(    (ref( $child_data) eq &#39;HASH&#39;)</td></tr>
<tr><td class="h">6760</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; (keys %$child_data == 1)</td></tr>
<tr><td class="h">6761</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; defined ( my $grouped_child_data= $child_data-&gt;{$grouped_tag})</td></tr>
<tr><td class="h">6762</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">6763</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;error in grouped tag $child_gi&quot;; }</td></tr>
<tr><td class="h">6764</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6765</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $child_data=  $grouped_child_data; }</td></tr>
<tr><td class="h">6766</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6767</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# simplify because of extra folding</td></tr>
<tr><td class="h">6768</td><td><div class="c3">638</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6768">100</a></div></td><td></td><td></td><td></td><td><div>2237</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $options-&gt;{extra_folding})</td></tr>
<tr><td class="h">6769</td><td><div class="c3">27</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6769">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6769">100</a></div></td><td></td><td></td><td><div>312</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if(    (ref( $child_data) eq &#39;HASH&#39;)</td></tr>
<tr><td class="h">6770</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; (keys %$child_data == 1)</td></tr>
<tr><td class="h">6771</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; defined( my $content= $child_data-&gt;{$options-&gt;{content_key}})</td></tr>
<tr><td class="h">6772</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">6773</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $child_data= $content; }</td></tr>
<tr><td class="h">6774</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6775</td><td colspan="7"></td></tr><tr><td class="h">6776</td><td><div class="c3">638</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6776">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6776">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6776">100</a></div></td><td></td><td></td><td><div>2126</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $keyatt= $child-&gt;_key_attr( $options))</td></tr>
<tr><td class="h">6777</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # simplify element with key</td></tr>
<tr><td class="h">6778</td><td><div class="c3">207</div></td><td></td><td></td><td></td><td></td><td><div>943</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $key= $child-&gt;{&#39;att&#39;}-&gt;{$keyatt};</td></tr>
<tr><td class="h">6779</td><td><div class="c3">207</div><div class="c3">22</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6779">100</a></div></td><td></td><td></td><td></td><td><div>903</div><div>64</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $options-&gt;{normalise_space} &gt;= 1) { $key= _normalize_space( $key); }</td></tr>
<tr><td class="h">6780</td><td><div class="c3">207</div></td><td></td><td></td><td></td><td></td><td><div>1603</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data-&gt;{$child_gi}-&gt;{$key}= $child_data;</td></tr>
<tr><td class="h">6781</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6782</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif(      $options-&gt;{forcearray}</td></tr>
<tr><td class="h">6783</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||   $options-&gt;{forcearray_tags}-&gt;{$child_gi}</td></tr>
<tr><td class="h">6784</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| ( $nb_children{$child_gi} &gt; 1)</td></tr>
<tr><td class="h">6785</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">6786</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # simplify element to store in an array</td></tr>
<tr><td class="h">6787</td><td><div class="c3">239</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6787">100</a></div></td><td></td><td></td><td><div>1073</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data-&gt;{$child_gi} ||= [];</td></tr>
<tr><td class="h">6788</td><td><div class="c3">239</div><div class="c3">239</div></td><td></td><td></td><td></td><td></td><td><div>423</div><div>1579</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @{$data-&gt;{$child_gi}}, $child_data;</td></tr>
<tr><td class="h">6789</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6790</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6791</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # simplify element to store as a hash field</td></tr>
<tr><td class="h">6792</td><td><div class="c3">192</div></td><td></td><td></td><td></td><td></td><td><div>1555</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data-&gt;{$child_gi}= $child_data;</td></tr>
<tr><td class="h">6793</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6794</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6795</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6796</td><td colspan="7"></td></tr><tr><td class="h">6797</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# store atts</td></tr>
<tr><td class="h">6798</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# TODO: deal with att that already have an element by that name</td></tr>
<tr><td class="h">6799</td><td><div class="c3">759</div></td><td></td><td></td><td></td><td></td><td><div>3135</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $att (keys %atts)</td></tr>
<tr><td class="h">6800</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # do not store if the att is a key that needs to be removed</td></tr>
<tr><td class="h">6801</td><td><div class="c3">576</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6801">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L6801">100</a></div></td><td></td><td></td><td><div>5823</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(    $options-&gt;{remove_key_for_all}-&gt;{$att}</td></tr>
<tr><td class="h">6802</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| $options-&gt;{remove_key_for_elt}-&gt;{&quot;$gi#$att&quot;}</td></tr>
<tr><td class="h">6803</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">6804</td><td><div class="c3">201</div></td><td></td><td></td><td></td><td></td><td><div>690</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ next; }</td></tr>
<tr><td class="h">6805</td><td colspan="7"></td></tr><tr><td class="h">6806</td><td><div class="c3">375</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6806">100</a></div></td><td></td><td></td><td></td><td><div>1921</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $att_text= $options-&gt;{var} ?  _replace_vars_in_text( $atts{$att}, $options) : $atts{$att} ;</td></tr>
<tr><td class="h">6807</td><td><div class="c3">375</div><div class="c3">15</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6807">100</a></div></td><td></td><td></td><td></td><td><div>1569</div><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $options-&gt;{normalise_space} &gt;= 2) { $att_text= _normalize_space( $att_text); }</td></tr>
<tr><td class="h">6808</td><td colspan="7"></td></tr><tr><td class="h">6809</td><td><div class="c3">375</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6809">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L6809">67</a></div></td><td></td><td></td><td><div>4378</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(    $options-&gt;{prefix_key_for_all}-&gt;{$att}</td></tr>
<tr><td class="h">6810</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| $options-&gt;{prefix_key_for_elt}-&gt;{&quot;$gi#$att&quot;}</td></tr>
<tr><td class="h">6811</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">6812</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # prefix the att</td></tr>
<tr><td class="h">6813</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data-&gt;{&quot;-$att&quot;}= $att_text;</td></tr>
<tr><td class="h">6814</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} </td></tr>
<tr><td class="h">6815</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6816</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # normal case</td></tr>
<tr><td class="h">6817</td><td><div class="c3">372</div></td><td></td><td></td><td></td><td></td><td><div>2126</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data-&gt;{$att}= $att_text; </td></tr>
<tr><td class="h">6818</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6819</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6820</td><td colspan="7"></td></tr><tr><td class="h">6821</td><td><div class="c3">759</div></td><td></td><td></td><td></td><td></td><td><div>4501</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $data;</td></tr>
<tr><td class="h">6822</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6823</td><td colspan="7"></td></tr><tr><td class="h">6824</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _key_attr</td></tr>
<tr><td class="h">6825</td><td><div class="c3">638</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6825">638</a></div></td><td></td><td><div>1915</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $options)=@_;</td></tr>
<tr><td class="h">6826</td><td><div class="c3">638</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6826">100</a></div></td><td></td><td></td><td></td><td><div>2738</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return if( $options-&gt;{noattr});</td></tr>
<tr><td class="h">6827</td><td><div class="c3">611</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6827">100</a></div><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L6827">50</a></div></td><td></td><td></td><td></td><td><div>2101</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $options-&gt;{key_for_all})</td></tr>
<tr><td class="h">6828</td><td><div class="c3">530</div></td><td></td><td></td><td></td><td></td><td><div>1506</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ foreach my $att ($elt-&gt;att_names)</td></tr>
<tr><td class="h">6829</td><td><div class="c3">238</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6829">100</a></div></td><td></td><td></td><td></td><td><div>1229</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $options-&gt;{key_for_all}-&gt;{$att})</td></tr>
<tr><td class="h">6830</td><td><div class="c3">198</div></td><td></td><td></td><td></td><td></td><td><div>990</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return $att; }</td></tr>
<tr><td class="h">6831</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6832</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6833</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $options-&gt;{key_for_elt})</td></tr>
<tr><td class="h">6834</td><td><div class="c3">81</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6834">100</a></div></td><td></td><td></td><td></td><td><div>520</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( my $key_for_elt= $options-&gt;{key_for_elt}-&gt;{$XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}]} )</td></tr>
<tr><td class="h">6835</td><td><div class="c3">12</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6835">100</a></div></td><td></td><td></td><td></td><td><div>84</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return $key_for_elt if( defined( $elt-&gt;{&#39;att&#39;}-&gt;{$key_for_elt})); }</td></tr>
<tr><td class="h">6836</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6837</td><td><div class="c3">404</div></td><td></td><td></td><td></td><td></td><td><div>6664</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">6838</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6839</td><td colspan="7"></td></tr><tr><td class="h">6840</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _text_with_vars</td></tr>
<tr><td class="h">6841</td><td><div class="c3">475</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6841">475</a></div></td><td></td><td><div>1541</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $options)= @_;</td></tr>
<tr><td class="h">6842</td><td><div class="c3">475</div></td><td></td><td></td><td></td><td></td><td><div>807</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $text;</td></tr>
<tr><td class="h">6843</td><td><div class="c3">475</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6843">100</a></div></td><td></td><td></td><td></td><td><div>1640</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $options-&gt;{var}) </td></tr>
<tr><td class="h">6844</td><td><div class="c3">68</div></td><td></td><td></td><td></td><td></td><td><div>273</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $text= _replace_vars_in_text( $elt-&gt;text, $options); </td></tr>
<tr><td class="h">6845</td><td><div class="c3">68</div></td><td></td><td></td><td></td><td></td><td><div>226</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;_store_var( $options);</td></tr>
<tr><td class="h">6846</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6847</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6848</td><td><div class="c3">407</div></td><td></td><td></td><td></td><td></td><td><div>1265</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $text= $elt-&gt;text; }</td></tr>
<tr><td class="h">6849</td><td><div class="c3">475</div></td><td></td><td></td><td></td><td></td><td><div>1605</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $text;</td></tr>
<tr><td class="h">6850</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6851</td><td colspan="7"></td></tr><tr><td class="h">6852</td><td colspan="7"></td></tr><tr><td class="h">6853</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _normalize_space</td></tr>
<tr><td class="h">6854</td><td><div class="c3">57</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6854">57</a></div></td><td></td><td><div>141</div></td><td class="s">&nbsp;&nbsp;{ my $text= shift;</td></tr>
<tr><td class="h">6855</td><td><div class="c3">57</div></td><td></td><td></td><td></td><td></td><td><div>246</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$text=~ s{\s+}{ }sg;</td></tr>
<tr><td class="h">6856</td><td><div class="c3">57</div></td><td></td><td></td><td></td><td></td><td><div>183</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$text=~ s{^\s}{};</td></tr>
<tr><td class="h">6857</td><td><div class="c3">57</div></td><td></td><td></td><td></td><td></td><td><div>187</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$text=~ s{\s$}{};</td></tr>
<tr><td class="h">6858</td><td><div class="c3">57</div></td><td></td><td></td><td></td><td></td><td><div>202</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $text;</td></tr>
<tr><td class="h">6859</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6860</td><td colspan="7"></td></tr><tr><td class="h">6861</td><td colspan="7"></td></tr><tr><td class="h">6862</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub att_nb</td></tr>
<tr><td class="h">6863</td><td><div class="c3">14</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6863">50</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6863">14</a></div></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;{ return 0 unless( my $atts= $_[0]-&gt;atts);</td></tr>
<tr><td class="h">6864</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>70</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return scalar keys %$atts;</td></tr>
<tr><td class="h">6865</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6866</td><td colspan="7"></td></tr><tr><td class="h">6867</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub has_no_atts</td></tr>
<tr><td class="h">6868</td><td><div class="c3">3</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6868">50</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6868">3</a></div></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;{ return 1 unless( my $atts= $_[0]-&gt;atts);</td></tr>
<tr><td class="h">6869</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6869">100</a></div></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return scalar keys %$atts ? 0 : 1;</td></tr>
<tr><td class="h">6870</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6871</td><td colspan="7"></td></tr><tr><td class="h">6872</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _replace_vars_in_text</td></tr>
<tr><td class="h">6873</td><td><div class="c3">117</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6873">117</a></div></td><td></td><td><div>442</div></td><td class="s">&nbsp;&nbsp;{ my( $text, $options)= @_;</td></tr>
<tr><td class="h">6874</td><td colspan="7"></td></tr><tr><td class="h">6875</td><td><div class="c3">117</div><div class="c3">14</div><div class="c3">8</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6875">100</a></div></td><td></td><td></td><td></td><td><div>905</div><div>158</div><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$text=~ s{($options-&gt;{var_regexp})}</td></tr>
<tr><td class="h">6876</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( defined( my $value= $options-&gt;{var_values}-&gt;{$2}))</td></tr>
<tr><td class="h">6877</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $value }</td></tr>
<tr><td class="h">6878</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>87</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6879</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ warn &quot;unknown variable $2\n&quot;;</td></tr>
<tr><td class="h">6880</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$1</td></tr>
<tr><td class="h">6881</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6882</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}gex;</td></tr>
<tr><td class="h">6883</td><td><div class="c3">117</div></td><td></td><td></td><td></td><td></td><td><div>410</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $text;</td></tr>
<tr><td class="h">6884</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6885</td><td colspan="7"></td></tr><tr><td class="h">6886</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _store_var</td></tr>
<tr><td class="h">6887</td><td><div class="c3">68</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6887">68</a></div></td><td></td><td><div>199</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $options)= @_;</td></tr>
<tr><td class="h">6888</td><td><div class="c3">68</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6888">100</a></div></td><td></td><td></td><td></td><td><div>497</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( defined (my $var_name= $elt-&gt;{&#39;att&#39;}-&gt;{$options-&gt;{var}}))</td></tr>
<tr><td class="h">6889</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $options-&gt;{var_values}-&gt;{$var_name}= $elt-&gt;text; </td></tr>
<tr><td class="h">6890</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6891</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6892</td><td colspan="7"></td></tr><tr><td class="h">6893</td><td colspan="7"></td></tr><tr><td class="h">6894</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># split a text element at a given offset</td></tr>
<tr><td class="h">6895</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub split_at</td></tr>
<tr><td class="h">6896</td><td><div class="c3">84</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6896">84</a></div></td><td></td><td><div>345</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $offset)= @_;</td></tr>
<tr><td class="h">6897</td><td><div class="c3">84</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6897">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L6897">33</a></div></td><td></td><td></td><td><div>386</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $text_elt= $elt-&gt;is_text ? $elt : $elt-&gt;first_child( TEXT) || return &#39;&#39;;</td></tr>
<tr><td class="h">6898</td><td><div class="c3">84</div></td><td></td><td></td><td></td><td></td><td><div>295</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $string= $text_elt-&gt;text; </td></tr>
<tr><td class="h">6899</td><td><div class="c3">84</div></td><td></td><td></td><td></td><td></td><td><div>292</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $left_string= substr( $string, 0, $offset);</td></tr>
<tr><td class="h">6900</td><td><div class="c3">84</div></td><td></td><td></td><td></td><td></td><td><div>210</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $right_string= substr( $string, $offset);</td></tr>
<tr><td class="h">6901</td><td><div class="c3">84</div></td><td></td><td></td><td></td><td></td><td><div>288</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$text_elt-&gt;set_pcdata( $left_string);</td></tr>
<tr><td class="h">6902</td><td><div class="c3">84</div></td><td></td><td></td><td></td><td></td><td><div>447</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $new_elt= $elt-&gt;new( $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}], $right_string);</td></tr>
<tr><td class="h">6903</td><td><div class="c3">84</div></td><td></td><td></td><td></td><td></td><td><div>310</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$new_elt-&gt;paste( after =&gt; $elt);</td></tr>
<tr><td class="h">6904</td><td><div class="c3">84</div></td><td></td><td></td><td></td><td></td><td><div>252</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $new_elt;</td></tr>
<tr><td class="h">6905</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6906</td><td colspan="7"></td></tr><tr><td class="h">6907</td><td colspan="7"></td></tr><tr><td class="h">6908</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># split an element or its text descendants into several, in place</td></tr>
<tr><td class="h">6909</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># all elements (new and untouched) are returned</td></tr>
<tr><td class="h">6910</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub split    </td></tr>
<tr><td class="h">6911</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6911">6</a></div></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">6912</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @text_chunks;</td></tr>
<tr><td class="h">6913</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @result;</td></tr>
<tr><td class="h">6914</td><td><div class="c3">6</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6914">100</a></div></td><td></td><td></td><td></td><td><div>24</div><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;is_text) { @text_chunks= ($elt); }</td></tr>
<tr><td class="h">6915</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else               { @text_chunks= $elt-&gt;descendants( &#39;#TEXT&#39;); }</td></tr>
<tr><td class="h">6916</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $text_chunk (@text_chunks)</td></tr>
<tr><td class="h">6917</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ push @result, $text_chunk-&gt;_split( 1, @_); }</td></tr>
<tr><td class="h">6918</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @result;</td></tr>
<tr><td class="h">6919</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6920</td><td colspan="7"></td></tr><tr><td class="h">6921</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># split an element or its text descendants into several, in place</td></tr>
<tr><td class="h">6922</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># created elements (those which match the regexp) are returned</td></tr>
<tr><td class="h">6923</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub mark</td></tr>
<tr><td class="h">6924</td><td><div class="c3">26</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6924">26</a></div></td><td></td><td><div>59</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">6925</td><td><div class="c3">26</div></td><td></td><td></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @text_chunks;</td></tr>
<tr><td class="h">6926</td><td><div class="c3">26</div></td><td></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @result;</td></tr>
<tr><td class="h">6927</td><td><div class="c3">26</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6927">100</a></div></td><td></td><td></td><td></td><td><div>89</div><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;is_text) { @text_chunks= ($elt); }</td></tr>
<tr><td class="h">6928</td><td><div class="c3">25</div></td><td></td><td></td><td></td><td></td><td><div>87</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else               { @text_chunks= $elt-&gt;descendants( &#39;#TEXT&#39;); }</td></tr>
<tr><td class="h">6929</td><td><div class="c3">26</div></td><td></td><td></td><td></td><td></td><td><div>92</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $text_chunk (@text_chunks)</td></tr>
<tr><td class="h">6930</td><td><div class="c3">26</div></td><td></td><td></td><td></td><td></td><td><div>118</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ push @result, $text_chunk-&gt;_split( 0, @_); }</td></tr>
<tr><td class="h">6931</td><td><div class="c3">26</div></td><td></td><td></td><td></td><td></td><td><div>124</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @result;</td></tr>
<tr><td class="h">6932</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6933</td><td colspan="7"></td></tr><tr><td class="h">6934</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># split a single text element</td></tr>
<tr><td class="h">6935</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># return_all defines what is returned: if it is true </td></tr>
<tr><td class="h">6936</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># only returns the elements created by matches in the split regexp</td></tr>
<tr><td class="h">6937</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># otherwise all elements (new and untouched) are returned</td></tr>
<tr><td class="h">6938</td><td colspan="7"></td></tr><tr><td class="h">6939</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">{ </td></tr>
<tr><td class="h">6940</td><td colspan="7"></td></tr><tr><td class="h">6941</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub _split</td></tr>
<tr><td class="h">6942</td><td><div class="c3">32</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L6942">32</a></div></td><td></td><td><div>79</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">6943</td><td><div class="c3">32</div></td><td></td><td></td><td></td><td></td><td><div>67</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $return_all= shift;</td></tr>
<tr><td class="h">6944</td><td><div class="c3">32</div></td><td></td><td></td><td></td><td></td><td><div>74</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $regexp= shift;</td></tr>
<tr><td class="h">6945</td><td><div class="c3">32</div></td><td></td><td></td><td></td><td></td><td><div>153</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @tags;</td></tr>
<tr><td class="h">6946</td><td colspan="7"></td></tr><tr><td class="h">6947</td><td><div class="c3">32</div></td><td></td><td></td><td></td><td></td><td><div>125</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while( my $tag= shift())</td></tr>
<tr><td class="h">6948</td><td><div class="c3">30</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6948">100</a></div></td><td></td><td></td><td></td><td><div>82</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( ref $_[0]) </td></tr>
<tr><td class="h">6949</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ push @tags, { tag =&gt; $tag, atts =&gt; shift }; }</td></tr>
<tr><td class="h">6950</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6951</td><td><div class="c3">25</div></td><td></td><td></td><td></td><td></td><td><div>221</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ push @tags, { tag =&gt; $tag }; }</td></tr>
<tr><td class="h">6952</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6953</td><td colspan="7"></td></tr><tr><td class="h">6954</td><td><div class="c3">32</div><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6954">100</a></div></td><td></td><td></td><td></td><td><div>85</div><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( @tags) { @tags= { tag =&gt; $elt-&gt;parent( &#39;#ELT&#39;)-&gt;gi }; }</td></tr>
<tr><td class="h">6955</td><td colspan="7"></td></tr><tr><td class="h">6956</td><td><div class="c3">32</div></td><td></td><td></td><td></td><td></td><td><div>56</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @result;                                 # the returned list of elements</td></tr>
<tr><td class="h">6957</td><td><div class="c3">32</div></td><td></td><td></td><td></td><td></td><td><div>115</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $text= $elt-&gt;text;</td></tr>
<tr><td class="h">6958</td><td><div class="c3">32</div></td><td></td><td></td><td></td><td></td><td><div>141</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $gi= $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}];</td></tr>
<tr><td class="h">6959</td><td colspan="7"></td></tr><tr><td class="h">6960</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 2 uses: if split matches then the first substring reuses $elt</td></tr>
<tr><td class="h">6961</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#         once a split has occured then the last match needs to be put in</td></tr>
<tr><td class="h">6962</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#         a new element      </td></tr>
<tr><td class="h">6963</td><td><div class="c3">32</div></td><td></td><td></td><td></td><td></td><td><div>62</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $previous_match= 0;</td></tr>
<tr><td class="h">6964</td><td colspan="7"></td></tr><tr><td class="h">6965</td><td><div class="c3">32</div></td><td></td><td></td><td></td><td></td><td><div>1125</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while( my( $pre_match, @matches)= $text=~ /^(.*?)$regexp(.*)$/gcs)</td></tr>
<tr><td class="h">6966</td><td><div class="c3">43</div></td><td></td><td></td><td></td><td></td><td><div>312</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $text= pop @matches;</td></tr>
<tr><td class="h">6967</td><td><div class="c3">43</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6967">100</a></div></td><td></td><td></td><td></td><td><div>113</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $previous_match)</td></tr>
<tr><td class="h">6968</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # match, not the first one, create a new text ($gi) element</td></tr>
<tr><td class="h">6969</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_utf8_ify( $pre_match);</td></tr>
<tr><td class="h">6970</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>58</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt= $elt-&gt;insert_new_elt( after =&gt; $gi, $pre_match);</td></tr>
<tr><td class="h">6971</td><td><div class="c3">15</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6971">100</a></div></td><td></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @result, $elt if( $return_all);</td></tr>
<tr><td class="h">6972</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6973</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6974</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # first match in $elt, re-use $elt for the first sub-string</td></tr>
<tr><td class="h">6975</td><td><div class="c3">28</div></td><td></td><td></td><td></td><td></td><td><div>98</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_utf8_ify( $pre_match);</td></tr>
<tr><td class="h">6976</td><td><div class="c3">28</div></td><td></td><td></td><td></td><td></td><td><div>112</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;set_text( $pre_match);</td></tr>
<tr><td class="h">6977</td><td><div class="c3">28</div></td><td></td><td></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$previous_match++;                # store the fact that there was a match</td></tr>
<tr><td class="h">6978</td><td><div class="c3">28</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6978">100</a></div></td><td></td><td></td><td></td><td><div>84</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @result, $elt if( $return_all);</td></tr>
<tr><td class="h">6979</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6980</td><td colspan="7"></td></tr><tr><td class="h">6981</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# now deal with matches captured in the regexp</td></tr>
<tr><td class="h">6982</td><td><div class="c3">43</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L6982">100</a></div></td><td></td><td></td><td></td><td><div>108</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( @matches)</td></tr>
<tr><td class="h">6983</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # match, with capture</td></tr>
<tr><td class="h">6984</td><td><div class="c3">31</div></td><td></td><td></td><td></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $i=0;</td></tr>
<tr><td class="h">6985</td><td><div class="c3">31</div></td><td></td><td></td><td></td><td></td><td><div>82</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $match (@matches)</td></tr>
<tr><td class="h">6986</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # create new element, text is the match</td></tr>
<tr><td class="h">6987</td><td><div class="c3">33</div></td><td></td><td></td><td></td><td></td><td><div>82</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_utf8_ify( $match);</td></tr>
<tr><td class="h">6988</td><td><div class="c3">33</div></td><td></td><td></td><td></td><td></td><td><div>138</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $tag  = $tags[$i]-&gt;{tag};</td></tr>
<tr><td class="h">6989</td><td><div class="c3">33</div><div class="c3">33</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L6989">50</a></div></td><td></td><td></td><td><div>56</div><div>198</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $atts = \%{$tags[$i]-&gt;{atts}} || {};</td></tr>
<tr><td class="h">6990</td><td><div class="c3">33</div></td><td></td><td></td><td></td><td></td><td><div>138</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt= $elt-&gt;insert_new_elt( after =&gt; $tag, $atts, $match);</td></tr>
<tr><td class="h">6991</td><td><div class="c3">33</div></td><td></td><td></td><td></td><td></td><td><div>83</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @result, $elt;</td></tr>
<tr><td class="h">6992</td><td><div class="c3">33</div></td><td></td><td></td><td></td><td></td><td><div>513</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$i= ($i + 1) % @tags;</td></tr>
<tr><td class="h">6993</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6994</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">6995</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">6996</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # match, no captures</td></tr>
<tr><td class="h">6997</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $tag  = $tags[0]-&gt;{tag};</td></tr>
<tr><td class="h">6998</td><td><div class="c3">12</div><div class="c3">12</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L6998">50</a></div></td><td></td><td></td><td><div>22</div><div>72</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $atts = \%{$tags[0]-&gt;{atts}} || {};</td></tr>
<tr><td class="h">6999</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt=  $elt-&gt;insert_new_elt( after =&gt; $tag, $atts);</td></tr>
<tr><td class="h">7000</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>153</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @result, $elt;</td></tr>
<tr><td class="h">7001</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7002</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7003</td><td><div class="c3">32</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7003">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L7003">100</a></div></td><td></td><td></td><td><div>219</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $previous_match &amp;&amp; $text)</td></tr>
<tr><td class="h">7004</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # there was at least 1 match, and there is text left after the match</td></tr>
<tr><td class="h">7005</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt= $elt-&gt;insert_new_elt( after =&gt; $gi, $text);</td></tr>
<tr><td class="h">7006</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7007</td><td colspan="7"></td></tr><tr><td class="h">7008</td><td><div class="c3">32</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7008">100</a></div></td><td></td><td></td><td></td><td><div>81</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @result, $elt if( $return_all);</td></tr>
<tr><td class="h">7009</td><td colspan="7"></td></tr><tr><td class="h">7010</td><td><div class="c3">32</div></td><td></td><td></td><td></td><td></td><td><div>266</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return @result; # return all elements</td></tr>
<tr><td class="h">7011</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7012</td><td colspan="7"></td></tr><tr><td class="h">7013</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# evil hack needed as sometimes </td></tr>
<tr><td class="h">7014</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;my $encode_is_loaded=0;   # so we only load Encode once</td></tr>
<tr><td class="h">7015</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub _utf8_ify</td></tr>
<tr><td class="h">7016</td><td><div class="c3">77</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7016">77</a></div></td><td></td><td><div>186</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $string= shift;</td></tr>
<tr><td class="h">7017</td><td><div class="c3">77</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L7017">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7017">33</a></div></td><td></td><td></td><td><div>498</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $] &gt;= 5.008 and !_keep_encoding()) </td></tr>
<tr><td class="h">7018</td><td><div class="c3">77</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7018">100</a></div></td><td></td><td></td><td></td><td><div>191</div><div>22</div><div>35</div><div>739</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ unless( $encode_is_loaded) { require Encode; import Encode; $encode_is_loaded++; }</td></tr>
<tr><td class="h">7019</td><td><div class="c3">77</div></td><td></td><td></td><td></td><td></td><td><div>311</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Encode::_utf8_on( $string); # the flag should be set but is not</td></tr>
<tr><td class="h">7020</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7021</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7022</td><td colspan="7"></td></tr><tr><td class="h">7023</td><td colspan="7"></td></tr><tr><td class="h">7024</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">7025</td><td colspan="7"></td></tr><tr><td class="h">7026</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">{ my %replace_sub; # cache for complex expressions (expression =&gt; sub)</td></tr>
<tr><td class="h">7027</td><td colspan="7"></td></tr><tr><td class="h">7028</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub subs_text</td></tr>
<tr><td class="h">7029</td><td><div class="c3">23</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7029">23</a></div></td><td></td><td><div>141</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my( $elt, $regexp, $replace)= @_;</td></tr>
<tr><td class="h">7030</td><td colspan="7"></td></tr><tr><td class="h">7031</td><td><div class="c3">23</div></td><td></td><td></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $replacement_string;</td></tr>
<tr><td class="h">7032</td><td><div class="c3">23</div></td><td></td><td></td><td></td><td></td><td><div>70</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $is_string= _is_string( $replace);</td></tr>
<tr><td class="h">7033</td><td><div class="c3">23</div></td><td></td><td></td><td></td><td></td><td><div>124</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $text_elt ($elt-&gt;descendants_or_self( &#39;#TEXT&#39;))</td></tr>
<tr><td class="h">7034</td><td><div class="c3">54</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7034">100</a></div></td><td></td><td></td><td></td><td><div>340</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $is_string)</td></tr>
<tr><td class="h">7035</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $text= $text_elt-&gt;text;</td></tr>
<tr><td class="h">7036</td><td><div class="c3">15</div><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>217</div><div>130</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$text=~ s{$regexp}{ _replace_var( $replace, $1, $2, $3, $4, $5, $6, $7, $8, $9)}egx;</td></tr>
<tr><td class="h">7037</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>65</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$text_elt-&gt;set_text( $text);</td></tr>
<tr><td class="h">7038</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7039</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">7040</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">7041</td><td><div class="c3">39</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7041">67</a></div></td><td></td><td></td><td><div>238</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $replace_sub= ( $replace_sub{$replace} ||= _install_replace_sub( $replace)); </td></tr>
<tr><td class="h">7042</td><td><div class="c3">39</div></td><td></td><td></td><td></td><td></td><td><div>152</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $text= $text_elt-&gt;text;</td></tr>
<tr><td class="h">7043</td><td><div class="c3">39</div></td><td></td><td></td><td></td><td></td><td><div>82</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $pos=0;  # used to skip text that was previously matched</td></tr>
<tr><td class="h">7044</td><td><div class="c3">39</div></td><td></td><td></td><td></td><td></td><td><div>883</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while( my( $pre_match_string, $match_string, @var)= ($text=~ m{(.*?)($regexp)}sg))</td></tr>
<tr><td class="h">7045</td><td><div class="c3">39</div></td><td></td><td></td><td></td><td></td><td><div>562</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $match_start  = length( $pre_match_string);</td></tr>
<tr><td class="h">7046</td><td><div class="c3">39</div></td><td></td><td></td><td></td><td></td><td><div>189</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $match        = $text_elt-&gt;split_at( $match_start + $pos);</td></tr>
<tr><td class="h">7047</td><td><div class="c3">39</div></td><td></td><td></td><td></td><td></td><td><div>103</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $match_length = length( $match_string);</td></tr>
<tr><td class="h">7048</td><td><div class="c3">39</div></td><td></td><td></td><td></td><td></td><td><div>131</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $post_match   = $match-&gt;split_at( $match_length);</td></tr>
<tr><td class="h">7049</td><td><div class="c3">39</div></td><td></td><td></td><td></td><td></td><td><div>174</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$replace_sub-&gt;( $match, @var);</td></tr>
<tr><td class="h">7050</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# merge previous text with current one</td></tr>
<tr><td class="h">7051</td><td><div class="c3">38</div></td><td></td><td></td><td></td><td></td><td><div>67</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $next_sibling;</td></tr>
<tr><td class="h">7052</td><td><div class="c3">38</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L7052">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7052">33</a></div></td><td></td><td></td><td><div>468</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(    ($next_sibling= $text_elt-&gt;{next_sibling})</td></tr>
<tr><td class="h">7053</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; ($XML::Twig::index2gi[$text_elt-&gt;{&#39;gi&#39;}] eq $XML::Twig::index2gi[$next_sibling-&gt;{&#39;gi&#39;}])</td></tr>
<tr><td class="h">7054</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">7055</td><td><div class="c3">38</div></td><td></td><td></td><td></td><td></td><td><div>149</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $text_elt-&gt;merge_text( $next_sibling); }</td></tr>
<tr><td class="h">7056</td><td colspan="7"></td></tr><tr><td class="h">7057</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# if the match is at the beginning of the text an empty #PCDATA is left: remove it </td></tr>
<tr><td class="h">7058</td><td><div class="c3">38</div><div class="c3">18</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7058">100</a></div></td><td></td><td></td><td></td><td><div>171</div><div>58</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( !$text_elt-&gt;text) { $text_elt-&gt;delete; } </td></tr>
<tr><td class="h">7059</td><td colspan="7"></td></tr><tr><td class="h">7060</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# go to next </td></tr>
<tr><td class="h">7061</td><td><div class="c3">38</div></td><td></td><td></td><td></td><td></td><td><div>95</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$text_elt= $post_match;</td></tr>
<tr><td class="h">7062</td><td><div class="c3">38</div></td><td></td><td></td><td></td><td></td><td><div>73</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$text= $post_match-&gt;text;</td></tr>
<tr><td class="h">7063</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# merge last text element with next one if needed,</td></tr>
<tr><td class="h">7064</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# the match will be against the non-matched text,</td></tr>
<tr><td class="h">7065</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# so $pos is used to skip the merged part</td></tr>
<tr><td class="h">7066</td><td><div class="c3">38</div></td><td></td><td></td><td></td><td></td><td><div>129</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $prev_sibling;</td></tr>
<tr><td class="h">7067</td><td><div class="c3">38</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7067">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7067">67</a></div></td><td></td><td></td><td><div>464</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(    ($prev_sibling=  $post_match-&gt;{prev_sibling})</td></tr>
<tr><td class="h">7068</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; ($XML::Twig::index2gi[$post_match-&gt;{&#39;gi&#39;}] eq $XML::Twig::index2gi[$prev_sibling-&gt;{&#39;gi&#39;}])</td></tr>
<tr><td class="h">7069</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">7070</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $pos= length( $prev_sibling-&gt;text);</td></tr>
<tr><td class="h">7071</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$prev_sibling-&gt;merge_text( $post_match); </td></tr>
<tr><td class="h">7072</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7073</td><td colspan="7"></td></tr><tr><td class="h">7074</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# if the match is at the end of the text an empty #PCDATA is left: remove it </td></tr>
<tr><td class="h">7075</td><td><div class="c3">38</div><div class="c3">18</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7075">100</a></div></td><td></td><td></td><td></td><td><div>119</div><div>185</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( !$text_elt-&gt;text) { $text_elt-&gt;delete; } </td></tr>
<tr><td class="h">7076</td><td colspan="7"></td></tr><tr><td class="h">7077</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7078</td><td colspan="7"></td></tr><tr><td class="h">7079</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7080</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7081</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">7082</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7083</td><td colspan="7"></td></tr><tr><td class="h">7084</td><td colspan="7"></td></tr><tr><td class="h">7085</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub _is_string</td></tr>
<tr><td class="h">7086</td><td><div class="c3">23</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7086">100</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7086">23</a></div></td><td></td><td><div>172</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ return ($_[0]=~ m{&amp;e[ln]t}) ? 0: 1 }</td></tr>
<tr><td class="h">7087</td><td colspan="7"></td></tr><tr><td class="h">7088</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub _replace_var</td></tr>
<tr><td class="h">7089</td><td><div class="c3">27</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7089">27</a></div></td><td></td><td><div>261</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my( $string, @var)= @_;</td></tr>
<tr><td class="h">7090</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>106</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unshift @var, undef;</td></tr>
<tr><td class="h">7091</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>166</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string=~ s{\$(\d)}{$var[$1]}g;</td></tr>
<tr><td class="h">7092</td><td><div class="c3">27</div></td><td></td><td></td><td></td><td></td><td><div>189</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $string;</td></tr>
<tr><td class="h">7093</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7094</td><td colspan="7"></td></tr><tr><td class="h">7095</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub _install_replace_sub</td></tr>
<tr><td class="h">7096</td><td><div class="c3">13</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7096">13</a></div></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $replace_exp= shift;</td></tr>
<tr><td class="h">7097</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>154</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @item= split m{(&amp;e[ln]t\s*\([^)]*\))}, $replace_exp;</td></tr>
<tr><td class="h">7098</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $sub= q{ my( $match, @var)= @_; unshift @var, undef; my $new; };</td></tr>
<tr><td class="h">7099</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my( $gi, $exp);</td></tr>
<tr><td class="h">7100</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $item (@item)</td></tr>
<tr><td class="h">7101</td><td><div class="c3">28</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7101">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7101">100</a></div></td><td></td><td></td><td></td><td><div>159</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if(    $item=~ m{^&amp;elt\s*\(([^)]*)\)})</td></tr>
<tr><td class="h">7102</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $exp= $1;</td></tr>
<tr><td class="h">7103</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7104</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $item=~ m{^&amp;ent\s*\(\s*([^\s)]*)\s*\)})</td></tr>
<tr><td class="h">7105</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $exp= &quot; &#39;#ENT&#39; =&gt; $1&quot;; }</td></tr>
<tr><td class="h">7106</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">7107</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>70</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $exp= qq{ &#39;#PCDATA&#39; =&gt; &quot;$item&quot;}; }</td></tr>
<tr><td class="h">7108</td><td><div class="c3">28</div></td><td></td><td></td><td></td><td></td><td><div>156</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$exp=~ s{\$(\d)}{\$var[$1]}g; # replace references to matches</td></tr>
<tr><td class="h">7109</td><td><div class="c3">28</div></td><td></td><td></td><td></td><td></td><td><div>104</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sub.= qq{ \$new= \$match-&gt;new( $exp); };</td></tr>
<tr><td class="h">7110</td><td><div class="c3">28</div></td><td></td><td></td><td></td><td></td><td><div>98</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sub .= q{ $new-&gt;paste( before =&gt; $match); };</td></tr>
<tr><td class="h">7111</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7112</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sub .= q{ $match-&gt;delete; };</td></tr>
<tr><td class="h">7113</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#$sub=~ s/;/;\n/g;</td></tr>
<tr><td class="h">7114</td><td><div class="c3">13</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7114">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7114">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7114">1</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7114">1</a></div></td><td></td><td><div>31</div><div>7</div><div>2</div><div>6</div><div>7</div><div>2</div><div>6</div><div>7</div><div>2</div><div>5</div><div>7</div><div>2</div><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $coderef= eval &quot;sub { $NO_WARNINGS; $sub }&quot;;</td></tr>
<tr><td class="h">7115</td><td><div class="c3">13</div><div class="c0">0</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7115">50</a></div></td><td></td><td></td><td></td><td><div>86</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $@) { croak( &quot;invalid replacement expression $replace_exp: &quot;,$@); }</td></tr>
<tr><td class="h">7116</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>108</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $coderef;</td></tr>
<tr><td class="h">7117</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7118</td><td colspan="7"></td></tr><tr><td class="h">7119</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7120</td><td colspan="7"></td></tr><tr><td class="h">7121</td><td colspan="7"></td></tr><tr><td class="h">7122</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub merge_text</td></tr>
<tr><td class="h">7123</td><td><div class="c3">69</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7123">69</a></div></td><td></td><td><div>312</div></td><td class="s">&nbsp;&nbsp;{ my( $e1, $e2)= @_;</td></tr>
<tr><td class="h">7124</td><td><div class="c3">69</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7124">100</a></div></td><td></td><td></td><td></td><td><div>428</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;croak &quot;invalid merge: can only merge 2 elements&quot; </td></tr>
<tr><td class="h">7125</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( isa( $e2, &#39;XML::Twig::Elt&#39;));</td></tr>
<tr><td class="h">7126</td><td><div class="c3">68</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7126">100</a></div></td><td><div class="c1"><a href="blib-lib-XML-Twig-pm--condition.html#L7126">75</a></div></td><td></td><td></td><td><div>218</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;croak &quot;invalid merge: can only merge 2 text elements&quot; </td></tr>
<tr><td class="h">7127</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( $e1-&gt;is_text &amp;&amp; $e2-&gt;is_text &amp;&amp; ($e1-&gt;gi eq $e2-&gt;gi));</td></tr>
<tr><td class="h">7128</td><td><div class="c3">66</div></td><td></td><td></td><td></td><td></td><td><div>286</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $text1= $e1-&gt;text;</td></tr>
<tr><td class="h">7129</td><td><div class="c3">66</div></td><td></td><td></td><td></td><td></td><td><div>214</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $text2= $e2-&gt;text;</td></tr>
<tr><td class="h">7130</td><td><div class="c3">66</div></td><td></td><td></td><td></td><td></td><td><div>309</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$e1-&gt;set_text( $text1 . $text2);</td></tr>
<tr><td class="h">7131</td><td colspan="7"></td></tr><tr><td class="h">7132</td><td><div class="c3">66</div></td><td></td><td></td><td></td><td></td><td><div>199</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $extra_data= $e1-&gt;_extra_data_before_end_tag . $e2-&gt;extra_data;</td></tr>
<tr><td class="h">7133</td><td><div class="c3">66</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7133">50</a></div></td><td></td><td></td><td></td><td><div>230</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $extra_data) </td></tr>
<tr><td class="h">7134</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $e1-&gt;_del_extra_data_before_end_tag;</td></tr>
<tr><td class="h">7135</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$e1-&gt;_push_extra_data_in_pcdata( $extra_data, length( $text1)); </td></tr>
<tr><td class="h">7136</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7137</td><td colspan="7"></td></tr><tr><td class="h">7138</td><td><div class="c3">66</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7138">100</a></div></td><td></td><td></td><td></td><td><div>188</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $extra_data= $e2-&gt;_extra_data_in_pcdata)</td></tr>
<tr><td class="h">7139</td><td><div class="c3">10</div><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>30</div><div>112</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ foreach my $data (@$extra_data) { $e1-&gt;_push_extra_data_in_pcdata( $data-&gt;{text}, $data-&gt;{offset} + length( $text1)); } }</td></tr>
<tr><td class="h">7140</td><td colspan="7"></td></tr><tr><td class="h">7141</td><td><div class="c3">66</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7141">50</a></div></td><td></td><td></td><td></td><td><div>200</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $extra_data_before_end_tag= $e2-&gt;_extra_data_before_end_tag) </td></tr>
<tr><td class="h">7142</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $e1-&gt;_set_extra_data_before_end_tag( $extra_data_before_end_tag); }</td></tr>
<tr><td class="h">7143</td><td colspan="7"></td></tr><tr><td class="h">7144</td><td><div class="c3">66</div></td><td></td><td></td><td></td><td></td><td><div>225</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$e2-&gt;delete;</td></tr>
<tr><td class="h">7145</td><td colspan="7"></td></tr><tr><td class="h">7146</td><td><div class="c3">66</div></td><td></td><td></td><td></td><td></td><td><div>191</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $e1;</td></tr>
<tr><td class="h">7147</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7148</td><td colspan="7"></td></tr><tr><td class="h">7149</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub merge</td></tr>
<tr><td class="h">7150</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7150">2</a></div></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;{ my( $e1, $e2)= @_;</td></tr>
<tr><td class="h">7151</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @e2_children= $e2-&gt;_children;</td></tr>
<tr><td class="h">7152</td><td><div class="c3">2</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L7152">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7152">20</a></div></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if(     $e1-&gt;_last_child &amp;&amp; $e1-&gt;_last_child-&gt;is_pcdata</td></tr>
<tr><td class="h">7153</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp;  @e2_children &amp;&amp; $e2_children[0]-&gt;is_pcdata</td></tr>
<tr><td class="h">7154</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">7155</td><td><div class="c3">2</div><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>15</div><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $e1-&gt;_last_child-&gt;{pcdata} .= $e2_children[0]-&gt;{pcdata}; shift @e2_children; }</td></tr>
<tr><td class="h">7156</td><td><div class="c3">2</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>11</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $e (@e2_children) { $e-&gt;move( last_child =&gt; $e1); } </td></tr>
<tr><td class="h">7157</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$e2-&gt;delete;</td></tr>
<tr><td class="h">7158</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $e1;</td></tr>
<tr><td class="h">7159</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7160</td><td colspan="7"></td></tr><tr><td class="h">7161</td><td colspan="7"></td></tr><tr><td class="h">7162</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># recursively copy an element and returns the copy (can be huge and long)</td></tr>
<tr><td class="h">7163</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub copy</td></tr>
<tr><td class="h">7164</td><td><div class="c3">61</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7164">61</a></div></td><td></td><td><div>151</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">7165</td><td><div class="c3">61</div></td><td></td><td></td><td></td><td></td><td><div>315</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $copy= $elt-&gt;new( $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}]);</td></tr>
<tr><td class="h">7166</td><td colspan="7"></td></tr><tr><td class="h">7167</td><td><div class="c3">61</div><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7167">100</a></div></td><td></td><td></td><td></td><td><div>219</div><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;extra_data) { $copy-&gt;set_extra_data( $elt-&gt;extra_data); }</td></tr>
<tr><td class="h">7168</td><td><div class="c3">61</div><div class="c3">7</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7168">100</a></div></td><td></td><td></td><td></td><td><div>218</div><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;_extra_data_before_end_tag) { $copy-&gt;_set_extra_data_before_end_tag( $elt-&gt;_extra_data_before_end_tag); }</td></tr>
<tr><td class="h">7169</td><td colspan="7"></td></tr><tr><td class="h">7170</td><td><div class="c3">61</div><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7170">100</a></div></td><td></td><td></td><td></td><td><div>225</div><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;is_asis)   { $copy-&gt;set_asis; }</td></tr>
<tr><td class="h">7171</td><td><div class="c3">61</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L7171">100</a></div></td><td></td><td></td><td><div>601</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$copy-&gt;{empty}=  ($elt-&gt;{&#39;empty&#39;} || 0); # do not swap or speedup will mess up this                         </td></tr>
<tr><td class="h">7172</td><td colspan="7"></td></tr><tr><td class="h">7173</td><td><div class="c3">61</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7173">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7173">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7173">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7173">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7173">100</a></div></td><td></td><td></td><td></td><td><div>440</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( (exists $elt-&gt;{&#39;pcdata&#39;})) </td></tr>
<tr><td class="h">7174</td><td><div class="c3">25</div></td><td></td><td></td><td></td><td></td><td><div>122</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $copy-&gt;set_pcdata( $elt-&gt;{pcdata}); </td></tr>
<tr><td class="h">7175</td><td><div class="c3">25</div><div class="c3">7</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7175">100</a></div></td><td></td><td></td><td></td><td><div>70</div><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;_extra_data_in_pcdata) { $copy-&gt;_set_extra_data_in_pcdata( $elt-&gt;_extra_data_in_pcdata); }</td></tr>
<tr><td class="h">7176</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7177</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( (exists $elt-&gt;{&#39;cdata&#39;}))</td></tr>
<tr><td class="h">7178</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $copy-&gt;_set_cdata( $elt-&gt;{cdata}); </td></tr>
<tr><td class="h">7179</td><td><div class="c3">2</div><div class="c0">0</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7179">50</a></div></td><td></td><td></td><td></td><td><div>6</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;_extra_data_in_pcdata) { $copy-&gt;_set_extra_data_in_pcdata( $elt-&gt;_extra_data_in_pcdata); }</td></tr>
<tr><td class="h">7180</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7181</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( (exists $elt-&gt;{&#39;target&#39;}))</td></tr>
<tr><td class="h">7182</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $copy-&gt;_set_pi( $elt-&gt;{target}, $elt-&gt;{data}); }</td></tr>
<tr><td class="h">7183</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( (exists $elt-&gt;{&#39;comment&#39;}))</td></tr>
<tr><td class="h">7184</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $copy-&gt;_set_comment( $elt-&gt;{comment}); }</td></tr>
<tr><td class="h">7185</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( (exists $elt-&gt;{&#39;ent&#39;}))</td></tr>
<tr><td class="h">7186</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $copy-&gt;{ent}=  $elt-&gt;{ent}; }</td></tr>
<tr><td class="h">7187</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">7188</td><td><div class="c3">31</div></td><td></td><td></td><td></td><td></td><td><div>106</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my @children= $elt-&gt;_children;</td></tr>
<tr><td class="h">7189</td><td><div class="c3">31</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7189">100</a></div></td><td></td><td></td><td></td><td><div>118</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $atts= $elt-&gt;atts)</td></tr>
<tr><td class="h">7190</td><td><div class="c3">26</div></td><td></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my %atts;</td></tr>
<tr><td class="h">7191</td><td><div class="c3">26</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7191">50</a></div></td><td></td><td></td><td></td><td><div>73</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tie %atts, &#39;Tie::IxHash&#39; if (keep_atts_order());</td></tr>
<tr><td class="h">7192</td><td><div class="c3">26</div><div class="c3">26</div></td><td></td><td></td><td></td><td></td><td><div>49</div><div>110</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%atts= %{$atts}; # we want to do a real copy of the attributes</td></tr>
<tr><td class="h">7193</td><td><div class="c3">26</div></td><td></td><td></td><td></td><td></td><td><div>119</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$copy-&gt;set_atts( \%atts);</td></tr>
<tr><td class="h">7194</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7195</td><td><div class="c3">31</div></td><td></td><td></td><td></td><td></td><td><div>126</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $child (@children)</td></tr>
<tr><td class="h">7196</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>249</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $child_copy= $child-&gt;copy;</td></tr>
<tr><td class="h">7197</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>165</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$child_copy-&gt;paste( &#39;last_child&#39;, $copy);</td></tr>
<tr><td class="h">7198</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7199</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7200</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# save links to the original location, which can be convenient and is used for namespace resolution</td></tr>
<tr><td class="h">7201</td><td><div class="c3">61</div></td><td></td><td></td><td></td><td></td><td><div>197</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $link ( qw(parent prev_sibling next_sibling) )</td></tr>
<tr><td class="h">7202</td><td><div class="c3">183</div></td><td></td><td></td><td></td><td></td><td><div>925</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $copy-&gt;{former}-&gt;{$link}= $elt-&gt;{$link};</td></tr>
<tr><td class="h">7203</td><td><div class="c3">183</div><div class="c3">183</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L7203">50</a></div></td><td></td><td></td><td></td><td><div>532</div><div>1042</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $XML::Twig::weakrefs) { weaken( $copy-&gt;{former}-&gt;{$link}); }</td></tr>
<tr><td class="h">7204</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7205</td><td colspan="7"></td></tr><tr><td class="h">7206</td><td><div class="c3">61</div></td><td></td><td></td><td></td><td></td><td><div>222</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $copy;</td></tr>
<tr><td class="h">7207</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7208</td><td colspan="7"></td></tr><tr><td class="h">7209</td><td colspan="7"></td></tr><tr><td class="h">7210</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub delete</td></tr>
<tr><td class="h">7211</td><td><div class="c3">1191</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7211">1191</a></div></td><td></td><td><div>2778</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">7212</td><td><div class="c3">1191</div></td><td></td><td></td><td></td><td></td><td><div>3671</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;cut;</td></tr>
<tr><td class="h">7213</td><td><div class="c3">1191</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7213">50</a></div></td><td></td><td></td><td></td><td><div>2968</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;DESTROY unless( $XML::Twig::weakrefs);</td></tr>
<tr><td class="h">7214</td><td><div class="c3">1191</div></td><td></td><td></td><td></td><td></td><td><div>2698</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return undef;</td></tr>
<tr><td class="h">7215</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7216</td><td colspan="7"></td></tr><tr><td class="h">7217</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">{ </td></tr>
<tr><td class="h">7218</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub DESTROY</td></tr>
<tr><td class="h">7219</td><td><div class="c3">22004</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7219">22004</a></div></td><td></td><td><div>58660</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">7220</td><td><div class="c3">22004</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7220">100</a></div></td><td></td><td></td><td></td><td><div>61268</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return if( $XML::Twig::weakrefs);</td></tr>
<tr><td class="h">7221</td><td><div class="c3">4</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7221">33</a></div></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $t= shift || $elt-&gt;twig; # optional argument, passed in recursive calls</td></tr>
<tr><td class="h">7222</td><td colspan="7"></td></tr><tr><td class="h">7223</td><td><div class="c3">4</div><div class="c3">4</div><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>9</div><div>14</div><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach( @{[$elt-&gt;_children]}) { $_-&gt;DESTROY( $t); }</td></tr>
<tr><td class="h">7224</td><td colspan="7"></td></tr><tr><td class="h">7225</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# the id reference needs to be destroyed</td></tr>
<tr><td class="h">7226</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# lots of tests to avoid warnings during the cleanup phase</td></tr>
<tr><td class="h">7227</td><td><div class="c3">4</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7227">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7227">20</a></div></td><td></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;del_id( $t) if( $ID &amp;&amp; $t &amp;&amp; defined( $elt-&gt;{att}) &amp;&amp; exists( $elt-&gt;{att}-&gt;{$ID}));</td></tr>
<tr><td class="h">7228</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;undef $elt;</td></tr>
<tr><td class="h">7229</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7230</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">7231</td><td colspan="7"></td></tr><tr><td class="h">7232</td><td colspan="7"></td></tr><tr><td class="h">7233</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># ignores the element</td></tr>
<tr><td class="h">7234</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub ignore</td></tr>
<tr><td class="h">7235</td><td><div class="c3">30</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7235">30</a></div></td><td></td><td><div>121</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">7236</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>111</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t= $elt-&gt;twig;</td></tr>
<tr><td class="h">7237</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>140</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;ignore( $elt, @_);</td></tr>
<tr><td class="h">7238</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7239</td><td colspan="7"></td></tr><tr><td class="h">7240</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">BEGIN {</td></tr>
<tr><td class="h">7241</td><td><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7241">92</a></div></td><td></td><td><div>507</div></td><td class="s">&nbsp;&nbsp;my $pretty                    = 0;</td></tr>
<tr><td class="h">7242</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>378</div></td><td class="s">&nbsp;&nbsp;my $quote                     = &#39;&quot;&#39;;</td></tr>
<tr><td class="h">7243</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>276</div></td><td class="s">&nbsp;&nbsp;my $INDENT                    = &#39;  &#39;;</td></tr>
<tr><td class="h">7244</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>239</div></td><td class="s">&nbsp;&nbsp;my $empty_tag_style           = 0;</td></tr>
<tr><td class="h">7245</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>231</div></td><td class="s">&nbsp;&nbsp;my $remove_cdata              = 0;</td></tr>
<tr><td class="h">7246</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>447</div></td><td class="s">&nbsp;&nbsp;my $keep_encoding             = 0;</td></tr>
<tr><td class="h">7247</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>259</div></td><td class="s">&nbsp;&nbsp;my $expand_external_entities  = 0;</td></tr>
<tr><td class="h">7248</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>312</div></td><td class="s">&nbsp;&nbsp;my $keep_atts_order           = 0;</td></tr>
<tr><td class="h">7249</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>232</div></td><td class="s">&nbsp;&nbsp;my $do_not_escape_amp_in_atts = 0;</td></tr>
<tr><td class="h">7250</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>264</div></td><td class="s">&nbsp;&nbsp;my $WRAP                      = &#39;80&#39;;</td></tr>
<tr><td class="h">7251</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>265</div></td><td class="s">&nbsp;&nbsp;my $REPLACED_ENTS             = qq{&amp;&lt;};</td></tr>
<tr><td class="h">7252</td><td colspan="7"></td></tr><tr><td class="h">7253</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>625</div></td><td class="s">&nbsp;&nbsp;my ($NSGMLS, $NICE, $INDENTED, $INDENTEDCT, $INDENTEDC, $WRAPPED, $RECORD1, $RECORD2, $INDENTEDA)= (1..9);</td></tr>
<tr><td class="h">7254</td><td><div class="c3">92</div><div class="c3">460</div></td><td></td><td></td><td></td><td></td><td><div>429</div><div>2129</div></td><td class="s">&nbsp;&nbsp;my %KEEP_TEXT_TAG_ON_ONE_LINE= map { $_ =&gt; 1 } ( $INDENTED, $INDENTEDCT, $INDENTEDC, $INDENTEDA, $WRAPPED);</td></tr>
<tr><td class="h">7255</td><td colspan="7"></td></tr><tr><td class="h">7256</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>2168</div></td><td class="s">&nbsp;&nbsp;my %pretty_print_style=</td></tr>
<tr><td class="h">7257</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;( none       =&gt; 0,          # no added \n</td></tr>
<tr><td class="h">7258</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nsgmls     =&gt; $NSGMLS,    # nsgmls-style, \n in tags</td></tr>
<tr><td class="h">7259</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# below this line styles are UNSAFE (the generated XML can be well-formed but invalid)</td></tr>
<tr><td class="h">7260</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nice       =&gt; $NICE,      # \n after open/close tags except when the </td></tr>
<tr><td class="h">7261</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# element starts with text</td></tr>
<tr><td class="h">7262</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indented   =&gt; $INDENTED,  # nice plus idented</td></tr>
<tr><td class="h">7263</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indented_close_tag   =&gt; $INDENTEDCT,  # nice plus idented</td></tr>
<tr><td class="h">7264</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indented_c =&gt; $INDENTEDC, # slightly more compact than indented (closing</td></tr>
<tr><td class="h">7265</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# tags are on the same line)</td></tr>
<tr><td class="h">7266</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wrapped    =&gt; $WRAPPED,   # text is wrapped at column </td></tr>
<tr><td class="h">7267</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;record_c   =&gt; $RECORD1,   # for record-like data (compact)</td></tr>
<tr><td class="h">7268</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;record     =&gt; $RECORD2,   # for record-like data  (not so compact)</td></tr>
<tr><td class="h">7269</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indented_a =&gt; $INDENTEDA, # nice, indented, and with attributes on separate</td></tr>
<tr><td class="h">7270</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# lines as the nsgmls style, as well as wrapped</td></tr>
<tr><td class="h">7271</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# lines - to make the xml friendly to line-oriented tools</td></tr>
<tr><td class="h">7272</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cvs        =&gt; $INDENTEDA, # alias for indented_a</td></tr>
<tr><td class="h">7273</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">7274</td><td colspan="7"></td></tr><tr><td class="h">7275</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>508</div></td><td class="s">&nbsp;&nbsp;my ($HTML, $EXPAND)= (1..2);</td></tr>
<tr><td class="h">7276</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>877</div></td><td class="s">&nbsp;&nbsp;my %empty_tag_style=</td></tr>
<tr><td class="h">7277</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;( normal =&gt; 0,        # &lt;tag/&gt;</td></tr>
<tr><td class="h">7278</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;html   =&gt; $HTML,    # &lt;tag /&gt;</td></tr>
<tr><td class="h">7279</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xhtml  =&gt; $HTML,    # &lt;tag /&gt;</td></tr>
<tr><td class="h">7280</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expand =&gt; $EXPAND,  # &lt;tag&gt;&lt;/tag&gt;</td></tr>
<tr><td class="h">7281</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">7282</td><td colspan="7"></td></tr><tr><td class="h">7283</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>600</div></td><td class="s">&nbsp;&nbsp;my %quote_style=</td></tr>
<tr><td class="h">7284</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;( double  =&gt; &#39;&quot;&#39;,    </td></tr>
<tr><td class="h">7285</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;single  =&gt; &quot;&#39;&quot;, </td></tr>
<tr><td class="h">7286</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# smart  =&gt; &quot;smart&quot;, </td></tr>
<tr><td class="h">7287</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">7288</td><td colspan="7"></td></tr><tr><td class="h">7289</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>190</div></td><td class="s">&nbsp;&nbsp;my $xml_space_preserve; # set when an element includes xml:space=&quot;preserve&quot;</td></tr>
<tr><td class="h">7290</td><td colspan="7"></td></tr><tr><td class="h">7291</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>170</div></td><td class="s">&nbsp;&nbsp;my $output_filter;      # filters the entire output (including &lt; and &gt;)</td></tr>
<tr><td class="h">7292</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>162</div></td><td class="s">&nbsp;&nbsp;my $output_text_filter; # filters only the text part (tag names, attributes, pcdata)</td></tr>
<tr><td class="h">7293</td><td colspan="7"></td></tr><tr><td class="h">7294</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>229</div></td><td class="s">&nbsp;&nbsp;my $replaced_ents= $REPLACED_ENTS;</td></tr>
<tr><td class="h">7295</td><td colspan="7"></td></tr><tr><td class="h">7296</td><td colspan="7"></td></tr><tr><td class="h">7297</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# returns those pesky &quot;global&quot; variables so you can switch between twigs </td></tr>
<tr><td class="h">7298</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub global_state</td></tr>
<tr><td class="h">7299</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ return</td></tr>
<tr><td class="h">7300</td><td><div class="c3">11</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7300">11</a></div></td><td></td><td><div>294</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ pretty                    =&gt; $pretty,</td></tr>
<tr><td class="h">7301</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quote                     =&gt; $quote,</td></tr>
<tr><td class="h">7302</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indent                    =&gt; $INDENT,</td></tr>
<tr><td class="h">7303</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empty_tag_style           =&gt; $empty_tag_style,</td></tr>
<tr><td class="h">7304</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remove_cdata              =&gt; $remove_cdata,</td></tr>
<tr><td class="h">7305</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;keep_encoding             =&gt; $keep_encoding,</td></tr>
<tr><td class="h">7306</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expand_external_entities  =&gt; $expand_external_entities,</td></tr>
<tr><td class="h">7307</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_filter             =&gt; $output_filter,</td></tr>
<tr><td class="h">7308</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_text_filter        =&gt; $output_text_filter,</td></tr>
<tr><td class="h">7309</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;keep_atts_order           =&gt; $keep_atts_order,</td></tr>
<tr><td class="h">7310</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_not_escape_amp_in_atts =&gt; $do_not_escape_amp_in_atts,</td></tr>
<tr><td class="h">7311</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wrap                      =&gt; $WRAP,</td></tr>
<tr><td class="h">7312</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replaced_ents             =&gt; $replaced_ents,</td></tr>
<tr><td class="h">7313</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">7314</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7315</td><td colspan="7"></td></tr><tr><td class="h">7316</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# restores the global variables</td></tr>
<tr><td class="h">7317</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub set_global_state</td></tr>
<tr><td class="h">7318</td><td><div class="c3">22</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7318">22</a></div></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $state= shift;</td></tr>
<tr><td class="h">7319</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>79</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pretty                    = $state-&gt;{pretty};</td></tr>
<tr><td class="h">7320</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>67</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$quote                     = $state-&gt;{quote};</td></tr>
<tr><td class="h">7321</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>63</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$INDENT                    = $state-&gt;{indent};</td></tr>
<tr><td class="h">7322</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>65</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$empty_tag_style           = $state-&gt;{empty_tag_style};</td></tr>
<tr><td class="h">7323</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>60</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$remove_cdata              = $state-&gt;{remove_cdata};</td></tr>
<tr><td class="h">7324</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>65</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$keep_encoding             = $state-&gt;{keep_encoding};</td></tr>
<tr><td class="h">7325</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>62</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$expand_external_entities  = $state-&gt;{expand_external_entities};</td></tr>
<tr><td class="h">7326</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>62</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$output_filter             = $state-&gt;{output_filter};</td></tr>
<tr><td class="h">7327</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>88</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$output_text_filter        = $state-&gt;{output_text_filter};</td></tr>
<tr><td class="h">7328</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>62</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$keep_atts_order           = $state-&gt;{keep_atts_order};</td></tr>
<tr><td class="h">7329</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>60</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$do_not_escape_amp_in_atts = $state-&gt;{do_not_escape_amp_in_atts};</td></tr>
<tr><td class="h">7330</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>64</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$WRAP                      = $state-&gt;{wrap};</td></tr>
<tr><td class="h">7331</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>91</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$replaced_ents             = $state-&gt;{replaced_ents},</td></tr>
<tr><td class="h">7332</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7333</td><td colspan="7"></td></tr><tr><td class="h">7334</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# sets global state to defaults</td></tr>
<tr><td class="h">7335</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub init_global_state</td></tr>
<tr><td class="h">7336</td><td><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7336">5</a></div></td><td></td><td><div>783</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ set_global_state(</td></tr>
<tr><td class="h">7337</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ pretty                    =&gt; 0,</td></tr>
<tr><td class="h">7338</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;quote                     =&gt; &#39;&quot;&#39;,</td></tr>
<tr><td class="h">7339</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indent                    =&gt; $INDENT,</td></tr>
<tr><td class="h">7340</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empty_tag_style           =&gt; 0,</td></tr>
<tr><td class="h">7341</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remove_cdata              =&gt; 0,</td></tr>
<tr><td class="h">7342</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;keep_encoding             =&gt; 0,</td></tr>
<tr><td class="h">7343</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expand_external_entities  =&gt; 0,</td></tr>
<tr><td class="h">7344</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_filter             =&gt; undef,</td></tr>
<tr><td class="h">7345</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output_text_filter        =&gt; undef,</td></tr>
<tr><td class="h">7346</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;keep_atts_order           =&gt; undef,</td></tr>
<tr><td class="h">7347</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_not_escape_amp_in_atts =&gt; 0,</td></tr>
<tr><td class="h">7348</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wrap                      =&gt; $WRAP,</td></tr>
<tr><td class="h">7349</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replaced_ents             =&gt; $REPLACED_ENTS,</td></tr>
<tr><td class="h">7350</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</td></tr>
<tr><td class="h">7351</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7352</td><td colspan="7"></td></tr><tr><td class="h">7353</td><td colspan="7"></td></tr><tr><td class="h">7354</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# set the pretty_print style (in $pretty) and returns the old one</td></tr>
<tr><td class="h">7355</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# can be called from outside the package with 2 arguments (elt, style)</td></tr>
<tr><td class="h">7356</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# or from inside with only one argument (style)</td></tr>
<tr><td class="h">7357</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# the style can be either a string (one of the keys of %pretty_print_style</td></tr>
<tr><td class="h">7358</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# or a number (presumably an old value saved)</td></tr>
<tr><td class="h">7359</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub set_pretty_print</td></tr>
<tr><td class="h">7360</td><td><div class="c3">1661</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7360">100</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7360">1661</a></div></td><td></td><td><div>6189</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $style= lc( defined $_[1] ? $_[1] : $_[0]); # so we cover both cases </td></tr>
<tr><td class="h">7361</td><td><div class="c3">1661</div></td><td></td><td></td><td></td><td></td><td><div>3170</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $old_pretty= $pretty;</td></tr>
<tr><td class="h">7362</td><td><div class="c3">1661</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7362">100</a></div></td><td></td><td></td><td></td><td><div>7233</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $style=~ /^\d+$/)</td></tr>
<tr><td class="h">7363</td><td><div class="c3">1571</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7363">100</a></div></td><td></td><td></td><td></td><td><div>6328</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;invalid pretty print style $style&quot; unless( $style &lt; keys %pretty_print_style);</td></tr>
<tr><td class="h">7364</td><td><div class="c3">1570</div></td><td></td><td></td><td></td><td></td><td><div>3445</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pretty= $style;</td></tr>
<tr><td class="h">7365</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7366</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">7367</td><td><div class="c3">90</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7367">100</a></div></td><td></td><td></td><td></td><td><div>396</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;invalid pretty print style &#39;$style&#39;&quot; unless( exists $pretty_print_style{$style});</td></tr>
<tr><td class="h">7368</td><td><div class="c3">89</div></td><td></td><td></td><td></td><td></td><td><div>260</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pretty= $pretty_print_style{$style};</td></tr>
<tr><td class="h">7369</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7370</td><td><div class="c3">1659</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7370">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L7370">100</a></div></td><td></td><td></td><td><div>12773</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( ($pretty == $WRAPPED) || ($pretty == $INDENTEDA) )</td></tr>
<tr><td class="h">7371</td><td><div class="c3">6</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7371">50</a></div></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ XML::Twig::_use( &#39;Text::Wrap&#39;) or croak( &quot;Text::Wrap not available, cannot use &#39;wrapped&#39; style&quot;); }</td></tr>
<tr><td class="h">7372</td><td><div class="c3">1659</div></td><td></td><td></td><td></td><td></td><td><div>6947</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $old_pretty;</td></tr>
<tr><td class="h">7373</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7374</td><td colspan="7"></td></tr><tr><td class="h">7375</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7375">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;sub _pretty_print { return $pretty; } </td></tr>
<tr><td class="h">7376</td><td colspan="7"></td></tr><tr><td class="h">7377</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# set the empty tag style (in $empty_tag_style) and returns the old one</td></tr>
<tr><td class="h">7378</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# can be called from outside the package with 2 arguments (elt, style)</td></tr>
<tr><td class="h">7379</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# or from inside with only one argument (style)</td></tr>
<tr><td class="h">7380</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# the style can be either a string (one of the keys of %empty_tag_style</td></tr>
<tr><td class="h">7381</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# or a number (presumably an old value saved)</td></tr>
<tr><td class="h">7382</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub set_empty_tag_style</td></tr>
<tr><td class="h">7383</td><td><div class="c3">95</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7383">100</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7383">95</a></div></td><td></td><td><div>1027</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $style= lc( defined $_[1] ? $_[1] : $_[0]); # so we cover both cases </td></tr>
<tr><td class="h">7384</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>204</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $old_style= $empty_tag_style;</td></tr>
<tr><td class="h">7385</td><td><div class="c3">95</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7385">100</a></div></td><td></td><td></td><td></td><td><div>451</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $style=~ /^\d+$/)</td></tr>
<tr><td class="h">7386</td><td><div class="c3">25</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7386">100</a></div></td><td></td><td></td><td></td><td><div>117</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;invalid empty tag style $style&quot;</td></tr>
<tr><td class="h">7387</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( $style &lt; keys %empty_tag_style);</td></tr>
<tr><td class="h">7388</td><td><div class="c3">24</div></td><td></td><td></td><td></td><td></td><td><div>64</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$empty_tag_style= $style;</td></tr>
<tr><td class="h">7389</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7390</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">7391</td><td><div class="c3">70</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7391">100</a></div></td><td></td><td></td><td></td><td><div>364</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;invalid empty tag style &#39;$style&#39;&quot;</td></tr>
<tr><td class="h">7392</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( exists $empty_tag_style{$style});</td></tr>
<tr><td class="h">7393</td><td><div class="c3">69</div></td><td></td><td></td><td></td><td></td><td><div>230</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$empty_tag_style= $empty_tag_style{$style};</td></tr>
<tr><td class="h">7394</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7395</td><td><div class="c3">93</div></td><td></td><td></td><td></td><td></td><td><div>276</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $old_style;</td></tr>
<tr><td class="h">7396</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7397</td><td colspan="7"></td></tr><tr><td class="h">7398</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub _pretty_print_styles</td></tr>
<tr><td class="h">7399</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L7399">0</a></div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7399">0</a></div></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ return sort { $pretty_print_style{$a} &lt;=&gt; $pretty_print_style{$b} || $a cmp $b } keys %pretty_print_style; }</td></tr>
<tr><td class="h">7400</td><td colspan="7"></td></tr><tr><td class="h">7401</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub set_quote</td></tr>
<tr><td class="h">7402</td><td><div class="c3">4</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7402">33</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7402">4</a></div></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $style= $_[1] || $_[0];</td></tr>
<tr><td class="h">7403</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $old_quote= $quote;</td></tr>
<tr><td class="h">7404</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7404">100</a></div></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;croak &quot;invalid quote &#39;$style&#39;&quot; unless( exists $quote_style{$style});</td></tr>
<tr><td class="h">7405</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$quote= $quote_style{$style};</td></tr>
<tr><td class="h">7406</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $old_quote;</td></tr>
<tr><td class="h">7407</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7408</td><td colspan="7"></td></tr><tr><td class="h">7409</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub set_remove_cdata</td></tr>
<tr><td class="h">7410</td><td><div class="c3">2760</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L7410">50</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7410">2760</a></div></td><td></td><td><div>7661</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $new_value= defined $_[1] ? $_[1] : $_[0];</td></tr>
<tr><td class="h">7411</td><td><div class="c3">2760</div></td><td></td><td></td><td></td><td></td><td><div>4713</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $old_value= $remove_cdata;</td></tr>
<tr><td class="h">7412</td><td><div class="c3">2760</div></td><td></td><td></td><td></td><td></td><td><div>4651</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$remove_cdata= $new_value;</td></tr>
<tr><td class="h">7413</td><td><div class="c3">2760</div></td><td></td><td></td><td></td><td></td><td><div>7608</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $old_value;</td></tr>
<tr><td class="h">7414</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7415</td><td colspan="7"></td></tr><tr><td class="h">7416</td><td colspan="7"></td></tr><tr><td class="h">7417</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub set_indent</td></tr>
<tr><td class="h">7418</td><td><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7418">100</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7418">5</a></div></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $new_value= defined $_[1] ? $_[1] : $_[0];</td></tr>
<tr><td class="h">7419</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $old_value= $INDENT;</td></tr>
<tr><td class="h">7420</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$INDENT= $new_value;</td></tr>
<tr><td class="h">7421</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $old_value;</td></tr>
<tr><td class="h">7422</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7423</td><td colspan="7"></td></tr><tr><td class="h">7424</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub set_wrap</td></tr>
<tr><td class="h">7425</td><td><div class="c3">9</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7425">100</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7425">9</a></div></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $new_value= defined $_[1] ? $_[1] : $_[0];</td></tr>
<tr><td class="h">7426</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $old_value= $WRAP;</td></tr>
<tr><td class="h">7427</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$WRAP= $new_value;</td></tr>
<tr><td class="h">7428</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $old_value;</td></tr>
<tr><td class="h">7429</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7430</td><td colspan="7"></td></tr><tr><td class="h">7431</td><td colspan="7"></td></tr><tr><td class="h">7432</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub set_keep_encoding</td></tr>
<tr><td class="h">7433</td><td><div class="c3">2764</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7433">50</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7433">2764</a></div></td><td></td><td><div>9062</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $new_value= defined $_[1] ? $_[1] : $_[0];</td></tr>
<tr><td class="h">7434</td><td><div class="c3">2764</div></td><td></td><td></td><td></td><td></td><td><div>5056</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $old_value= $keep_encoding;</td></tr>
<tr><td class="h">7435</td><td><div class="c3">2764</div></td><td></td><td></td><td></td><td></td><td><div>5055</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$keep_encoding= $new_value;</td></tr>
<tr><td class="h">7436</td><td><div class="c3">2764</div></td><td></td><td></td><td></td><td></td><td><div>7762</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $old_value;</td></tr>
<tr><td class="h">7437</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7438</td><td colspan="7"></td></tr><tr><td class="h">7439</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub set_replaced_ents</td></tr>
<tr><td class="h">7440</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L7440">0</a></div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7440">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $new_value= defined $_[1] ? $_[1] : $_[0];</td></tr>
<tr><td class="h">7441</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $old_value= $replaced_ents;</td></tr>
<tr><td class="h">7442</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$replaced_ents= $new_value;</td></tr>
<tr><td class="h">7443</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $old_value;</td></tr>
<tr><td class="h">7444</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7445</td><td colspan="7"></td></tr><tr><td class="h">7446</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub do_not_escape_gt</td></tr>
<tr><td class="h">7447</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7447">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $old_value= $replaced_ents;</td></tr>
<tr><td class="h">7448</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$replaced_ents= q{&amp;&lt;}; # &amp; needs to be first</td></tr>
<tr><td class="h">7449</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $old_value;</td></tr>
<tr><td class="h">7450</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7451</td><td colspan="7"></td></tr><tr><td class="h">7452</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub escape_gt</td></tr>
<tr><td class="h">7453</td><td><div class="c0">0</div></td><td></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7453">0</a></div></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $old_value= $replaced_ents;</td></tr>
<tr><td class="h">7454</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$replaced_ents= qq{&amp;&lt;&gt;}; # &amp; needs to be first</td></tr>
<tr><td class="h">7455</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $old_value;</td></tr>
<tr><td class="h">7456</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7457</td><td colspan="7"></td></tr><tr><td class="h">7458</td><td><div class="c3">81</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7458">81</a></div></td><td></td><td><div>734</div></td><td class="s">&nbsp;&nbsp;sub _keep_encoding { return $keep_encoding; } # so I can use elsewhere in the module</td></tr>
<tr><td class="h">7459</td><td colspan="7"></td></tr><tr><td class="h">7460</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub set_do_not_escape_amp_in_atts</td></tr>
<tr><td class="h">7461</td><td><div class="c3">2770</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L7461">50</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7461">2770</a></div></td><td></td><td><div>8398</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $new_value= defined $_[1] ? $_[1] : $_[0];</td></tr>
<tr><td class="h">7462</td><td><div class="c3">2770</div></td><td></td><td></td><td></td><td></td><td><div>4983</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $old_value= $do_not_escape_amp_in_atts;</td></tr>
<tr><td class="h">7463</td><td><div class="c3">2770</div></td><td></td><td></td><td></td><td></td><td><div>4708</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$do_not_escape_amp_in_atts= $new_value;</td></tr>
<tr><td class="h">7464</td><td><div class="c3">2770</div></td><td></td><td></td><td></td><td></td><td><div>6761</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $old_value;</td></tr>
<tr><td class="h">7465</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7466</td><td colspan="7"></td></tr><tr><td class="h">7467</td><td><div class="c3">119</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7467">119</a></div></td><td></td><td><div>425</div></td><td class="s">&nbsp;&nbsp;sub output_filter      { return $output_filter; }</td></tr>
<tr><td class="h">7468</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7468">2</a></div></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;sub output_text_filter { return $output_text_filter; }</td></tr>
<tr><td class="h">7469</td><td colspan="7"></td></tr><tr><td class="h">7470</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub set_output_filter</td></tr>
<tr><td class="h">7471</td><td><div class="c3">2783</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L7471">50</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7471">2783</a></div></td><td></td><td><div>8506</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $new_value= defined $_[1] ? $_[1] : $_[0]; # can be called in object/non-object mode</td></tr>
<tr><td class="h">7472</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# if called in object mode with no argument, the filter is undefined</td></tr>
<tr><td class="h">7473</td><td><div class="c3">2783</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7473">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7473">67</a></div></td><td></td><td></td><td><div>30144</div><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( isa( $new_value, &#39;XML::Twig::Elt&#39;) || isa( $new_value, &#39;XML::Twig&#39;)) { undef $new_value; }</td></tr>
<tr><td class="h">7474</td><td><div class="c3">2783</div></td><td></td><td></td><td></td><td></td><td><div>5543</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $old_value= $output_filter;</td></tr>
<tr><td class="h">7475</td><td><div class="c3">2783</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7475">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7475">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7475">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L7475">100</a></div></td><td></td><td></td><td><div>10266</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( !$new_value || isa( $new_value, &#39;CODE&#39;) )</td></tr>
<tr><td class="h">7476</td><td><div class="c3">2776</div></td><td></td><td></td><td></td><td></td><td><div>5780</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $output_filter= $new_value; }</td></tr>
<tr><td class="h">7477</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $new_value eq &#39;latin1&#39;)</td></tr>
<tr><td class="h">7478</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $output_filter= XML::Twig::latin1();</td></tr>
<tr><td class="h">7479</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7480</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $XML::Twig::filter{$new_value})</td></tr>
<tr><td class="h">7481</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{  $output_filter= $XML::Twig::filter{$new_value}; }</td></tr>
<tr><td class="h">7482</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">7483</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;invalid output filter &#39;$new_value&#39;&quot;; }</td></tr>
<tr><td class="h">7484</td><td colspan="7"></td></tr><tr><td class="h">7485</td><td><div class="c3">2782</div></td><td></td><td></td><td></td><td></td><td><div>8507</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $old_value;</td></tr>
<tr><td class="h">7486</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7487</td><td colspan="7"></td></tr><tr><td class="h">7488</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub set_output_text_filter</td></tr>
<tr><td class="h">7489</td><td><div class="c3">2769</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7489">100</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7489">2769</a></div></td><td></td><td><div>7650</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $new_value= defined $_[1] ? $_[1] : $_[0]; # can be called in object/non-object mode</td></tr>
<tr><td class="h">7490</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# if called in object mode with no argument, the filter is undefined</td></tr>
<tr><td class="h">7491</td><td><div class="c3">2769</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7491">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7491">67</a></div></td><td></td><td></td><td><div>26868</div><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( isa( $new_value, &#39;XML::Twig::Elt&#39;) || isa( $new_value, &#39;XML::Twig&#39;)) { undef $new_value; }</td></tr>
<tr><td class="h">7492</td><td><div class="c3">2769</div></td><td></td><td></td><td></td><td></td><td><div>5212</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $old_value= $output_text_filter;</td></tr>
<tr><td class="h">7493</td><td><div class="c3">2769</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7493">100</a></div><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7493">50</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7493">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L7493">100</a></div></td><td></td><td></td><td><div>10012</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( !$new_value || isa( $new_value, &#39;CODE&#39;) )</td></tr>
<tr><td class="h">7494</td><td><div class="c3">2761</div></td><td></td><td></td><td></td><td></td><td><div>5596</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $output_text_filter= $new_value; }</td></tr>
<tr><td class="h">7495</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $new_value eq &#39;latin1&#39;)</td></tr>
<tr><td class="h">7496</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $output_text_filter= XML::Twig::latin1();</td></tr>
<tr><td class="h">7497</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7498</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $XML::Twig::filter{$new_value})</td></tr>
<tr><td class="h">7499</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{  $output_text_filter= $XML::Twig::filter{$new_value}; }</td></tr>
<tr><td class="h">7500</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">7501</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;invalid output text filter &#39;$new_value&#39;&quot;; }</td></tr>
<tr><td class="h">7502</td><td colspan="7"></td></tr><tr><td class="h">7503</td><td><div class="c3">2768</div></td><td></td><td></td><td></td><td></td><td><div>7893</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $old_value;</td></tr>
<tr><td class="h">7504</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7505</td><td colspan="7"></td></tr><tr><td class="h">7506</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub set_expand_external_entities</td></tr>
<tr><td class="h">7507</td><td><div class="c3">2771</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7507">100</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7507">2771</a></div></td><td></td><td><div>10394</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $new_value= defined $_[1] ? $_[1] : $_[0];</td></tr>
<tr><td class="h">7508</td><td><div class="c3">2771</div></td><td></td><td></td><td></td><td></td><td><div>5767</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $old_value= $expand_external_entities;</td></tr>
<tr><td class="h">7509</td><td><div class="c3">2771</div></td><td></td><td></td><td></td><td></td><td><div>5075</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$expand_external_entities= $new_value;</td></tr>
<tr><td class="h">7510</td><td><div class="c3">2771</div></td><td></td><td></td><td></td><td></td><td><div>8666</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $old_value;</td></tr>
<tr><td class="h">7511</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7512</td><td colspan="7"></td></tr><tr><td class="h">7513</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub set_keep_atts_order</td></tr>
<tr><td class="h">7514</td><td><div class="c3">2761</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7514">50</a></div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7514">2761</a></div></td><td></td><td><div>8233</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $new_value= defined $_[1] ? $_[1] : $_[0];</td></tr>
<tr><td class="h">7515</td><td><div class="c3">2761</div></td><td></td><td></td><td></td><td></td><td><div>4818</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $old_value= $keep_atts_order;</td></tr>
<tr><td class="h">7516</td><td><div class="c3">2761</div></td><td></td><td></td><td></td><td></td><td><div>4919</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$keep_atts_order= $new_value;</td></tr>
<tr><td class="h">7517</td><td><div class="c3">2761</div></td><td></td><td></td><td></td><td></td><td><div>7577</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $old_value;</td></tr>
<tr><td class="h">7518</td><td colspan="7"></td></tr><tr><td class="h">7519</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7520</td><td colspan="7"></td></tr><tr><td class="h">7521</td><td><div class="c3">10471</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7521">10471</a></div></td><td></td><td><div>38397</div></td><td class="s">&nbsp;&nbsp;sub keep_atts_order { return $keep_atts_order; } # so I can use elsewhere in the module</td></tr>
<tr><td class="h">7522</td><td colspan="7"></td></tr><tr><td class="h">7523</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>214</div></td><td class="s">&nbsp;&nbsp;my %html_empty_elt;</td></tr>
<tr><td class="h">7524</td><td><div class="c3">92</div><div class="c3">920</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7524">92</a></div></td><td></td><td><div>925</div><div>4606</div></td><td class="s">&nbsp;&nbsp;BEGIN { %html_empty_elt= map { $_ =&gt; 1} qw( base meta link hr br param img area input col); }</td></tr>
<tr><td class="h">7525</td><td colspan="7"></td></tr><tr><td class="h">7526</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub start_tag</td></tr>
<tr><td class="h">7527</td><td><div class="c3">4415</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7527">4415</a></div></td><td></td><td><div>14814</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my( $elt, $option)= @_;</td></tr>
<tr><td class="h">7528</td><td colspan="7"></td></tr><tr><td class="h">7529</td><td><div class="c3">4415</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7529">100</a></div></td><td></td><td></td><td></td><td><div>20193</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return if( $elt-&gt;{gi} &lt; $XML::Twig::SPECIAL_GI);</td></tr>
<tr><td class="h">7530</td><td colspan="7"></td></tr><tr><td class="h">7531</td><td><div class="c3">4414</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L7531">100</a></div></td><td></td><td></td><td><div>30023</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $extra_data= $elt-&gt;{extra_data} || &#39;&#39;;</td></tr>
<tr><td class="h">7532</td><td colspan="7"></td></tr><tr><td class="h">7533</td><td><div class="c3">4414</div></td><td></td><td></td><td></td><td></td><td><div>17835</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $gi= $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}];</td></tr>
<tr><td class="h">7534</td><td><div class="c3">4414</div></td><td></td><td></td><td></td><td></td><td><div>13111</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $att= $elt-&gt;{att}; # should be $elt-&gt;atts, optimized into a pure hash look-up</td></tr>
<tr><td class="h">7535</td><td colspan="7"></td></tr><tr><td class="h">7536</td><td><div class="c3">4414</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L7536">50</a></div></td><td></td><td></td><td></td><td><div>14486</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ns_map= $att ? $att-&gt;{&#39;#original_gi&#39;} : &#39;&#39;;</td></tr>
<tr><td class="h">7537</td><td><div class="c3">4414</div><div class="c3">11</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7537">100</a></div></td><td></td><td></td><td></td><td><div>10608</div><div>34</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $ns_map) { $gi= _restore_original_prefix( $ns_map, $gi); }</td></tr>
<tr><td class="h">7538</td><td><div class="c3">4414</div></td><td></td><td></td><td></td><td></td><td><div>9280</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$gi=~ s{^#default:}{}; # remove default prefix</td></tr>
<tr><td class="h">7539</td><td colspan="7"></td></tr><tr><td class="h">7540</td><td><div class="c3">4414</div><div class="c3">17</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7540">100</a></div></td><td></td><td></td><td></td><td><div>11075</div><div>184</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $output_text_filter) { $gi= $output_text_filter-&gt;( $gi); }</td></tr>
<tr><td class="h">7541</td><td colspan="7"></td></tr><tr><td class="h">7542</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# get the attribute and their values</td></tr>
<tr><td class="h">7543</td><td><div class="c3">4414</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7543">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7543">100</a></div></td><td></td><td></td><td></td><td><div>19820</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $att_sep = $pretty==$NSGMLS    ? &quot;\n&quot;</td></tr>
<tr><td class="h">7544</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: $pretty==$INDENTEDA ? &quot;\n&quot; . $INDENT x ($elt-&gt;level+1) . &#39;  &#39;</td></tr>
<tr><td class="h">7545</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:                       &#39; &#39;</td></tr>
<tr><td class="h">7546</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;</td></tr>
<tr><td class="h">7547</td><td colspan="7"></td></tr><tr><td class="h">7548</td><td><div class="c3">4414</div></td><td></td><td></td><td></td><td></td><td><div>8609</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $replace_in_att_value= $replaced_ents;</td></tr>
<tr><td class="h">7549</td><td><div class="c3">4414</div><div class="c3">37</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7549">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7549">67</a></div></td><td></td><td></td><td><div>18278</div><div>91</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $option-&gt;{escape_gt} &amp;&amp; $replaced_ents !~ m{&gt;}) { $replace_in_att_value.= &#39;&gt;&#39;; }</td></tr>
<tr><td class="h">7550</td><td colspan="7"></td></tr><tr><td class="h">7551</td><td><div class="c3">4414</div></td><td></td><td></td><td></td><td></td><td><div>6119</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $tag;</td></tr>
<tr><td class="h">7552</td><td><div class="c3">4414</div><div class="c3">1188</div><div class="c3">51</div><div class="c3">4363</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7552">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7552">67</a></div></td><td></td><td></td><td><div>11768</div><div>8634</div><div>135</div><div>28327</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @att_names= grep { !( (substr( $_, 0, 1) eq &#39;#&#39;) &amp;&amp; (substr( $_, 0, 9) ne &#39;#default:&#39;) ) } $keep_atts_order ?  keys %{$att} : sort keys %{$att};</td></tr>
<tr><td class="h">7553</td><td><div class="c3">4414</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7553">100</a></div></td><td></td><td></td><td></td><td><div>12743</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( @att_names)</td></tr>
<tr><td class="h">7554</td><td><div class="c3">664</div><div class="c3">1171</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7554">100</a></div></td><td></td><td></td><td></td><td><div>1750</div><div>3319</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $atts= join $att_sep, map  { my $output_att_name= $ns_map ? _restore_original_prefix( $ns_map, $_) : $_;</td></tr>
<tr><td class="h">7555</td><td><div class="c3">1171</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7555">100</a></div></td><td></td><td></td><td></td><td><div>2875</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $output_text_filter)</td></tr>
<tr><td class="h">7556</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $output_att_name=  $output_text_filter-&gt;( $output_att_name); }</td></tr>
<tr><td class="h">7557</td><td><div class="c3">1171</div></td><td></td><td></td><td></td><td></td><td><div>5573</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sprintf( &quot;%s=%s%s%s&quot;, $output_att_name, </td></tr>
<tr><td class="h">7558</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$quote,</td></tr>
<tr><td class="h">7559</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_att_xml_string( $att-&gt;{$_}, $replace_in_att_value), </td></tr>
<tr><td class="h">7560</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$quote</td></tr>
<tr><td class="h">7561</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">7562</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} </td></tr>
<tr><td class="h">7563</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@att_names</td></tr>
<tr><td class="h">7564</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;</td></tr>
<tr><td class="h">7565</td><td><div class="c3">664</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7565">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L7565">100</a></div></td><td></td><td></td><td><div>3364</div><div>2</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $pretty==$INDENTEDA &amp;&amp; @att_names == 1) { $att_sep= &#39; &#39;; }</td></tr>
<tr><td class="h">7566</td><td><div class="c3">664</div></td><td></td><td></td><td></td><td></td><td><div>2850</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tag= &quot;&lt;$gi$att_sep$atts&quot;;</td></tr>
<tr><td class="h">7567</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7568</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">7569</td><td><div class="c3">3750</div></td><td></td><td></td><td></td><td></td><td><div>9745</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $tag= &quot;&lt;$gi&quot;; }</td></tr>
<tr><td class="h">7570</td><td colspan="7"></td></tr><tr><td class="h">7571</td><td><div class="c3">4414</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7571">100</a></div></td><td></td><td></td><td></td><td><div>13377</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tag .= &quot;\n&quot; if($pretty==$NSGMLS);</td></tr>
<tr><td class="h">7572</td><td colspan="7"></td></tr><tr><td class="h">7573</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# force empty if suitable HTML tag, otherwise use the value from the input tree</td></tr>
<tr><td class="h">7574</td><td><div class="c3">4414</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7574">100</a></div></td><td><div class="c1"><a href="blib-lib-XML-Twig-pm--condition.html#L7574">80</a></div></td><td></td><td></td><td><div>24630</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( ($empty_tag_style eq $HTML) &amp;&amp; !$elt-&gt;{first_child} &amp;&amp; !$elt-&gt;_extra_data_before_end_tag &amp;&amp; $html_empty_elt{$gi})</td></tr>
<tr><td class="h">7575</td><td><div class="c3">21</div></td><td></td><td></td><td></td><td></td><td><div>72</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;{empty}= 1; }</td></tr>
<tr><td class="h">7576</td><td colspan="7"></td></tr><tr><td class="h">7577</td><td><div class="c3">4414</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7577">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7577">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7577">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7577">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7577">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7577">67</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7577">67</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L7577">100</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L7577">100</a></div></td><td></td><td></td><td><div>28909</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tag .= (!$elt-&gt;{empty} || $elt-&gt;_extra_data_before_end_tag)  ? &#39;&gt;&#39;            # element has content</td></tr>
<tr><td class="h">7578</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: (($empty_tag_style eq $HTML) &amp;&amp; $html_empty_elt{$gi}) ? &#39; /&gt;&#39;          # html empty element </td></tr>
<tr><td class="h">7579</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# cvs-friendly format</td></tr>
<tr><td class="h">7580</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: ( $pretty == $INDENTEDA &amp;&amp; @att_names &gt; 1)            ? &quot;\n&quot; .  $INDENT x $elt-&gt;level . &quot;/&gt;&quot;  </td></tr>
<tr><td class="h">7581</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: ( $pretty == $INDENTEDA &amp;&amp; @att_names == 1)           ? &quot; /&gt;&quot;  </td></tr>
<tr><td class="h">7582</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: $empty_tag_style                                      ? &quot;&gt;&lt;/&quot; . $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}] . &quot;&gt;&quot; # $empty_tag_style is $HTML or $EXPAND</td></tr>
<tr><td class="h">7583</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:                                                         &#39;/&gt;&#39;</td></tr>
<tr><td class="h">7584</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;</td></tr>
<tr><td class="h">7585</td><td colspan="7"></td></tr><tr><td class="h">7586</td><td><div class="c3">4414</div><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7586">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7586">67</a></div></td><td></td><td></td><td><div>30766</div><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( ( (substr( $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}], 0, 1) eq &#39;#&#39;) &amp;&amp; (substr( $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}], 0, 9) ne &#39;#default:&#39;) )) { $tag= &#39;&#39;; }</td></tr>
<tr><td class="h">7587</td><td colspan="7"></td></tr><tr><td class="h">7588</td><td><div class="c3">4414</div><div class="c3">4194</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L7588">50</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7588">100</a></div></td><td></td><td></td><td></td><td><div>12205</div><div>23504</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( $pretty) { return defined( $extra_data) ? $extra_data . $tag : $tag;  }</td></tr>
<tr><td class="h">7589</td><td colspan="7"></td></tr><tr><td class="h">7590</td><td><div class="c3">220</div></td><td></td><td></td><td></td><td></td><td><div>437</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $prefix=&#39;&#39;;</td></tr>
<tr><td class="h">7591</td><td><div class="c3">220</div></td><td></td><td></td><td></td><td></td><td><div>403</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $return=&#39;&#39;;   # &#39;&#39; or \n is to be printed before the tag</td></tr>
<tr><td class="h">7592</td><td><div class="c3">220</div></td><td></td><td></td><td></td><td></td><td><div>370</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $indent=0;    # number of indents before the tag</td></tr>
<tr><td class="h">7593</td><td colspan="7"></td></tr><tr><td class="h">7594</td><td><div class="c3">220</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7594">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7594">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7594">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7594">100</a></div></td><td></td><td></td><td></td><td><div>2706</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $pretty==$RECORD1)</td></tr>
<tr><td class="h">7595</td><td><div class="c3">29</div></td><td></td><td></td><td></td><td></td><td><div>93</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $level= $elt-&gt;level;</td></tr>
<tr><td class="h">7596</td><td><div class="c3">29</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7596">100</a></div></td><td></td><td></td><td></td><td><div>87</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$return= &quot;\n&quot; if( $level &lt; 2);</td></tr>
<tr><td class="h">7597</td><td><div class="c3">29</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7597">100</a></div></td><td></td><td></td><td></td><td><div>88</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$indent= 1 if( $level == 1);</td></tr>
<tr><td class="h">7598</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7599</td><td colspan="7"></td></tr><tr><td class="h">7600</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $pretty==$RECORD2)</td></tr>
<tr><td class="h">7601</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $return= &quot;\n&quot;;</td></tr>
<tr><td class="h">7602</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$indent= $elt-&gt;level;</td></tr>
<tr><td class="h">7603</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7604</td><td colspan="7"></td></tr><tr><td class="h">7605</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $pretty==$NICE)</td></tr>
<tr><td class="h">7606</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $parent= $elt-&gt;{parent};</td></tr>
<tr><td class="h">7607</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7607">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7607">67</a></div></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( !$parent || $parent-&gt;{contains_text}) </td></tr>
<tr><td class="h">7608</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $return= &quot;\n&quot;; }</td></tr>
<tr><td class="h">7609</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7609">100</a></div></td><td><div class="c1"><a href="blib-lib-XML-Twig-pm--condition.html#L7609">80</a></div></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{contains_text}= 1 if( ($parent &amp;&amp; $parent-&gt;{contains_text})</td></tr>
<tr><td class="h">7610</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| $elt-&gt;contains_text);</td></tr>
<tr><td class="h">7611</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7612</td><td colspan="7"></td></tr><tr><td class="h">7613</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $KEEP_TEXT_TAG_ON_ONE_LINE{$pretty})</td></tr>
<tr><td class="h">7614</td><td><div class="c3">179</div></td><td></td><td></td><td></td><td></td><td><div>646</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $parent= $elt-&gt;{parent};</td></tr>
<tr><td class="h">7615</td><td><div class="c3">179</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7615">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7615">67</a></div></td><td></td><td></td><td><div>1289</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( !$parent || $parent-&gt;{contains_text}) </td></tr>
<tr><td class="h">7616</td><td><div class="c3">132</div></td><td></td><td></td><td></td><td></td><td><div>267</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $return= &quot;\n&quot;; </td></tr>
<tr><td class="h">7617</td><td><div class="c3">132</div></td><td></td><td></td><td></td><td></td><td><div>415</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$indent= $elt-&gt;level; </td></tr>
<tr><td class="h">7618</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7619</td><td><div class="c3">179</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7619">100</a></div></td><td><div class="c1"><a href="blib-lib-XML-Twig-pm--condition.html#L7619">80</a></div></td><td></td><td></td><td><div>1716</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{contains_text}= 1 if( ($parent &amp;&amp; $parent-&gt;{contains_text})</td></tr>
<tr><td class="h">7620</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| $elt-&gt;contains_text);</td></tr>
<tr><td class="h">7621</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7622</td><td colspan="7"></td></tr><tr><td class="h">7623</td><td><div class="c3">220</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7623">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7623">67</a></div></td><td></td><td></td><td><div>1226</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $return || $indent)</td></tr>
<tr><td class="h">7624</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # check for elements in which spaces should be kept</td></tr>
<tr><td class="h">7625</td><td><div class="c3">149</div></td><td></td><td></td><td></td><td></td><td><div>507</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $t= $elt-&gt;twig;</td></tr>
<tr><td class="h">7626</td><td><div class="c3">149</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7626">50</a></div></td><td></td><td></td><td></td><td><div>407</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $extra_data . $tag if( $xml_space_preserve);</td></tr>
<tr><td class="h">7627</td><td><div class="c3">149</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7627">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7627">67</a></div></td><td></td><td></td><td><div>1137</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $t &amp;&amp; $t-&gt;{twig_keep_spaces_in})</td></tr>
<tr><td class="h">7628</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ foreach my $ancestor ($elt-&gt;ancestors)</td></tr>
<tr><td class="h">7629</td><td><div class="c3">3</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7629">50</a></div></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return $extra_data . $tag if( $t-&gt;{twig_keep_spaces_in}-&gt;{$XML::Twig::index2gi[$ancestor-&gt;{&#39;gi&#39;}]}) }</td></tr>
<tr><td class="h">7630</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7631</td><td colspan="7"></td></tr><tr><td class="h">7632</td><td><div class="c3">149</div></td><td></td><td></td><td></td><td></td><td><div>808</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$prefix= $INDENT x $indent;</td></tr>
<tr><td class="h">7633</td><td><div class="c3">149</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7633">100</a></div></td><td></td><td></td><td></td><td><div>394</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $extra_data)</td></tr>
<tr><td class="h">7634</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>64</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $extra_data=~ s{\s+$}{};</td></tr>
<tr><td class="h">7635</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$extra_data=~ s{^\s+}{};</td></tr>
<tr><td class="h">7636</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$extra_data= $prefix .  $extra_data . $return;</td></tr>
<tr><td class="h">7637</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7638</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7639</td><td colspan="7"></td></tr><tr><td class="h">7640</td><td colspan="7"></td></tr><tr><td class="h">7641</td><td><div class="c3">220</div></td><td></td><td></td><td></td><td></td><td><div>1505</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $return . $extra_data . $prefix . $tag;</td></tr>
<tr><td class="h">7642</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7643</td><td colspan="7"></td></tr><tr><td class="h">7644</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub end_tag</td></tr>
<tr><td class="h">7645</td><td><div class="c3">4364</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7645">4364</a></div></td><td></td><td><div>10267</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">7646</td><td><div class="c3">4364</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7646">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7646">50</a></div></td><td></td><td></td><td><div>58444</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return  &#39;&#39; if(    ($elt-&gt;{gi}&lt;$XML::Twig::SPECIAL_GI) </td></tr>
<tr><td class="h">7647</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| (($elt-&gt;{&#39;empty&#39;} || 0) &amp;&amp; !$elt-&gt;_extra_data_before_end_tag)</td></tr>
<tr><td class="h">7648</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">7649</td><td><div class="c3">3334</div></td><td></td><td></td><td></td><td></td><td><div>7329</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $tag= &quot;&lt;&quot;;</td></tr>
<tr><td class="h">7650</td><td><div class="c3">3334</div></td><td></td><td></td><td></td><td></td><td><div>11925</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $gi= $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}];</td></tr>
<tr><td class="h">7651</td><td colspan="7"></td></tr><tr><td class="h">7652</td><td><div class="c3">3334</div><div class="c3">11</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7652">100</a></div></td><td></td><td></td><td></td><td><div>14075</div><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $map= $elt-&gt;{&#39;att&#39;}-&gt;{&#39;#original_gi&#39;}) { $gi= _restore_original_prefix( $map, $gi); }</td></tr>
<tr><td class="h">7653</td><td><div class="c3">3334</div></td><td></td><td></td><td></td><td></td><td><div>6676</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$gi=~ s{^#default:}{}; # remove default prefix</td></tr>
<tr><td class="h">7654</td><td colspan="7"></td></tr><tr><td class="h">7655</td><td><div class="c3">3334</div><div class="c3">16</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7655">100</a></div></td><td></td><td></td><td></td><td><div>7128</div><div>74</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $output_text_filter) { $gi= $output_text_filter-&gt;( $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}]); } </td></tr>
<tr><td class="h">7656</td><td><div class="c3">3334</div></td><td></td><td></td><td></td><td></td><td><div>12888</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tag .=  &quot;/$gi&gt;&quot;;</td></tr>
<tr><td class="h">7657</td><td colspan="7"></td></tr><tr><td class="h">7658</td><td><div class="c3">3334</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L7658">100</a></div></td><td></td><td></td><td><div>11406</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tag = ($elt-&gt;_extra_data_before_end_tag || &#39;&#39;) . $tag;</td></tr>
<tr><td class="h">7659</td><td colspan="7"></td></tr><tr><td class="h">7660</td><td><div class="c3">3334</div><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7660">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7660">67</a></div></td><td></td><td></td><td><div>23668</div><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( ( (substr( $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}], 0, 1) eq &#39;#&#39;) &amp;&amp; (substr( $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}], 0, 9) ne &#39;#default:&#39;) )) { $tag= &#39;&#39;; }</td></tr>
<tr><td class="h">7661</td><td colspan="7"></td></tr><tr><td class="h">7662</td><td><div class="c3">3334</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7662">100</a></div></td><td></td><td></td><td></td><td><div>14151</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $tag unless $pretty;</td></tr>
<tr><td class="h">7663</td><td colspan="7"></td></tr><tr><td class="h">7664</td><td><div class="c3">123</div></td><td></td><td></td><td></td><td></td><td><div>255</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $prefix=&#39;&#39;;</td></tr>
<tr><td class="h">7665</td><td><div class="c3">123</div></td><td></td><td></td><td></td><td></td><td><div>279</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $return=0;    # 1 if a \n is to be printed before the tag</td></tr>
<tr><td class="h">7666</td><td><div class="c3">123</div></td><td></td><td></td><td></td><td></td><td><div>219</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $indent=0;    # number of indents before the tag</td></tr>
<tr><td class="h">7667</td><td colspan="7"></td></tr><tr><td class="h">7668</td><td><div class="c3">123</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7668">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7668">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7668">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7668">100</a></div></td><td></td><td></td><td></td><td><div>687</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $pretty==$RECORD1)</td></tr>
<tr><td class="h">7669</td><td><div class="c3">29</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7669">100</a></div></td><td></td><td></td><td></td><td><div>84</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $return= 1 if( $elt-&gt;level == 0);</td></tr>
<tr><td class="h">7670</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7671</td><td colspan="7"></td></tr><tr><td class="h">7672</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $pretty==$RECORD2)</td></tr>
<tr><td class="h">7673</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7673">100</a></div></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ unless( $elt-&gt;contains_text)</td></tr>
<tr><td class="h">7674</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $return= 1 ;</td></tr>
<tr><td class="h">7675</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$indent= $elt-&gt;level;</td></tr>
<tr><td class="h">7676</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7677</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7678</td><td colspan="7"></td></tr><tr><td class="h">7679</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $pretty==$NICE)</td></tr>
<tr><td class="h">7680</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $parent= $elt-&gt;{parent};</td></tr>
<tr><td class="h">7681</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7681">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7681">50</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7681">50</a></div></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( (    ($parent &amp;&amp; !$parent-&gt;{contains_text}) || !$parent )</td></tr>
<tr><td class="h">7682</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; ( !$elt-&gt;{contains_text}  </td></tr>
<tr><td class="h">7683</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; ($elt-&gt;{has_flushed_child} || $elt-&gt;_first_child())           </td></tr>
<tr><td class="h">7684</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">7685</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">7686</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $return= 1; }</td></tr>
<tr><td class="h">7687</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7688</td><td colspan="7"></td></tr><tr><td class="h">7689</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( $KEEP_TEXT_TAG_ON_ONE_LINE{$pretty})</td></tr>
<tr><td class="h">7690</td><td><div class="c3">83</div></td><td></td><td></td><td></td><td></td><td><div>254</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $parent= $elt-&gt;{parent};</td></tr>
<tr><td class="h">7691</td><td><div class="c3">83</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7691">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7691">50</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L7691">100</a></div></td><td></td><td></td><td><div>1400</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( (    ($parent &amp;&amp; !$parent-&gt;{contains_text}) || !$parent )</td></tr>
<tr><td class="h">7692</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; ( !$elt-&gt;{contains_text}  </td></tr>
<tr><td class="h">7693</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; ($elt-&gt;{has_flushed_child} || $elt-&gt;_first_child())           </td></tr>
<tr><td class="h">7694</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">7695</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">7696</td><td><div class="c3">40</div></td><td></td><td></td><td></td><td></td><td><div>78</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $return= 1; </td></tr>
<tr><td class="h">7697</td><td><div class="c3">40</div></td><td></td><td></td><td></td><td></td><td><div>115</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$indent= $elt-&gt;level; </td></tr>
<tr><td class="h">7698</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7699</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7700</td><td colspan="7"></td></tr><tr><td class="h">7701</td><td><div class="c3">123</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7701">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7701">67</a></div></td><td></td><td></td><td><div>780</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $return || $indent)</td></tr>
<tr><td class="h">7702</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # check for elements in which spaces should be kept</td></tr>
<tr><td class="h">7703</td><td><div class="c3">45</div></td><td></td><td></td><td></td><td></td><td><div>127</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $t= $elt-&gt;twig;</td></tr>
<tr><td class="h">7704</td><td><div class="c3">45</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7704">50</a></div></td><td></td><td></td><td></td><td><div>138</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $tag if( $xml_space_preserve);</td></tr>
<tr><td class="h">7705</td><td><div class="c3">45</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7705">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7705">67</a></div></td><td></td><td></td><td><div>374</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $t &amp;&amp; $t-&gt;{twig_keep_spaces_in})</td></tr>
<tr><td class="h">7706</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ foreach my $ancestor ($elt, $elt-&gt;ancestors)</td></tr>
<tr><td class="h">7707</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7707">50</a></div></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return $tag if( $t-&gt;{twig_keep_spaces_in}-&gt;{$XML::Twig::index2gi[$ancestor-&gt;{&#39;gi&#39;}]}) }</td></tr>
<tr><td class="h">7708</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7709</td><td colspan="7"></td></tr><tr><td class="h">7710</td><td><div class="c3">45</div><div class="c3">45</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7710">50</a></div><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L7710">50</a></div></td><td></td><td></td><td></td><td><div>164</div><div>176</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $return) { $prefix= ($pretty== $INDENTEDCT) ? &quot;\n$INDENT&quot; : &quot;\n&quot;; }</td></tr>
<tr><td class="h">7711</td><td><div class="c3">45</div></td><td></td><td></td><td></td><td></td><td><div>136</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$prefix.= $INDENT x $indent;</td></tr>
<tr><td class="h">7712</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7713</td><td colspan="7"></td></tr><tr><td class="h">7714</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# add a \n at the end of the document (after the root element)</td></tr>
<tr><td class="h">7715</td><td><div class="c3">123</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7715">100</a></div></td><td></td><td></td><td></td><td><div>548</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tag .= &quot;\n&quot; unless( $elt-&gt;{parent});</td></tr>
<tr><td class="h">7716</td><td colspan="7"></td></tr><tr><td class="h">7717</td><td><div class="c3">123</div></td><td></td><td></td><td></td><td></td><td><div>686</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $prefix . $tag;</td></tr>
<tr><td class="h">7718</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7719</td><td colspan="7"></td></tr><tr><td class="h">7720</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub _restore_original_prefix</td></tr>
<tr><td class="h">7721</td><td><div class="c3">33</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7721">33</a></div></td><td></td><td><div>130</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my( $map, $name)= @_;</td></tr>
<tr><td class="h">7722</td><td><div class="c3">33</div></td><td></td><td></td><td></td><td></td><td><div>103</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $prefix= _ns_prefix( $name);</td></tr>
<tr><td class="h">7723</td><td><div class="c3">33</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7723">100</a></div></td><td></td><td></td><td></td><td><div>235</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $original_prefix= $map-&gt;{$prefix})</td></tr>
<tr><td class="h">7724</td><td><div class="c3">26</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7724">100</a></div></td><td></td><td></td><td></td><td><div>77</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $original_prefix eq &#39;#default&#39;)</td></tr>
<tr><td class="h">7725</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td></td><td><div>70</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $name=~ s{^$prefix:}{}; }</td></tr>
<tr><td class="h">7726</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">7727</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>273</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $name=~ s{^$prefix(?=:)}{$original_prefix}; }</td></tr>
<tr><td class="h">7728</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7729</td><td><div class="c3">33</div></td><td></td><td></td><td></td><td></td><td><div>134</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $name;</td></tr>
<tr><td class="h">7730</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7731</td><td colspan="7"></td></tr><tr><td class="h">7732</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# buffer used to hold the text to print/sprint, to avoid passing it back and forth between methods</td></tr>
<tr><td class="h">7733</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>200</div></td><td class="s">&nbsp;&nbsp;my @sprint;</td></tr>
<tr><td class="h">7734</td><td colspan="7"></td></tr><tr><td class="h">7735</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# $elt is an element to print</td></tr>
<tr><td class="h">7736</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# $fh is an optional filehandle to print to</td></tr>
<tr><td class="h">7737</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# $pretty is an optional value, if true a \n is printed after the &lt; of the</td></tr>
<tr><td class="h">7738</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# opening tag</td></tr>
<tr><td class="h">7739</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub print</td></tr>
<tr><td class="h">7740</td><td><div class="c3">43</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7740">43</a></div></td><td></td><td><div>210</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">7741</td><td colspan="7"></td></tr><tr><td class="h">7742</td><td><div class="c3">43</div></td><td></td><td></td><td></td><td></td><td><div>70</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $pretty;</td></tr>
<tr><td class="h">7743</td><td><div class="c3">43</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7743">100</a></div></td><td></td><td></td><td></td><td><div>179</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fh= _is_fh( $_[0]) ? shift : undef;</td></tr>
<tr><td class="h">7744</td><td><div class="c3">43</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7744">100</a></div></td><td></td><td></td><td></td><td><div>211</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $old_select= defined $fh ? select $fh : undef;</td></tr>
<tr><td class="h">7745</td><td><div class="c3">43</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7745">100</a></div></td><td></td><td></td><td></td><td><div>184</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $old_pretty= defined ($pretty= shift) ? set_pretty_print( $pretty) : undef;</td></tr>
<tr><td class="h">7746</td><td><div class="c3">43</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L7746">100</a></div></td><td></td><td></td><td><div>159</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pretty ||=0;</td></tr>
<tr><td class="h">7747</td><td><div class="c3">43</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7747">67</a></div></td><td></td><td></td><td><div>382</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pretty = $pretty_print_style{$pretty} || $pretty;</td></tr>
<tr><td class="h">7748</td><td colspan="7"></td></tr><tr><td class="h">7749</td><td><div class="c3">43</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7749">50</a></div></td><td></td><td></td><td><div>578</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xml_space_preserve= ( ($elt-&gt;inherit_att( &#39;xml:space&#39;) || &#39;&#39;) eq &#39;preserve&#39;);</td></tr>
<tr><td class="h">7750</td><td colspan="7"></td></tr><tr><td class="h">7751</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#$elt-&gt;_print;       # no need to duplicate logic in _sprint</td></tr>
<tr><td class="h">7752</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#print $elt-&gt;sprint; # but that&#39;s too slow</td></tr>
<tr><td class="h">7753</td><td colspan="7"></td></tr><tr><td class="h">7754</td><td><div class="c3">43</div></td><td></td><td></td><td></td><td></td><td><div>191</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@sprint=();</td></tr>
<tr><td class="h">7755</td><td><div class="c3">43</div></td><td></td><td></td><td></td><td></td><td><div>192</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;_sprint(@_);</td></tr>
<tr><td class="h">7756</td><td><div class="c3">43</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7756">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7756">17</a></div></td><td></td><td></td><td><div>655</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $output_filter || ((($pretty== $WRAPPED) || ($pretty==$INDENTEDC)) &amp;&amp; !$xml_space_preserve))</td></tr>
<tr><td class="h">7757</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $sprint= join( &#39;&#39;, @sprint);</td></tr>
<tr><td class="h">7758</td><td><div class="c0">0</div><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L7758">0</a></div></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $output_filter) { $sprint= $output_filter-&gt;( $sprint); }</td></tr>
<tr><td class="h">7759</td><td colspan="7"></td></tr><tr><td class="h">7760</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L7760">0</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7760">0</a></div></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( ( ($pretty== $WRAPPED) || ($pretty==$INDENTEDC)) &amp;&amp; !$xml_space_preserve)</td></tr>
<tr><td class="h">7761</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $sprint= _wrap_text( $sprint); }</td></tr>
<tr><td class="h">7762</td><td colspan="7"></td></tr><tr><td class="h">7763</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print $sprint;</td></tr>
<tr><td class="h">7764</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7765</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">7766</td><td><div class="c3">43</div></td><td></td><td></td><td></td><td></td><td><div>450</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ print @sprint; }</td></tr>
<tr><td class="h">7767</td><td colspan="7"></td></tr><tr><td class="h">7768</td><td><div class="c3">43</div></td><td></td><td></td><td></td><td></td><td><div>360</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xml_space_preserve= 0;</td></tr>
<tr><td class="h">7769</td><td colspan="7"></td></tr><tr><td class="h">7770</td><td><div class="c3">43</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7770">100</a></div></td><td></td><td></td><td></td><td><div>181</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select $old_select if( defined $old_select);</td></tr>
<tr><td class="h">7771</td><td><div class="c3">43</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7771">100</a></div></td><td></td><td></td><td></td><td><div>214</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set_pretty_print( $old_pretty) if( defined $old_pretty);</td></tr>
<tr><td class="h">7772</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7773</td><td colspan="7"></td></tr><tr><td class="h">7774</td><td colspan="7"></td></tr><tr><td class="h">7775</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# same as print but does not output the start tag if the element</td></tr>
<tr><td class="h">7776</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# is marked as flushed</td></tr>
<tr><td class="h">7777</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub flush </td></tr>
<tr><td class="h">7778</td><td><div class="c3">14</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7778">14</a></div></td><td></td><td><div>90</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $elt= shift; </td></tr>
<tr><td class="h">7779</td><td><div class="c3">14</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7779">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7779">67</a></div></td><td></td><td></td><td><div>99</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $up_to= $_[0] &amp;&amp; isa( $_[0], &#39;XML::Twig::Elt&#39;) ? shift : $elt;</td></tr>
<tr><td class="h">7780</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>151</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;twig-&gt;flush_up_to( $up_to, @_); </td></tr>
<tr><td class="h">7781</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7782</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub purge</td></tr>
<tr><td class="h">7783</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7783">4</a></div></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $elt= shift; </td></tr>
<tr><td class="h">7784</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7784">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7784">67</a></div></td><td></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $up_to= $_[0] &amp;&amp; isa( $_[0], &#39;XML::Twig::Elt&#39;) ? shift : $elt;</td></tr>
<tr><td class="h">7785</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;twig-&gt;purge_up_to( $up_to, @_); </td></tr>
<tr><td class="h">7786</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7787</td><td colspan="7"></td></tr><tr><td class="h">7788</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub _flush</td></tr>
<tr><td class="h">7789</td><td><div class="c3">1689</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7789">1689</a></div></td><td></td><td><div>4015</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">7790</td><td colspan="7"></td></tr><tr><td class="h">7791</td><td><div class="c3">1689</div></td><td></td><td></td><td></td><td></td><td><div>2281</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $pretty;</td></tr>
<tr><td class="h">7792</td><td><div class="c3">1689</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7792">50</a></div></td><td></td><td></td><td></td><td><div>5786</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fh=  _is_fh( $_[0]) ? shift : undef;</td></tr>
<tr><td class="h">7793</td><td><div class="c3">1689</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7793">50</a></div></td><td></td><td></td><td></td><td><div>5762</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $old_select= defined $fh ? select $fh : undef;</td></tr>
<tr><td class="h">7794</td><td><div class="c3">1689</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7794">100</a></div></td><td></td><td></td><td></td><td><div>7899</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $old_pretty= defined ($pretty= shift) ? set_pretty_print( $pretty) : undef;</td></tr>
<tr><td class="h">7795</td><td colspan="7"></td></tr><tr><td class="h">7796</td><td><div class="c3">1689</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7796">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7796">50</a></div></td><td></td><td></td><td><div>5489</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xml_space_preserve= 1 if( ($elt-&gt;inherit_att( &#39;xml:space&#39;) || &#39;&#39;) eq &#39;preserve&#39;);</td></tr>
<tr><td class="h">7797</td><td colspan="7"></td></tr><tr><td class="h">7798</td><td><div class="c3">1689</div></td><td></td><td></td><td></td><td></td><td><div>5521</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;__flush();</td></tr>
<tr><td class="h">7799</td><td colspan="7"></td></tr><tr><td class="h">7800</td><td><div class="c3">1689</div></td><td></td><td></td><td></td><td></td><td><div>16810</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xml_space_preserve= 0;</td></tr>
<tr><td class="h">7801</td><td colspan="7"></td></tr><tr><td class="h">7802</td><td><div class="c3">1689</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7802">50</a></div></td><td></td><td></td><td></td><td><div>4563</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select $old_select if( defined $old_select);</td></tr>
<tr><td class="h">7803</td><td><div class="c3">1689</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7803">100</a></div></td><td></td><td></td><td></td><td><div>6139</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set_pretty_print( $old_pretty) if( defined $old_pretty);</td></tr>
<tr><td class="h">7804</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7805</td><td colspan="7"></td></tr><tr><td class="h">7806</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub __flush</td></tr>
<tr><td class="h">7807</td><td><div class="c3">1689</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7807">1689</a></div></td><td></td><td><div>4093</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">7808</td><td colspan="7"></td></tr><tr><td class="h">7809</td><td><div class="c3">1689</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7809">100</a></div></td><td></td><td></td><td></td><td><div>7255</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;{gi} &gt;= $XML::Twig::SPECIAL_GI)</td></tr>
<tr><td class="h">7810</td><td><div class="c3">1214</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7810">50</a></div></td><td></td><td></td><td><div>9686</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $preserve= ($elt-&gt;{&#39;att&#39;}-&gt;{&#39;xml:space&#39;} || &#39;&#39;) eq &#39;preserve&#39;;</td></tr>
<tr><td class="h">7811</td><td><div class="c3">1214</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7811">50</a></div></td><td></td><td></td><td></td><td><div>3008</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xml_space_preserve++ if $preserve;</td></tr>
<tr><td class="h">7812</td><td><div class="c3">1214</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7812">100</a></div></td><td></td><td></td><td></td><td><div>3222</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( $elt-&gt;_flushed)</td></tr>
<tr><td class="h">7813</td><td><div class="c3">1202</div></td><td></td><td></td><td></td><td></td><td><div>4051</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ print $elt-&gt;start_tag();</td></tr>
<tr><td class="h">7814</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7815</td><td colspan="7"></td></tr><tr><td class="h">7816</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# flush the children</td></tr>
<tr><td class="h">7817</td><td><div class="c3">1214</div></td><td></td><td></td><td></td><td></td><td><div>39494</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @children= $elt-&gt;_children;</td></tr>
<tr><td class="h">7818</td><td><div class="c3">1214</div></td><td></td><td></td><td></td><td></td><td><div>3995</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $child (@children)</td></tr>
<tr><td class="h">7819</td><td><div class="c3">769</div></td><td></td><td></td><td></td><td></td><td><div>2964</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $child-&gt;_flush( $pretty); }</td></tr>
<tr><td class="h">7820</td><td><div class="c3">1214</div><div class="c3">1214</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L7820">50</a></div></td><td></td><td></td><td></td><td><div>5447</div><div>4071</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( $elt-&gt;{end_tag_flushed}) { print $elt-&gt;end_tag; }</td></tr>
<tr><td class="h">7821</td><td><div class="c3">1214</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7821">50</a></div></td><td></td><td></td><td></td><td><div>37010</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xml_space_preserve-- if $preserve;</td></tr>
<tr><td class="h">7822</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# used for pretty printing</td></tr>
<tr><td class="h">7823</td><td><div class="c3">1214</div><div class="c3">337</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7823">100</a></div></td><td></td><td></td><td></td><td><div>6733</div><div>1694</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $parent= $elt-&gt;{parent}) { $parent-&gt;{has_flushed_child}= 1; }</td></tr>
<tr><td class="h">7824</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7825</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else # text or special element</td></tr>
<tr><td class="h">7826</td><td><div class="c3">475</div></td><td></td><td></td><td></td><td></td><td><div>708</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $text;</td></tr>
<tr><td class="h">7827</td><td><div class="c3">475</div><div class="c3">325</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7827">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7827">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7827">100</a></div><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L7827">50</a></div><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L7827">0</a></div></td><td></td><td></td><td></td><td><div>2267</div><div>1033</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( (exists $elt-&gt;{&#39;pcdata&#39;}))     { $text= $elt-&gt;pcdata_xml_string; </td></tr>
<tr><td class="h">7828</td><td><div class="c3">325</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L7828">50</a></div></td><td></td><td></td><td></td><td><div>1553</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $parent= $elt-&gt;{parent}) </td></tr>
<tr><td class="h">7829</td><td><div class="c3">325</div></td><td></td><td></td><td></td><td></td><td><div>1456</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $parent-&gt;{contains_text}= 1; }</td></tr>
<tr><td class="h">7830</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7831</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( (exists $elt-&gt;{&#39;cdata&#39;}))   { $text= $elt-&gt;cdata_string;        </td></tr>
<tr><td class="h">7832</td><td><div class="c3">2</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L7832">50</a></div></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $parent= $elt-&gt;{parent}) </td></tr>
<tr><td class="h">7833</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $parent-&gt;{contains_text}= 1; }</td></tr>
<tr><td class="h">7834</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7835</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( (exists $elt-&gt;{&#39;target&#39;}))      { $text= $elt-&gt;pi_string;          }</td></tr>
<tr><td class="h">7836</td><td><div class="c3">146</div></td><td></td><td></td><td></td><td></td><td><div>425</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( (exists $elt-&gt;{&#39;comment&#39;})) { $text= $elt-&gt;comment_string;     }</td></tr>
<tr><td class="h">7837</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( (exists $elt-&gt;{&#39;ent&#39;}))     { $text= $elt-&gt;ent_string;         }</td></tr>
<tr><td class="h">7838</td><td colspan="7"></td></tr><tr><td class="h">7839</td><td><div class="c3">475</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7839">50</a></div></td><td></td><td></td><td></td><td><div>1552</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print $output_filter ? $output_filter-&gt;( $text) : $text;</td></tr>
<tr><td class="h">7840</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7841</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7842</td><td colspan="7"></td></tr><tr><td class="h">7843</td><td colspan="7"></td></tr><tr><td class="h">7844</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub xml_text</td></tr>
<tr><td class="h">7845</td><td><div class="c3">26</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7845">26</a></div></td><td></td><td><div>121</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my( $elt, @options)= @_;</td></tr>
<tr><td class="h">7846</td><td colspan="7"></td></tr><tr><td class="h">7847</td><td><div class="c3">26</div><div class="c3">1</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7847">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7847">67</a></div></td><td></td><td></td><td><div>109</div><div>9</div><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( @options &amp;&amp; grep { lc( $_) eq &#39;no_recurse&#39; } @options) { return $elt-&gt;xml_text_only; }</td></tr>
<tr><td class="h">7848</td><td colspan="7"></td></tr><tr><td class="h">7849</td><td><div class="c3">25</div></td><td></td><td></td><td></td><td></td><td><div>56</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $string=&#39;&#39;;</td></tr>
<tr><td class="h">7850</td><td colspan="7"></td></tr><tr><td class="h">7851</td><td><div class="c3">25</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7851">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7851">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7851">100</a></div><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L7851">50</a></div></td><td></td><td></td><td></td><td><div>155</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( ($elt-&gt;{gi} &gt;= $XML::Twig::SPECIAL_GI) )</td></tr>
<tr><td class="h">7852</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # sprint the children</td></tr>
<tr><td class="h">7853</td><td><div class="c3">9</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L7853">100</a></div></td><td></td><td></td><td><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $child= $elt-&gt;{first_child} || &#39;&#39;;</td></tr>
<tr><td class="h">7854</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>31</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while( $child)</td></tr>
<tr><td class="h">7855</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>61</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $string.= $child-&gt;xml_text;</td></tr>
<tr><td class="h">7856</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>77</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} continue { $child= $child-&gt;{next_sibling}; }</td></tr>
<tr><td class="h">7857</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7858</td><td><div class="c3">13</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7858">100</a></div></td><td></td><td></td><td></td><td><div>91</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( (exists $elt-&gt;{&#39;pcdata&#39;}))  { $string .= $output_filter ?  $output_filter-&gt;($elt-&gt;pcdata_xml_string) </td></tr>
<tr><td class="h">7859</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: $elt-&gt;pcdata_xml_string; </td></tr>
<tr><td class="h">7860</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7861</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7861">50</a></div></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( (exists $elt-&gt;{&#39;cdata&#39;}))   { $string .= $output_filter ?  $output_filter-&gt;($elt-&gt;cdata_string)  </td></tr>
<tr><td class="h">7862</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: $elt-&gt;cdata_string;      </td></tr>
<tr><td class="h">7863</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7864</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( (exists $elt-&gt;{&#39;ent&#39;}))     { $string .= $elt-&gt;ent_string; }</td></tr>
<tr><td class="h">7865</td><td colspan="7"></td></tr><tr><td class="h">7866</td><td><div class="c3">25</div></td><td></td><td></td><td></td><td></td><td><div>149</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $string;</td></tr>
<tr><td class="h">7867</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7868</td><td colspan="7"></td></tr><tr><td class="h">7869</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub xml_text_only</td></tr>
<tr><td class="h">7870</td><td><div class="c3">1</div><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7870">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L7870">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7870">1</a></div></td><td></td><td><div>6</div><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ return join &#39;&#39;, map { $_-&gt;xml_text if( $_-&gt;is_text || (exists $_-&gt;{&#39;ent&#39;})) } $_[0]-&gt;_children; }</td></tr>
<tr><td class="h">7871</td><td colspan="7"></td></tr><tr><td class="h">7872</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# same as print but except... it does not print but rather returns the string</td></tr>
<tr><td class="h">7873</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# if the second parameter is set then only the content is returned, not the</td></tr>
<tr><td class="h">7874</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# start and end tags of the element (but the tags of the included elements are</td></tr>
<tr><td class="h">7875</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# returned)</td></tr>
<tr><td class="h">7876</td><td colspan="7"></td></tr><tr><td class="h">7877</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub sprint</td></tr>
<tr><td class="h">7878</td><td><div class="c3">3104</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7878">3104</a></div></td><td></td><td><div>8360</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">7879</td><td><div class="c3">3104</div></td><td></td><td></td><td></td><td></td><td><div>6081</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my( $old_pretty, $old_empty_tag_style);</td></tr>
<tr><td class="h">7880</td><td colspan="7"></td></tr><tr><td class="h">7881</td><td><div class="c3">3104</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7881">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L7881">100</a></div></td><td></td><td></td><td><div>20970</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $_[0] &amp;&amp; isa( $_[0], &#39;HASH&#39;))</td></tr>
<tr><td class="h">7882</td><td><div class="c3">6</div><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>13</div><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my %args= XML::Twig::_normalize_args( %{shift()}); </td></tr>
<tr><td class="h">7883</td><td><div class="c3">6</div><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7883">100</a></div></td><td></td><td></td><td></td><td><div>34</div><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined $args{PrettyPrint}) { $old_pretty          = set_pretty_print( $args{PrettyPrint});  }</td></tr>
<tr><td class="h">7884</td><td><div class="c3">6</div><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7884">100</a></div></td><td></td><td></td><td></td><td><div>28</div><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined $args{EmptyTags})  { $old_empty_tag_style = set_empty_tag_style( $args{EmptyTags}); }</td></tr>
<tr><td class="h">7885</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7886</td><td colspan="7"></td></tr><tr><td class="h">7887</td><td><div class="c3">3104</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7887">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L7887">100</a></div></td><td></td><td></td><td><div>10706</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xml_space_preserve= 1 if( ($elt-&gt;inherit_att( &#39;xml:space&#39;) || &#39;&#39;) eq &#39;preserve&#39;);</td></tr>
<tr><td class="h">7888</td><td colspan="7"></td></tr><tr><td class="h">7889</td><td><div class="c3">3104</div></td><td></td><td></td><td></td><td></td><td><div>9528</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@sprint=();</td></tr>
<tr><td class="h">7890</td><td><div class="c3">3104</div></td><td></td><td></td><td></td><td></td><td><div>11715</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;_sprint( @_);</td></tr>
<tr><td class="h">7891</td><td><div class="c3">3104</div></td><td></td><td></td><td></td><td></td><td><div>12932</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $sprint= join( &#39;&#39;, @sprint);</td></tr>
<tr><td class="h">7892</td><td><div class="c3">3104</div><div class="c3">23</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7892">100</a></div></td><td></td><td></td><td></td><td><div>7970</div><div>85</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $output_filter) { $sprint= $output_filter-&gt;( $sprint); }</td></tr>
<tr><td class="h">7893</td><td colspan="7"></td></tr><tr><td class="h">7894</td><td><div class="c3">3104</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7894">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7894">40</a></div></td><td></td><td></td><td><div>26594</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( ( ($pretty== $WRAPPED) || ($pretty==$INDENTEDC)) &amp;&amp; !$xml_space_preserve)</td></tr>
<tr><td class="h">7895</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $sprint= _wrap_text( $sprint); }</td></tr>
<tr><td class="h">7896</td><td><div class="c3">3104</div></td><td></td><td></td><td></td><td></td><td><div>5753</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xml_space_preserve= 0;</td></tr>
<tr><td class="h">7897</td><td colspan="7"></td></tr><tr><td class="h">7898</td><td colspan="7"></td></tr><tr><td class="h">7899</td><td><div class="c3">3104</div><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7899">100</a></div></td><td></td><td></td><td></td><td><div>8297</div><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined $old_pretty)          { set_pretty_print( $old_pretty);             } </td></tr>
<tr><td class="h">7900</td><td><div class="c3">3104</div><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7900">100</a></div></td><td></td><td></td><td></td><td><div>7628</div><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined $old_empty_tag_style) { set_empty_tag_style( $old_empty_tag_style); }</td></tr>
<tr><td class="h">7901</td><td colspan="7"></td></tr><tr><td class="h">7902</td><td><div class="c3">3104</div></td><td></td><td></td><td></td><td></td><td><div>17735</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $sprint;</td></tr>
<tr><td class="h">7903</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7904</td><td colspan="7"></td></tr><tr><td class="h">7905</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub _wrap_text</td></tr>
<tr><td class="h">7906</td><td><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7906">5</a></div></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my( $string)= @_;</td></tr>
<tr><td class="h">7907</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $wrapped;</td></tr>
<tr><td class="h">7908</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>70</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $line (split /\n/, $string)</td></tr>
<tr><td class="h">7909</td><td><div class="c3">19</div></td><td></td><td></td><td></td><td></td><td><div>114</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my( $initial_indent)= $line=~ m{^(\s*)};</td></tr>
<tr><td class="h">7910</td><td><div class="c3">19</div></td><td></td><td></td><td></td><td></td><td><div>104</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $wrapped_line= Text::Wrap::wrap(  &#39;&#39;,  $initial_indent . $INDENT, $line) . &quot;\n&quot;;</td></tr>
<tr><td class="h">7911</td><td colspan="7"></td></tr><tr><td class="h">7912</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# fix glitch with Text::wrap when the first line is long and does not include spaces</td></tr>
<tr><td class="h">7913</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# the first line ends up being too short by 2 chars, but we&#39;ll have to live with it!</td></tr>
<tr><td class="h">7914</td><td><div class="c3">19</div></td><td></td><td></td><td></td><td></td><td><div>90</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$wrapped_line=~ s{^ +\n  }{}s; # this prefix needs to be removed</td></tr>
<tr><td class="h">7915</td><td colspan="7"></td></tr><tr><td class="h">7916</td><td><div class="c3">19</div></td><td></td><td></td><td></td><td></td><td><div>68</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$wrapped .= $wrapped_line;</td></tr>
<tr><td class="h">7917</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7918</td><td colspan="7"></td></tr><tr><td class="h">7919</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $wrapped;</td></tr>
<tr><td class="h">7920</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7921</td><td colspan="7"></td></tr><tr><td class="h">7922</td><td colspan="7"></td></tr><tr><td class="h">7923</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub _sprint</td></tr>
<tr><td class="h">7924</td><td><div class="c3">9295</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7924">9295</a></div></td><td></td><td><div>21069</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">7925</td><td><div class="c3">9295</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L7925">100</a></div></td><td></td><td></td><td><div>56586</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $no_tag= shift || 0;</td></tr>
<tr><td class="h">7926</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# in case there&#39;s some comments or PI&#39;s piggybacking</td></tr>
<tr><td class="h">7927</td><td colspan="7"></td></tr><tr><td class="h">7928</td><td><div class="c3">9295</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7928">100</a></div></td><td></td><td></td><td></td><td><div>38440</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;{gi} &gt;= $XML::Twig::SPECIAL_GI)</td></tr>
<tr><td class="h">7929</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">7930</td><td><div class="c3">4711</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L7930">100</a></div></td><td></td><td></td><td><div>36373</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $preserve= ($elt-&gt;{&#39;att&#39;}-&gt;{&#39;xml:space&#39;} || &#39;&#39;) eq &#39;preserve&#39;;</td></tr>
<tr><td class="h">7931</td><td><div class="c3">4711</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7931">100</a></div></td><td></td><td></td><td></td><td><div>12343</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xml_space_preserve++ if $preserve;</td></tr>
<tr><td class="h">7932</td><td colspan="7"></td></tr><tr><td class="h">7933</td><td><div class="c3">4711</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7933">100</a></div></td><td></td><td></td><td></td><td><div>18365</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @sprint, $elt-&gt;start_tag unless( $no_tag);</td></tr>
<tr><td class="h">7934</td><td colspan="7"></td></tr><tr><td class="h">7935</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# sprint the children</td></tr>
<tr><td class="h">7936</td><td><div class="c3">4711</div></td><td></td><td></td><td></td><td></td><td><div>16079</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $child= $elt-&gt;{first_child};</td></tr>
<tr><td class="h">7937</td><td><div class="c3">4711</div></td><td></td><td></td><td></td><td></td><td><div>13857</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while( $child)</td></tr>
<tr><td class="h">7938</td><td><div class="c3">6148</div></td><td></td><td></td><td></td><td></td><td><div>19314</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $child-&gt;_sprint;</td></tr>
<tr><td class="h">7939</td><td><div class="c3">6148</div></td><td></td><td></td><td></td><td></td><td><div>31350</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$child= $child-&gt;{next_sibling};</td></tr>
<tr><td class="h">7940</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7941</td><td><div class="c3">4711</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7941">100</a></div></td><td></td><td></td><td></td><td><div>19095</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @sprint, $elt-&gt;end_tag unless( $no_tag);</td></tr>
<tr><td class="h">7942</td><td><div class="c3">4711</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7942">100</a></div></td><td></td><td></td><td></td><td><div>13746</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xml_space_preserve-- if $preserve;</td></tr>
<tr><td class="h">7943</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7944</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">7945</td><td><div class="c3">4584</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7945">100</a></div></td><td></td><td></td><td></td><td><div>17385</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ push @sprint, $elt-&gt;{extra_data} if( $elt-&gt;{extra_data}) ;</td></tr>
<tr><td class="h">7946</td><td><div class="c3">4584</div><div class="c3">1421</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7946">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7946">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7946">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7946">100</a></div><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L7946">50</a></div></td><td></td><td></td><td></td><td><div>23524</div><div>5149</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(    (exists $elt-&gt;{&#39;pcdata&#39;}))  { push @sprint, $elt-&gt;pcdata_xml_string; }</td></tr>
<tr><td class="h">7947</td><td><div class="c3">45</div></td><td></td><td></td><td></td><td></td><td><div>179</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( (exists $elt-&gt;{&#39;cdata&#39;}))   { push @sprint, $elt-&gt;cdata_string;      }</td></tr>
<tr><td class="h">7948</td><td><div class="c3">1460</div></td><td></td><td></td><td></td><td></td><td><div>5046</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( (exists $elt-&gt;{&#39;target&#39;}))      { push @sprint, $elt-&gt;pi_string;</td></tr>
<tr><td class="h">7949</td><td><div class="c3">1460</div><div class="c0">0</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7949">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7949">67</a></div></td><td></td><td></td><td><div>6208</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( ($pretty &gt;= $INDENTED) &amp;&amp; !$elt-&gt;{parent}-&gt;{contains_text}) { push @sprint, &quot;\n&quot;; }</td></tr>
<tr><td class="h">7950</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7951</td><td><div class="c3">1616</div></td><td></td><td></td><td></td><td></td><td><div>5370</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( (exists $elt-&gt;{&#39;comment&#39;})) { push @sprint, $elt-&gt;comment_string;    </td></tr>
<tr><td class="h">7952</td><td><div class="c3">1616</div><div class="c0">0</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7952">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7952">67</a></div></td><td></td><td></td><td><div>7629</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( ($pretty &gt;= $INDENTED) &amp;&amp; !$elt-&gt;{parent}-&gt;{contains_text}) { push @sprint, &quot;\n&quot;; }</td></tr>
<tr><td class="h">7953</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7954</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td></td><td><div>149</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( (exists $elt-&gt;{&#39;ent&#39;}))     { push @sprint, $elt-&gt;ent_string;        }</td></tr>
<tr><td class="h">7955</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7956</td><td colspan="7"></td></tr><tr><td class="h">7957</td><td><div class="c3">9295</div></td><td></td><td></td><td></td><td></td><td><div>19961</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">7958</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7959</td><td colspan="7"></td></tr><tr><td class="h">7960</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# just a shortcut to $elt-&gt;sprint( 1)</td></tr>
<tr><td class="h">7961</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub xml_string</td></tr>
<tr><td class="h">7962</td><td><div class="c3">1558</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7962">1558</a></div></td><td></td><td><div>3998</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">7963</td><td><div class="c3">1558</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7963">100</a></div></td><td></td><td></td><td></td><td><div>12493</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isa( $_[0], &#39;HASH&#39;) ?  $elt-&gt;sprint( shift(), 1) : $elt-&gt;sprint( 1);</td></tr>
<tr><td class="h">7964</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7965</td><td colspan="7"></td></tr><tr><td class="h">7966</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub pcdata_xml_string </td></tr>
<tr><td class="h">7967</td><td><div class="c3">1760</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L7967">1760</a></div></td><td></td><td><div>4002</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">7968</td><td><div class="c3">1760</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7968">100</a></div></td><td></td><td></td><td></td><td><div>7473</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined( my $string= $elt-&gt;{pcdata}) )</td></tr>
<tr><td class="h">7969</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">7970</td><td><div class="c3">1759</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7970">100</a></div></td><td></td><td></td><td></td><td><div>5702</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;_extra_data_in_pcdata)</td></tr>
<tr><td class="h">7971</td><td><div class="c3">83</div></td><td></td><td></td><td></td><td></td><td><div>248</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ _gen_mark( $string); # used by _(un)?protect_extra_data</td></tr>
<tr><td class="h">7972</td><td><div class="c3">83</div><div class="c3">83</div></td><td></td><td></td><td></td><td></td><td><div>133</div><div>293</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $data (reverse @{$elt-&gt;_extra_data_in_pcdata})</td></tr>
<tr><td class="h">7973</td><td><div class="c3">118</div></td><td></td><td></td><td></td><td></td><td><div>622</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $substr= substr( $string, $data-&gt;{offset});</td></tr>
<tr><td class="h">7974</td><td><div class="c3">118</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7974">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7974">67</a></div></td><td></td><td></td><td><div>872</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $keep_encoding || $elt-&gt;{asis})</td></tr>
<tr><td class="h">7975</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>179</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ substr( $string, $data-&gt;{offset}, 0, $data-&gt;{text}); }</td></tr>
<tr><td class="h">7976</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">7977</td><td><div class="c3">88</div></td><td></td><td></td><td></td><td></td><td><div>499</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ substr( $string, $data-&gt;{offset}, 0, _protect_extra_data( $data-&gt;{text})); }</td></tr>
<tr><td class="h">7978</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7979</td><td><div class="c3">83</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7979">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L7979">67</a></div></td><td></td><td></td><td><div>785</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( $keep_encoding || $elt-&gt;{asis})</td></tr>
<tr><td class="h">7980</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">7981</td><td><div class="c3">63</div></td><td></td><td></td><td></td><td></td><td><div>468</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string=~ s{([$replaced_ents])}{$XML::Twig::base_ent{$1}}g ;</td></tr>
<tr><td class="h">7982</td><td><div class="c3">63</div></td><td></td><td></td><td></td><td></td><td><div>192</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string=~ s{\Q]]&gt;}{]]&amp;gt;}g;</td></tr>
<tr><td class="h">7983</td><td><div class="c3">63</div></td><td></td><td></td><td></td><td></td><td><div>183</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_unprotect_extra_data( $string);</td></tr>
<tr><td class="h">7984</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7985</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7986</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">7987</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">7988</td><td><div class="c3">1676</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7988">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L7988">100</a></div></td><td></td><td></td><td><div>17457</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string=~ s/([$replaced_ents])/$XML::Twig::base_ent{$1}/g unless( $keep_encoding || $elt-&gt;{asis});  </td></tr>
<tr><td class="h">7989</td><td><div class="c3">1676</div></td><td></td><td></td><td></td><td></td><td><div>5115</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string=~ s{\Q]]&gt;}{]]&amp;gt;}g;</td></tr>
<tr><td class="h">7990</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7991</td><td><div class="c3">1759</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L7991">100</a></div></td><td></td><td></td><td></td><td><div>9361</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $output_text_filter ? $output_text_filter-&gt;( $string) : $string;</td></tr>
<tr><td class="h">7992</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7993</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">7994</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return &#39;&#39;; }</td></tr>
<tr><td class="h">7995</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">7996</td><td colspan="7"></td></tr><tr><td class="h">7997</td><td><div class="c3">92</div><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>227</div><div>401</div></td><td class="s">&nbsp;&nbsp;{ my $mark;</td></tr>
<tr><td class="h">7998</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>1344</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( %char2ent, %ent2char);</td></tr>
<tr><td class="h">7999</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;BEGIN</td></tr>
<tr><td class="h">8000</td><td><div class="c3">92</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8000">92</a></div></td><td></td><td><div>1016</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ %char2ent= ( &#39;&lt;&#39; =&gt; &#39;lt&#39;, &#39;&amp;&#39; =&gt; &#39;amp&#39;, &#39;&gt;&#39; =&gt; &#39;gt&#39;);</td></tr>
<tr><td class="h">8001</td><td><div class="c3">92</div><div class="c3">276</div></td><td></td><td></td><td></td><td></td><td><div>577</div><div>1789</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%ent2char= map { $char2ent{$_} =&gt; $_ } keys %char2ent;</td></tr>
<tr><td class="h">8002</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8003</td><td colspan="7"></td></tr><tr><td class="h">8004</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# generate a unique mark (a string) not found in the string, </td></tr>
<tr><td class="h">8005</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# used to mark &lt; and &amp; in the extra data</td></tr>
<tr><td class="h">8006</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;sub _gen_mark</td></tr>
<tr><td class="h">8007</td><td><div class="c3">83</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8007">83</a></div></td><td></td><td><div>173</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $mark=&quot;AAAA&quot;;</td></tr>
<tr><td class="h">8008</td><td><div class="c3">83</div></td><td></td><td></td><td></td><td></td><td><div>457</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$mark++ while( index( $_[0], $mark) &gt; -1);</td></tr>
<tr><td class="h">8009</td><td><div class="c3">83</div></td><td></td><td></td><td></td><td></td><td><div>175</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $mark;</td></tr>
<tr><td class="h">8010</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8011</td><td colspan="7"></td></tr><tr><td class="h">8012</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;sub _protect_extra_data</td></tr>
<tr><td class="h">8013</td><td><div class="c3">88</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8013">88</a></div></td><td></td><td><div>338</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my( $extra_data)= @_;</td></tr>
<tr><td class="h">8014</td><td><div class="c3">88</div></td><td></td><td></td><td></td><td></td><td><div>2136</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$extra_data=~ s{([&lt;&amp;&gt;])}{:$mark:$char2ent{$1}:}g;</td></tr>
<tr><td class="h">8015</td><td><div class="c3">88</div></td><td></td><td></td><td></td><td></td><td><div>682</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $extra_data;</td></tr>
<tr><td class="h">8016</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8017</td><td colspan="7"></td></tr><tr><td class="h">8018</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;sub _unprotect_extra_data</td></tr>
<tr><td class="h">8019</td><td><div class="c3">63</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8019">63</a></div></td><td></td><td><div>1987</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $_[0]=~ s{:$mark:(\w+):}{$ent2char{$1}}g; }</td></tr>
<tr><td class="h">8020</td><td colspan="7"></td></tr><tr><td class="h">8021</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} </td></tr>
<tr><td class="h">8022</td><td colspan="7"></td></tr><tr><td class="h">8023</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub cdata_string</td></tr>
<tr><td class="h">8024</td><td><div class="c3">50</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8024">50</a></div></td><td></td><td><div>208</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $cdata= $_[0]-&gt;{cdata};</td></tr>
<tr><td class="h">8025</td><td><div class="c3">50</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8025">100</a></div></td><td></td><td></td><td></td><td><div>152</div><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( defined $cdata) { return &#39;&#39;; }</td></tr>
<tr><td class="h">8026</td><td><div class="c3">49</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8026">100</a></div></td><td></td><td></td><td></td><td><div>125</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $remove_cdata)</td></tr>
<tr><td class="h">8027</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $cdata=~ s/([$replaced_ents])/$XML::Twig::base_ent{$1}/g; }</td></tr>
<tr><td class="h">8028</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">8029</td><td><div class="c3">48</div></td><td></td><td></td><td></td><td></td><td><div>227</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $cdata= CDATA_START . $cdata . CDATA_END; }</td></tr>
<tr><td class="h">8030</td><td><div class="c3">49</div></td><td></td><td></td><td></td><td></td><td><div>200</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $cdata;</td></tr>
<tr><td class="h">8031</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8032</td><td colspan="7"></td></tr><tr><td class="h">8033</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub att_xml_string </td></tr>
<tr><td class="h">8034</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8034">1</a></div></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">8035</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $att= shift;</td></tr>
<tr><td class="h">8036</td><td colspan="7"></td></tr><tr><td class="h">8037</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $replace= $replaced_ents . $quote;</td></tr>
<tr><td class="h">8038</td><td><div class="c3">1</div><div class="c0">0</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8038">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8038">25</a></div></td><td></td><td></td><td><div>10</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($_[0] &amp;&amp; $_[0]-&gt;{escape_gt} &amp;&amp; ($replace!~ m{&gt;}) ) { $replace .=&#39;&gt;&#39;; }</td></tr>
<tr><td class="h">8039</td><td colspan="7"></td></tr><tr><td class="h">8040</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8040">50</a></div></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined (my $string= $elt-&gt;{att}-&gt;{$att}))</td></tr>
<tr><td class="h">8041</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return _att_xml_string( $string, $replace); }</td></tr>
<tr><td class="h">8042</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">8043</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return &#39;&#39;; }</td></tr>
<tr><td class="h">8044</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8045</td><td colspan="7"></td></tr><tr><td class="h">8046</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# escaped xml string for an attribute value</td></tr>
<tr><td class="h">8047</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub _att_xml_string </td></tr>
<tr><td class="h">8048</td><td><div class="c3">1171</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8048">1171</a></div></td><td></td><td><div>4285</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my( $string, $escape)= @_;</td></tr>
<tr><td class="h">8049</td><td><div class="c3">1171</div><div class="c3">1</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8049">100</a></div></td><td></td><td></td><td></td><td><div>4597</div><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( !defined( $string)) { return &#39;&#39;; }</td></tr>
<tr><td class="h">8050</td><td><div class="c3">1170</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8050">100</a></div></td><td></td><td></td><td></td><td><div>2955</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( $keep_encoding)</td></tr>
<tr><td class="h">8051</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">8052</td><td><div class="c3">994</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8052">100</a></div></td><td></td><td></td><td></td><td><div>1983</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $do_not_escape_amp_in_atts)</td></tr>
<tr><td class="h">8053</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $escape=~ s{^.}{}; # seems like the most backward compatible way to remove &amp; from the list</td></tr>
<tr><td class="h">8054</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string=~ s{([$escape])}{$XML::Twig::base_ent{$1}}g; </td></tr>
<tr><td class="h">8055</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string=~ s{&amp;(?!(\w+|#\d+|[xX][0-9a-fA-F]+);)}{&amp;amp;}g; # dodgy: escape &amp; that do not start an entity</td></tr>
<tr><td class="h">8056</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8057</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">8058</td><td><div class="c3">991</div></td><td></td><td></td><td></td><td></td><td><div>5505</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $string=~ s{([$escape])}{$XML::Twig::base_ent{$1}}g; </td></tr>
<tr><td class="h">8059</td><td><div class="c3">991</div></td><td></td><td></td><td></td><td></td><td><div>2798</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string=~ s{\Q]]&gt;}{]]&amp;gt;}g;</td></tr>
<tr><td class="h">8060</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8061</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8062</td><td colspan="7"></td></tr><tr><td class="h">8063</td><td><div class="c3">1170</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8063">100</a></div></td><td></td><td></td><td></td><td><div>10172</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $output_text_filter ? $output_text_filter-&gt;( $string) : $string;</td></tr>
<tr><td class="h">8064</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8065</td><td colspan="7"></td></tr><tr><td class="h">8066</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub ent_string </td></tr>
<tr><td class="h">8067</td><td><div class="c3">44</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8067">44</a></div></td><td></td><td><div>100</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $ent= shift;</td></tr>
<tr><td class="h">8068</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>137</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ent_text= $ent-&gt;{ent};</td></tr>
<tr><td class="h">8069</td><td><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>95</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my( $t, $el, $ent_string);</td></tr>
<tr><td class="h">8070</td><td><div class="c3">44</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8070">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8070">40</a></div></td><td></td><td></td><td><div>260</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(    $expand_external_entities</td></tr>
<tr><td class="h">8071</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; ($t= $ent-&gt;twig) </td></tr>
<tr><td class="h">8072</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; ($el= $t-&gt;entity_list)</td></tr>
<tr><td class="h">8073</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; ($ent_string= $el-&gt;{entities}-&gt;{$ent-&gt;ent_name}-&gt;{val})</td></tr>
<tr><td class="h">8074</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">8075</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return $ent_string; }</td></tr>
<tr><td class="h">8076</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">8077</td><td><div class="c3">35</div></td><td></td><td></td><td></td><td></td><td><div>144</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return $ent_text;  }</td></tr>
<tr><td class="h">8078</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8079</td><td colspan="7"></td></tr><tr><td class="h">8080</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# returns just the text, no tags, for an element</td></tr>
<tr><td class="h">8081</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub text</td></tr>
<tr><td class="h">8082</td><td><div class="c3">2801</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8082">2801</a></div></td><td></td><td><div>11726</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my( $elt, @options)= @_;</td></tr>
<tr><td class="h">8083</td><td colspan="7"></td></tr><tr><td class="h">8084</td><td><div class="c3">2801</div><div class="c3">2</div><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8084">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8084">67</a></div></td><td></td><td></td><td><div>10022</div><div>19</div><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( @options &amp;&amp; grep { lc( $_) eq &#39;no_recurse&#39; } @options) { return $elt-&gt;text_only; }</td></tr>
<tr><td class="h">8085</td><td colspan="7"></td></tr><tr><td class="h">8086</td><td><div class="c3">2799</div></td><td></td><td></td><td></td><td></td><td><div>4239</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $string;</td></tr>
<tr><td class="h">8087</td><td colspan="7"></td></tr><tr><td class="h">8088</td><td><div class="c3">2799</div><div class="c3">1619</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8088">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8088">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8088">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8088">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8088">100</a></div></td><td></td><td></td><td></td><td><div>14969</div><div>8316</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( (exists $elt-&gt;{&#39;pcdata&#39;}))     { return  $elt-&gt;{pcdata};   }</td></tr>
<tr><td class="h">8089</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>97</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( (exists $elt-&gt;{&#39;cdata&#39;}))   { return  $elt-&gt;{cdata};    }</td></tr>
<tr><td class="h">8090</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( (exists $elt-&gt;{&#39;target&#39;}))      { return  $elt-&gt;pi_string;}</td></tr>
<tr><td class="h">8091</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( (exists $elt-&gt;{&#39;comment&#39;})) { return  $elt-&gt;{comment};  }</td></tr>
<tr><td class="h">8092</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( (exists $elt-&gt;{&#39;ent&#39;}))     { return  $elt-&gt;{ent} ;     }</td></tr>
<tr><td class="h">8093</td><td colspan="7"></td></tr><tr><td class="h">8094</td><td><div class="c3">1162</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L8094">100</a></div></td><td></td><td></td><td><div>4843</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $child= $elt-&gt;{first_child} ||&#39;&#39;;</td></tr>
<tr><td class="h">8095</td><td><div class="c3">1162</div></td><td></td><td></td><td></td><td></td><td><div>3534</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while( $child)</td></tr>
<tr><td class="h">8096</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">8097</td><td><div class="c3">1263</div></td><td></td><td></td><td></td><td></td><td><div>3790</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $child_text= $child-&gt;text;</td></tr>
<tr><td class="h">8098</td><td><div class="c3">1263</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L8098">50</a></div></td><td></td><td></td><td></td><td><div>5047</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string.= defined( $child_text) ? $child_text : &#39;&#39;;</td></tr>
<tr><td class="h">8099</td><td><div class="c3">1263</div></td><td></td><td></td><td></td><td></td><td><div>6311</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} continue { $child= $child-&gt;{next_sibling}; }</td></tr>
<tr><td class="h">8100</td><td colspan="7"></td></tr><tr><td class="h">8101</td><td><div class="c3">1162</div><div class="c3">16</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8101">100</a></div></td><td></td><td></td><td></td><td><div>2936</div><div>36</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( defined $string) { $string=&#39;&#39;; }</td></tr>
<tr><td class="h">8102</td><td colspan="7"></td></tr><tr><td class="h">8103</td><td><div class="c3">1162</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8103">50</a></div></td><td></td><td></td><td></td><td><div>7249</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $output_text_filter ? $output_text_filter-&gt;( $string) : $string;</td></tr>
<tr><td class="h">8104</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8105</td><td colspan="7"></td></tr><tr><td class="h">8106</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub text_only</td></tr>
<tr><td class="h">8107</td><td><div class="c3">4</div><div class="c3">12</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8107">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L8107">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8107">4</a></div></td><td></td><td><div>20</div><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ return join &#39;&#39;, map { $_-&gt;text if( $_-&gt;is_text || (exists $_-&gt;{&#39;ent&#39;})) } $_[0]-&gt;_children; }</td></tr>
<tr><td class="h">8108</td><td colspan="7"></td></tr><tr><td class="h">8109</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub trimmed_text</td></tr>
<tr><td class="h">8110</td><td><div class="c3">14</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8110">14</a></div></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">8111</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $text= $elt-&gt;text( @_);</td></tr>
<tr><td class="h">8112</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>97</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$text=~ s{\s+}{ }sg;</td></tr>
<tr><td class="h">8113</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$text=~ s{^\s*}{};</td></tr>
<tr><td class="h">8114</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>96</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$text=~ s{\s*$}{};</td></tr>
<tr><td class="h">8115</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>94</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $text;</td></tr>
<tr><td class="h">8116</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8117</td><td colspan="7"></td></tr><tr><td class="h">8118</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub trim</td></tr>
<tr><td class="h">8119</td><td><div class="c3">18</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8119">18</a></div></td><td></td><td><div>49</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my( $elt)= @_;</td></tr>
<tr><td class="h">8120</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $pcdata= $elt-&gt;first_descendant( &#39;#TEXT&#39;);</td></tr>
<tr><td class="h">8121</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(my $pcdata_text= $pcdata-&gt;text)=~ s{^\s+}{}s;</td></tr>
<tr><td class="h">8122</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>75</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pcdata-&gt;set_text( $pcdata_text);</td></tr>
<tr><td class="h">8123</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>56</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pcdata= $elt-&gt;last_descendant( &#39;#TEXT&#39;);</td></tr>
<tr><td class="h">8124</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>69</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;($pcdata_text= $pcdata-&gt;text)=~ s{\s+$}{};</td></tr>
<tr><td class="h">8125</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>70</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pcdata-&gt;set_text( $pcdata_text);</td></tr>
<tr><td class="h">8126</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>63</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach $pcdata ($elt-&gt;descendants( &#39;#TEXT&#39;))</td></tr>
<tr><td class="h">8127</td><td><div class="c3">31</div></td><td></td><td></td><td></td><td></td><td><div>92</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ ($pcdata_text= $pcdata-&gt;text)=~ s{\s+}{ }g;</td></tr>
<tr><td class="h">8128</td><td><div class="c3">31</div></td><td></td><td></td><td></td><td></td><td><div>118</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pcdata-&gt;set_text( $pcdata_text);</td></tr>
<tr><td class="h">8129</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8130</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>85</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">8131</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8132</td><td colspan="7"></td></tr><tr><td class="h">8133</td><td colspan="7"></td></tr><tr><td class="h">8134</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;# remove cdata sections (turns them into regular pcdata) in an element </td></tr>
<tr><td class="h">8135</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;sub remove_cdata </td></tr>
<tr><td class="h">8136</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8136">2</a></div></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">8137</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $cdata ($elt-&gt;descendants_or_self( CDATA))</td></tr>
<tr><td class="h">8138</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8138">100</a></div></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $keep_encoding)</td></tr>
<tr><td class="h">8139</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $data= $cdata-&gt;{cdata};</td></tr>
<tr><td class="h">8140</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data=~ s{([&amp;&lt;&quot;&#39;])}{$XML::Twig::base_ent{$1}}g;</td></tr>
<tr><td class="h">8141</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$cdata-&gt;set_pcdata( $data);</td></tr>
<tr><td class="h">8142</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8143</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">8144</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $cdata-&gt;set_pcdata( $cdata-&gt;{cdata}); }</td></tr>
<tr><td class="h">8145</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$cdata-&gt;set_gi( PCDATA);</td></tr>
<tr><td class="h">8146</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;undef $cdata-&gt;{cdata};</td></tr>
<tr><td class="h">8147</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8148</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8149</td><td colspan="7"></td></tr><tr><td class="h">8150</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8150">2</a></div></td><td></td><td><div>16</div></td><td class="s">sub _is_private      { return _is_private_name( $_[0]-&gt;gi); }</td></tr>
<tr><td class="h">8151</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8151">4</a></div></td><td></td><td><div>32</div></td><td class="s">sub _is_private_name { return $_[0]=~ m{^#(?!default:)};                }</td></tr>
<tr><td class="h">8152</td><td colspan="7"></td></tr><tr><td class="h">8153</td><td colspan="7"></td></tr><tr><td class="h">8154</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">} # end of block containing package globals ($pretty_print, $quotes, keep_encoding...)</td></tr>
<tr><td class="h">8155</td><td colspan="7"></td></tr><tr><td class="h">8156</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub normalize</td></tr>
<tr><td class="h">8157</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8157">6</a></div></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;{ my( $elt)= @_;</td></tr>
<tr><td class="h">8158</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @descendants= $elt-&gt;descendants( &#39;#PCDATA&#39;);</td></tr>
<tr><td class="h">8159</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( my $desc= shift @descendants)</td></tr>
<tr><td class="h">8160</td><td><div class="c3">15</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L8160">100</a></div></td><td></td><td></td><td><div>229</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ while( @descendants &amp;&amp; $desc-&gt;{next_sibling} &amp;&amp; $desc-&gt;{next_sibling}== $descendants[0])</td></tr>
<tr><td class="h">8161</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $to_merge= shift @descendants;</td></tr>
<tr><td class="h">8162</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$desc-&gt;{pcdata}.= $to_merge-&gt;{pcdata};</td></tr>
<tr><td class="h">8163</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$to_merge-&gt;delete;</td></tr>
<tr><td class="h">8164</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8165</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8166</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">8167</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8168</td><td colspan="7"></td></tr><tr><td class="h">8169</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># SAX export methods</td></tr>
<tr><td class="h">8170</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub toSAX1</td></tr>
<tr><td class="h">8171</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8171">2</a></div></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;{ _toSAX(@_, \&amp;_start_tag_data_SAX1, \&amp;_end_tag_data_SAX1); }</td></tr>
<tr><td class="h">8172</td><td colspan="7"></td></tr><tr><td class="h">8173</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub toSAX2</td></tr>
<tr><td class="h">8174</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8174">2</a></div></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;{ _toSAX(@_, \&amp;_start_tag_data_SAX2, \&amp;_end_tag_data_SAX2); }</td></tr>
<tr><td class="h">8175</td><td colspan="7"></td></tr><tr><td class="h">8176</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _toSAX</td></tr>
<tr><td class="h">8177</td><td><div class="c3">72</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8177">72</a></div></td><td></td><td><div>273</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $handler, $start_tag_data, $end_tag_data)= @_;</td></tr>
<tr><td class="h">8178</td><td><div class="c3">72</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8178">100</a></div></td><td></td><td></td><td></td><td><div>344</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;{gi} &gt;= $XML::Twig::SPECIAL_GI)</td></tr>
<tr><td class="h">8179</td><td><div class="c3">43</div></td><td></td><td></td><td></td><td></td><td><div>120</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $data= $start_tag_data-&gt;( $elt);</td></tr>
<tr><td class="h">8180</td><td><div class="c3">43</div></td><td></td><td></td><td></td><td></td><td><div>147</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_start_prefix_mapping( $elt, $handler, $data);</td></tr>
<tr><td class="h">8181</td><td><div class="c3">43</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8181">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8181">67</a></div></td><td></td><td></td><td><div>441</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $data &amp;&amp; (my $start_element = $handler-&gt;can( &#39;start_element&#39;)))</td></tr>
<tr><td class="h">8182</td><td><div class="c3">39</div><div class="c3">35</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8182">100</a></div></td><td></td><td></td><td></td><td><div>122</div><div>153</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ unless( $elt-&gt;_flushed) { $start_element-&gt;( $handler, $data); } }</td></tr>
<tr><td class="h">8183</td><td colspan="7"></td></tr><tr><td class="h">8184</td><td><div class="c3">43</div></td><td></td><td></td><td></td><td></td><td><div>271</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $child ($elt-&gt;_children)</td></tr>
<tr><td class="h">8185</td><td><div class="c3">51</div></td><td></td><td></td><td></td><td></td><td><div>246</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $child-&gt;_toSAX( $handler, $start_tag_data, $end_tag_data); }</td></tr>
<tr><td class="h">8186</td><td colspan="7"></td></tr><tr><td class="h">8187</td><td><div class="c3">43</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8187">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8187">67</a></div></td><td></td><td></td><td><div>162</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( (my $data= $end_tag_data-&gt;( $elt)) &amp;&amp; (my $end_element = $handler-&gt;can( &#39;end_element&#39;)) )</td></tr>
<tr><td class="h">8188</td><td><div class="c3">39</div></td><td></td><td></td><td></td><td></td><td><div>166</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $end_element-&gt;( $handler, $data); }</td></tr>
<tr><td class="h">8189</td><td><div class="c3">43</div></td><td></td><td></td><td></td><td></td><td><div>249</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_end_prefix_mapping( $elt, $handler);</td></tr>
<tr><td class="h">8190</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8191</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else # text or special element</td></tr>
<tr><td class="h">8192</td><td><div class="c3">29</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8192">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8192">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8192">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8192">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8192">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8192">67</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L8192">100</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8192">67</a></div></td><td></td><td></td><td><div>528</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( (exists $elt-&gt;{&#39;pcdata&#39;}) &amp;&amp; (my $characters= $handler-&gt;can( &#39;characters&#39;)))</td></tr>
<tr><td class="h">8193</td><td><div class="c3">20</div></td><td></td><td></td><td></td><td></td><td><div>222</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $characters-&gt;( $handler, { Data =&gt; $elt-&gt;{pcdata} });  }</td></tr>
<tr><td class="h">8194</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( (exists $elt-&gt;{&#39;cdata&#39;}))  </td></tr>
<tr><td class="h">8195</td><td><div class="c3">2</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L8195">50</a></div></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( my $start_cdata= $handler-&gt;can( &#39;start_cdata&#39;))</td></tr>
<tr><td class="h">8196</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $start_cdata-&gt;( $handler); }</td></tr>
<tr><td class="h">8197</td><td><div class="c3">2</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L8197">50</a></div></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $characters= $handler-&gt;can( &#39;characters&#39;))</td></tr>
<tr><td class="h">8198</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $characters-&gt;( $handler, {Data =&gt; $elt-&gt;{cdata} });  }</td></tr>
<tr><td class="h">8199</td><td><div class="c3">2</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L8199">50</a></div></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $end_cdata= $handler-&gt;can( &#39;end_cdata&#39;))</td></tr>
<tr><td class="h">8200</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $end_cdata-&gt;( $handler); }</td></tr>
<tr><td class="h">8201</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8202</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( ((exists $elt-&gt;{&#39;target&#39;}))  &amp;&amp; (my $pi= $handler-&gt;can( &#39;processing_instruction&#39;)))</td></tr>
<tr><td class="h">8203</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $pi-&gt;( $handler, { Target =&gt;$elt-&gt;{target}, Data =&gt; $elt-&gt;{data} });  }</td></tr>
<tr><td class="h">8204</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( ((exists $elt-&gt;{&#39;comment&#39;}))  &amp;&amp; (my $comment= $handler-&gt;can( &#39;comment&#39;)))</td></tr>
<tr><td class="h">8205</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $comment-&gt;( $handler, { Data =&gt; $elt-&gt;{comment} });  }</td></tr>
<tr><td class="h">8206</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( ((exists $elt-&gt;{&#39;ent&#39;})))</td></tr>
<tr><td class="h">8207</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">8208</td><td><div class="c3">1</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L8208">50</a></div><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L8208">0</a></div></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $se=   $handler-&gt;can( &#39;skipped_entity&#39;))</td></tr>
<tr><td class="h">8209</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $se-&gt;( $handler, { Name =&gt; $elt-&gt;ent_name });  }</td></tr>
<tr><td class="h">8210</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( my $characters= $handler-&gt;can( &#39;characters&#39;))</td></tr>
<tr><td class="h">8211</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-XML-Twig-pm--branch.html#L8211">0</a></div></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( defined $elt-&gt;ent_string)</td></tr>
<tr><td class="h">8212</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $characters-&gt;( $handler, {Data =&gt; $elt-&gt;ent_string});  }</td></tr>
<tr><td class="h">8213</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">8214</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $characters-&gt;( $handler, {Data =&gt; $elt-&gt;ent_name});  }</td></tr>
<tr><td class="h">8215</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8216</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8217</td><td colspan="7"></td></tr><tr><td class="h">8218</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8219</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8220</td><td colspan="7"></td></tr><tr><td class="h">8221</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _start_tag_data_SAX1</td></tr>
<tr><td class="h">8222</td><td><div class="c3">15</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8222">15</a></div></td><td></td><td><div>40</div></td><td class="s">&nbsp;&nbsp;{ my( $elt)= @_;</td></tr>
<tr><td class="h">8223</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td></td><td><div>60</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $name= $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}];</td></tr>
<tr><td class="h">8224</td><td><div class="c3">15</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8224">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8224">67</a></div></td><td></td><td></td><td><div>190</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return if( ( (substr( $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}], 0, 1) eq &#39;#&#39;) &amp;&amp; (substr( $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}], 0, 9) ne &#39;#default:&#39;) ));</td></tr>
<tr><td class="h">8225</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $attributes={};</td></tr>
<tr><td class="h">8226</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $atts= $elt-&gt;atts;</td></tr>
<tr><td class="h">8227</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>81</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( my( $att, $value)= each %$atts)</td></tr>
<tr><td class="h">8228</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8228">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8228">67</a></div></td><td></td><td></td><td><div>63</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $attributes-&gt;{$att}= $value unless( ( (substr( $att, 0, 1) eq &#39;#&#39;) &amp;&amp; (substr( $att, 0, 9) ne &#39;#default:&#39;) )); }</td></tr>
<tr><td class="h">8229</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>69</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $data= { Name =&gt; $name, Attributes =&gt; $attributes};</td></tr>
<tr><td class="h">8230</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $data;</td></tr>
<tr><td class="h">8231</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8232</td><td colspan="7"></td></tr><tr><td class="h">8233</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _end_tag_data_SAX1</td></tr>
<tr><td class="h">8234</td><td><div class="c3">13</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8234">13</a></div></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;{ my( $elt)= @_;</td></tr>
<tr><td class="h">8235</td><td><div class="c3">13</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8235">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8235">67</a></div></td><td></td><td></td><td><div>112</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return if( ( (substr( $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}], 0, 1) eq &#39;#&#39;) &amp;&amp; (substr( $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}], 0, 9) ne &#39;#default:&#39;) ));</td></tr>
<tr><td class="h">8236</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td></td><td><div>175</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return  { Name =&gt; $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}] };</td></tr>
<tr><td class="h">8237</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} </td></tr>
<tr><td class="h">8238</td><td colspan="7"></td></tr><tr><td class="h">8239</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _start_tag_data_SAX2</td></tr>
<tr><td class="h">8240</td><td><div class="c3">32</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8240">32</a></div></td><td></td><td><div>92</div></td><td class="s">&nbsp;&nbsp;{ my( $elt)= @_;</td></tr>
<tr><td class="h">8241</td><td><div class="c3">32</div></td><td></td><td></td><td></td><td></td><td><div>78</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $data={};</td></tr>
<tr><td class="h">8242</td><td colspan="7"></td></tr><tr><td class="h">8243</td><td><div class="c3">32</div></td><td></td><td></td><td></td><td></td><td><div>135</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $name= $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}];</td></tr>
<tr><td class="h">8244</td><td><div class="c3">32</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8244">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8244">67</a></div></td><td></td><td></td><td><div>231</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return if( ( (substr( $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}], 0, 1) eq &#39;#&#39;) &amp;&amp; (substr( $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}], 0, 9) ne &#39;#default:&#39;) ));</td></tr>
<tr><td class="h">8245</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>119</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$data-&gt;{Name}         = $name;</td></tr>
<tr><td class="h">8246</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>100</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$data-&gt;{Prefix}       = $elt-&gt;ns_prefix; </td></tr>
<tr><td class="h">8247</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>100</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$data-&gt;{LocalName}    = $elt-&gt;local_name;</td></tr>
<tr><td class="h">8248</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>102</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$data-&gt;{NamespaceURI} = $elt-&gt;namespace;</td></tr>
<tr><td class="h">8249</td><td colspan="7"></td></tr><tr><td class="h">8250</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# save a copy of the data so we can re-use it for the end tag</td></tr>
<tr><td class="h">8251</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>382</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %sax2_data= %$data;</td></tr>
<tr><td class="h">8252</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>165</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{twig_elt_SAX2_data}= \%sax2_data;</td></tr>
<tr><td class="h">8253</td><td colspan="7"></td></tr><tr><td class="h">8254</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# add the attributes</td></tr>
<tr><td class="h">8255</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>183</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$data-&gt;{Attributes}= $elt-&gt;_atts_to_SAX2;</td></tr>
<tr><td class="h">8256</td><td colspan="7"></td></tr><tr><td class="h">8257</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>164</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $data;</td></tr>
<tr><td class="h">8258</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8259</td><td colspan="7"></td></tr><tr><td class="h">8260</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _atts_to_SAX2</td></tr>
<tr><td class="h">8261</td><td><div class="c3">30</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8261">30</a></div></td><td></td><td><div>69</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">8262</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>66</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $SAX2_atts= {};</td></tr>
<tr><td class="h">8263</td><td><div class="c3">30</div><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>51</div><div>86</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $att (keys %{$elt-&gt;atts})</td></tr>
<tr><td class="h">8264</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">8265</td><td><div class="c3">15</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8265">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8265">67</a></div></td><td></td><td></td><td><div>105</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if( ( (substr( $att, 0, 1) eq &#39;#&#39;) &amp;&amp; (substr( $att, 0, 9) ne &#39;#default:&#39;) ));</td></tr>
<tr><td class="h">8266</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $SAX2_att={};</td></tr>
<tr><td class="h">8267</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$SAX2_att-&gt;{Name}         = $att;</td></tr>
<tr><td class="h">8268</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$SAX2_att-&gt;{Prefix}       = _ns_prefix( $att); </td></tr>
<tr><td class="h">8269</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$SAX2_att-&gt;{LocalName}    = _local_name( $att);</td></tr>
<tr><td class="h">8270</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>62</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$SAX2_att-&gt;{NamespaceURI} = $elt-&gt;namespace( $SAX2_att-&gt;{Prefix});</td></tr>
<tr><td class="h">8271</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>66</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$SAX2_att-&gt;{Value}        = $elt-&gt;{&#39;att&#39;}-&gt;{$att};</td></tr>
<tr><td class="h">8272</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>86</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $SAX2_att_name= &quot;{$SAX2_att-&gt;{NamespaceURI}}$SAX2_att-&gt;{LocalName}&quot;;</td></tr>
<tr><td class="h">8273</td><td colspan="7"></td></tr><tr><td class="h">8274</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>84</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$SAX2_atts-&gt;{$SAX2_att_name}= $SAX2_att;</td></tr>
<tr><td class="h">8275</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8276</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>141</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $SAX2_atts;</td></tr>
<tr><td class="h">8277</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8278</td><td colspan="7"></td></tr><tr><td class="h">8279</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _start_prefix_mapping</td></tr>
<tr><td class="h">8280</td><td><div class="c3">43</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8280">43</a></div></td><td></td><td><div>154</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $handler, $data)= @_;</td></tr>
<tr><td class="h">8281</td><td><div class="c3">43</div><div class="c3">13</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8281">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8281">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L8281">100</a></div></td><td></td><td></td><td><div>358</div><div>229</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $start_prefix_mapping= $handler-&gt;can( &#39;start_prefix_mapping&#39;)</td></tr>
<tr><td class="h">8282</td><td><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>247</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and my @new_prefix_mappings= grep { /^\{[^}]*\}xmlns/ || /^\{$XMLNS_URI\}/ } keys %{$data-&gt;{Attributes}}</td></tr>
<tr><td class="h">8283</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">8284</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>132</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ foreach my $prefix (@new_prefix_mappings)</td></tr>
<tr><td class="h">8285</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>41</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $prefix_string= $data-&gt;{Attributes}-&gt;{$prefix}-&gt;{LocalName};</td></tr>
<tr><td class="h">8286</td><td><div class="c3">7</div><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8286">100</a></div></td><td></td><td></td><td></td><td><div>26</div><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $prefix_string eq &#39;xmlns&#39;) { $prefix_string=&#39;&#39;; }</td></tr>
<tr><td class="h">8287</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>56</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $prefix_data=</td></tr>
<tr><td class="h">8288</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{  Prefix       =&gt; $prefix_string,</td></tr>
<tr><td class="h">8289</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NamespaceURI =&gt; $data-&gt;{Attributes}-&gt;{$prefix}-&gt;{Value}</td></tr>
<tr><td class="h">8290</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">8291</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$start_prefix_mapping-&gt;( $handler, $prefix_data);</td></tr>
<tr><td class="h">8292</td><td><div class="c3">7</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L8292">100</a></div></td><td></td><td></td><td><div>102</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{twig_end_prefix_mapping} ||= [];</td></tr>
<tr><td class="h">8293</td><td><div class="c3">7</div><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>14</div><div>60</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @{$elt-&gt;{twig_end_prefix_mapping}}, $prefix_string;</td></tr>
<tr><td class="h">8294</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8295</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8296</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8297</td><td colspan="7"></td></tr><tr><td class="h">8298</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _end_prefix_mapping</td></tr>
<tr><td class="h">8299</td><td><div class="c3">43</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8299">43</a></div></td><td></td><td><div>145</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $handler)= @_;</td></tr>
<tr><td class="h">8300</td><td><div class="c3">43</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8300">100</a></div></td><td></td><td></td><td></td><td><div>327</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $end_prefix_mapping= $handler-&gt;can( &#39;end_prefix_mapping&#39;))</td></tr>
<tr><td class="h">8301</td><td><div class="c3">30</div><div class="c3">30</div></td><td></td><td></td><td></td><td></td><td><div>50</div><div>299</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ foreach my $prefix (@{$elt-&gt;{twig_end_prefix_mapping}})</td></tr>
<tr><td class="h">8302</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>51</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $end_prefix_mapping-&gt;( $handler, { Prefix =&gt; $prefix} ); }</td></tr>
<tr><td class="h">8303</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8304</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8305</td><td colspan="7"></td></tr><tr><td class="h">8306</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _end_tag_data_SAX2</td></tr>
<tr><td class="h">8307</td><td><div class="c3">30</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8307">30</a></div></td><td></td><td><div>91</div></td><td class="s">&nbsp;&nbsp;{ my( $elt)= @_;</td></tr>
<tr><td class="h">8308</td><td><div class="c3">30</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8308">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8308">67</a></div></td><td></td><td></td><td><div>229</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return if( ( (substr( $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}], 0, 1) eq &#39;#&#39;) &amp;&amp; (substr( $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}], 0, 9) ne &#39;#default:&#39;) ));</td></tr>
<tr><td class="h">8309</td><td><div class="c3">28</div></td><td></td><td></td><td></td><td></td><td><div>364</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt-&gt;{twig_elt_SAX2_data};</td></tr>
<tr><td class="h">8310</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;} </td></tr>
<tr><td class="h">8311</td><td colspan="7"></td></tr><tr><td class="h">8312</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub contains_text</td></tr>
<tr><td class="h">8313</td><td><div class="c3">186</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8313">186</a></div></td><td></td><td><div>507</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">8314</td><td><div class="c3">186</div></td><td></td><td></td><td></td><td></td><td><div>561</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $child= $elt-&gt;{first_child};</td></tr>
<tr><td class="h">8315</td><td><div class="c3">186</div></td><td></td><td></td><td></td><td></td><td><div>549</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while ($child)</td></tr>
<tr><td class="h">8316</td><td><div class="c3">168</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8316">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8316">67</a></div></td><td></td><td></td><td><div>549</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return 1 if( $child-&gt;is_text || (exists $child-&gt;{&#39;ent&#39;})); </td></tr>
<tr><td class="h">8317</td><td><div class="c3">131</div></td><td></td><td></td><td></td><td></td><td><div>603</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$child= $child-&gt;{next_sibling};</td></tr>
<tr><td class="h">8318</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8319</td><td><div class="c3">149</div></td><td></td><td></td><td></td><td></td><td><div>860</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0;</td></tr>
<tr><td class="h">8320</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8321</td><td colspan="7"></td></tr><tr><td class="h">8322</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># creates a single pcdata element containing the text as child of the element</td></tr>
<tr><td class="h">8323</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># options: </td></tr>
<tr><td class="h">8324</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#   - force_pcdata: when set to a true value forces the text to be in a #PCDATA</td></tr>
<tr><td class="h">8325</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">#                   even if the original element was a #CDATA</td></tr>
<tr><td class="h">8326</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_text</td></tr>
<tr><td class="h">8327</td><td><div class="c3">220</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8327">220</a></div></td><td></td><td><div>1253</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $string, %option)= @_;</td></tr>
<tr><td class="h">8328</td><td colspan="7"></td></tr><tr><td class="h">8329</td><td><div class="c3">220</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8329">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8329">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8329">100</a></div></td><td></td><td></td><td></td><td><div>1409</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}] eq PCDATA) </td></tr>
<tr><td class="h">8330</td><td><div class="c3">169</div></td><td></td><td></td><td></td><td></td><td><div>711</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return $elt-&gt;set_pcdata( $string); }</td></tr>
<tr><td class="h">8331</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}] eq CDATA)  </td></tr>
<tr><td class="h">8332</td><td><div class="c3">12</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8332">100</a></div></td><td></td><td></td><td></td><td><div>36</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( $option{force_pcdata})</td></tr>
<tr><td class="h">8333</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;set_gi( PCDATA);</td></tr>
<tr><td class="h">8334</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;_set_cdata(&#39;&#39;);</td></tr>
<tr><td class="h">8335</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $elt-&gt;set_pcdata( $string);</td></tr>
<tr><td class="h">8336</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8337</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">8338</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ return $elt-&gt;_set_cdata( $string); }</td></tr>
<tr><td class="h">8339</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8340</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $elt-&gt;contains_a_single( PCDATA) )</td></tr>
<tr><td class="h">8341</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # optimized so we have a slight chance of not loosing embedded comments and pi&#39;s</td></tr>
<tr><td class="h">8342</td><td><div class="c3">32</div></td><td></td><td></td><td></td><td></td><td><div>273</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{first_child}-&gt;set_pcdata( $string);</td></tr>
<tr><td class="h">8343</td><td><div class="c3">32</div></td><td></td><td></td><td></td><td></td><td><div>189</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">8344</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8345</td><td colspan="7"></td></tr><tr><td class="h">8346</td><td><div class="c3">7</div><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>402</div><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $child (@{[$elt-&gt;_children]})</td></tr>
<tr><td class="h">8347</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $child-&gt;delete; }</td></tr>
<tr><td class="h">8348</td><td colspan="7"></td></tr><tr><td class="h">8349</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $pcdata= $elt-&gt;new( PCDATA, $string);</td></tr>
<tr><td class="h">8350</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$pcdata-&gt;paste( $elt);</td></tr>
<tr><td class="h">8351</td><td colspan="7"></td></tr><tr><td class="h">8352</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $elt-&gt;{empty};</td></tr>
<tr><td class="h">8353</td><td colspan="7"></td></tr><tr><td class="h">8354</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">8355</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8356</td><td colspan="7"></td></tr><tr><td class="h">8357</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># set the content of an element from a list of strings and elements</td></tr>
<tr><td class="h">8358</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub set_content</td></tr>
<tr><td class="h">8359</td><td><div class="c3">119</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8359">119</a></div></td><td></td><td><div>311</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">8360</td><td colspan="7"></td></tr><tr><td class="h">8361</td><td><div class="c3">119</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8361">100</a></div></td><td></td><td></td><td></td><td><div>361</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt unless defined $_[0];</td></tr>
<tr><td class="h">8362</td><td colspan="7"></td></tr><tr><td class="h">8363</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# attributes can be given as a hash (passed by ref)</td></tr>
<tr><td class="h">8364</td><td><div class="c3">118</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8364">100</a></div></td><td></td><td></td><td></td><td><div>468</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( ref $_[0] eq &#39;HASH&#39;)</td></tr>
<tr><td class="h">8365</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $atts= shift;</td></tr>
<tr><td class="h">8366</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;del_atts; # usually useless but better safe than sorry</td></tr>
<tr><td class="h">8367</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;set_atts( $atts);</td></tr>
<tr><td class="h">8368</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8368">50</a></div></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $elt unless defined $_[0];</td></tr>
<tr><td class="h">8369</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8370</td><td colspan="7"></td></tr><tr><td class="h">8371</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# check next argument for #EMPTY</td></tr>
<tr><td class="h">8372</td><td><div class="c3">118</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8372">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L8372">100</a></div></td><td></td><td></td><td><div>950</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !(ref $_[0]) &amp;&amp; ($_[0] eq EMPTY) ) </td></tr>
<tr><td class="h">8373</td><td><div class="c3">5</div><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>20</div><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;{empty}= 1; return $elt; }</td></tr>
<tr><td class="h">8374</td><td colspan="7"></td></tr><tr><td class="h">8375</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# case where we really want to do a set_text, the element is &#39;#PCDATA&#39;</td></tr>
<tr><td class="h">8376</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# or contains a single PCDATA and we only want to add text in it</td></tr>
<tr><td class="h">8377</td><td><div class="c3">113</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8377">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8377">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8377">71</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8377">50</a></div></td><td></td><td></td><td><div>1010</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( ($XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}] eq PCDATA || $elt-&gt;contains_a_single( PCDATA)) </td></tr>
<tr><td class="h">8378</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; (@_ == 1) &amp;&amp; !( ref $_[0]))</td></tr>
<tr><td class="h">8379</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;set_text( $_[0]);</td></tr>
<tr><td class="h">8380</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">8381</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8382</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( ($XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}] eq CDATA) &amp;&amp; (@_ == 1) &amp;&amp; !( ref $_[0]))</td></tr>
<tr><td class="h">8383</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;_set_cdata( $_[0]);</td></tr>
<tr><td class="h">8384</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">8385</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8386</td><td colspan="7"></td></tr><tr><td class="h">8387</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# delete the children</td></tr>
<tr><td class="h">8388</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# WARNING: potential problem here if the children are used</td></tr>
<tr><td class="h">8389</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# somewhere else (where?). Will be solved when I use weak refs</td></tr>
<tr><td class="h">8390</td><td><div class="c3">100</div><div class="c3">100</div></td><td></td><td></td><td></td><td></td><td><div>200</div><div>355</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $child (@{[$elt-&gt;_children]})</td></tr>
<tr><td class="h">8391</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $child-&gt;delete; }</td></tr>
<tr><td class="h">8392</td><td colspan="7"></td></tr><tr><td class="h">8393</td><td><div class="c3">100</div></td><td></td><td></td><td></td><td></td><td><div>749</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $child (@_)</td></tr>
<tr><td class="h">8394</td><td><div class="c3">120</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8394">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8394">67</a></div></td><td></td><td></td><td><div>698</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ if( ref( $child) &amp;&amp; isa( $child, &#39;XML::Twig::Elt&#39;))</td></tr>
<tr><td class="h">8395</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # argument is an element</td></tr>
<tr><td class="h">8396</td><td><div class="c3">25</div></td><td></td><td></td><td></td><td></td><td><div>161</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$child-&gt;paste( &#39;last_child&#39;, $elt);</td></tr>
<tr><td class="h">8397</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8398</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">8399</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # argument is a string</td></tr>
<tr><td class="h">8400</td><td><div class="c3">95</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8400">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L8400">100</a></div></td><td></td><td></td><td><div>516</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( (my $pcdata= $elt-&gt;{last_child}) &amp;&amp; $elt-&gt;{last_child}-&gt;is_pcdata)</td></tr>
<tr><td class="h">8401</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # previous child is also pcdata: just concatenate</td></tr>
<tr><td class="h">8402</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pcdata-&gt;set_pcdata( $pcdata-&gt;{pcdata} . $child) </td></tr>
<tr><td class="h">8403</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8404</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">8405</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # previous child is not a string: creat a new pcdata element</td></tr>
<tr><td class="h">8406</td><td><div class="c3">93</div></td><td></td><td></td><td></td><td></td><td><div>446</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pcdata= $elt-&gt;new( PCDATA, $child);</td></tr>
<tr><td class="h">8407</td><td><div class="c3">93</div></td><td></td><td></td><td></td><td></td><td><div>417</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pcdata-&gt;paste( &#39;last_child&#39;, $elt);  </td></tr>
<tr><td class="h">8408</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8409</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8410</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8411</td><td colspan="7"></td></tr><tr><td class="h">8412</td><td><div class="c3">100</div></td><td></td><td></td><td></td><td></td><td><div>265</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;delete $elt-&gt;{empty};</td></tr>
<tr><td class="h">8413</td><td colspan="7"></td></tr><tr><td class="h">8414</td><td><div class="c3">100</div></td><td></td><td></td><td></td><td></td><td><div>288</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">8415</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8416</td><td colspan="7"></td></tr><tr><td class="h">8417</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># inserts an element (whose gi is given) as child of the element</td></tr>
<tr><td class="h">8418</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># all children of the element are now children of the new element</td></tr>
<tr><td class="h">8419</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># returns the new element</td></tr>
<tr><td class="h">8420</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub insert</td></tr>
<tr><td class="h">8421</td><td><div class="c3">7</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8421">7</a></div></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;{ my ($elt, @args)= @_;</td></tr>
<tr><td class="h">8422</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# first cut the children</td></tr>
<tr><td class="h">8423</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @children= $elt-&gt;_children;</td></tr>
<tr><td class="h">8424</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $child (@children)</td></tr>
<tr><td class="h">8425</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>32</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $child-&gt;cut; }</td></tr>
<tr><td class="h">8426</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# insert elements</td></tr>
<tr><td class="h">8427</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( my $gi= shift @args)</td></tr>
<tr><td class="h">8428</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $new_elt= $elt-&gt;new( $gi);</td></tr>
<tr><td class="h">8429</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# add attributes if needed</td></tr>
<tr><td class="h">8430</td><td><div class="c3">7</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8430">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8430">67</a></div></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined( $args[0]) &amp;&amp; ( isa( $args[0], &#39;HASH&#39;)) )</td></tr>
<tr><td class="h">8431</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $new_elt-&gt;set_atts( shift @args); }</td></tr>
<tr><td class="h">8432</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# paste the element</td></tr>
<tr><td class="h">8433</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$new_elt-&gt;paste( $elt);</td></tr>
<tr><td class="h">8434</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $elt-&gt;{empty};</td></tr>
<tr><td class="h">8435</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt= $new_elt;</td></tr>
<tr><td class="h">8436</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8437</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# paste back the children</td></tr>
<tr><td class="h">8438</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $child (@children)</td></tr>
<tr><td class="h">8439</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $child-&gt;paste( &#39;last_child&#39;, $elt); }</td></tr>
<tr><td class="h">8440</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">8441</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8442</td><td colspan="7"></td></tr><tr><td class="h">8443</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># insert a new element </td></tr>
<tr><td class="h">8444</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># $elt-&gt;insert_new_element( $opt_position, $gi, $opt_atts_hash, @opt_content); </td></tr>
<tr><td class="h">8445</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># the element is created with the same syntax as new</td></tr>
<tr><td class="h">8446</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># position is the same as in paste, first_child by default</td></tr>
<tr><td class="h">8447</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub insert_new_elt</td></tr>
<tr><td class="h">8448</td><td><div class="c3">95</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8448">95</a></div></td><td></td><td><div>268</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">8449</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>197</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $position= $_[0];</td></tr>
<tr><td class="h">8450</td><td><div class="c3">95</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8450">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L8450">100</a></div></td><td></td><td></td><td><div>1276</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if(     ($position eq &#39;before&#39;) || ($position eq &#39;after&#39;)</td></tr>
<tr><td class="h">8451</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| ($position eq &#39;first_child&#39;) || ($position eq &#39;last_child&#39;))</td></tr>
<tr><td class="h">8452</td><td><div class="c3">92</div></td><td></td><td></td><td></td><td></td><td><div>200</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ shift; }</td></tr>
<tr><td class="h">8453</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">8454</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $position= &#39;first_child&#39;; }</td></tr>
<tr><td class="h">8455</td><td colspan="7"></td></tr><tr><td class="h">8456</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>351</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $new_elt= $elt-&gt;new( @_);</td></tr>
<tr><td class="h">8457</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>345</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$new_elt-&gt;paste( $position, $elt);</td></tr>
<tr><td class="h">8458</td><td colspan="7"></td></tr><tr><td class="h">8459</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#if( defined $new_elt-&gt;{&#39;att&#39;}-&gt;{$ID}) { $new_elt-&gt;set_id( $new_elt-&gt;{&#39;att&#39;}-&gt;{$ID}); }</td></tr>
<tr><td class="h">8460</td><td colspan="7"></td></tr><tr><td class="h">8461</td><td><div class="c3">95</div></td><td></td><td></td><td></td><td></td><td><div>283</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $new_elt;</td></tr>
<tr><td class="h">8462</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8463</td><td colspan="7"></td></tr><tr><td class="h">8464</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># wraps an element in elements which gi&#39;s are given as arguments</td></tr>
<tr><td class="h">8465</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># $elt-&gt;wrap_in( &#39;td&#39;, &#39;tr&#39;, &#39;table&#39;) wraps the element as a single</td></tr>
<tr><td class="h">8466</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># cell in a table for example</td></tr>
<tr><td class="h">8467</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># returns the new element</td></tr>
<tr><td class="h">8468</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub wrap_in</td></tr>
<tr><td class="h">8469</td><td><div class="c3">16</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8469">16</a></div></td><td></td><td><div>67</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">8470</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>74</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( my $gi = shift @_)</td></tr>
<tr><td class="h">8471</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>60</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $new_elt = $elt-&gt;new( $gi);</td></tr>
<tr><td class="h">8472</td><td><div class="c3">16</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8472">100</a></div></td><td></td><td></td><td></td><td><div>72</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;{twig_current})</td></tr>
<tr><td class="h">8473</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $t= $elt-&gt;twig;</td></tr>
<tr><td class="h">8474</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$t-&gt;{twig_current}= $new_elt;</td></tr>
<tr><td class="h">8475</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $elt-&gt;{&#39;twig_current&#39;};</td></tr>
<tr><td class="h">8476</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$new_elt-&gt;{&#39;twig_current&#39;}=1;</td></tr>
<tr><td class="h">8477</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8478</td><td colspan="7"></td></tr><tr><td class="h">8479</td><td><div class="c3">16</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8479">100</a></div></td><td></td><td></td><td></td><td><div>68</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $parent= $elt-&gt;{parent})</td></tr>
<tr><td class="h">8480</td><td><div class="c3">15</div><div class="c3">15</div><div class="c3">15</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L8480">50</a></div></td><td></td><td></td><td></td><td><div>49</div><div>45</div><div>77</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $new_elt-&gt;{parent}=$parent; if( $XML::Twig::weakrefs) { weaken( $new_elt-&gt;{parent});} ; </td></tr>
<tr><td class="h">8481</td><td><div class="c3">15</div><div class="c3">11</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8481">100</a></div></td><td></td><td></td><td></td><td><div>90</div><div>114</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $parent-&gt;{first_child} == $elt) { $parent-&gt;{first_child}=  $new_elt; }</td></tr>
<tr><td class="h">8482</td><td><div class="c3">15</div><div class="c3">8</div><div class="c3">8</div><div class="c3">8</div><div class="c3">8</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L8482">50</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8482">100</a></div></td><td></td><td></td><td></td><td><div>73</div><div>21</div><div>27</div><div>27</div><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $parent-&gt;{last_child} == $elt) {  delete $parent-&gt;{empty}; $parent-&gt;{last_child}=$new_elt; if( $XML::Twig::weakrefs) { weaken( $parent-&gt;{last_child});} ;  }</td></tr>
<tr><td class="h">8483</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8484</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">8485</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ # wrapping the root</td></tr>
<tr><td class="h">8486</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $twig= $elt-&gt;twig;</td></tr>
<tr><td class="h">8487</td><td><div class="c3">1</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L8487">50</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8487">25</a></div></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $twig &amp;&amp; $twig-&gt;root &amp;&amp; ($twig-&gt;root eq $elt) )</td></tr>
<tr><td class="h">8488</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $twig-&gt;{twig_root}= $new_elt; }</td></tr>
<tr><td class="h">8489</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8490</td><td colspan="7"></td></tr><tr><td class="h">8491</td><td><div class="c3">16</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8491">100</a></div></td><td></td><td></td><td></td><td><div>73</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $prev_sibling= $elt-&gt;{prev_sibling})</td></tr>
<tr><td class="h">8492</td><td><div class="c3">4</div><div class="c3">4</div><div class="c3">4</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L8492">50</a></div></td><td></td><td></td><td></td><td><div>15</div><div>16</div><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $new_elt-&gt;{prev_sibling}=$prev_sibling; if( $XML::Twig::weakrefs) { weaken( $new_elt-&gt;{prev_sibling});} ;</td></tr>
<tr><td class="h">8493</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$prev_sibling-&gt;{next_sibling}=  $new_elt;</td></tr>
<tr><td class="h">8494</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8495</td><td colspan="7"></td></tr><tr><td class="h">8496</td><td><div class="c3">16</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8496">100</a></div></td><td></td><td></td><td></td><td><div>74</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( my $next_sibling= $elt-&gt;{next_sibling})</td></tr>
<tr><td class="h">8497</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $new_elt-&gt;{next_sibling}=  $next_sibling;</td></tr>
<tr><td class="h">8498</td><td><div class="c3">7</div><div class="c3">7</div><div class="c3">7</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L8498">50</a></div></td><td></td><td></td><td></td><td><div>25</div><div>32</div><div>40</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$next_sibling-&gt;{prev_sibling}=$new_elt; if( $XML::Twig::weakrefs) { weaken( $next_sibling-&gt;{prev_sibling});} ;</td></tr>
<tr><td class="h">8499</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8500</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>52</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$new_elt-&gt;{first_child}=  $elt;</td></tr>
<tr><td class="h">8501</td><td><div class="c3">16</div><div class="c3">16</div><div class="c3">16</div><div class="c3">16</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L8501">50</a></div></td><td></td><td></td><td></td><td><div>50</div><div>54</div><div>49</div><div>67</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $new_elt-&gt;{empty}; $new_elt-&gt;{last_child}=$elt; if( $XML::Twig::weakrefs) { weaken( $new_elt-&gt;{last_child});} ;</td></tr>
<tr><td class="h">8502</td><td colspan="7"></td></tr><tr><td class="h">8503</td><td><div class="c3">16</div><div class="c3">16</div><div class="c3">16</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L8503">50</a></div></td><td></td><td></td><td></td><td><div>53</div><div>43</div><div>66</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{parent}=$new_elt; if( $XML::Twig::weakrefs) { weaken( $elt-&gt;{parent});} ;</td></tr>
<tr><td class="h">8504</td><td><div class="c3">16</div><div class="c3">16</div><div class="c3">16</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L8504">50</a></div></td><td></td><td></td><td></td><td><div>55</div><div>44</div><div>64</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{prev_sibling}=undef; if( $XML::Twig::weakrefs) { weaken( $elt-&gt;{prev_sibling});} ;</td></tr>
<tr><td class="h">8505</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{next_sibling}=  undef;</td></tr>
<tr><td class="h">8506</td><td colspan="7"></td></tr><tr><td class="h">8507</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# add the attributes if the next argument is a hash ref</td></tr>
<tr><td class="h">8508</td><td><div class="c3">16</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8508">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8508">67</a></div></td><td></td><td></td><td><div>140</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( defined( $_[0]) &amp;&amp; (isa( $_[0], &#39;HASH&#39;)) )</td></tr>
<tr><td class="h">8509</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>43</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $new_elt-&gt;set_atts( shift @_); }</td></tr>
<tr><td class="h">8510</td><td colspan="7"></td></tr><tr><td class="h">8511</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>89</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt= $new_elt;</td></tr>
<tr><td class="h">8512</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8513</td><td colspan="7"></td></tr><tr><td class="h">8514</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>63</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">8515</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8516</td><td colspan="7"></td></tr><tr><td class="h">8517</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub replace</td></tr>
<tr><td class="h">8518</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8518">6</a></div></td><td></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $ref)= @_;</td></tr>
<tr><td class="h">8519</td><td colspan="7"></td></tr><tr><td class="h">8520</td><td><div class="c3">6</div><div class="c0">0</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8520">50</a></div></td><td></td><td></td><td></td><td><div>29</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;{parent}) { $elt-&gt;cut; }</td></tr>
<tr><td class="h">8521</td><td colspan="7"></td></tr><tr><td class="h">8522</td><td><div class="c3">6</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L8522">50</a></div></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $parent= $ref-&gt;{parent})</td></tr>
<tr><td class="h">8523</td><td><div class="c3">6</div><div class="c3">6</div><div class="c3">6</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L8523">50</a></div></td><td></td><td></td><td></td><td><div>16</div><div>18</div><div>29</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;{parent}=$parent; if( $XML::Twig::weakrefs) { weaken( $elt-&gt;{parent});} ;</td></tr>
<tr><td class="h">8524</td><td><div class="c3">6</div><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8524">100</a></div></td><td></td><td></td><td></td><td><div>28</div><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $parent-&gt;{first_child} == $ref) { $parent-&gt;{first_child}=  $elt; }</td></tr>
<tr><td class="h">8525</td><td><div class="c3">6</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L8525">50</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8525">100</a></div></td><td></td><td></td><td></td><td><div>26</div><div>8</div><div>10</div><div>10</div><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $parent-&gt;{last_child} == $ref)  {  delete $parent-&gt;{empty}; $parent-&gt;{last_child}=$elt; if( $XML::Twig::weakrefs) { weaken( $parent-&gt;{last_child});}  ; }</td></tr>
<tr><td class="h">8526</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8527</td><td><div class="c3">6</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8527">100</a></div></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $prev_sibling= $ref-&gt;{prev_sibling})</td></tr>
<tr><td class="h">8528</td><td><div class="c3">2</div><div class="c3">2</div><div class="c3">2</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L8528">50</a></div></td><td></td><td></td><td></td><td><div>7</div><div>6</div><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;{prev_sibling}=$prev_sibling; if( $XML::Twig::weakrefs) { weaken( $elt-&gt;{prev_sibling});} ;</td></tr>
<tr><td class="h">8529</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$prev_sibling-&gt;{next_sibling}=  $elt;</td></tr>
<tr><td class="h">8530</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8531</td><td><div class="c3">6</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8531">100</a></div></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( my $next_sibling= $ref-&gt;{next_sibling})</td></tr>
<tr><td class="h">8532</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;{next_sibling}=  $next_sibling;</td></tr>
<tr><td class="h">8533</td><td><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L8533">50</a></div></td><td></td><td></td><td></td><td><div>11</div><div>8</div><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$next_sibling-&gt;{prev_sibling}=$elt; if( $XML::Twig::weakrefs) { weaken( $next_sibling-&gt;{prev_sibling});} ;</td></tr>
<tr><td class="h">8534</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8535</td><td colspan="7"></td></tr><tr><td class="h">8536</td><td><div class="c3">6</div><div class="c3">6</div><div class="c3">6</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L8536">50</a></div></td><td></td><td></td><td></td><td><div>20</div><div>18</div><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$ref-&gt;{parent}=undef; if( $XML::Twig::weakrefs) { weaken( $ref-&gt;{parent});} ;</td></tr>
<tr><td class="h">8537</td><td><div class="c3">6</div><div class="c3">6</div><div class="c3">6</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L8537">50</a></div></td><td></td><td></td><td></td><td><div>17</div><div>18</div><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$ref-&gt;{prev_sibling}=undef; if( $XML::Twig::weakrefs) { weaken( $ref-&gt;{prev_sibling});} ;</td></tr>
<tr><td class="h">8538</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$ref-&gt;{next_sibling}=  undef;</td></tr>
<tr><td class="h">8539</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $ref;</td></tr>
<tr><td class="h">8540</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8541</td><td colspan="7"></td></tr><tr><td class="h">8542</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub replace_with</td></tr>
<tr><td class="h">8543</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8543">2</a></div></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;{ my $ref= shift;</td></tr>
<tr><td class="h">8544</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $elt= shift;</td></tr>
<tr><td class="h">8545</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;replace( $ref);</td></tr>
<tr><td class="h">8546</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $new_elt (reverse @_)</td></tr>
<tr><td class="h">8547</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $new_elt-&gt;paste( after =&gt; $elt); }</td></tr>
<tr><td class="h">8548</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">8549</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8550</td><td colspan="7"></td></tr><tr><td class="h">8551</td><td colspan="7"></td></tr><tr><td class="h">8552</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># move an element, same syntax as paste, except the element is first cut</td></tr>
<tr><td class="h">8553</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub move</td></tr>
<tr><td class="h">8554</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8554">6</a></div></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">8555</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;cut;</td></tr>
<tr><td class="h">8556</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>36</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;paste( @_);</td></tr>
<tr><td class="h">8557</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">8558</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8559</td><td colspan="7"></td></tr><tr><td class="h">8560</td><td colspan="7"></td></tr><tr><td class="h">8561</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># adds a prefix to an element, creating a pcdata child if needed</td></tr>
<tr><td class="h">8562</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub prefix</td></tr>
<tr><td class="h">8563</td><td><div class="c3">16</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8563">16</a></div></td><td></td><td><div>89</div></td><td class="s">&nbsp;&nbsp;{ my ($elt, $prefix, $option)= @_;</td></tr>
<tr><td class="h">8564</td><td><div class="c3">16</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8564">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8564">67</a></div></td><td></td><td></td><td><div>119</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $asis= ($option &amp;&amp; ($option eq &#39;asis&#39;)) ? 1 : 0;</td></tr>
<tr><td class="h">8565</td><td><div class="c3">16</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8565">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8565">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L8565">100</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L8565">100</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8565">25</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L8565">100</a></div></td><td></td><td></td><td><div>247</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( (exists $elt-&gt;{&#39;pcdata&#39;}) </td></tr>
<tr><td class="h">8566</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; (($asis &amp;&amp; $elt-&gt;{asis}) || (!$asis &amp;&amp; ! $elt-&gt;{asis}))</td></tr>
<tr><td class="h">8567</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">8568</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;set_pcdata( $prefix . $elt-&gt;{pcdata}); }</td></tr>
<tr><td class="h">8569</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $elt-&gt;{first_child} &amp;&amp; $elt-&gt;{first_child}-&gt;is_pcdata</td></tr>
<tr><td class="h">8570</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; (   ($asis &amp;&amp; $elt-&gt;{first_child}-&gt;{asis}) </td></tr>
<tr><td class="h">8571</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| (!$asis &amp;&amp; ! $elt-&gt;{first_child}-&gt;{asis}))</td></tr>
<tr><td class="h">8572</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">8573</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">8574</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;{first_child}-&gt;set_pcdata( $prefix . $elt-&gt;{first_child}-&gt;pcdata); </td></tr>
<tr><td class="h">8575</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8576</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">8577</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $new_elt= $elt-&gt;new( PCDATA, $prefix);</td></tr>
<tr><td class="h">8578</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>38</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$new_elt-&gt;paste( $elt);</td></tr>
<tr><td class="h">8579</td><td><div class="c3">9</div><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8579">100</a></div></td><td></td><td></td><td></td><td><div>33</div><div>13</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $asis) { $new_elt-&gt;set_asis; }</td></tr>
<tr><td class="h">8580</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8581</td><td><div class="c3">16</div></td><td></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">8582</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8583</td><td colspan="7"></td></tr><tr><td class="h">8584</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># adds a suffix to an element, creating a pcdata child if needed</td></tr>
<tr><td class="h">8585</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub suffix</td></tr>
<tr><td class="h">8586</td><td><div class="c3">12</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8586">12</a></div></td><td></td><td><div>64</div></td><td class="s">&nbsp;&nbsp;{ my ($elt, $suffix, $option)= @_;</td></tr>
<tr><td class="h">8587</td><td><div class="c3">12</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8587">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8587">67</a></div></td><td></td><td></td><td><div>92</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $asis= ($option &amp;&amp; ($option eq &#39;asis&#39;)) ? 1 : 0;</td></tr>
<tr><td class="h">8588</td><td><div class="c3">12</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8588">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8588">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L8588">100</a></div><div class="c1"><a href="blib-lib-XML-Twig-pm--condition.html#L8588">80</a></div><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8588">25</a></div><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L8588">100</a></div></td><td></td><td></td><td><div>159</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( (exists $elt-&gt;{&#39;pcdata&#39;})</td></tr>
<tr><td class="h">8589</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; (($asis &amp;&amp; $elt-&gt;{asis}) || (!$asis &amp;&amp; ! $elt-&gt;{asis}))</td></tr>
<tr><td class="h">8590</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">8591</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;set_pcdata( $elt-&gt;{pcdata} . $suffix); }</td></tr>
<tr><td class="h">8592</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $elt-&gt;{last_child} &amp;&amp; $elt-&gt;{last_child}-&gt;is_pcdata</td></tr>
<tr><td class="h">8593</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; (   ($asis &amp;&amp; $elt-&gt;{last_child}-&gt;{asis}) </td></tr>
<tr><td class="h">8594</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| (!$asis &amp;&amp; ! $elt-&gt;{last_child}-&gt;{asis}))</td></tr>
<tr><td class="h">8595</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">8596</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $elt-&gt;{last_child}-&gt;set_pcdata( $elt-&gt;{last_child}-&gt;pcdata . $suffix); }</td></tr>
<tr><td class="h">8597</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">8598</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $new_elt= $elt-&gt;new( PCDATA, $suffix);</td></tr>
<tr><td class="h">8599</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$new_elt-&gt;paste( &#39;last_child&#39;, $elt);</td></tr>
<tr><td class="h">8600</td><td><div class="c3">6</div><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8600">100</a></div></td><td></td><td></td><td></td><td><div>26</div><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $asis) { $new_elt-&gt;set_asis; }</td></tr>
<tr><td class="h">8601</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8602</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td></td><td><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">8603</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8604</td><td colspan="7"></td></tr><tr><td class="h">8605</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># create a path to an element (&#39;/root/.../gi)</td></tr>
<tr><td class="h">8606</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub path</td></tr>
<tr><td class="h">8607</td><td><div class="c3">21</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8607">21</a></div></td><td></td><td><div>1126</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">8608</td><td><div class="c3">21</div></td><td></td><td></td><td></td><td></td><td><div>65</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @context= ( $elt, $elt-&gt;ancestors);</td></tr>
<tr><td class="h">8609</td><td><div class="c3">21</div><div class="c3">55</div></td><td></td><td></td><td></td><td></td><td><div>74</div><div>151</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return &quot;/&quot; . join( &quot;/&quot;, reverse map {$_-&gt;gi} @context);</td></tr>
<tr><td class="h">8610</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8611</td><td colspan="7"></td></tr><tr><td class="h">8612</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub xpath</td></tr>
<tr><td class="h">8613</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8613">6</a></div></td><td></td><td><div>18</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">8614</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $xpath;</td></tr>
<tr><td class="h">8615</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $ancestor (reverse $elt-&gt;ancestors_or_self)</td></tr>
<tr><td class="h">8616</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>71</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $gi= $XML::Twig::index2gi[$ancestor-&gt;{&#39;gi&#39;}];</td></tr>
<tr><td class="h">8617</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$xpath.= &quot;/$gi&quot;;</td></tr>
<tr><td class="h">8618</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $index= $ancestor-&gt;prev_siblings( $gi) + 1;</td></tr>
<tr><td class="h">8619</td><td><div class="c3">18</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8619">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L8619">100</a></div></td><td></td><td></td><td><div>95</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless( ($index == 1) &amp;&amp; !$ancestor-&gt;next_sibling( $gi))</td></tr>
<tr><td class="h">8620</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td></td><td><div>128</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $xpath.= &quot;[$index]&quot;; }</td></tr>
<tr><td class="h">8621</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8622</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $xpath;</td></tr>
<tr><td class="h">8623</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8624</td><td colspan="7"></td></tr><tr><td class="h">8625</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># methods used mainly by wrap_children</td></tr>
<tr><td class="h">8626</td><td colspan="7"></td></tr><tr><td class="h">8627</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># return a string with the </td></tr>
<tr><td class="h">8628</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># for an element &lt;foo&gt;&lt;elt att=&quot;val&quot;&gt;...&lt;/elt&gt;&lt;elt2/&gt;&lt;elt&gt;...&lt;/elt&gt;&lt;/foo&gt;</td></tr>
<tr><td class="h">8629</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># returns &#39;&lt;elt att=&quot;val&quot;&gt;&lt;elt2&gt;&lt;elt&gt;&#39;</td></tr>
<tr><td class="h">8630</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _stringify_struct</td></tr>
<tr><td class="h">8631</td><td><div class="c3">13</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8631">13</a></div></td><td></td><td><div>50</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, %opt)= @_;</td></tr>
<tr><td class="h">8632</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $string=&#39;&#39;;</td></tr>
<tr><td class="h">8633</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>48</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $pretty_print= set_pretty_print( &#39;none&#39;);</td></tr>
<tr><td class="h">8634</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>57</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $child ($elt-&gt;_children)</td></tr>
<tr><td class="h">8635</td><td><div class="c3">37</div><div class="c3">37</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8635">50</a></div></td><td></td><td></td><td><div>125</div><div>217</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $child-&gt;add_id; $string .= $child-&gt;start_tag( { escape_gt =&gt; 1 }) ||&#39;&#39;; }</td></tr>
<tr><td class="h">8636</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;set_pretty_print( $pretty_print);</td></tr>
<tr><td class="h">8637</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>59</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $string;</td></tr>
<tr><td class="h">8638</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8639</td><td colspan="7"></td></tr><tr><td class="h">8640</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># wrap a series of elements in a new one</td></tr>
<tr><td class="h">8641</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _wrap_range</td></tr>
<tr><td class="h">8642</td><td><div class="c3">9</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8642">9</a></div></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;{ my $elt= shift;</td></tr>
<tr><td class="h">8643</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $gi= shift;</td></tr>
<tr><td class="h">8644</td><td><div class="c3">9</div></td><td><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L8644">50</a></div></td><td></td><td></td><td></td><td><div>65</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $atts= isa( $_[0], &#39;HASH&#39;) ? shift : undef;</td></tr>
<tr><td class="h">8645</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>37</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $range= shift; # the string with the tags to wrap</td></tr>
<tr><td class="h">8646</td><td colspan="7"></td></tr><tr><td class="h">8647</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $t= $elt-&gt;twig;</td></tr>
<tr><td class="h">8648</td><td colspan="7"></td></tr><tr><td class="h">8649</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# get the tags to wrap</td></tr>
<tr><td class="h">8650</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>19</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @to_wrap;</td></tr>
<tr><td class="h">8651</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>89</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $range=~ m{&lt;\w+\s+[^&gt;]*id=(&quot;[^&quot;]*&quot;|&#39;[^&#39;]*&#39;)[^&gt;]*&gt;}g)</td></tr>
<tr><td class="h">8652</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>145</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ push @to_wrap, $t-&gt;elt_id( substr( $1, 1, -1)); }</td></tr>
<tr><td class="h">8653</td><td colspan="7"></td></tr><tr><td class="h">8654</td><td><div class="c3">9</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8654">50</a></div></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return &#39;&#39; unless @to_wrap;</td></tr>
<tr><td class="h">8655</td><td colspan="7"></td></tr><tr><td class="h">8656</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $to_wrap= shift @to_wrap;</td></tr>
<tr><td class="h">8657</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>44</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %atts= %$atts;</td></tr>
<tr><td class="h">8658</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>56</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $new_elt= $to_wrap-&gt;wrap_in( $gi, \%atts);</td></tr>
<tr><td class="h">8659</td><td><div class="c3">9</div><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>16</div><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$_-&gt;move( last_child =&gt; $new_elt) foreach (@to_wrap);</td></tr>
<tr><td class="h">8660</td><td colspan="7"></td></tr><tr><td class="h">8661</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>118</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return &#39;&#39;;</td></tr>
<tr><td class="h">8662</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8663</td><td colspan="7"></td></tr><tr><td class="h">8664</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># wrap children matching a regexp in a new element</td></tr>
<tr><td class="h">8665</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub wrap_children</td></tr>
<tr><td class="h">8666</td><td><div class="c3">13</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8666">13</a></div></td><td></td><td><div>73</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $regexp, $gi, $atts)= @_;</td></tr>
<tr><td class="h">8667</td><td colspan="7"></td></tr><tr><td class="h">8668</td><td><div class="c3">13</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L8668">100</a></div></td><td></td><td></td><td><div>64</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$atts ||={};</td></tr>
<tr><td class="h">8669</td><td colspan="7"></td></tr><tr><td class="h">8670</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $elt_as_string= $elt-&gt;_stringify_struct; # stringify the elt structure</td></tr>
<tr><td class="h">8671</td><td><div class="c3">13</div><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>108</div><div>54</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$regexp=~ s{(&lt;[^&gt;]*&gt;)}{_match_expr( $1)}eg; # in the regexp, replace gi&#39;s by the proper regexp </td></tr>
<tr><td class="h">8672</td><td><div class="c3">13</div><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>60</div><div>298</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt_as_string=~ s{($regexp)}{$elt-&gt;_wrap_range( $gi, $atts, $1)}eg; # then do the actual replace</td></tr>
<tr><td class="h">8673</td><td colspan="7"></td></tr><tr><td class="h">8674</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>208</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt; </td></tr>
<tr><td class="h">8675</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8676</td><td colspan="7"></td></tr><tr><td class="h">8677</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _match_expr</td></tr>
<tr><td class="h">8678</td><td><div class="c3">22</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8678">22</a></div></td><td></td><td><div>574</div></td><td class="s">&nbsp;&nbsp;{ my $tag= shift;</td></tr>
<tr><td class="h">8679</td><td><div class="c3">22</div></td><td></td><td></td><td></td><td></td><td><div>75</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $gi, %atts)= XML::Twig::_parse_start_tag( $tag);</td></tr>
<tr><td class="h">8680</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>79</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return _match_tag( $gi, %atts);</td></tr>
<tr><td class="h">8681</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8682</td><td colspan="7"></td></tr><tr><td class="h">8683</td><td colspan="7"></td></tr><tr><td class="h">8684</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _match_tag</td></tr>
<tr><td class="h">8685</td><td><div class="c3">13</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8685">13</a></div></td><td></td><td><div>66</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, %atts)= @_;</td></tr>
<tr><td class="h">8686</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>68</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $string= &quot;&lt;$elt\\b&quot;;</td></tr>
<tr><td class="h">8687</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>89</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $key (sort keys %atts)</td></tr>
<tr><td class="h">8688</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>53</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $val= qq{\Q$atts{$key}\E};</td></tr>
<tr><td class="h">8689</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>92</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$string.= qq{[^&gt;]*$key=(?:&quot;$val&quot;|&#39;$val&#39;)};</td></tr>
<tr><td class="h">8690</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8691</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$string.=  qq{[^&gt;]*&gt;};</td></tr>
<tr><td class="h">8692</td><td><div class="c3">13</div></td><td></td><td></td><td></td><td></td><td><div>115</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return &quot;(?:$string)&quot;;</td></tr>
<tr><td class="h">8693</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8694</td><td colspan="7"></td></tr><tr><td class="h">8695</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub field_to_att</td></tr>
<tr><td class="h">8696</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8696">3</a></div></td><td></td><td><div>21</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $cond, $att)= @_;</td></tr>
<tr><td class="h">8697</td><td><div class="c3">3</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8697">33</a></div></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$att ||= $cond;</td></tr>
<tr><td class="h">8698</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8698">100</a></div></td><td></td><td></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $child= $elt-&gt;first_child( $cond) or return undef;</td></tr>
<tr><td class="h">8699</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;set_att( $att =&gt; $child-&gt;text);</td></tr>
<tr><td class="h">8700</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$child-&gt;cut;</td></tr>
<tr><td class="h">8701</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">8702</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8703</td><td colspan="7"></td></tr><tr><td class="h">8704</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub att_to_field</td></tr>
<tr><td class="h">8705</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8705">2</a></div></td><td></td><td><div>260</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $att, $tag)= @_;</td></tr>
<tr><td class="h">8706</td><td><div class="c3">2</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8706">67</a></div></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$tag ||= $att;</td></tr>
<tr><td class="h">8707</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $child= $elt-&gt;insert_new_elt( first_child =&gt; $tag, $elt-&gt;{&#39;att&#39;}-&gt;{$att});</td></tr>
<tr><td class="h">8708</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;del_att( $att);</td></tr>
<tr><td class="h">8709</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt;</td></tr>
<tr><td class="h">8710</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8711</td><td colspan="7"></td></tr><tr><td class="h">8712</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># sort children methods</td></tr>
<tr><td class="h">8713</td><td colspan="7"></td></tr><tr><td class="h">8714</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub sort_children_on_field</td></tr>
<tr><td class="h">8715</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8715">2</a></div></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;{ my $elt   = shift;</td></tr>
<tr><td class="h">8716</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $field = shift;</td></tr>
<tr><td class="h">8717</td><td><div class="c3">2</div><div class="c3">9</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8717">9</a></div></td><td></td><td><div>18</div><div>39</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $get_key= sub { return $_[0]-&gt;field( $field) };</td></tr>
<tr><td class="h">8718</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>11</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt-&gt;sort_children( $get_key, @_); </td></tr>
<tr><td class="h">8719</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8720</td><td colspan="7"></td></tr><tr><td class="h">8721</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub sort_children_on_att</td></tr>
<tr><td class="h">8722</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8722">1</a></div></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;{ my $elt = shift;</td></tr>
<tr><td class="h">8723</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>4</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $att = shift;</td></tr>
<tr><td class="h">8724</td><td><div class="c3">1</div><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8724">3</a></div></td><td></td><td><div>8</div><div>15</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $get_key= sub { return $_[0]-&gt;{&#39;att&#39;}-&gt;{$att} };</td></tr>
<tr><td class="h">8725</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt-&gt;sort_children( $get_key, @_); </td></tr>
<tr><td class="h">8726</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8727</td><td colspan="7"></td></tr><tr><td class="h">8728</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub sort_children_on_value</td></tr>
<tr><td class="h">8729</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8729">1</a></div></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;{ my $elt   = shift;</td></tr>
<tr><td class="h">8730</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#my $get_key= eval qq{ sub { $NO_WARNINGS; return \$_[0]-&gt;text } };</td></tr>
<tr><td class="h">8731</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>3</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $get_key= \&amp;text;</td></tr>
<tr><td class="h">8732</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>6</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $elt-&gt;sort_children( $get_key, @_); </td></tr>
<tr><td class="h">8733</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8734</td><td colspan="7"></td></tr><tr><td class="h">8735</td><td colspan="7"></td></tr><tr><td class="h">8736</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub sort_children</td></tr>
<tr><td class="h">8737</td><td><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8737">5</a></div></td><td></td><td><div>55</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $get_key, %opt)=@_;</td></tr>
<tr><td class="h">8738</td><td><div class="c3">5</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L8738">100</a></div></td><td></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$opt{order} ||= &#39;normal&#39;;</td></tr>
<tr><td class="h">8739</td><td><div class="c3">5</div></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L8739">100</a></div></td><td></td><td></td><td><div>24</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$opt{type}  ||= &#39;alpha&#39;;</td></tr>
<tr><td class="h">8740</td><td><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8740">100</a></div></td><td></td><td></td><td></td><td><div>100</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $par_a, $par_b)= ($opt{order} eq &#39;reverse&#39;) ? qw( b a) : qw ( a b) ;</td></tr>
<tr><td class="h">8741</td><td><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8741">100</a></div></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $op= ($opt{type} eq &#39;numeric&#39;) ? &#39;&lt;=&gt;&#39; : &#39;cmp&#39; ;</td></tr>
<tr><td class="h">8742</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>30</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @children= $elt-&gt;cut_children;</td></tr>
<tr><td class="h">8743</td><td><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8743">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8743">100</a></div></td><td></td><td></td><td></td><td><div>46</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $opt{type} eq &#39;numeric&#39;)</td></tr>
<tr><td class="h">8744</td><td><div class="c3">9</div><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>47</div><div>47</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{  @children= map  { $_-&gt;[1] }</td></tr>
<tr><td class="h">8745</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td></td><td><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sort { $a-&gt;[0] &lt;=&gt; $b-&gt;[0] }</td></tr>
<tr><td class="h">8746</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map  { [ $get_key-&gt;( $_), $_] } @children;</td></tr>
<tr><td class="h">8747</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8748</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif( $opt{type} eq &#39;alpha&#39;)</td></tr>
<tr><td class="h">8749</td><td><div class="c3">6</div><div class="c3">5</div></td><td></td><td></td><td></td><td></td><td><div>25</div><div>18</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{  @children= map  { $_-&gt;[1] }</td></tr>
<tr><td class="h">8750</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td></td><td><div>16</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sort { $a-&gt;[0] cmp $b-&gt;[0] }</td></tr>
<tr><td class="h">8751</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map  { [ $get_key-&gt;( $_), $_] } @children;</td></tr>
<tr><td class="h">8752</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8753</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">8754</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ croak &quot;wrong sort type &#39;$opt{type}&#39;, should be either &#39;alpha&#39; or &#39;numeric&#39;&quot;; }</td></tr>
<tr><td class="h">8755</td><td colspan="7"></td></tr><tr><td class="h">8756</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8756">100</a></div></td><td></td><td></td><td></td><td><div>33</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;@children= reverse @children if( $opt{order} eq &#39;reverse&#39;);</td></tr>
<tr><td class="h">8757</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td></td><td><div>27</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$elt-&gt;set_content( @children);</td></tr>
<tr><td class="h">8758</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8759</td><td colspan="7"></td></tr><tr><td class="h">8760</td><td colspan="7"></td></tr><tr><td class="h">8761</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s"># comparison methods</td></tr>
<tr><td class="h">8762</td><td colspan="7"></td></tr><tr><td class="h">8763</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub before</td></tr>
<tr><td class="h">8764</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8764">6</a></div></td><td></td><td><div>1284</div></td><td class="s">&nbsp;&nbsp;{ my( $a, $b)=@_;</td></tr>
<tr><td class="h">8765</td><td><div class="c3">6</div><div class="c3">4</div><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8765">100</a></div></td><td></td><td></td><td></td><td><div>22</div><div>16</div><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $a-&gt;cmp( $b) == -1) { return 1; } else { return 0; }</td></tr>
<tr><td class="h">8766</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8767</td><td colspan="7"></td></tr><tr><td class="h">8768</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub after</td></tr>
<tr><td class="h">8769</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8769">3</a></div></td><td></td><td><div>601</div></td><td class="s">&nbsp;&nbsp;{ my( $a, $b)=@_;</td></tr>
<tr><td class="h">8770</td><td><div class="c3">3</div><div class="c3">1</div><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8770">100</a></div></td><td></td><td></td><td></td><td><div>11</div><div>4</div><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $a-&gt;cmp( $b) == 1) { return 1; } else { return 0; }</td></tr>
<tr><td class="h">8771</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8772</td><td colspan="7"></td></tr><tr><td class="h">8773</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub lt</td></tr>
<tr><td class="h">8774</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8774">2</a></div></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;{ my( $a, $b)=@_;</td></tr>
<tr><td class="h">8775</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8775">100</a></div></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1 if( $a-&gt;cmp( $b) == -1);</td></tr>
<tr><td class="h">8776</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0;</td></tr>
<tr><td class="h">8777</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8778</td><td colspan="7"></td></tr><tr><td class="h">8779</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub le</td></tr>
<tr><td class="h">8780</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8780">2</a></div></td><td></td><td><div>14</div></td><td class="s">&nbsp;&nbsp;{ my( $a, $b)=@_;</td></tr>
<tr><td class="h">8781</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8781">100</a></div></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1 unless( $a-&gt;cmp( $b) == 1);</td></tr>
<tr><td class="h">8782</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0;</td></tr>
<tr><td class="h">8783</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8784</td><td colspan="7"></td></tr><tr><td class="h">8785</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub gt</td></tr>
<tr><td class="h">8786</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8786">2</a></div></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;{ my( $a, $b)=@_;</td></tr>
<tr><td class="h">8787</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8787">100</a></div></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1 if( $a-&gt;cmp( $b) == 1);</td></tr>
<tr><td class="h">8788</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0;</td></tr>
<tr><td class="h">8789</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8790</td><td colspan="7"></td></tr><tr><td class="h">8791</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub ge</td></tr>
<tr><td class="h">8792</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8792">2</a></div></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;{ my( $a, $b)=@_;</td></tr>
<tr><td class="h">8793</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8793">100</a></div></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1 unless( $a-&gt;cmp( $b) == -1);</td></tr>
<tr><td class="h">8794</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>5</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0;</td></tr>
<tr><td class="h">8795</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8796</td><td colspan="7"></td></tr><tr><td class="h">8797</td><td colspan="7"></td></tr><tr><td class="h">8798</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub cmp</td></tr>
<tr><td class="h">8799</td><td><div class="c3">830</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8799">830</a></div></td><td></td><td><div>2614</div></td><td class="s">&nbsp;&nbsp;{ my( $a, $b)=@_;</td></tr>
<tr><td class="h">8800</td><td colspan="7"></td></tr><tr><td class="h">8801</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# easy cases</td></tr>
<tr><td class="h">8802</td><td><div class="c3">830</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8802">100</a></div></td><td></td><td></td><td></td><td><div>3041</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return  0 if( $a == $b);    </td></tr>
<tr><td class="h">8803</td><td><div class="c3">787</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8803">100</a></div></td><td></td><td></td><td></td><td><div>2370</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 1 if( $a-&gt;in($b)); # a starts after b </td></tr>
<tr><td class="h">8804</td><td><div class="c3">650</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8804">100</a></div></td><td></td><td></td><td></td><td><div>1965</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return -1 if( $b-&gt;in($a)); # a starts before b</td></tr>
<tr><td class="h">8805</td><td colspan="7"></td></tr><tr><td class="h">8806</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# ancestors does not include the element itself</td></tr>
<tr><td class="h">8807</td><td><div class="c3">492</div></td><td></td><td></td><td></td><td></td><td><div>1951</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @a_pile= ($a, $a-&gt;ancestors); </td></tr>
<tr><td class="h">8808</td><td><div class="c3">492</div></td><td></td><td></td><td></td><td></td><td><div>1785</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @b_pile= ($b, $b-&gt;ancestors);</td></tr>
<tr><td class="h">8809</td><td colspan="7"></td></tr><tr><td class="h">8810</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# the 2 elements are not in the same twig</td></tr>
<tr><td class="h">8811</td><td><div class="c3">492</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8811">100</a></div></td><td></td><td></td><td></td><td><div>2528</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return undef unless( $a_pile[-1] == $b_pile[-1]);</td></tr>
<tr><td class="h">8812</td><td colspan="7"></td></tr><tr><td class="h">8813</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# find the first non common ancestors (they are siblings)</td></tr>
<tr><td class="h">8814</td><td><div class="c3">491</div></td><td></td><td></td><td></td><td></td><td><div>1020</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $a_anc= pop @a_pile;</td></tr>
<tr><td class="h">8815</td><td><div class="c3">491</div></td><td></td><td></td><td></td><td></td><td><div>1178</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $b_anc= pop @b_pile;</td></tr>
<tr><td class="h">8816</td><td colspan="7"></td></tr><tr><td class="h">8817</td><td><div class="c3">491</div></td><td></td><td></td><td></td><td></td><td><div>1624</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while( $a_anc == $b_anc) </td></tr>
<tr><td class="h">8818</td><td><div class="c3">751</div></td><td></td><td></td><td></td><td></td><td><div>1532</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $a_anc= pop @a_pile;</td></tr>
<tr><td class="h">8819</td><td><div class="c3">751</div></td><td></td><td></td><td></td><td></td><td><div>3163</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$b_anc= pop @b_pile;</td></tr>
<tr><td class="h">8820</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8821</td><td colspan="7"></td></tr><tr><td class="h">8822</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# from there move left and right and figure out the order</td></tr>
<tr><td class="h">8823</td><td><div class="c3">491</div></td><td></td><td></td><td></td><td></td><td><div>1968</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my( $a_prev, $a_next, $b_prev, $b_next)= ($a_anc, $a_anc, $b_anc, $b_anc);</td></tr>
<tr><td class="h">8824</td><td><div class="c3">491</div></td><td></td><td></td><td></td><td></td><td><div>954</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;while()</td></tr>
<tr><td class="h">8825</td><td><div class="c3">493</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8825">67</a></div></td><td></td><td></td><td><div>2577</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $a_prev= $a_prev-&gt;{prev_sibling} || return( -1);</td></tr>
<tr><td class="h">8826</td><td><div class="c3">296</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8826">100</a></div></td><td></td><td></td><td></td><td><div>1185</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1 if( $a_prev == $b_next);</td></tr>
<tr><td class="h">8827</td><td><div class="c3">131</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8827">67</a></div></td><td></td><td></td><td><div>555</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$a_next= $a_next-&gt;{next_sibling} || return( 1);</td></tr>
<tr><td class="h">8828</td><td><div class="c3">101</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8828">100</a></div></td><td></td><td></td><td></td><td><div>444</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return -1 if( $a_next == $b_prev);</td></tr>
<tr><td class="h">8829</td><td><div class="c3">27</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8829">67</a></div></td><td></td><td></td><td><div>133</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$b_prev= $b_prev-&gt;{prev_sibling} || return( 1);</td></tr>
<tr><td class="h">8830</td><td><div class="c3">20</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8830">100</a></div></td><td></td><td></td><td></td><td><div>90</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return -1 if( $b_prev == $a_next);</td></tr>
<tr><td class="h">8831</td><td><div class="c3">7</div></td><td></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8831">67</a></div></td><td></td><td></td><td><div>34</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$b_next= $b_next-&gt;{next_sibling} || return( -1);</td></tr>
<tr><td class="h">8832</td><td><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8832">100</a></div></td><td></td><td></td><td></td><td><div>23</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1 if( $b_next == $a_prev);</td></tr>
<tr><td class="h">8833</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8834</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8835</td><td colspan="7"></td></tr><tr><td class="h">8836</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _dump</td></tr>
<tr><td class="h">8837</td><td><div class="c3">49</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8837">49</a></div></td><td></td><td><div>156</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $option)= @_; </td></tr>
<tr><td class="h">8838</td><td colspan="7"></td></tr><tr><td class="h">8839</td><td><div class="c3">49</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8839">100</a></div></td><td></td><td></td><td></td><td><div>221</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $atts       = defined $option-&gt;{atts}       ? $option-&gt;{atts}       :  1;</td></tr>
<tr><td class="h">8840</td><td><div class="c3">49</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8840">100</a></div></td><td></td><td></td><td></td><td><div>175</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $extra      = defined $option-&gt;{extra}      ? $option-&gt;{extra}      :  0;</td></tr>
<tr><td class="h">8841</td><td><div class="c3">49</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8841">50</a></div></td><td></td><td></td><td></td><td><div>161</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $short_text = defined $option-&gt;{short_text} ? $option-&gt;{short_text} : 40;</td></tr>
<tr><td class="h">8842</td><td colspan="7"></td></tr><tr><td class="h">8843</td><td><div class="c3">49</div></td><td></td><td></td><td></td><td></td><td><div>92</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $sp= &#39;| &#39;;</td></tr>
<tr><td class="h">8844</td><td><div class="c3">49</div></td><td></td><td></td><td></td><td></td><td><div>147</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $indent= $sp x $elt-&gt;level;</td></tr>
<tr><td class="h">8845</td><td><div class="c3">49</div></td><td></td><td></td><td></td><td></td><td><div>144</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $indent_sp= &#39;  &#39; x $elt-&gt;level;</td></tr>
<tr><td class="h">8846</td><td colspan="7"></td></tr><tr><td class="h">8847</td><td><div class="c3">49</div></td><td></td><td></td><td></td><td></td><td><div>186</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dump=&#39;&#39;;</td></tr>
<tr><td class="h">8848</td><td><div class="c3">49</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8848">100</a></div></td><td></td><td></td><td></td><td><div>133</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;is_elt)</td></tr>
<tr><td class="h">8849</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">8850</td><td><div class="c3">24</div></td><td></td><td></td><td></td><td></td><td><div>128</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dump .= $indent  . &#39;|-&#39; . $XML::Twig::index2gi[$elt-&gt;{&#39;gi&#39;}];</td></tr>
<tr><td class="h">8851</td><td colspan="7"></td></tr><tr><td class="h">8852</td><td><div class="c3">24</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8852">100</a></div></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--condition.html#L8852">100</a></div></td><td></td><td></td><td><div>134</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $atts &amp;&amp; (my @atts= $elt-&gt;att_names) )</td></tr>
<tr><td class="h">8853</td><td><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>10</div><div>36</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $dump .= &#39; &#39; . join( &#39; &#39;, map { qq{$_=&quot;} . $elt-&gt;{&#39;att&#39;}-&gt;{$_} . qq{&quot;} } @atts); }</td></tr>
<tr><td class="h">8854</td><td colspan="7"></td></tr><tr><td class="h">8855</td><td><div class="c3">24</div></td><td></td><td></td><td></td><td></td><td><div>68</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dump .= &quot;\n&quot;;</td></tr>
<tr><td class="h">8856</td><td><div class="c3">24</div><div class="c3">7</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8856">100</a></div></td><td></td><td></td><td></td><td><div>64</div><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $extra) { $dump .= $elt-&gt;_dump_extra_data( $indent, $indent_sp, $short_text); }</td></tr>
<tr><td class="h">8857</td><td><div class="c3">24</div><div class="c3">44</div></td><td></td><td></td><td></td><td></td><td><div>91</div><div>193</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dump .= join( &quot;&quot;, map { $_-&gt;_dump( $option) } $elt-&gt;_children);</td></tr>
<tr><td class="h">8858</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8859</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td class="h">8860</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ </td></tr>
<tr><td class="h">8861</td><td><div class="c3">25</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8861">100</a></div><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8861">50</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8861">100</a></div><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8861">100</a></div><div class="c0" title="T/-"><a href="blib-lib-XML-Twig-pm--branch.html#L8861">50</a></div></td><td></td><td></td><td></td><td><div>109</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( (exists $elt-&gt;{&#39;pcdata&#39;}))</td></tr>
<tr><td class="h">8862</td><td><div class="c3">19</div></td><td></td><td></td><td></td><td></td><td><div>95</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $dump .= &quot;$indent|-PCDATA:  &#39;&quot;  . _short_text( $elt-&gt;{pcdata}, $short_text) . &quot;&#39;\n&quot; }</td></tr>
<tr><td class="h">8863</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( (exists $elt-&gt;{&#39;ent&#39;}))</td></tr>
<tr><td class="h">8864</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $dump .= &quot;$indent|-ENTITY:  &#39;&quot; . _short_text( $elt-&gt;{ent}, $short_text) . &quot;&#39;\n&quot; }</td></tr>
<tr><td class="h">8865</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( (exists $elt-&gt;{&#39;cdata&#39;}))</td></tr>
<tr><td class="h">8866</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>17</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $dump .= &quot;$indent|-CDATA:   &#39;&quot; . _short_text( $elt-&gt;{cdata}, $short_text) . &quot;&#39;\n&quot; }</td></tr>
<tr><td class="h">8867</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( (exists $elt-&gt;{&#39;comment&#39;}))</td></tr>
<tr><td class="h">8868</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td></td><td><div>7</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $dump .= &quot;$indent|-COMMENT: &#39;&quot; . _short_text( $elt-&gt;comment_string, $short_text) . &quot;&#39;\n&quot; }</td></tr>
<tr><td class="h">8869</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif( (exists $elt-&gt;{&#39;target&#39;}))</td></tr>
<tr><td class="h">8870</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>22</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ $dump .= &quot;$indent|-PI:      &#39;&quot;      . $elt-&gt;{target} . &quot;&#39; - &#39;&quot; . _short_text( $elt-&gt;{data}, $short_text) . &quot;&#39;\n&quot; }</td></tr>
<tr><td class="h">8871</td><td><div class="c3">25</div><div class="c3">7</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8871">100</a></div></td><td></td><td></td><td></td><td><div>82</div><div>25</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if( $extra) { $dump .= $elt-&gt;_dump_extra_data( $indent, $indent_sp, $short_text); }</td></tr>
<tr><td class="h">8872</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8873</td><td><div class="c3">49</div></td><td></td><td></td><td></td><td></td><td><div>249</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dump;</td></tr>
<tr><td class="h">8874</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8875</td><td colspan="7"></td></tr><tr><td class="h">8876</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _dump_extra_data</td></tr>
<tr><td class="h">8877</td><td><div class="c3">14</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8877">14</a></div></td><td></td><td><div>66</div></td><td class="s">&nbsp;&nbsp;{ my( $elt, $indent, $indent_sp, $short_text)= @_;</td></tr>
<tr><td class="h">8878</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>36</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $dump=&#39;&#39;;</td></tr>
<tr><td class="h">8879</td><td><div class="c3">14</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8879">100</a></div></td><td></td><td></td><td></td><td><div>35</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;extra_data)</td></tr>
<tr><td class="h">8880</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>10</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $extra_data = $indent . &quot;|-- (cpi before) &#39;&quot; . _short_text( $elt-&gt;extra_data, $short_text) . &quot;&#39;&quot;;</td></tr>
<tr><td class="h">8881</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>9</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$extra_data=~ s{\n}{$indent_sp}g;</td></tr>
<tr><td class="h">8882</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td></td><td><div>8</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dump .= $extra_data . &quot;\n&quot;;</td></tr>
<tr><td class="h">8883</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8884</td><td><div class="c3">14</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8884">50</a></div></td><td></td><td></td><td></td><td><div>45</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;_extra_data_in_pcdata)</td></tr>
<tr><td class="h">8885</td><td><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ foreach my $data ( @{$elt-&gt;_extra_data_in_pcdata})</td></tr>
<tr><td class="h">8886</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $extra_data = $indent . &quot;|-- (cpi offset $data-&gt;{offset}) &#39;&quot; . _short_text( $data-&gt;{text}, $short_text) . &quot;&#39;&quot;;</td></tr>
<tr><td class="h">8887</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$extra_data=~ s{\n}{$indent_sp}g;</td></tr>
<tr><td class="h">8888</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dump .= $extra_data . &quot;\n&quot;;</td></tr>
<tr><td class="h">8889</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8890</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} </td></tr>
<tr><td class="h">8891</td><td><div class="c3">14</div></td><td><div class="c0" title="-/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8891">50</a></div></td><td></td><td></td><td></td><td><div>42</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( $elt-&gt;_extra_data_before_end_tag)</td></tr>
<tr><td class="h">8892</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ my $extra_data = $indent . &quot;|-- (cpi end) &#39;&quot; . _short_text( $elt-&gt;_extra_data_before_end_tag, $short_text) . &quot;&#39;&quot;;</td></tr>
<tr><td class="h">8893</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$extra_data=~ s{\n}{$indent_sp}g;</td></tr>
<tr><td class="h">8894</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td></td><td><div>0</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dump .= $extra_data . &quot;\n&quot;;</td></tr>
<tr><td class="h">8895</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} </td></tr>
<tr><td class="h">8896</td><td><div class="c3">14</div></td><td></td><td></td><td></td><td></td><td><div>56</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $dump;</td></tr>
<tr><td class="h">8897</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8898</td><td colspan="7"></td></tr><tr><td class="h">8899</td><td colspan="7"></td></tr><tr><td class="h">8900</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">sub _short_text</td></tr>
<tr><td class="h">8901</td><td><div class="c3">27</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-XML-Twig-pm--subroutine.html#L8901">27</a></div></td><td></td><td><div>104</div></td><td class="s">&nbsp;&nbsp;{ my( $string, $length)= @_;</td></tr>
<tr><td class="h">8902</td><td><div class="c3">27</div><div class="c3">24</div></td><td><div class="c3" title="T/F"><a href="blib-lib-XML-Twig-pm--branch.html#L8902">100</a></div></td><td><div class="c0"><a href="blib-lib-XML-Twig-pm--condition.html#L8902">67</a></div></td><td></td><td></td><td><div>254</div><div>140</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if( !$length || (length( $string) &lt; $length) ) { return $string; }</td></tr>
<tr><td class="h">8903</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>12</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $l1= (length( $string) -5) /2;</td></tr>
<tr><td class="h">8904</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>20</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $l2= length( $string) - ($l1 + 5);</td></tr>
<tr><td class="h">8905</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td></td><td><div>26</div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return substr( $string, 0, $l1) . &#39; ... &#39; . substr( $string, -$l2);</td></tr>
<tr><td class="h">8906</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;}</td></tr>
<tr><td class="h">8907</td><td colspan="7"></td></tr><tr><td class="h">8908</td><td></td><td></td><td></td><td></td><td></td><td></td><td class="s">1;</td></tr>
<tr><td class="h">8909</td><td colspan="7"></td></tr><tr><td class="h">8910</td><td colspan="7"></td></tr></table>
</body>
</html>
